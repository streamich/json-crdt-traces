{"time":[[1000000,259781]],"root":{"type":"val","id":[0,0],"value":{"type":"str","id":[1000000,1],"chunks":[{"id":[1000000,3],"value":"\\documentclass["},{"id":[1000000,18],"span":18},{"id":[1000000,36],"value":"10pt"},{"id":[1000000,124697],"value":",journal,compsoc"},{"id":[1000000,40],"value":"]{"},{"id":[1000000,124720],"value":"IEEEtran"},{"id":[1000000,42],"span":7},{"id":[1000000,49],"value":"}"},{"id":[1000000,228167],"value":"\n\\PassOptionsToPackage{hyphens}{url}"},{"id":[1000000,227851],"span":1},{"id":[1000000,227939],"span":1},{"id":[1000000,227852],"span":35},{"id":[1000000,50],"value":"\n\\usepackage"},{"id":[1000000,64],"value":"[utf8]{inputenc}"},{"id":[1000000,1622],"value":"\n\\usepackage{amsmath} % align e"},{"id":[1000000,1657],"value":"nvironment"},{"id":[1000000,36661],"value":"\n\\usepackage{amssymb} % mathbb"},{"id":[1000000,1653],"span":2},{"id":[1000000,80],"value":"\n"},{"id":[1000000,124775],"span":1},{"id":[1000000,81],"span":51},{"id":[1000000,26459],"span":1},{"id":[1000000,26460],"value":"\\usepackage{"},{"id":[1000000,27263],"value":"bussproofs"},{"id":[1000000,27273],"span":1},{"id":[1000000,27221],"span":9},{"id":[1000000,27232],"span":1},{"id":[1000000,27230],"span":1},{"id":[1000000,26547],"span":8},{"id":[1000000,26476],"span":10},{"id":[1000000,26486],"value":"} % "},{"id":[1000000,26505],"value":"notation for "},{"id":[1000000,26490],"value":"inference rules"},{"id":[1000000,84726],"value":"\n\\usepackage{rotating} "},{"id":[1000000,84751],"value":"% sidewaysfigure"},{"id":[1000000,228123],"span":22},{"id":[1000000,228097],"value":"\n"},{"id":[1000000,228230],"value":"\\usepackage{hyperref}"},{"id":[1000000,228229],"value":"\n"},{"id":[1000000,228098],"span":25},{"id":[1000000,227977],"span":1},{"id":[1000000,227978],"value":"\\usepackage[hyphenbreaks]{breakurl} % Fix URL line breaking when using dvips (e.g. arxiv.org)"},{"id":[1000000,227913],"span":12},{"id":[1000000,227930],"span":9},{"id":[1000000,227925],"span":5},{"id":[1000000,103795],"span":18},{"id":[1000000,84767],"span":1},{"id":[1000000,84749],"span":1},{"id":[1000000,26472],"span":2},{"id":[1000000,132],"span":44},{"id":[1000000,124829],"span":1},{"id":[1000000,176],"span":21},{"id":[1000000,197],"value":"\n\\usepackage[n"},{"id":[1000000,124749],"value":"ocompress"},{"id":[1000000,211],"span":11},{"id":[1000000,222],"value":"]{"},{"id":[1000000,124734],"value":"cite"},{"id":[1000000,224],"span":5},{"id":[1000000,231],"span":1},{"id":[1000000,232],"value":"}"},{"id":[1000000,104149],"value":"\n"},{"id":[1000000,155809],"value":"\n% Theorem environments\n\\usepackage{amsthm}"},{"id":[1000000,155927],"value":"\n\\newtheorem{definition}{Definition}"},{"id":[1000000,155852],"value":"\n"},{"id":[1000000,155854],"value":"\\newtheorem{theorem}{Theorem}\n\\newtheorem{lemma}[theorem]{Lemma}"},{"id":[1000000,160210],"value":"\n\\newtheorem*{convergence-thm}{Theorem}"},{"id":[1000000,155853],"value":"\n"},{"id":[1000000,104150],"value":"\n% Diagrams\n\\usepackage{tikz}\n\\usetikzlibrary{arrows}\n"},{"id":[1000000,233],"value":"\n\\hyphenation{da"},{"id":[1000000,253],"value":"-"},{"id":[1000000,256],"value":"ta-cen-ter da-ta-cen-ters"},{"id":[1000000,15343],"value":" "},{"id":[1000000,124831],"value":"net-works "},{"id":[1000000,15344],"value":"time-stamp"},{"id":[1000000,281],"value":"}\n"},{"id":[1000000,283],"span":14},{"id":[1000000,1796],"span":1},{"id":[1000000,26656],"span":1},{"id":[1000000,26661],"span":37},{"id":[1000000,26734],"span":23},{"id":[1000000,26698],"span":18},{"id":[1000000,26657],"span":2},{"id":[1000000,26619],"span":1},{"id":[1000000,27112],"span":1},{"id":[1000000,26620],"span":20},{"id":[1000000,26757],"span":1},{"id":[1000000,26640],"span":15},{"id":[1000000,27053],"span":1},{"id":[1000000,62592],"value":"\n"},{"id":[1000000,62594],"value":"\\newif\\if"},{"id":[1000000,209326],"value":"includeappendix"},{"id":[1000000,62603],"span":10},{"id":[1000000,62613],"value":"\n\\"},{"id":[1000000,209351],"value":"includeappendix"},{"id":[1000000,62615],"span":10},{"id":[1000000,162624],"value":"true"},{"id":[1000000,155922],"span":5},{"id":[1000000,124945],"span":4},{"id":[1000000,84782],"span":5},{"id":[1000000,84774],"span":4},{"id":[1000000,62625],"span":5},{"id":[1000000,62593],"value":"\n"},{"id":[1000000,27054],"value":"\n\\newcommand{\\evalto}{\\"},{"id":[1000000,27106],"value":";"},{"id":[1000000,27077],"span":4},{"id":[1000000,27081],"value":"\\Longrightarrow\\"},{"id":[1000000,27111],"value":";"},{"id":[1000000,27097],"span":4},{"id":[1000000,27101],"value":"}"},{"id":[1000000,26655],"value":"\n"},{"id":[1000000,1797],"value":"\n% "},{"id":[1000000,1822],"value":"Place"},{"id":[1000000,1829],"value":"h"},{"id":[1000000,1834],"value":"older character "},{"id":[1000000,1851],"value":"l"},{"id":[1000000,1830],"span":2},{"id":[1000000,1827],"span":1},{"id":[1000000,1800],"span":1},{"id":[1000000,1801],"value":"ike \\textvisiblespace"},{"id":[1000000,1852],"value":", but works in math mode\n\\newcommand"},{"id":[1000000,27051],"value":"{"},{"id":[1000000,1888],"value":"\\placeholder"},{"id":[1000000,27052],"value":"}"},{"id":[1000000,1900],"value":"{%\n  \\makebox[0."},{"id":[1000000,2095],"value":"7"},{"id":[1000000,2089],"span":1},{"id":[1000000,1916],"span":1},{"id":[1000000,1917],"value":"em]{%\n    \\ker"},{"id":[1000000,1937],"value":"n.07em\n    \\vrule height.3ex\n    \\hrulefill\n    \\vrule height.3ex\n    "},{"id":[1000000,2009],"value":"\\kern.07em\n  }%\n}"},{"id":[1000000,62630],"value":"\n"},{"id":[1000000,103736],"value":"\n% Span multiple columns within an alignat math environment"},{"id":[1000000,62631],"value":"\n\\newcommand{\\multialign}[2]{%\n  \\multispan{#1}\\mbox{$\\displaystyle{}#2$}%\n}"},{"id":[1000000,2007],"span":1},{"id":[1000000,1931],"span":3},{"id":[1000000,297],"value":"\n\n\\begin{document}\n\\sloppy\n\\title{"},{"id":[1000000,55883],"value":"A "},{"id":[1000000,55893],"value":"Conflict-Free Replicated JSON Datatype"},{"id":[1000000,55885],"span":4},{"id":[1000000,331],"span":46},{"id":[1000000,387],"span":14},{"id":[1000000,401],"value":"}\n\\author{"},{"id":[1000000,180983],"value":"Martin Kleppmann"},{"id":[1000000,124856],"span":8},{"id":[1000000,124864],"value":" and A"},{"id":[1000000,181006],"value":"lastair R. Beresford"},{"id":[1000000,124870],"span":7},{"id":[1000000,124877],"value":"\n\\"},{"id":[1000000,124903],"value":"thanks{"},{"id":[1000000,181205],"value":"M. Kleppmann and A."},{"id":[1000000,181278],"value":"R."},{"id":[1000000,181228],"value":" Beresford are with the"},{"id":[1000000,181224],"span":2},{"id":[1000000,181055],"span":20},{"id":[1000000,181075],"value":" University of Cambridge"},{"id":[1000000,181148],"value":" Computer Laboratory"},{"id":[1000000,181099],"value":","},{"id":[1000000,181168],"value":" Ca"},{"id":[1000000,181177],"value":"mbridge,"},{"id":[1000000,181171],"span":3},{"id":[1000000,181100],"value":" UK.\\"},{"id":[1000000,181107],"value":"protect\\\\"},{"id":[1000000,181116],"span":1},{"id":[1000000,181117],"value":"Email: \\url{mk428@cl.cam.ac.uk}"},{"id":[1000000,181252],"value":", \\url{arb33@cl.cam.ac.uk"},{"id":[1000000,181105],"span":1},{"id":[1000000,124910],"span":29},{"id":[1000000,124939],"value":"}"},{"id":[1000000,181280],"value":"."},{"id":[1000000,124879],"span":12},{"id":[1000000,411],"value":"}"},{"id":[1000000,181277],"value":"}"},{"id":[1000000,124471],"value":"\n\n\\IEEEtitleabstractindextext{%\n\\begin{abstract}"},{"id":[1000000,143664],"value":"\n% "},{"id":[1000000,143678],"value":"abstract "},{"id":[1000000,143667],"value":"word limit"},{"id":[1000000,143688],"value":": 100-200 words"},{"id":[1000000,143677],"span":1},{"id":[1000000,124519],"value":"\n"},{"id":[1000000,142629],"value":"Many applications model their data in a general-purpose storage format such as JSON. "},{"id":[1000000,142716],"value":"This data structure is modified by the application as a result of user input. Such modifications are well understood if "},{"id":[1000000,142838],"value":"performed sequentially on a single copy of the data, but"},{"id":[1000000,142894],"span":15},{"id":[1000000,142917],"span":10},{"id":[1000000,142927],"value":" if "},{"id":[1000000,142937],"value":"the data is replicated"},{"id":[1000000,142959],"span":20},{"id":[1000000,142979],"value":" "},{"id":[1000000,143032],"value":"and modified concurrently on multiple devices"},{"id":[1000000,180470],"value":", it is unclear what the semantics should be"},{"id":[1000000,143077],"value":"."},{"id":[1000000,143098],"value":" In this paper we present an algorithm and formal semantics for a JSON data structure that automatically resolves concurrent modifications such that no updates are lost, and "},{"id":[1000000,143277],"value":"such "},{"id":[1000000,143272],"value":"that "},{"id":[1000000,143282],"value":"all replicas converge towards the same state"},{"id":[1000000,259735],"value":" (a conflict-free replicated datatype or CRDT)"},{"id":[1000000,143326],"value":". It supports arbitrarily nested list and map types"},{"id":[1000000,143386],"value":", which can be modified by insertion, deletion and assignment"},{"id":[1000000,143381],"value":". "},{"id":[1000000,143450],"value":"The algorithm performs all merging client-side and does not depend on ordering guarantees from the network,"},{"id":[1000000,225890],"value":" making i"},{"id":[1000000,225903],"value":"t suitable for "},{"id":[1000000,226007],"value":"deployment on "},{"id":[1000000,226001],"span":3},{"id":[1000000,225918],"value":"mobile devices "},{"id":[1000000,225971],"value":"with poor network connectivity"},{"id":[1000000,226048],"value":","},{"id":[1000000,225933],"span":19},{"id":[1000000,225899],"span":2},{"id":[1000000,143557],"span":27},{"id":[1000000,143584],"value":" in peer-to-peer networks"},{"id":[1000000,178386],"value":","},{"id":[1000000,178387],"span":1},{"id":[1000000,178467],"span":3},{"id":[1000000,178388],"span":10},{"id":[1000000,178460],"span":7},{"id":[1000000,178398],"span":16},{"id":[1000000,178416],"span":37},{"id":[1000000,178414],"span":1},{"id":[1000000,178380],"span":3},{"id":[1000000,143609],"value":" and in "},{"id":[1000000,143619],"value":"messaging systems with end-to-end encryption."},{"id":[1000000,178637],"span":20},{"id":[1000000,178663],"span":5},{"id":[1000000,178704],"span":48},{"id":[1000000,178760],"span":5},{"id":[1000000,178777],"span":2},{"id":[1000000,178783],"span":24},{"id":[1000000,178809],"span":53},{"id":[1000000,178872],"span":17},{"id":[1000000,178870],"span":1},{"id":[1000000,178862],"span":4},{"id":[1000000,178807],"span":1},{"id":[1000000,178779],"span":2},{"id":[1000000,178765],"span":6},{"id":[1000000,178752],"span":4},{"id":[1000000,178668],"span":18},{"id":[1000000,178657],"span":3},{"id":[1000000,178539],"span":1},{"id":[1000000,178578],"span":29},{"id":[1000000,178556],"span":11},{"id":[1000000,178540],"span":8},{"id":[1000000,178537],"span":1},{"id":[1000000,143617],"span":1},{"id":[1000000,143383],"span":3},{"id":[1000000,143377],"span":2},{"id":[1000000,142980],"span":1},{"id":[1000000,143029],"span":1},{"id":[1000000,142981],"span":24},{"id":[1000000,142931],"span":3},{"id":[1000000,142909],"span":4},{"id":[1000000,142836],"span":1},{"id":[1000000,142714],"span":1},{"id":[1000000,124520],"span":3},{"id":[1000000,124537],"span":1},{"id":[1000000,124538],"value":"\n"},{"id":[1000000,124523],"value":"\\end{abstract}"},{"id":[1000000,124539],"value":"\n\n\\begin{IEEEkeywords}\nCRDTs, Collaborative Editing, P2P, JSON, Optimistic Replication, "},{"id":[1000000,180514],"value":"Operational "},{"id":[1000000,124627],"value":"Semantics, Eventual Consistency.\n\\end{IEEEkeywords}}"},{"id":[1000000,412],"value":"\n\\maketitle\n\n"},{"id":[1000000,425],"span":20},{"id":[1000000,451],"span":4},{"id":[1000000,124174],"value":"\\IEEEraisesectionheading{"},{"id":[1000000,455],"value":"\\section{Introduction}"},{"id":[1000000,124199],"value":"\\label{sec:introduction}}"},{"id":[1000000,477],"value":"\n"},{"id":[1000000,124224],"value":"\n\\IEEEPARstart{"},{"id":[1000000,124950],"value":"U"},{"id":[1000000,124239],"span":1},{"id":[1000000,124240],"value":"}{"},{"id":[1000000,124955],"value":"sers"},{"id":[1000000,124242],"span":4},{"id":[1000000,124246],"value":"} "},{"id":[1000000,124959],"value":"of"},{"id":[1000000,124961],"span":16},{"id":[1000000,124977],"value":" mobile devices"},{"id":[1000000,143762],"value":","},{"id":[1000000,143719],"value":" such as smartphones"},{"id":[1000000,143763],"value":","},{"id":[1000000,124992],"value":" expect"},{"id":[1000000,124999],"span":5},{"id":[1000000,178895],"span":13},{"id":[1000000,178908],"value":" "},{"id":[1000000,178889],"span":3},{"id":[1000000,125004],"value":"application"},{"id":[1000000,143764],"value":"s"},{"id":[1000000,125015],"span":7},{"id":[1000000,125022],"value":" to"},{"id":[1000000,143750],"value":" continue"},{"id":[1000000,125025],"value":" work"},{"id":[1000000,143759],"value":"ing"},{"id":[1000000,125030],"value":" while the device is offline or has poor network connectivity"},{"id":[1000000,125291],"value":", and to synchronize its state with "},{"id":[1000000,125475],"value":"the user's "},{"id":[1000000,125327],"value":"other devices when the network is available"},{"id":[1000000,125091],"value":"."},{"id":[1000000,125370],"value":" Examples of such applications include "},{"id":[1000000,125426],"value":"calendar"},{"id":[1000000,125442],"value":"s"},{"id":[1000000,125434],"span":3},{"id":[1000000,125437],"value":", "},{"id":[1000000,125409],"value":"address books, "},{"id":[1000000,125445],"value":"note-taking"},{"id":[1000000,143765],"value":" tools, to-do lists"},{"id":[1000000,125456],"value":","},{"id":[1000000,125486],"value":" and"},{"id":[1000000,125457],"value":" password managers"},{"id":[1000000,125490],"value":". "},{"id":[1000000,226445],"value":"Similarly,"},{"id":[1000000,125492],"span":11},{"id":[1000000,125534],"span":18},{"id":[1000000,125552],"value":" collaborat"},{"id":[1000000,226402],"value":"i"},{"id":[1000000,226461],"value":"ve work often requires several people to "},{"id":[1000000,226592],"value":"simultaneously "},{"id":[1000000,226542],"value":"edit"},{"id":[1000000,226502],"span":7},{"id":[1000000,226509],"value":" the same"},{"id":[1000000,226403],"span":13},{"id":[1000000,125563],"span":13},{"id":[1000000,178925],"span":35},{"id":[1000000,178923],"span":1},{"id":[1000000,125576],"span":3},{"id":[1000000,125579],"value":" "},{"id":[1000000,125590],"value":"text "},{"id":[1000000,125580],"value":"document"},{"id":[1000000,125588],"span":1},{"id":[1000000,125598],"value":", spreadsheet"},{"id":[1000000,125611],"span":1},{"id":[1000000,125612],"value":", presentation"},{"id":[1000000,125626],"span":1},{"id":[1000000,125627],"value":", graphic"},{"id":[1000000,125636],"span":1},{"id":[1000000,125637],"value":", and "},{"id":[1000000,125668],"value":"other kinds of"},{"id":[1000000,125643],"span":7},{"id":[1000000,125650],"value":" document"},{"id":[1000000,180968],"span":1},{"id":[1000000,226533],"span":2},{"id":[1000000,226546],"span":36},{"id":[1000000,226582],"value":","},{"id":[1000000,226650],"value":" with "},{"id":[1000000,226672],"value":"each person's"},{"id":[1000000,226685],"span":1},{"id":[1000000,226656],"span":8},{"id":[1000000,226583],"value":" edits "},{"id":[1000000,226709],"value":"reflected on the other collaborators' copies of the document with minimal delay"},{"id":[1000000,226689],"span":10},{"id":[1000000,226590],"span":2},{"id":[1000000,226455],"span":4},{"id":[1000000,125659],"span":1},{"id":[1000000,125660],"value":"."},{"id":[1000000,125683],"span":1},{"id":[1000000,179000],"span":1},{"id":[1000000,178996],"span":4},{"id":[1000000,179001],"span":19},{"id":[1000000,179022],"span":9},{"id":[1000000,179033],"span":55},{"id":[1000000,179144],"span":34},{"id":[1000000,179186],"span":1},{"id":[1000000,179191],"span":39},{"id":[1000000,179187],"span":2},{"id":[1000000,179178],"span":4},{"id":[1000000,179088],"span":18},{"id":[1000000,179108],"span":9},{"id":[1000000,179106],"span":1},{"id":[1000000,179031],"span":1},{"id":[1000000,179020],"span":1},{"id":[1000000,178995],"value":"\n"},{"id":[1000000,125684],"value":"\nWhat these "},{"id":[1000000,125698],"value":"applications have in common is that the "},{"id":[1000000,125738],"span":5},{"id":[1000000,125743],"value":"application state needs to be replicated to several devices, each of which may modify the state locally. "},{"id":[1000000,179262],"value":"T"},{"id":[1000000,179230],"span":2},{"id":[1000000,143910],"span":28},{"id":[1000000,143938],"value":"he "},{"id":[1000000,143942],"value":"t"},{"id":[1000000,126024],"span":1},{"id":[1000000,125852],"span":44},{"id":[1000000,125896],"value":"raditional "},{"id":[1000000,143884],"value":"approach"},{"id":[1000000,143892],"span":2},{"id":[1000000,143894],"value":" to "},{"id":[1000000,125907],"value":"concurrency control"},{"id":[1000000,143909],"value":","},{"id":[1000000,179263],"value":" serializability,"},{"id":[1000000,125926],"span":1},{"id":[1000000,125945],"span":34},{"id":[1000000,125979],"value":" "},{"id":[1000000,126025],"value":"would cause the application to become unusable at times of poor network connectivity"},{"id":[1000000,143784],"value":"~\\cite{Davidson:1985hv}"},{"id":[1000000,143813],"value":"."},{"id":[1000000,126109],"span":1},{"id":[1000000,126110],"value":" "},{"id":[1000000,143818],"value":"If we require "},{"id":[1000000,143969],"value":"that "},{"id":[1000000,143832],"value":"applications"},{"id":[1000000,143844],"span":3},{"id":[1000000,143847],"value":" work regardless of "},{"id":[1000000,143867],"span":4},{"id":[1000000,143871],"value":"network"},{"id":[1000000,179284],"value":" availability"},{"id":[1000000,143878],"value":","},{"id":[1000000,126111],"span":1},{"id":[1000000,143815],"span":1},{"id":[1000000,126112],"span":1},{"id":[1000000,126113],"value":" we must assume that users can make arbitrary modifications concurrently on different devices, and"},{"id":[1000000,143879],"value":" that"},{"id":[1000000,126211],"value":" any resulting conflicts must be resolved.\n\nThe simplest way "},{"id":[1000000,179299],"value":"to"},{"id":[1000000,126272],"span":2},{"id":[1000000,126274],"value":" res"},{"id":[1000000,126286],"value":"olv"},{"id":[1000000,179306],"value":"e"},{"id":[1000000,126289],"span":1},{"id":[1000000,179303],"span":1},{"id":[1000000,126290],"span":2},{"id":[1000000,126292],"value":" confl"},{"id":[1000000,126306],"value":"icts is to discard some "},{"id":[1000000,126330],"span":9},{"id":[1000000,126339],"value":"modifications "},{"id":[1000000,179320],"value":"when"},{"id":[1000000,126353],"span":3},{"id":[1000000,126459],"span":1},{"id":[1000000,126460],"value":" "},{"id":[1000000,179324],"value":"a "},{"id":[1000000,126390],"value":"conflict"},{"id":[1000000,126398],"span":1},{"id":[1000000,126399],"value":" occur"},{"id":[1000000,126405],"span":1},{"id":[1000000,179328],"value":"s"},{"id":[1000000,126406],"span":2},{"id":[1000000,126408],"value":", "},{"id":[1000000,126489],"value":"for example using a"},{"id":[1000000,126410],"span":27},{"id":[1000000,126437],"value":" ``last writer wins''"},{"id":[1000000,126508],"value":" policy"},{"id":[1000000,126458],"value":"."},{"id":[1000000,126515],"value":" However, this approach is unde"},{"id":[1000000,126548],"value":"sirable as it incurs data loss. An alternative is to let the user manually resolve the conflict, which is tedious"},{"id":[1000000,230155],"value":" and error-prone,"},{"id":[1000000,179332],"value":" and therefore should be"},{"id":[1000000,179330],"span":1},{"id":[1000000,126661],"value":" "},{"id":[1000000,179356],"value":"avoided whe"},{"id":[1000000,179369],"value":"never possible."},{"id":[1000000,179384],"span":1},{"id":[1000000,179367],"span":1},{"id":[1000000,126662],"span":60},{"id":[1000000,143977],"value":"\n\nCurrent"},{"id":[1000000,143990],"value":" applications solve this problem with a range of ad-hoc and application-specific mechanisms"},{"id":[1000000,144105],"value":"."},{"id":[1000000,144165],"value":" In this paper we present "},{"id":[1000000,144209],"value":"a"},{"id":[1000000,144399],"value":" general-purpose"},{"id":[1000000,144210],"value":" datatype that provides the full expressiveness of the JSON data model, and "},{"id":[1000000,215535],"value":"supports "},{"id":[1000000,144286],"span":25},{"id":[1000000,144311],"value":"concurrent modifications without loss of information."},{"id":[1000000,215804],"value":" As we shall see later, "},{"id":[1000000,215910],"value":"our approach"},{"id":[1000000,216085],"value":" typically "},{"id":[1000000,216098],"value":"supports the "},{"id":[1000000,216123],"value":"automatic merging of "},{"id":[1000000,216276],"value":"concurrent "},{"id":[1000000,216144],"value":"modifications into a JSON data structure. "},{"id":[1000000,216902],"value":"We"},{"id":[1000000,216186],"span":3},{"id":[1000000,216193],"span":9},{"id":[1000000,216189],"span":2},{"id":[1000000,216111],"span":6},{"id":[1000000,216096],"span":1},{"id":[1000000,215922],"value":" "},{"id":[1000000,216294],"value":"introduce"},{"id":[1000000,216303],"span":1},{"id":[1000000,216304],"value":" a"},{"id":[1000000,216920],"value":" single,"},{"id":[1000000,216306],"value":" general mechan"},{"id":[1000000,259730],"value":"is"},{"id":[1000000,216321],"span":2},{"id":[1000000,216323],"value":"m (a "},{"id":[1000000,216264],"span":4},{"id":[1000000,216215],"span":12},{"id":[1000000,216013],"span":14},{"id":[1000000,216027],"value":"multi-va"},{"id":[1000000,216039],"value":"lue re"},{"id":[1000000,216049],"value":"gister"},{"id":[1000000,216328],"value":")"},{"id":[1000000,216905],"value":" into our model"},{"id":[1000000,216055],"value":" to record"},{"id":[1000000,216065],"span":10},{"id":[1000000,216075],"value":" conflict"},{"id":[1000000,216238],"value":"ing u"},{"id":[1000000,216247],"value":"pdates"},{"id":[1000000,216268],"value":" to leaf"},{"id":[1000000,216329],"value":" n"},{"id":[1000000,216333],"value":"odes"},{"id":[1000000,216375],"value":" in the "},{"id":[1000000,216385],"value":"J"},{"id":[1000000,216388],"value":"SON data structure"},{"id":[1000000,216650],"value":"."},{"id":[1000000,216386],"span":1},{"id":[1000000,216383],"span":1},{"id":[1000000,216337],"span":1},{"id":[1000000,216338],"value":" "},{"id":[1000000,216652],"value":"T"},{"id":[1000000,216575],"span":1},{"id":[1000000,216576],"value":"his"},{"id":[1000000,216339],"span":31},{"id":[1000000,216370],"value":" "},{"id":[1000000,216410],"value":"me"},{"id":[1000000,216414],"value":"chan"},{"id":[1000000,220965],"value":"i"},{"id":[1000000,216418],"value":"s"},{"id":[1000000,216419],"span":1},{"id":[1000000,216424],"value":"m"},{"id":[1000000,216441],"value":" "},{"id":[1000000,216584],"value":"then pro"},{"id":[1000000,216594],"value":"vides a "},{"id":[1000000,216662],"value":"consistent basis"},{"id":[1000000,216602],"span":3},{"id":[1000000,216611],"span":6},{"id":[1000000,216617],"value":" on which"},{"id":[1000000,216605],"span":3},{"id":[1000000,216592],"span":1},{"id":[1000000,216442],"span":5},{"id":[1000000,216447],"value":" applications can"},{"id":[1000000,216464],"span":5},{"id":[1000000,216469],"value":" resolve"},{"id":[1000000,216688],"value":" any remaining"},{"id":[1000000,216477],"span":1},{"id":[1000000,216632],"span":4},{"id":[1000000,216636],"value":" conflicts"},{"id":[1000000,216478],"span":6},{"id":[1000000,216484],"value":" "},{"id":[1000000,216729],"value":"throug"},{"id":[1000000,216737],"value":"h "},{"id":[1000000,216835],"value":"programmatic means"},{"id":[1000000,216928],"value":","},{"id":[1000000,216853],"value":" or"},{"id":[1000000,216739],"span":9},{"id":[1000000,216793],"span":15},{"id":[1000000,216748],"span":3},{"id":[1000000,216751],"value":" "},{"id":[1000000,216886],"value":"via "},{"id":[1000000,216868],"value":"further user input"},{"id":[1000000,216752],"span":12},{"id":[1000000,216735],"span":1},{"id":[1000000,216485],"span":3},{"id":[1000000,216490],"span":2},{"id":[1000000,216494],"span":8},{"id":[1000000,216646],"span":1},{"id":[1000000,216502],"span":12},{"id":[1000000,216647],"span":1},{"id":[1000000,216514],"span":29},{"id":[1000000,216543],"value":"."},{"id":[1000000,216492],"span":1},{"id":[1000000,216488],"span":1},{"id":[1000000,216425],"span":8},{"id":[1000000,216420],"span":2},{"id":[1000000,216412],"span":1},{"id":[1000000,216371],"span":4},{"id":[1000000,216331],"span":1},{"id":[1000000,216253],"value":" "},{"id":[1000000,216243],"span":2},{"id":[1000000,216084],"span":1},{"id":[1000000,216045],"span":2},{"id":[1000000,216035],"span":2},{"id":[1000000,215923],"span":29},{"id":[1000000,215954],"span":9},{"id":[1000000,215967],"span":4},{"id":[1000000,215963],"span":2},{"id":[1000000,215952],"span":1},{"id":[1000000,215828],"span":14},{"id":[1000000,215878],"span":9},{"id":[1000000,215842],"span":18},{"id":[1000000,215800],"span":2},{"id":[1000000,144364],"value":" We expect that "},{"id":[1000000,144415],"value":"implementations of "},{"id":[1000000,144380],"value":"this datatype will"},{"id":[1000000,144434],"value":" "},{"id":[1000000,144451],"value":"drastically simplify the development of collaborative and state-synchronizing applications for mobile devices."},{"id":[1000000,179446],"value":"\n"},{"id":[1000000,179447],"span":19},{"id":[1000000,179476],"span":14},{"id":[1000000,179492],"span":70},{"id":[1000000,179564],"span":25},{"id":[1000000,179593],"span":8},{"id":[1000000,179607],"span":28},{"id":[1000000,179643],"span":62},{"id":[1000000,179707],"span":7},{"id":[1000000,179716],"span":4},{"id":[1000000,179734],"span":19},{"id":[1000000,179722],"span":6},{"id":[1000000,179720],"span":1},{"id":[1000000,179714],"span":1},{"id":[1000000,179705],"span":1},{"id":[1000000,179635],"span":4},{"id":[1000000,179601],"span":3},{"id":[1000000,179589],"span":2},{"id":[1000000,179562],"span":1},{"id":[1000000,179490],"span":1},{"id":[1000000,179466],"span":5},{"id":[1000000,144435],"span":8},{"id":[1000000,144398],"span":1},{"id":[1000000,144191],"span":9},{"id":[1000000,144106],"span":59},{"id":[1000000,144081],"span":12},{"id":[1000000,143986],"span":2},{"id":[1000000,126546],"span":1},{"id":[1000000,126356],"span":17},{"id":[1000000,126298],"span":4},{"id":[1000000,126278],"span":4},{"id":[1000000,125927],"span":9},{"id":[1000000,125848],"span":2},{"id":[1000000,125696],"span":1},{"id":[1000000,125596],"span":1},{"id":[1000000,125589],"span":1},{"id":[1000000,125503],"span":1},{"id":[1000000,125504],"value":"\n"},{"id":[1000000,144644],"value":"\\subsection{JSON "},{"id":[1000000,252313],"value":"D"},{"id":[1000000,144661],"span":1},{"id":[1000000,144662],"value":"ata "},{"id":[1000000,252315],"value":"M"},{"id":[1000000,144666],"span":1},{"id":[1000000,144667],"value":"odel}"},{"id":[1000000,144720],"value":"\n\nJSON"},{"id":[1000000,144909],"value":" is a popular general-purpose data encoding format"},{"id":[1000000,144969],"value":", used in many databases and web services"},{"id":[1000000,144959],"value":"."},{"id":[1000000,144726],"value":" "},{"id":[1000000,144823],"value":"It has similarities to XML, and we compare them "},{"id":[1000000,144871],"span":8},{"id":[1000000,144879],"value":"in "},{"id":[1000000,155406],"value":"S"},{"id":[1000000,144882],"span":1},{"id":[1000000,144883],"value":"ection~\\ref{sec:json-xml}."},{"id":[1000000,144968],"value":" "},{"id":[1000000,145010],"value":"The structure of a JSON document can optionally be constrained by a schema"},{"id":[1000000,145170],"value":";"},{"id":[1000000,145210],"value":" however,"},{"id":[1000000,145171],"value":" for simplicity,"},{"id":[1000000,145084],"span":5},{"id":[1000000,145089],"value":" "},{"id":[1000000,145090],"span":3},{"id":[1000000,145093],"value":"this paper "},{"id":[1000000,145201],"value":"discusses"},{"id":[1000000,145104],"span":11},{"id":[1000000,145115],"value":" "},{"id":[1000000,145120],"value":"only untyped JSON without an explicit schema."},{"id":[1000000,145219],"value":"\n\nA JSON document is a tree con"},{"id":[1000000,146466],"value":"taining two"},{"id":[1000000,146456],"span":5},{"id":[1000000,145250],"span":24},{"id":[1000000,145274],"value":" types of "},{"id":[1000000,145806],"value":"branch "},{"id":[1000000,145284],"value":"node:\n\n\\begin{description}"},{"id":[1000000,145328],"value":"\n\\item[Map:] A"},{"id":[1000000,145342],"span":7},{"id":[1000000,145349],"value":" node whose children "},{"id":[1000000,145400],"value":"have no defined order, and where each child is labelled with a string \\emph{key}. A key uniquely identifies one of the children."},{"id":[1000000,145925],"value":" "},{"id":[1000000,151480],"value":"We treat "},{"id":[1000000,151490],"value":"k"},{"id":[1000000,145926],"span":1},{"id":[1000000,145927],"value":"eys "},{"id":[1000000,151494],"value":"as"},{"id":[1000000,145931],"span":3},{"id":[1000000,145934],"value":" immutable, but values a"},{"id":[1000000,151498],"value":"s"},{"id":[1000000,145958],"span":2},{"id":[1000000,145960],"value":" mutable, and key-value mappings can be added and removed from the map."},{"id":[1000000,145528],"value":" A JSON map is also known as an \\emph{object}."},{"id":[1000000,145923],"span":1},{"id":[1000000,145574],"value":"\n\\item"},{"id":[1000000,145587],"value":"["},{"id":[1000000,145580],"span":1},{"id":[1000000,145581],"value":"List:"},{"id":[1000000,145588],"value":"] A "},{"id":[1000000,145592],"span":7},{"id":[1000000,145599],"value":"node whose children have an order defined by the application."},{"id":[1000000,146031],"value":" The list can be mutated by inserting or deleting list elements."},{"id":[1000000,145660],"value":" "},{"id":[1000000,145665],"value":"A JSON list is also known as an \\emph{array}."},{"id":[1000000,145710],"span":83},{"id":[1000000,145796],"span":1},{"id":[1000000,145793],"span":3},{"id":[1000000,145797],"span":8},{"id":[1000000,145661],"span":2},{"id":[1000000,145370],"span":15},{"id":[1000000,145310],"value":"\n\\end{description}"},{"id":[1000000,145921],"value":"\n\n"},{"id":[1000000,146131],"value":"A child of a branch node can be either another branch node, or a leaf node. A"},{"id":[1000000,146129],"span":1},{"id":[1000000,146095],"span":3},{"id":[1000000,146098],"value":" lea"},{"id":[1000000,146211],"value":"f"},{"id":[1000000,146102],"span":3},{"id":[1000000,146105],"value":" of the tree contain"},{"id":[1000000,146213],"value":"s a primitive value (string, number, boolean, or null). We treat primitive values as immutable, but allow "},{"id":[1000000,146323],"value":"the value of a leaf node to be modified by treating it as a \\emph{register} that can be assigned a new value."},{"id":[1000000,146477],"value":"\n"},{"id":[1000000,146586],"value":"\nThis model is sufficient to express the state of a wide range of applications. For example, a text document can be represented by a"},{"id":[1000000,146718],"span":9},{"id":[1000000,146727],"value":" list of "},{"id":[1000000,146777],"value":"single-"},{"id":[1000000,146736],"span":5},{"id":[1000000,146750],"span":6},{"id":[1000000,146756],"value":"character"},{"id":[1000000,146785],"value":" strings; character-by-character edits are then expressed as insertions and deletions of list elements."},{"id":[1000000,146889],"value":" "},{"id":[1000000,146765],"span":1},{"id":[1000000,146478],"span":1},{"id":[1000000,146481],"value":"In "},{"id":[1000000,155408],"value":"S"},{"id":[1000000,146484],"span":1},{"id":[1000000,146485],"value":"ection~\\ref{sec:e"},{"id":[1000000,146504],"value":"xamples} we "},{"id":[1000000,216941],"value":"describe four more complex"},{"id":[1000000,146516],"span":5},{"id":[1000000,146901],"span":7},{"id":[1000000,146521],"span":5},{"id":[1000000,146530],"span":6},{"id":[1000000,146536],"value":" examples of using JSON to model application data."},{"id":[1000000,146908],"value":"\n\n\\subsection{"},{"id":[1000000,146961],"value":"Replication "},{"id":[1000000,146983],"value":"and "},{"id":[1000000,252317],"value":"C"},{"id":[1000000,146987],"span":1},{"id":[1000000,146988],"value":"onflict "},{"id":[1000000,252319],"value":"R"},{"id":[1000000,146996],"span":1},{"id":[1000000,146997],"value":"esolution"},{"id":[1000000,146973],"span":5},{"id":[1000000,146922],"span":19},{"id":[1000000,146941],"value":"}"},{"id":[1000000,155477],"value":"\\label{sec:intro-replication}"},{"id":[1000000,155471],"span":3},{"id":[1000000,146526],"span":2},{"id":[1000000,146502],"span":1},{"id":[1000000,146479],"span":1},{"id":[1000000,146319],"span":2},{"id":[1000000,146125],"span":1},{"id":[1000000,145116],"span":2},{"id":[1000000,125505],"span":14},{"id":[1000000,125525],"span":9},{"id":[1000000,125519],"span":3},{"id":[1000000,125424],"span":2},{"id":[1000000,124248],"span":199},{"id":[1000000,568],"value":"\n"},{"id":[1000000,601],"span":6},{"id":[1000000,569],"span":6},{"id":[1000000,586],"span":15},{"id":[1000000,575],"span":11},{"id":[1000000,478],"span":1},{"id":[1000000,34749],"value":"\n"},{"id":[1000000,34751],"span":223},{"id":[1000000,35215],"span":46},{"id":[1000000,35262],"span":6},{"id":[1000000,35261],"span":1},{"id":[1000000,34750],"span":1},{"id":[1000000,148384],"span":1},{"id":[1000000,148386],"value":"We consider systems in which a full copy of the JSON document is replicated on several devices. Those devices could be servers in datacenters, but we "},{"id":[1000000,148562],"value":"focus on mobile devices such as smartphones"},{"id":[1000000,148619],"value":" and laptops"},{"id":[1000000,148632],"value":", which have intermittent network connectivity"},{"id":[1000000,148631],"value":"."},{"id":[1000000,151398],"value":" We do not distinguish between devices owned by the same user and different users."},{"id":[1000000,148678],"value":" Our model allows each "},{"id":[1000000,148707],"value":"device to "},{"id":[1000000,151090],"value":"optimistically "},{"id":[1000000,148717],"value":"modify its local "},{"id":[1000000,148744],"value":"replica of the document, and to asynchronously propagate those edits to other replicas."},{"id":[1000000,151105],"span":1},{"id":[1000000,148831],"value":"\n\n"},{"id":[1000000,148839],"value":"Our only requirement of the network is "},{"id":[1000000,148878],"span":23},{"id":[1000000,148901],"value":"that messages"},{"id":[1000000,149394],"value":" sent by one replica"},{"id":[1000000,148914],"value":" are eventually deli"},{"id":[1000000,148940],"value":"vered"},{"id":[1000000,149378],"value":" to all"},{"id":[1000000,149414],"value":" other"},{"id":[1000000,149385],"value":" replicas"},{"id":[1000000,148968],"value":", "},{"id":[1000000,149070],"value":"by "},{"id":[1000000,149014],"span":16},{"id":[1000000,149030],"value":"retrying if "},{"id":[1000000,149082],"value":"delivery fails"},{"id":[1000000,149042],"span":9},{"id":[1000000,149051],"value":"."},{"id":[1000000,149096],"value":" "},{"id":[1000000,154099],"value":"We assume the"},{"id":[1000000,149151],"span":3},{"id":[1000000,149154],"value":" network "},{"id":[1000000,154125],"value":"may"},{"id":[1000000,149163],"span":13},{"id":[1000000,149176],"value":" arbitrarily "},{"id":[1000000,154076],"value":"de"},{"id":[1000000,154086],"value":"lay, "},{"id":[1000000,154078],"span":4},{"id":[1000000,149189],"value":"re"},{"id":[1000000,149197],"value":"order "},{"id":[1000000,154093],"value":"and"},{"id":[1000000,149203],"span":2},{"id":[1000000,149205],"value":" duplicate messages."},{"id":[1000000,151500],"value":"\n\n"},{"id":[1000000,149225],"span":1},{"id":[1000000,149232],"value":"Our algorithm "},{"id":[1000000,149369],"value":"works"},{"id":[1000000,149246],"span":24},{"id":[1000000,149270],"value":" client"},{"id":[1000000,149374],"value":"-"},{"id":[1000000,149277],"value":"s"},{"id":[1000000,149375],"value":"ide"},{"id":[1000000,149278],"value":" and does not depend on any server to transform or process message"},{"id":[1000000,149535],"value":"s. T"},{"id":[1000000,149344],"span":1},{"id":[1000000,149420],"span":3},{"id":[1000000,149423],"value":"his approach allows"},{"id":[1000000,151502],"value":" messages to be delivered via"},{"id":[1000000,149442],"value":" a peer-to-peer network "},{"id":[1000000,216980],"value":"as well as"},{"id":[1000000,216972],"span":3},{"id":[1000000,216970],"span":2},{"id":[1000000,149466],"span":3},{"id":[1000000,149469],"value":" a secure messaging protocol"},{"id":[1000000,149662],"value":" with end-to-end encryption"},{"id":[1000000,149499],"value":"~\\cite{Unger:2015kg}"},{"id":[1000000,217002],"value":". T"},{"id":[1000000,149519],"span":11},{"id":[1000000,149539],"span":12},{"id":[1000000,149551],"value":"he details of the network implementation and "},{"id":[1000000,149596],"span":4},{"id":[1000000,149600],"value":"cryptographic protocols are outside of the scope of this paper"},{"id":[1000000,149530],"value":"."},{"id":[1000000,149497],"span":1},{"id":[1000000,149226],"span":3},{"id":[1000000,149191],"span":3},{"id":[1000000,149097],"span":27},{"id":[1000000,149052],"span":1},{"id":[1000000,148970],"span":22},{"id":[1000000,148934],"span":3},{"id":[1000000,148833],"span":3},{"id":[1000000,148734],"span":5},{"id":[1000000,148701],"span":3},{"id":[1000000,148605],"span":7},{"id":[1000000,148560],"span":1},{"id":[1000000,148556],"span":2},{"id":[1000000,148536],"span":10},{"id":[1000000,148385],"value":"\n"},{"id":[1000000,105229],"value":"\n"},{"id":[1000000,149785],"value":"In "},{"id":[1000000,155410],"value":"S"},{"id":[1000000,149788],"span":1},{"id":[1000000,149789],"value":"ection~\\ref{sec:semantics} we "},{"id":[1000000,180532],"value":"define"},{"id":[1000000,149825],"span":5},{"id":[1000000,151754],"span":1},{"id":[1000000,151755],"value":" "},{"id":[1000000,149830],"value":"formal semantics"},{"id":[1000000,149846],"span":5},{"id":[1000000,149851],"value":" describ"},{"id":[1000000,180545],"value":"ing"},{"id":[1000000,149859],"span":2},{"id":[1000000,149861],"value":" how conflicts are resolved"},{"id":[1000000,149819],"span":3},{"id":[1000000,149784],"value":" "},{"id":[1000000,149889],"value":"w"},{"id":[1000000,149690],"span":1},{"id":[1000000,149691],"value":"hen "},{"id":[1000000,149893],"value":"a"},{"id":[1000000,149695],"span":3},{"id":[1000000,149698],"value":" JSON document is concurrently modified on different devices"},{"id":[1000000,149899],"value":"."},{"id":[1000000,149758],"span":5},{"id":[1000000,149689],"value":" "},{"id":[1000000,105231],"value":"Our design is based on"},{"id":[1000000,105253],"span":4},{"id":[1000000,105257],"value":" "},{"id":[1000000,154133],"value":"three"},{"id":[1000000,105774],"span":1},{"id":[1000000,151548],"span":4},{"id":[1000000,105775],"span":2},{"id":[1000000,105777],"value":" "},{"id":[1000000,105258],"value":"simple principles:"},{"id":[1000000,105278],"value":"\n\\begin{enumerate}\n\\item All replicas of the data structure should "},{"id":[1000000,106021],"value":"automatically "},{"id":[1000000,105967],"span":5},{"id":[1000000,105345],"value":"converge towards the same s"},{"id":[1000000,105374],"value":"tate"},{"id":[1000000,230172],"value":" (a requirement known as \\emph{strong eventual consistency}~\\cite{Shapiro:2011un})"},{"id":[1000000,105378],"value":"."},{"id":[1000000,105451],"span":7},{"id":[1000000,105466],"span":26},{"id":[1000000,105498],"span":85},{"id":[1000000,105633],"span":11},{"id":[1000000,105583],"span":8},{"id":[1000000,105492],"span":3},{"id":[1000000,105464],"span":1},{"id":[1000000,105458],"span":3},{"id":[1000000,105379],"value":"\n\\item No user input should be lost due to concurrent modifications."},{"id":[1000000,151552],"value":"\n\\item "},{"id":[1000000,151593],"value":"If all sequential permutations of"},{"id":[1000000,152558],"value":" a set of"},{"id":[1000000,151626],"value":" updates lead to the same state, then concurrent execution of those updates also leads to the same state~\\cite{Bieniusa:2012gt}."},{"id":[1000000,151567],"span":13},{"id":[1000000,151559],"span":4},{"id":[1000000,105977],"span":22},{"id":[1000000,105372],"span":1},{"id":[1000000,105276],"span":1},{"id":[1000000,105230],"value":"\n"},{"id":[1000000,105591],"value":"\\end{enumerate}\n"},{"id":[1000000,105608],"value":"\n"},{"id":[1000000,150195],"value":"\\subsection{Our "},{"id":[1000000,252321],"value":"C"},{"id":[1000000,150211],"span":1},{"id":[1000000,150212],"value":"ontributions}"},{"id":[1000000,105609],"span":7},{"id":[1000000,105784],"span":38},{"id":[1000000,105849],"span":21},{"id":[1000000,105822],"span":27},{"id":[1000000,105870],"span":28},{"id":[1000000,105912],"span":7},{"id":[1000000,106056],"span":14},{"id":[1000000,105919],"span":10},{"id":[1000000,106070],"span":21},{"id":[1000000,105929],"span":38},{"id":[1000000,106035],"span":1},{"id":[1000000,106097],"span":97},{"id":[1000000,106036],"span":6},{"id":[1000000,105898],"span":7},{"id":[1000000,105616],"span":5},{"id":[1000000,105625],"span":1},{"id":[1000000,105621],"span":2},{"id":[1000000,105607],"value":"\n"},{"id":[1000000,150252],"value":"\nOur main contribution in this work is to define an algorithm and f"},{"id":[1000000,150321],"value":"ormal semantics for collaborative, concurrent editing of JSON data structures with automatic conflict resolution. Although similar algorithms have previously been defined for lists, maps and registers individually"},{"id":[1000000,150654],"value":" (see "},{"id":[1000000,155412],"value":"S"},{"id":[1000000,150660],"span":1},{"id":[1000000,150661],"value":"ection~\\ref{sec:related})"},{"id":[1000000,150534],"value":", to our knowledge this paper is the first to integrate all of these structures into an arbitrarily composable datatype"},{"id":[1000000,227223],"value":" that can be deployed on any network topology"},{"id":[1000000,150653],"value":"."},{"id":[1000000,226788],"value":"\n\n"},{"id":[1000000,226843],"value":"A key requirement of conflict resolution is that"},{"id":[1000000,227099],"value":" after any sequence of concurrent modifications,"},{"id":[1000000,226891],"value":" "},{"id":[1000000,227009],"value":"all "},{"id":[1000000,226892],"value":"replicas"},{"id":[1000000,227013],"value":" eventually"},{"id":[1000000,226900],"value":" converge towards the same state"},{"id":[1000000,227149],"value":"."},{"id":[1000000,226932],"span":77},{"id":[1000000,226842],"value":" "},{"id":[1000000,226790],"value":"In Section~\\ref{sec:convergence} and the appendix"},{"id":[1000000,227150],"value":" we prove"},{"id":[1000000,227205],"value":" a theorem to show"},{"id":[1000000,227159],"value":" that our algorithm satisfies this requirement"},{"id":[1000000,226841],"value":"."},{"id":[1000000,226839],"span":1},{"id":[1000000,150686],"value":"\n\nComposing maps and lists into arbitrarily nested structures opens up subtle challenges that do not arise in flat structures, due to the possibility of "},{"id":[1000000,150843],"value":"concurrent "},{"id":[1000000,150839],"value":"edit"},{"id":[1000000,150854],"value":"s at different levels of the tree. We illustrate some of those challenges by example in "},{"id":[1000000,155414],"value":"S"},{"id":[1000000,150942],"span":1},{"id":[1000000,150943],"value":"ection~\\ref{sec:examples}. "},{"id":[1000000,179779],"span":1},{"id":[1000000,179780],"value":"N"},{"id":[1000000,179753],"span":3},{"id":[1000000,150970],"span":20},{"id":[1000000,150990],"value":"ested structures are an important requirement for many applications"},{"id":[1000000,179783],"value":"."},{"id":[1000000,227269],"value":" "},{"id":[1000000,151057],"span":33},{"id":[1000000,151107],"span":48},{"id":[1000000,179784],"span":1},{"id":[1000000,179875],"value":"Consequently"},{"id":[1000000,227270],"value":","},{"id":[1000000,179887],"value":" the long-term goal of our work is to"},{"id":[1000000,151155],"span":10},{"id":[1000000,151165],"value":" simplify"},{"id":[1000000,151174],"span":4},{"id":[1000000,151178],"value":" the development of applications that use optimistic replication"},{"id":[1000000,179932],"value":" by providing a"},{"id":[1000000,179977],"value":" general algorithm "},{"id":[1000000,179998],"value":"for conf"},{"id":[1000000,180008],"value":"lict resolution"},{"id":[1000000,180142],"value":" "},{"id":[1000000,180251],"value":"whose details can largely be "},{"id":[1000000,180284],"value":"hidden inside an easy-to-use soft"},{"id":[1000000,180319],"value":"ware"},{"id":[1000000,180317],"span":1},{"id":[1000000,180280],"span":2},{"id":[1000000,180143],"span":21},{"id":[1000000,180182],"span":20},{"id":[1000000,180202],"value":" library"},{"id":[1000000,180323],"value":"."},{"id":[1000000,180164],"span":9},{"id":[1000000,180036],"span":8},{"id":[1000000,180046],"span":12},{"id":[1000000,180082],"span":20},{"id":[1000000,180058],"span":12},{"id":[1000000,180044],"span":1},{"id":[1000000,180024],"span":6},{"id":[1000000,180006],"span":1},{"id":[1000000,179996],"span":1},{"id":[1000000,179949],"span":10},{"id":[1000000,179963],"span":2},{"id":[1000000,179959],"span":2},{"id":[1000000,179947],"span":1},{"id":[1000000,179930],"span":1},{"id":[1000000,179928],"span":1},{"id":[1000000,151242],"span":1},{"id":[1000000,150319],"span":1},{"id":[1000000,126827],"span":1},{"id":[1000000,129621],"span":355},{"id":[1000000,129976],"value":"\n\n\\section{Related"},{"id":[1000000,130801],"value":" "},{"id":[1000000,252323],"value":"W"},{"id":[1000000,130802],"span":1},{"id":[1000000,130803],"value":"ork}"},{"id":[1000000,150225],"value":"\\"},{"id":[1000000,150234],"value":"label{sec:related}"},{"id":[1000000,151243],"value":"\n\nIn this section we discuss existing approaches to optimistic replication, collaborative editing and conflict resolution."},{"id":[1000000,150226],"span":4},{"id":[1000000,130807],"value":"\n\n\\subsect"},{"id":[1000000,129994],"value":"ion{Operational "},{"id":[1000000,252325],"value":"T"},{"id":[1000000,130010],"span":1},{"id":[1000000,130011],"value":"ransformation}\\label{sec:relate"},{"id":[1000000,130817],"value":"d-ot}\n\nAlgorithms based on \\emph{operational transformation} (OT"},{"id":[1000000,130042],"value":") have long been used for collaborative editing "},{"id":[1000000,130881],"value":"applications~\\cite{Ellis:1989"},{"id":[1000000,130912],"value":"ue,Ressel:1996wx,Sun:1998vf,Nichol"},{"id":[1000000,130910],"span":1},{"id":[1000000,130090],"value":"s:1995fd}. Most of them treat a document as a si"},{"id":[1000000,130946],"value":"ngle ordered list (of characters, for example) "},{"id":[1000000,130138],"value":"and do not support"},{"id":[1000000,130156],"span":4},{"id":[1000000,180324],"span":2},{"id":[1000000,130160],"value":" nested tree structures that are required "},{"id":[1000000,180335],"value":"by"},{"id":[1000000,130202],"span":3},{"id":[1000000,130205],"value":" many applications. Some algor"},{"id":[1000000,130235],"span":1},{"id":[1000000,130236],"value":"ithms generalize OT to editing XML documents~\\cite{Davis:2002iv,Ignat:2003jy,Wang:2015vo}, which provides nesting of ord"},{"id":[1000000,130356],"span":1},{"id":[1000000,130357],"value":"ered lists, but these algorithms do not support key-value maps as defined in this paper"},{"id":[1000000,151365],"value":" (see "},{"id":[1000000,155416],"value":"S"},{"id":[1000000,151371],"span":1},{"id":[1000000,151372],"value":"ection~\\ref{sec:json-xml})"},{"id":[1000000,130444],"value":"."},{"id":[1000000,152300],"value":" "},{"id":[1000000,152430],"value":"T"},{"id":[1000000,152301],"span":10},{"id":[1000000,152379],"span":1},{"id":[1000000,152380],"value":"he "},{"id":[1000000,152311],"value":"performanc"},{"id":[1000000,152383],"value":"e of OT algorithms degrades rapidly "},{"id":[1000000,152431],"value":"as the number of concurrent operations increases~\\cite{Li:2006kd"},{"id":[1000000,230254],"value":",Mehdi:2011ke"},{"id":[1000000,152495],"value":"}."},{"id":[1000000,152321],"span":29},{"id":[1000000,130995],"value":"\n\nMost deployed OT collaboration systems, including Google Docs~\\cite{DayRichter:2010tt}, Etherpad~"},{"id":[1000000,131096],"value":"\\cite{Etherpad:2011um}, Novell Vibe~\\cite{Spiewak:2010vw} and Apache Wave (formerly Google Wave~\\cite{Wang:2015vo}), rely on a single server to decide on a total ordering of operations~\\cite{Lemonik:2016wh}, a design decision inherited from the Jupiter system~\\cite{Nichols:1995fd}. This approach has the advantage of making the trans"},{"id":[1000000,131434],"value":"formation functions simpler and less error-prone~\\cite{Imine:2003ks}, but it does not meet our requirements, since we want to support peer-to-peer collaboration without requiring a single server.\n\nMany secure messaging protocols, which we plan to use for encrypted collaboration, do not guarantee that different recipients will see messages in the same order~\\cite{Unger:2015kg}. Although it is possible to decide on a tot"},{"id":[1000000,131862],"value":"al ordering of operations"},{"id":[1000000,259366],"value":" without using a single server"},{"id":[1000000,131887],"value":" by using an atomic broadcast protocol~\\cite{Defago:2004ji}, "},{"id":[1000000,131948],"span":41},{"id":[1000000,131989],"value":"such protocols are equivalent to consensus~\\cite{Chandra:1996cp}, so they can only safely make progress if a "},{"id":[1000000,259243],"value":"quorum"},{"id":[1000000,132098],"span":8},{"id":[1000000,132106],"value":" of participants are"},{"id":[1000000,132126],"span":11},{"id":[1000000,132137],"value":" reachable. We expect that in peer-to-peer systems of mobile devices"},{"id":[1000000,259448],"value":" participants"},{"id":[1000000,132205],"span":3},{"id":[1000000,132208],"value":" will frequently be"},{"id":[1000000,132227],"span":15},{"id":[1000000,259338],"span":4},{"id":[1000000,132242],"span":34},{"id":[1000000,259300],"span":1},{"id":[1000000,259301],"value":" offline"},{"id":[1000000,259309],"span":11},{"id":[1000000,132276],"span":25},{"id":[1000000,132301],"value":", and so any algorithm"},{"id":[1000000,132325],"value":" requiring atomic broadcast would "},{"id":[1000000,259249],"value":"struggle to reach a quorum and "},{"id":[1000000,132359],"value":"become unavailable. "},{"id":[1000000,259342],"value":"Without quorums, "},{"id":[1000000,259360],"value":"t"},{"id":[1000000,132379],"span":1},{"id":[1000000,132380],"value":"he strongest guarantee "},{"id":[1000000,132403],"span":5},{"id":[1000000,132408],"value":"a system can give is causal ordering~"},{"id":[1000000,132447],"value":"\\cite{Attiya:2015dm}.\n\nThe Google Realtime API~\\cite{Goog"},{"id":[1000000,132506],"value":"le:2015vk} is "},{"id":[1000000,132577],"value":"to our knowledge "},{"id":[1000000,132520],"value":"the only implementation of OT "},{"id":[1000000,132550],"span":22},{"id":[1000000,132572],"value":"that "},{"id":[1000000,132616],"value":"supports arbitrary nesting of lists and maps. Like Google Docs, it relies on a single server~\\cite{Lemonik:2016wh}. As a proprietary product, details of its algorithms have not been published.\n\n\\subsection{CRDTs}\\label{sec:related-crdts}\n"},{"id":[1000000,151756],"value":"\nConflict-free replicated datatypes "},{"id":[1000000,151825],"value":"(CRDT"},{"id":[1000000,151832],"value":"s"},{"id":[1000000,151830],"value":") "},{"id":[1000000,151792],"value":"are a family of data structures "},{"id":[1000000,151833],"value":"that "},{"id":[1000000,180343],"value":"support"},{"id":[1000000,151838],"span":6},{"id":[1000000,151844],"value":" concurrent"},{"id":[1000000,151855],"span":2},{"id":[1000000,151857],"value":" modifi"},{"id":[1000000,180354],"value":"cation"},{"id":[1000000,151864],"span":2},{"id":[1000000,151866],"value":" and "},{"id":[1000000,151871],"span":5},{"id":[1000000,151876],"value":"guarantee convergence of"},{"id":[1000000,151900],"span":5},{"id":[1000000,151905],"value":" concurrent updates."},{"id":[1000000,152055],"span":41},{"id":[1000000,151925],"value":" They work by attaching additional metadata to the data structure,"},{"id":[1000000,151991],"span":4},{"id":[1000000,151995],"value":" making modification operations commutative by construction."},{"id":[1000000,152497],"value":" The JSON datatype described in this paper is a "},{"id":[1000000,152545],"span":8},{"id":[1000000,152553],"value":"CRDT."},{"id":[1000000,152137],"span":31},{"id":[1000000,152170],"span":42},{"id":[1000000,152168],"span":1},{"id":[1000000,151824],"value":"\n"},{"id":[1000000,132854],"value":"\nCRDTs for registers, counters, maps"},{"id":[1000000,259703],"value":","},{"id":[1000000,132890],"value":" and sets are w"},{"id":[1000000,230281],"value":"ell-"},{"id":[1000000,132905],"span":6},{"id":[1000000,132911],"value":"known~\\cite{Shapiro:2011un,Shapiro:2011wy}, and have been implemented in various deployed systems such as Riak~\\cite{Brown:2014hs,Brown:2013wy}. For ordered lists, various algorithms have been proposed, incl"},{"id":[1000000,133120],"value":"uding WOOT~\\cite{Oster:2006wj}, RGA~\\cite{Roh:2011dw}, Treedoc~\\cite{Preguica:2009fz}, Logoot~\\cite{Weiss:2010hx}"},{"id":[1000000,259702],"value":","},{"id":[1000000,133233],"value":" and LSEQ~\\cite{Nedelec:2013ky}."},{"id":[1000000,228273],"value":" Attiya et al.~\\cite{Attiya:2016kh} "},{"id":[1000000,228309],"span":8},{"id":[1000000,228317],"value":"analyze "},{"id":[1000000,228333],"value":"the "},{"id":[1000000,228450],"value":"metadata overhead of"},{"id":[1000000,228337],"span":10},{"id":[1000000,228347],"value":" collaborative"},{"id":[1000000,228470],"value":"ly"},{"id":[1000000,228361],"value":" edit"},{"id":[1000000,228475],"value":"ed"},{"id":[1000000,228366],"span":3},{"id":[1000000,228369],"value":" "},{"id":[1000000,228370],"span":11},{"id":[1000000,228381],"value":"lists, and provide a correctness proof of the RGA "},{"id":[1000000,230293],"value":"algorithm"},{"id":[1000000,228431],"span":8},{"id":[1000000,228439],"value":"."},{"id":[1000000,133265],"value":" However, none of them support nesting: "},{"id":[1000000,228484],"value":"all of the"},{"id":[1000000,228509],"value":" "},{"id":[1000000,228550],"value":"aforementioned"},{"id":[1000000,228510],"span":8},{"id":[1000000,228494],"span":2},{"id":[1000000,228496],"value":" algorithms"},{"id":[1000000,228518],"value":" "},{"id":[1000000,228519],"span":23},{"id":[1000000,133305],"span":5},{"id":[1000000,133310],"value":"assume that "},{"id":[1000000,228591],"value":"each of "},{"id":[1000000,228613],"value":"their"},{"id":[1000000,228599],"span":3},{"id":[1000000,133322],"span":3},{"id":[1000000,133325],"value":" elements "},{"id":[1000000,228605],"value":"is a"},{"id":[1000000,133335],"span":27},{"id":[1000000,133362],"value":" "},{"id":[1000000,152291],"value":"primitive"},{"id":[1000000,133363],"span":6},{"id":[1000000,133369],"value":" value"},{"id":[1000000,133375],"span":1},{"id":[1000000,133376],"value":", not another CRDT.\n\nThe problem of nesting one CRDT inside another (also known as \\emph{composition} or \\emph{embedding}) has only been studied more recently. Riak allows nesting of counters and registers inside maps, and of maps within other maps~\\cite{Brown:2014hs,Brown:2013wy}. Embedding counters inside maps raises questions of semantics, which have been studied by Baquero, Almeida and Lerche~\\cite{Baquero:2016iv}. Almeida et a"},{"id":[1000000,133813],"value":"l.~\\cite{Almeida:2016tk} also define delta mutations for nested maps, and Baquero et al.~\\cite{Baquero:2015tm} define a theoretical framework for composition of state-based CRDTs, based on lattices. None of this work integrates CRDTs for ordered lists, but the treatment of causality in these datatypes forms a basis for the semantics developed in this paper.\n\nBurckhardt et al."},{"id":[1000000,134201],"value":"~\\cite{Burckhardt:2012jy} define \\emph{cloud types}, which are similar to CRDTs and can be composed. They define \\emph{cloud arrays}, which behave similarly to our map datatype"},{"id":[1000000,134379],"value":", and \\emph{entities}, which are like unordered sets or relations; ordered lists are not defined in this frame"},{"id":[1000000,134493],"value":"work."},{"id":[1000000,228618],"value":"\n\n"},{"id":[1000000,228799],"value":"On the other hand, "},{"id":[1000000,228620],"value":"Martin et al.~\\cite{Martin:2010ih} generalize Logoot~\\cite{Weiss:2010hx} to support collaborative editing of XML documents~-- that is, a tree of nested ordered lists"},{"id":[1000000,228855],"span":3},{"id":[1000000,228858],"value":" without "},{"id":[1000000,228887],"value":"nested maps"},{"id":[1000000,228867],"span":10},{"id":[1000000,228785],"value":". As discussed"},{"id":[1000000,228818],"value":" in Section~\\ref{sec:json-xml}, such "},{"id":[1000000,228901],"value":"a structure does not capture the expressiv"},{"id":[1000000,228958],"value":"eness"},{"id":[1000000,228943],"span":3},{"id":[1000000,228946],"value":" of JSON."},{"id":[1000000,134498],"span":62},{"id":[1000000,134560],"value":"\n\nAlthough CRDTs for registers, maps and ordered lists have existed for years in isolation, we are not aware of any prior work that allows them all"},{"id":[1000000,134711],"value":" to be composed into an arbitrarily nested CRDT with a JSON-like structure.\n\n\\subsection{Other"},{"id":[1000000,252327],"value":" "},{"id":[1000000,252329],"value":"A"},{"id":[1000000,134805],"span":2},{"id":[1000000,134807],"value":"pproaches}\\label{sec:related-other}\n\nMany replicated data systems need to deal with the problem of concurrent, conflicting modifications, but the solutions are often ad-hoc. For example, in Dynamo~\\cite{DeCandia:2007ui}"},{"id":[1000000,231104],"value":" and CouchDB"},{"id":[1000000,135026],"value":", if several values are concurrently written to the same key, the database preserves all of these values, and leaves conflict resolution to application code"},{"id":[1000000,227271],"value":" -- in other words, the only datatype it supports is a multi-value register"},{"id":[1000000,135182],"value":". Naively chosen merge functions often exhibit anomalies such as "},{"id":[1000000,135255],"value":"deleted items reappearing~\\cite{DeCandia:2007ui}. "},{"id":[1000000,152955],"value":"We believe that conflict"},{"id":[1000000,135305],"span":54},{"id":[1000000,135359],"value":" resolution is not a simple matter tha"},{"id":[1000000,135401],"value":"t can reasonably be left to application programmers.\n\nAnother frequently-used approach to conflict resolution is \\emph{last writer wins} (LWW), which arbitrarily chooses one among several concurrent writes as ``winner'' and discards the others. "},{"id":[1000000,231096],"value":"LWW"},{"id":[1000000,135646],"span":13},{"id":[1000000,135659],"value":" is used in Apache Cassandra, "},{"id":[1000000,231184],"value":"for example"},{"id":[1000000,135689],"span":15},{"id":[1000000,135706],"span":53},{"id":[1000000,135759],"value":". "},{"id":[1000000,231102],"value":"It"},{"id":[1000000,135761],"span":3},{"id":[1000000,135766],"value":" does not meet our requirements, since we want no user input to be lost due to concurrent modifications."},{"id":[1000000,259516],"value":"\n\nResolving concurrent updates on tree structures has been studied in the context of file"},{"id":[1000000,259605],"span":6},{"id":[1000000,259611],"value":" synchronization~\\cite{Balasubramaniam:1998jh,Ramsey:2001ce"},{"id":[1000000,259672],"value":"}."},{"id":[1000000,259670],"span":1},{"id":[1000000,223395],"span":29},{"id":[1000000,223426],"span":22},{"id":[1000000,223450],"span":16},{"id":[1000000,223448],"span":1},{"id":[1000000,223424],"span":1},{"id":[1000000,223393],"span":1},{"id":[1000000,135870],"value":"\n\nFinally, systems such as Bayou~\\cite{Terry:1"},{"id":[1000000,135918],"value":"995dn} allow offline nodes to execute transactions tentatively, and "},{"id":[1000000,135992],"value":"confirm them when they are next online. This approach relies on all servers executing transactions in the same serial order, and deciding whether a transaction wa"},{"id":[1000000,136156],"value":"s successful depending on its preconditions."},{"id":[1000000,230302],"value":" "},{"id":[1000000,231057],"value":"Bayou"},{"id":[1000000,230303],"span":13},{"id":[1000000,230316],"value":" has the advantage of being able to express global invariants such as uniqueness constraints, which require serialization and cannot be expressed using CRDTs"},{"id":[1000000,231062],"value":"~\\cite{Bailis:2014th}"},{"id":[1000000,230473],"value":". "},{"id":[1000000,231198],"value":"Bayou's"},{"id":[1000000,230565],"span":3},{"id":[1000000,230568],"value":" downside is that tentative transactions may be rolled back, requiring "},{"id":[1000000,230639],"span":19},{"id":[1000000,230658],"value":"explicit"},{"id":[1000000,230666],"span":2},{"id":[1000000,230668],"value":" handl"},{"id":[1000000,231227],"value":"ing"},{"id":[1000000,230674],"span":1},{"id":[1000000,230675],"value":" "},{"id":[1000000,231239],"value":"by the application"},{"id":[1000000,230676],"span":9},{"id":[1000000,230685],"value":", whereas CRDTs are defined such that operations cannot fail after they have been performed on one replica."},{"id":[1000000,230475],"span":45},{"id":[1000000,136200],"span":17},{"id":[1000000,155418],"span":1},{"id":[1000000,136217],"span":123},{"id":[1000000,152979],"span":112},{"id":[1000000,136154],"span":1},{"id":[1000000,135986],"span":3},{"id":[1000000,135916],"span":1},{"id":[1000000,135764],"span":1},{"id":[1000000,135704],"span":1},{"id":[1000000,135397],"span":2},{"id":[1000000,135247],"span":4},{"id":[1000000,134707],"span":2},{"id":[1000000,134489],"span":2},{"id":[1000000,134377],"span":1},{"id":[1000000,134199],"span":1},{"id":[1000000,134195],"span":2},{"id":[1000000,134191],"span":2},{"id":[1000000,133811],"span":1},{"id":[1000000,133118],"span":1},{"id":[1000000,132504],"span":1},{"id":[1000000,132445],"span":1},{"id":[1000000,132323],"span":1},{"id":[1000000,131856],"span":3},{"id":[1000000,131430],"span":2},{"id":[1000000,131094],"span":1},{"id":[1000000,126829],"span":1396},{"id":[1000000,126828],"value":"\n"},{"id":[1000000,608],"value":"\n"},{"id":[1000000,136340],"value":"\n"},{"id":[1000000,609],"value":"\\section{"},{"id":[1000000,102846],"value":"Composing "},{"id":[1000000,252331],"value":"D"},{"id":[1000000,102856],"span":15},{"id":[1000000,102871],"value":"ata "},{"id":[1000000,252333],"value":"S"},{"id":[1000000,102875],"span":1},{"id":[1000000,102876],"value":"tructures"},{"id":[1000000,102844],"span":1},{"id":[1000000,618],"span":21},{"id":[1000000,639],"value":"}"},{"id":[1000000,144727],"value":"\\label{sec:composing}"},{"id":[1000000,35301],"value":"\n\n"},{"id":[1000000,103441],"value":"In this section we"},{"id":[1000000,153093],"value":" "},{"id":[1000000,153120],"value":"informally "},{"id":[1000000,153094],"value":"introduce our approach to "},{"id":[1000000,153131],"value":"collaborative editing of JSON data structures"},{"id":[1000000,239435],"value":", and "},{"id":[1000000,239485],"value":"illustrate some peculiarities of concurrent nested "},{"id":[1000000,239601],"value":"data "},{"id":[1000000,239536],"value":"structures"},{"id":[1000000,239546],"span":19},{"id":[1000000,239577],"span":24},{"id":[1000000,239565],"span":6},{"id":[1000000,239441],"span":22},{"id":[1000000,153176],"value":". A formal presentation of the algorithm follows in "},{"id":[1000000,155420],"value":"S"},{"id":[1000000,153228],"span":1},{"id":[1000000,153229],"value":"ection~\\ref{sec:semantics}."},{"id":[1000000,153091],"value":"\n\n"},{"id":[1000000,103459],"span":69},{"id":[1000000,103602],"span":1},{"id":[1000000,103528],"span":74},{"id":[1000000,103603],"span":8},{"id":[1000000,103692],"span":9},{"id":[1000000,103611],"span":56},{"id":[1000000,103671],"span":17},{"id":[1000000,103701],"span":35},{"id":[1000000,103667],"span":2},{"id":[1000000,35303],"span":87},{"id":[1000000,35394],"span":75},{"id":[1000000,35485],"span":129},{"id":[1000000,35630],"span":43},{"id":[1000000,35679],"span":156},{"id":[1000000,35837],"span":53},{"id":[1000000,55852],"span":2},{"id":[1000000,55855],"span":25},{"id":[1000000,56000],"span":46},{"id":[1000000,56050],"span":49},{"id":[1000000,56103],"span":17},{"id":[1000000,56162],"span":11},{"id":[1000000,56120],"span":10},{"id":[1000000,56146],"span":6},{"id":[1000000,56194],"span":2},{"id":[1000000,56200],"span":2},{"id":[1000000,56206],"span":1},{"id":[1000000,56202],"span":3},{"id":[1000000,56207],"span":66},{"id":[1000000,56287],"span":84},{"id":[1000000,56615],"span":3},{"id":[1000000,56580],"span":24},{"id":[1000000,56618],"span":86},{"id":[1000000,56604],"span":2},{"id":[1000000,56371],"span":1},{"id":[1000000,56488],"span":46},{"id":[1000000,56372],"span":12},{"id":[1000000,56386],"span":72},{"id":[1000000,56704],"span":64},{"id":[1000000,56534],"span":46},{"id":[1000000,56458],"span":30},{"id":[1000000,56768],"span":44},{"id":[1000000,56814],"span":108},{"id":[1000000,56963],"span":69},{"id":[1000000,57036],"span":9},{"id":[1000000,57047],"span":107},{"id":[1000000,57045],"span":1},{"id":[1000000,57032],"span":2},{"id":[1000000,56922],"span":8},{"id":[1000000,56943],"span":6},{"id":[1000000,56812],"span":1},{"id":[1000000,56384],"span":1},{"id":[1000000,56273],"span":7},{"id":[1000000,56196],"span":2},{"id":[1000000,56152],"span":1},{"id":[1000000,56130],"span":6},{"id":[1000000,56182],"span":11},{"id":[1000000,56136],"span":10},{"id":[1000000,57154],"span":213},{"id":[1000000,57369],"span":102},{"id":[1000000,57603],"span":26},{"id":[1000000,57471],"span":23},{"id":[1000000,63539],"span":1},{"id":[1000000,63592],"span":17},{"id":[1000000,63627],"span":7},{"id":[1000000,63609],"span":16},{"id":[1000000,63626],"span":1},{"id":[1000000,63540],"span":51},{"id":[1000000,63635],"span":66},{"id":[1000000,103813],"span":2},{"id":[1000000,103815],"value":"\\subsection{Concurrent "},{"id":[1000000,252335],"value":"E"},{"id":[1000000,103838],"span":1},{"id":[1000000,103839],"value":"diting "},{"id":[1000000,252337],"value":"E"},{"id":[1000000,103846],"span":1},{"id":[1000000,103847],"value":"xamples}"},{"id":[1000000,144748],"value":"\\label{sec:examples}"},{"id":[1000000,103855],"value":"\n\n\\begin{figure"},{"id":[1000000,217278],"value":"*"},{"id":[1000000,103870],"span":1},{"id":[1000000,103871],"value":"}"},{"id":[1000000,242330],"value":"[p]"},{"id":[1000000,104053],"value":"\n\\centering"},{"id":[1000000,240015],"span":2},{"id":[1000000,103888],"value":"\n\\begin{tikzpicture}"},{"id":[1000000,104801],"value":"[au"},{"id":[1000000,104806],"value":"to"},{"id":[1000000,218574],"value":",scale=0.8"},{"id":[1000000,104808],"value":"]"},{"id":[1000000,217293],"value":"\n\\path [draw"},{"id":[1000000,217324],"value":",d"},{"id":[1000000,217332],"value":"otted"},{"id":[1000000,217326],"span":3},{"id":[1000000,217307],"value":"] ("},{"id":[1000000,219792],"value":"4"},{"id":[1000000,217620],"span":1},{"id":[1000000,217310],"span":1},{"id":[1000000,217311],"value":","},{"id":[1000000,219803],"value":"-"},{"id":[1000000,217312],"value":"0"},{"id":[1000000,219804],"value":".5"},{"id":[1000000,217810],"span":2},{"id":[1000000,217313],"value":") -- ("},{"id":[1000000,219796],"value":"4"},{"id":[1000000,217618],"span":1},{"id":[1000000,217319],"span":1},{"id":[1000000,217320],"value":","},{"id":[1000000,217353],"value":"6"},{"id":[1000000,217812],"value":".5"},{"id":[1000000,217321],"span":1},{"id":[1000000,217322],"value":");"},{"id":[1000000,217354],"value":"\n\\node ("},{"id":[1000000,217368],"value":"leftR)  at (0,6) {R"},{"id":[1000000,217389],"value":"eplica "},{"id":[1000000,217398],"value":"$p"},{"id":[1000000,217400],"span":2},{"id":[1000000,217402],"value":"$:}"},{"id":[1000000,217548],"value":";"},{"id":[1000000,217405],"value":"\n\\node (rightR) at ("},{"id":[1000000,218585],"value":"8"},{"id":[1000000,217622],"span":1},{"id":[1000000,217425],"span":1},{"id":[1000000,217426],"value":",6) {Replica $"},{"id":[1000000,217555],"value":"q"},{"id":[1000000,217440],"span":3},{"id":[1000000,217443],"value":"$:}"},{"id":[1000000,217549],"value":";"},{"id":[1000000,217396],"span":1},{"id":[1000000,217387],"span":1},{"id":[1000000,217362],"span":3},{"id":[1000000,217305],"span":1},{"id":[1000000,104804],"span":1},{"id":[1000000,104204],"value":"\n\\node"},{"id":[1000000,104224],"value":" ("},{"id":[1000000,217220],"value":"left0"},{"id":[1000000,104226],"span":5},{"id":[1000000,217161],"span":1},{"id":[1000000,104231],"value":")"},{"id":[1000000,104404],"span":1},{"id":[1000000,104232],"value":" "},{"id":[1000000,217351],"value":" "},{"id":[1000000,104233],"value":"at ("},{"id":[1000000,217160],"value":"0"},{"id":[1000000,104237],"span":1},{"id":[1000000,104238],"value":","},{"id":[1000000,217350],"value":"5"},{"id":[1000000,217280],"span":1},{"id":[1000000,108324],"span":1},{"id":[1000000,105176],"span":1},{"id":[1000000,104983],"span":1},{"id":[1000000,104406],"span":1},{"id":[1000000,104239],"span":1},{"id":[1000000,104240],"value":")"},{"id":[1000000,217446],"value":" [rectangle,draw]"},{"id":[1000000,104210],"span":7},{"id":[1000000,104003],"span":6},{"id":[1000000,104032],"span":1},{"id":[1000000,104009],"span":3},{"id":[1000000,104065],"span":1},{"id":[1000000,104012],"span":7},{"id":[1000000,104019],"value":" {"},{"id":[1000000,104075],"value":"\\"},{"id":[1000000,104076],"span":5},{"id":[1000000,104081],"value":"{"},{"id":[1000000,217011],"value":"``"},{"id":[1000000,104082],"span":1},{"id":[1000000,104678],"value":"key"},{"id":[1000000,217014],"value":"''"},{"id":[1000000,104083],"span":6},{"id":[1000000,104089],"value":":"},{"id":[1000000,217016],"value":" "},{"id":[1000000,217020],"value":"``"},{"id":[1000000,217018],"span":1},{"id":[1000000,104090],"span":2},{"id":[1000000,104092],"value":"A"},{"id":[1000000,217023],"value":"''\\"},{"id":[1000000,104093],"span":1},{"id":[1000000,104094],"value":"}"},{"id":[1000000,104095],"span":1},{"id":[1000000,104073],"span":1},{"id":[1000000,104021],"span":5},{"id":[1000000,104026],"value":"}"},{"id":[1000000,104280],"value":";"},{"id":[1000000,217163],"value":"\n\\node ("},{"id":[1000000,217231],"value":"right"},{"id":[1000000,217238],"value":"0"},{"id":[1000000,217236],"span":1},{"id":[1000000,217171],"span":6},{"id":[1000000,217177],"value":") at ("},{"id":[1000000,218587],"value":"8"},{"id":[1000000,217624],"span":1},{"id":[1000000,217183],"span":1},{"id":[1000000,217184],"value":","},{"id":[1000000,217348],"value":"5"},{"id":[1000000,217346],"span":1},{"id":[1000000,217282],"span":1},{"id":[1000000,217185],"span":1},{"id":[1000000,217186],"value":")"},{"id":[1000000,217463],"value":" [rectangle,draw]"},{"id":[1000000,217187],"value":" {\\{``key''"},{"id":[1000000,217200],"value":": ``A''"},{"id":[1000000,217209],"value":"\\}};"},{"id":[1000000,217207],"span":1},{"id":[1000000,217198],"span":1},{"id":[1000000,104096],"value":"\n"},{"id":[1000000,104258],"value":"\\node (left"},{"id":[1000000,104402],"value":"1"},{"id":[1000000,104269],"value":")"},{"id":[1000000,104097],"value":"  "},{"id":[1000000,104273],"value":"at"},{"id":[1000000,104027],"span":3},{"id":[1000000,104030],"value":" ("},{"id":[1000000,104033],"value":"0,"},{"id":[1000000,217344],"value":"3"},{"id":[1000000,217286],"span":1},{"id":[1000000,105172],"span":1},{"id":[1000000,105181],"span":2},{"id":[1000000,105177],"span":2},{"id":[1000000,104408],"span":1},{"id":[1000000,104128],"span":2},{"id":[1000000,104067],"span":1},{"id":[1000000,104035],"span":2},{"id":[1000000,104038],"value":")"},{"id":[1000000,217480],"value":" [rectangle,draw]"},{"id":[1000000,104039],"value":" "},{"id":[1000000,104040],"span":5},{"id":[1000000,104045],"value":"{"},{"id":[1000000,104104],"value":"\\"},{"id":[1000000,104105],"span":5},{"id":[1000000,104110],"value":"{"},{"id":[1000000,217033],"value":"``"},{"id":[1000000,104111],"span":1},{"id":[1000000,104686],"value":"key"},{"id":[1000000,217036],"value":"''"},{"id":[1000000,104112],"span":6},{"id":[1000000,104118],"value":":"},{"id":[1000000,217038],"value":" "},{"id":[1000000,217040],"value":"``"},{"id":[1000000,104119],"span":1},{"id":[1000000,104122],"span":1},{"id":[1000000,104123],"value":"B"},{"id":[1000000,217043],"value":"''\\"},{"id":[1000000,104124],"span":1},{"id":[1000000,104125],"value":"}"},{"id":[1000000,104126],"span":1},{"id":[1000000,104120],"span":1},{"id":[1000000,104046],"span":5},{"id":[1000000,104051],"value":"};"},{"id":[1000000,104323],"value":"\n\\node (right"},{"id":[1000000,104403],"value":"1"},{"id":[1000000,104336],"value":") at ("},{"id":[1000000,218589],"value":"8"},{"id":[1000000,217626],"span":1},{"id":[1000000,104342],"span":1},{"id":[1000000,104343],"value":","},{"id":[1000000,217342],"value":"3"},{"id":[1000000,217290],"span":1},{"id":[1000000,105174],"span":1},{"id":[1000000,105183],"span":2},{"id":[1000000,104410],"span":1},{"id":[1000000,104344],"span":1},{"id":[1000000,104345],"value":")"},{"id":[1000000,217497],"value":" [rectangle,draw]"},{"id":[1000000,104346],"value":" {\\"},{"id":[1000000,104349],"span":5},{"id":[1000000,104354],"value":"{"},{"id":[1000000,217060],"value":"``"},{"id":[1000000,104355],"span":1},{"id":[1000000,104694],"value":"key"},{"id":[1000000,217057],"value":"''"},{"id":[1000000,104356],"span":6},{"id":[1000000,104362],"value":":"},{"id":[1000000,217053],"value":" ``"},{"id":[1000000,104363],"span":2},{"id":[1000000,104365],"value":"C"},{"id":[1000000,217050],"value":"''"},{"id":[1000000,104366],"span":1},{"id":[1000000,217048],"value":"\\"},{"id":[1000000,104367],"value":"}"},{"id":[1000000,104368],"span":1},{"id":[1000000,104369],"value":"};"},{"id":[1000000,104411],"value":"\n\\node (left2)  at (0,"},{"id":[1000000,219784],"value":"0"},{"id":[1000000,219785],"span":2},{"id":[1000000,217340],"span":1},{"id":[1000000,104439],"span":1},{"id":[1000000,104440],"value":")"},{"id":[1000000,217514],"value":" [rectangle,draw]"},{"id":[1000000,104441],"value":" {\\"},{"id":[1000000,104444],"span":5},{"id":[1000000,104449],"value":"{"},{"id":[1000000,217078],"value":"``"},{"id":[1000000,104450],"span":1},{"id":[1000000,104702],"value":"key"},{"id":[1000000,217088],"value":"''"},{"id":[1000000,217084],"span":2},{"id":[1000000,104451],"span":6},{"id":[1000000,104457],"value":":"},{"id":[1000000,217098],"value":" "},{"id":[1000000,217261],"value":"\\"},{"id":[1000000,104464],"span":1},{"id":[1000000,104465],"value":"{"},{"id":[1000000,217100],"value":"``"},{"id":[1000000,104466],"span":1},{"id":[1000000,104467],"value":"B"},{"id":[1000000,217106],"value":"''"},{"id":[1000000,104468],"span":1},{"id":[1000000,104469],"value":","},{"id":[1000000,217113],"value":" ``"},{"id":[1000000,104470],"span":1},{"id":[1000000,104471],"value":"C"},{"id":[1000000,217123],"value":"''\\"},{"id":[1000000,104472],"span":1},{"id":[1000000,104473],"value":"}"},{"id":[1000000,217126],"value":"\\"},{"id":[1000000,104474],"value":"}"},{"id":[1000000,104475],"span":1},{"id":[1000000,104476],"value":"};\n\\node (right2) at ("},{"id":[1000000,218591],"value":"8"},{"id":[1000000,217628],"span":1},{"id":[1000000,104498],"span":1},{"id":[1000000,104499],"value":","},{"id":[1000000,219788],"value":"0"},{"id":[1000000,219789],"span":2},{"id":[1000000,217338],"span":1},{"id":[1000000,104500],"span":1},{"id":[1000000,104501],"value":")"},{"id":[1000000,217531],"value":" [rectangle,draw]"},{"id":[1000000,104502],"value":" {\\"},{"id":[1000000,104505],"span":5},{"id":[1000000,104510],"value":"{"},{"id":[1000000,217092],"value":"``"},{"id":[1000000,217081],"span":2},{"id":[1000000,104511],"span":1},{"id":[1000000,104710],"value":"key"},{"id":[1000000,217095],"value":"''"},{"id":[1000000,104512],"span":6},{"id":[1000000,104518],"value":":"},{"id":[1000000,217097],"value":" "},{"id":[1000000,217262],"value":"\\"},{"id":[1000000,104519],"span":1},{"id":[1000000,104520],"value":"{"},{"id":[1000000,217103],"value":"``"},{"id":[1000000,104521],"span":1},{"id":[1000000,104522],"value":"B"},{"id":[1000000,217109],"value":"''"},{"id":[1000000,104523],"span":1},{"id":[1000000,104524],"value":","},{"id":[1000000,217116],"value":" ``"},{"id":[1000000,104525],"span":1},{"id":[1000000,104526],"value":"C"},{"id":[1000000,217120],"value":"''"},{"id":[1000000,217130],"value":"\\"},{"id":[1000000,104527],"span":1},{"id":[1000000,104528],"value":"}"},{"id":[1000000,217129],"value":"\\"},{"id":[1000000,104529],"value":"}"},{"id":[1000000,104530],"span":1},{"id":[1000000,104531],"value":"};"},{"id":[1000000,217715],"value":"\n\\node (comms)  at ("},{"id":[1000000,218593],"value":"4"},{"id":[1000000,217735],"span":1},{"id":[1000000,217736],"value":","},{"id":[1000000,219807],"value":"1."},{"id":[1000000,219985],"value":"6"},{"id":[1000000,219809],"span":1},{"id":[1000000,217737],"span":2},{"id":[1000000,219774],"span":1},{"id":[1000000,217787],"span":1},{"id":[1000000,217739],"span":1},{"id":[1000000,217740],"value":")"},{"id":[1000000,217798],"value":" [text=blue]"},{"id":[1000000,217741],"value":" {"},{"id":[1000000,217769],"value":"\\footnotesize "},{"id":[1000000,217743],"value":"network"},{"id":[1000000,217785],"value":" "},{"id":[1000000,217766],"span":2},{"id":[1000000,217750],"span":1},{"id":[1000000,217751],"value":"communication};"},{"id":[1000000,104458],"span":3},{"id":[1000000,104437],"span":1},{"id":[1000000,104433],"span":2},{"id":[1000000,104281],"value":"\n\\draw ["},{"id":[1000000,105193],"value":"thick,"},{"id":[1000000,105191],"span":1},{"id":[1000000,105185],"span":3},{"id":[1000000,104289],"value":"->] ("},{"id":[1000000,217245],"value":"left0"},{"id":[1000000,104294],"span":5},{"id":[1000000,217213],"span":1},{"id":[1000000,104299],"value":")"},{"id":[1000000,104791],"value":" "},{"id":[1000000,104950],"value":"to"},{"id":[1000000,104792],"span":4},{"id":[1000000,104796],"value":" node"},{"id":[1000000,104952],"value":" ["},{"id":[1000000,108302],"value":"left"},{"id":[1000000,218763],"value":","},{"id":[1000000,218764],"span":1},{"id":[1000000,218765],"value":"inner sep=8pt"},{"id":[1000000,108333],"span":11},{"id":[1000000,108376],"span":3},{"id":[1000000,108370],"span":3},{"id":[1000000,108344],"span":3},{"id":[1000000,108325],"span":4},{"id":[1000000,104954],"span":5},{"id":[1000000,104968],"span":7},{"id":[1000000,104959],"value":"]"},{"id":[1000000,104300],"span":1},{"id":[1000000,104778],"span":4},{"id":[1000000,104782],"value":" {"},{"id":[1000000,104984],"span":14},{"id":[1000000,104843],"span":1},{"id":[1000000,104810],"span":1},{"id":[1000000,104877],"span":4},{"id":[1000000,104848],"span":4},{"id":[1000000,104811],"span":7},{"id":[1000000,104818],"value":"do"},{"id":[1000000,234316],"value":"c"},{"id":[1000000,234318],"value":".get("},{"id":[1000000,104820],"span":1},{"id":[1000000,104852],"span":1},{"id":[1000000,104840],"span":1},{"id":[1000000,104821],"span":1},{"id":[1000000,104854],"span":6},{"id":[1000000,104822],"value":"``key''"},{"id":[1000000,234324],"value":")"},{"id":[1000000,104861],"span":1},{"id":[1000000,104841],"span":1},{"id":[1000000,104829],"span":1},{"id":[1000000,104830],"value":" := "},{"id":[1000000,104864],"span":6},{"id":[1000000,104834],"value":"``B'';"},{"id":[1000000,104870],"span":1},{"id":[1000000,104863],"span":1},{"id":[1000000,104784],"span":2},{"id":[1000000,104842],"value":"}"},{"id":[1000000,104742],"span":2},{"id":[1000000,104748],"span":14},{"id":[1000000,104301],"span":2},{"id":[1000000,104303],"value":" ("},{"id":[1000000,104305],"span":6},{"id":[1000000,104311],"value":"left"},{"id":[1000000,104546],"value":"1"},{"id":[1000000,104315],"value":")"},{"id":[1000000,104733],"value":";"},{"id":[1000000,104316],"span":1},{"id":[1000000,104371],"value":"\n"},{"id":[1000000,104734],"value":"\\draw "},{"id":[1000000,104729],"value":"["},{"id":[1000000,105199],"value":"thick,"},{"id":[1000000,104730],"value":"->]"},{"id":[1000000,104372],"span":10},{"id":[1000000,104382],"value":" ("},{"id":[1000000,217255],"value":"right0"},{"id":[1000000,104384],"span":5},{"id":[1000000,104389],"value":") "},{"id":[1000000,104944],"value":"to"},{"id":[1000000,104883],"span":4},{"id":[1000000,104887],"value":" node"},{"id":[1000000,104960],"value":" ["},{"id":[1000000,108318],"value":"right"},{"id":[1000000,218779],"value":",inner sep=8pt"},{"id":[1000000,108347],"span":11},{"id":[1000000,108382],"span":3},{"id":[1000000,108364],"span":3},{"id":[1000000,108358],"span":3},{"id":[1000000,104962],"span":5},{"id":[1000000,104975],"span":7},{"id":[1000000,104967],"value":"]"},{"id":[1000000,104892],"value":" {"},{"id":[1000000,104998],"span":14},{"id":[1000000,104894],"span":7},{"id":[1000000,104901],"value":"doc"},{"id":[1000000,234326],"value":".get("},{"id":[1000000,104904],"span":8},{"id":[1000000,104912],"value":"``key''"},{"id":[1000000,234332],"value":")"},{"id":[1000000,104919],"span":2},{"id":[1000000,104921],"value":" := "},{"id":[1000000,104925],"span":6},{"id":[1000000,104931],"value":"``C'';"},{"id":[1000000,104937],"span":2},{"id":[1000000,104939],"value":"}"},{"id":[1000000,104746],"span":2},{"id":[1000000,104391],"span":2},{"id":[1000000,104393],"value":" (right"},{"id":[1000000,104547],"value":"1"},{"id":[1000000,104400],"value":");"},{"id":[1000000,104533],"value":"\n\\draw ["},{"id":[1000000,105205],"value":"thick,"},{"id":[1000000,104541],"value":"->] ("},{"id":[1000000,104548],"value":"left1) "},{"id":[1000000,217658],"value":"--"},{"id":[1000000,105014],"span":7},{"id":[1000000,105021],"value":" "},{"id":[1000000,105022],"span":29},{"id":[1000000,104555],"span":3},{"id":[1000000,104558],"value":"(left2);\n\\draw ["},{"id":[1000000,105211],"value":"thick"},{"id":[1000000,217263],"value":",dashed"},{"id":[1000000,105216],"value":","},{"id":[1000000,217788],"value":"blue,"},{"id":[1000000,104576],"value":"->] (left1"},{"id":[1000000,217693],"value":".south"},{"id":[1000000,217699],"span":5},{"id":[1000000,104586],"value":") "},{"id":[1000000,219712],"value":" to"},{"id":[1000000,219721],"value":" [out="},{"id":[1000000,219777],"value":"27"},{"id":[1000000,219733],"span":2},{"id":[1000000,219735],"value":"0"},{"id":[1000000,219759],"value":",in=135"},{"id":[1000000,219736],"value":"]"},{"id":[1000000,219727],"span":3},{"id":[1000000,219715],"span":1},{"id":[1000000,217662],"span":2},{"id":[1000000,105053],"span":2},{"id":[1000000,104588],"span":2},{"id":[1000000,104590],"value":" "},{"id":[1000000,104593],"value":"(right"},{"id":[1000000,104603],"value":"2"},{"id":[1000000,217629],"value":".north "},{"id":[1000000,217681],"value":"west"},{"id":[1000000,217636],"span":4},{"id":[1000000,104604],"value":");\n\\draw ["},{"id":[1000000,105217],"value":"thick,"},{"id":[1000000,217270],"value":"dashed,"},{"id":[1000000,217793],"value":"blue,"},{"id":[1000000,104614],"value":"->] (right1"},{"id":[1000000,217704],"value":".south"},{"id":[1000000,217710],"span":5},{"id":[1000000,104625],"value":") "},{"id":[1000000,219719],"value":"to"},{"id":[1000000,219747],"value":" [out"},{"id":[1000000,219754],"value":"="},{"id":[1000000,219781],"value":"27"},{"id":[1000000,219755],"span":2},{"id":[1000000,219757],"value":"0"},{"id":[1000000,219766],"value":",in=45"},{"id":[1000000,219758],"value":"]"},{"id":[1000000,219772],"value":" "},{"id":[1000000,219752],"span":1},{"id":[1000000,217666],"span":2},{"id":[1000000,105057],"span":38},{"id":[1000000,104627],"span":2},{"id":[1000000,104629],"value":" (left2"},{"id":[1000000,217640],"value":".north "},{"id":[1000000,217689],"value":"east"},{"id":[1000000,217647],"span":4},{"id":[1000000,104636],"value":");\n\\draw ["},{"id":[1000000,105223],"value":"thick,"},{"id":[1000000,104646],"value":"->] (right"},{"id":[1000000,104658],"value":"1) "},{"id":[1000000,217675],"value":"--"},{"id":[1000000,105097],"span":7},{"id":[1000000,105104],"value":" "},{"id":[1000000,105105],"span":30},{"id":[1000000,104661],"span":3},{"id":[1000000,104664],"value":"(right2);"},{"id":[1000000,217291],"span":1},{"id":[1000000,104656],"span":1},{"id":[1000000,104599],"span":2},{"id":[1000000,104591],"span":1},{"id":[1000000,104574],"span":1},{"id":[1000000,103908],"value":"\n\\end{tikzpicture}"},{"id":[1000000,103928],"value":"\n\\caption{Concurrent assignment to "},{"id":[1000000,223329],"value":"the register at doc"},{"id":[1000000,241099],"value":".get("},{"id":[1000000,223348],"span":1},{"id":[1000000,223349],"value":"``key''"},{"id":[1000000,241105],"value":")"},{"id":[1000000,223356],"span":1},{"id":[1000000,223357],"value":" by re"},{"id":[1000000,223375],"value":"plicas $p$ and $q$"},{"id":[1000000,223363],"span":6},{"id":[1000000,103963],"span":10},{"id":[1000000,223277],"span":1},{"id":[1000000,223314],"span":3},{"id":[1000000,223278],"span":18},{"id":[1000000,154744],"value":"."},{"id":[1000000,103973],"value":"}\\label"},{"id":[1000000,103982],"value":"{fig:register-assign}"},{"id":[1000000,103980],"span":1},{"id":[1000000,103926],"span":1},{"id":[1000000,103872],"value":"\n\\end{figure"},{"id":[1000000,217277],"value":"*"},{"id":[1000000,103884],"span":1},{"id":[1000000,103885],"value":"}"},{"id":[1000000,106194],"value":"\n"},{"id":[1000000,239794],"value":"\n"},{"id":[1000000,239796],"value":"The sequential semantics of editing a JSON data structure are well-known, and the semantics of concurrently editing a flat map or list data structure have been thoroughly explored in the literature (see Section~\\ref{"},{"id":[1000000,240019],"value":"sec:related"},{"id":[1000000,240012],"value":"})."},{"id":[1000000,240030],"value":" However, "},{"id":[1000000,240059],"value":"when"},{"id":[1000000,239795],"span":1},{"id":[1000000,239657],"span":1},{"id":[1000000,239702],"span":17},{"id":[1000000,239719],"value":" defining a "},{"id":[1000000,239741],"value":"CRDT for JSON data"},{"id":[1000000,240063],"value":", difficulties arise"},{"id":[1000000,239759],"span":3},{"id":[1000000,239762],"value":" due to the interaction"},{"id":[1000000,240339],"value":"s"},{"id":[1000000,239785],"value":" between "},{"id":[1000000,240086],"value":"concurrency and nested data structures."},{"id":[1000000,240125],"span":1},{"id":[1000000,239731],"span":5},{"id":[1000000,239658],"value":"\n"},{"id":[1000000,106195],"value":"\n"},{"id":[1000000,240127],"value":"In th"},{"id":[1000000,240142],"value":"e following examples we "},{"id":[1000000,240186],"value":"show "},{"id":[1000000,240166],"span":10},{"id":[1000000,240132],"span":5},{"id":[1000000,153634],"span":1},{"id":[1000000,106196],"span":99},{"id":[1000000,106297],"span":25},{"id":[1000000,106322],"value":"some"},{"id":[1000000,240205],"value":" situations that "},{"id":[1000000,240343],"value":"m"},{"id":[1000000,240348],"value":"ight"},{"id":[1000000,240344],"span":2},{"id":[1000000,240222],"span":3},{"id":[1000000,240225],"value":" occur"},{"id":[1000000,106326],"span":29},{"id":[1000000,153635],"value":" when JSON documents are concurrently modified, "},{"id":[1000000,240284],"span":4},{"id":[1000000,240288],"value":"demonstrate how they are handled "},{"id":[1000000,240323],"value":"by our algorithm"},{"id":[1000000,245787],"value":", and explain the rationale for our design decisions"},{"id":[1000000,240321],"span":1},{"id":[1000000,153683],"span":24},{"id":[1000000,106355],"value":"."},{"id":[1000000,221313],"value":" In all examples we assume "},{"id":[1000000,221943],"value":"two "},{"id":[1000000,221340],"span":21},{"id":[1000000,221363],"span":5},{"id":[1000000,221370],"span":6},{"id":[1000000,221376],"value":"replicas"},{"id":[1000000,221947],"value":","},{"id":[1000000,221384],"span":1},{"id":[1000000,221385],"value":" "},{"id":[1000000,221396],"value":"labelled"},{"id":[1000000,221404],"span":3},{"id":[1000000,221407],"value":" $p$ "},{"id":[1000000,221418],"value":"(drawn on the left"},{"id":[1000000,225421],"value":"-"},{"id":[1000000,221436],"span":1},{"id":[1000000,221437],"value":"hand si"},{"id":[1000000,221450],"value":"de) and $q$ (right"},{"id":[1000000,225422],"value":"-"},{"id":[1000000,221468],"span":1},{"id":[1000000,221469],"value":"hand s"},{"id":[1000000,221485],"value":"ide)"},{"id":[1000000,222646],"value":". "},{"id":[1000000,222651],"value":"Lo"},{"id":[1000000,222395],"span":7},{"id":[1000000,222428],"span":2},{"id":[1000000,222430],"value":"cal state"},{"id":[1000000,222443],"value":" "},{"id":[1000000,222653],"value":"for a replica is "},{"id":[1000000,222444],"value":"drawn in boxe"},{"id":[1000000,222459],"value":"s"},{"id":[1000000,240352],"value":","},{"id":[1000000,222460],"value":" and modifications "},{"id":[1000000,222578],"value":"to local stat"},{"id":[1000000,222593],"value":"e"},{"id":[1000000,240353],"value":" are"},{"id":[1000000,222594],"value":" "},{"id":[1000000,222591],"span":1},{"id":[1000000,222479],"value":"shown with labelled s"},{"id":[1000000,222504],"value":"olid arrows"},{"id":[1000000,222599],"value":";"},{"id":[1000000,222515],"span":4},{"id":[1000000,222519],"value":" time run"},{"id":[1000000,222604],"value":"s"},{"id":[1000000,222528],"span":4},{"id":[1000000,222532],"value":" down the "},{"id":[1000000,222552],"value":"page."},{"id":[1000000,222542],"span":5},{"id":[1000000,222500],"span":2},{"id":[1000000,222457],"span":1},{"id":[1000000,222439],"span":2},{"id":[1000000,222402],"span":13},{"id":[1000000,221489],"span":1},{"id":[1000000,221641],"span":21},{"id":[1000000,221664],"span":44},{"id":[1000000,221720],"span":19},{"id":[1000000,221765],"span":14},{"id":[1000000,221739],"span":13},{"id":[1000000,221708],"span":6},{"id":[1000000,221662],"span":1},{"id":[1000000,221490],"value":" "},{"id":[1000000,222148],"value":"Since replicas "},{"id":[1000000,222570],"value":"only "},{"id":[1000000,222163],"value":"mutate"},{"id":[1000000,222569],"value":" "},{"id":[1000000,222169],"span":1},{"id":[1000000,222206],"span":11},{"id":[1000000,222217],"value":"local state"},{"id":[1000000,222576],"value":","},{"id":[1000000,223178],"value":" we make"},{"id":[1000000,222605],"value":" communication"},{"id":[1000000,222914],"value":" "},{"id":[1000000,223186],"value":"of state c"},{"id":[1000000,223200],"value":"hanges "},{"id":[1000000,223196],"span":2},{"id":[1000000,222915],"value":"between replicas"},{"id":[1000000,222619],"span":17},{"id":[1000000,222885],"span":14},{"id":[1000000,222913],"span":1},{"id":[1000000,222899],"span":7},{"id":[1000000,222636],"span":3},{"id":[1000000,222639],"value":" "},{"id":[1000000,222670],"value":"ex"},{"id":[1000000,222688],"value":"plicit in our model"},{"id":[1000000,223240],"value":"."},{"id":[1000000,222707],"value":" "},{"id":[1000000,223252],"value":"Net"},{"id":[1000000,223257],"value":"work communication"},{"id":[1000000,223255],"span":1},{"id":[1000000,223244],"span":4},{"id":[1000000,222708],"span":3},{"id":[1000000,222711],"value":" is "},{"id":[1000000,222737],"value":"depicted with dashed arrows."},{"id":[1000000,222765],"span":2},{"id":[1000000,222715],"span":11},{"id":[1000000,222678],"span":5},{"id":[1000000,222672],"span":3},{"id":[1000000,222577],"span":1},{"id":[1000000,222228],"span":2},{"id":[1000000,222250],"span":9},{"id":[1000000,222263],"span":23},{"id":[1000000,222294],"span":19},{"id":[1000000,222315],"span":1},{"id":[1000000,222320],"span":44},{"id":[1000000,222378],"span":16},{"id":[1000000,222364],"span":7},{"id":[1000000,222316],"span":2},{"id":[1000000,222313],"span":1},{"id":[1000000,222286],"span":1},{"id":[1000000,222291],"span":1},{"id":[1000000,222287],"span":2},{"id":[1000000,222259],"span":2},{"id":[1000000,222234],"span":8},{"id":[1000000,222230],"span":2},{"id":[1000000,222170],"span":1},{"id":[1000000,222173],"span":16},{"id":[1000000,222171],"span":1},{"id":[1000000,221491],"span":9},{"id":[1000000,221542],"span":10},{"id":[1000000,222051],"span":3},{"id":[1000000,222096],"span":15},{"id":[1000000,222054],"span":15},{"id":[1000000,222071],"span":5},{"id":[1000000,222069],"span":1},{"id":[1000000,221552],"span":7},{"id":[1000000,221565],"span":3},{"id":[1000000,221879],"span":8},{"id":[1000000,221568],"span":1},{"id":[1000000,221577],"span":19},{"id":[1000000,221598],"span":35},{"id":[1000000,221637],"span":4},{"id":[1000000,221887],"span":23},{"id":[1000000,221633],"span":2},{"id":[1000000,221596],"span":1},{"id":[1000000,221569],"span":4},{"id":[1000000,221559],"span":3},{"id":[1000000,221500],"span":21},{"id":[1000000,221481],"span":2},{"id":[1000000,221475],"span":3},{"id":[1000000,221444],"span":3},{"id":[1000000,221412],"span":3},{"id":[1000000,221386],"span":5},{"id":[1000000,221368],"span":1},{"id":[1000000,221361],"span":1},{"id":[1000000,221311],"span":1},{"id":[1000000,106356],"value":"\n\nOur first example is shown in Figure~\\ref{fig:register-assign}."},{"id":[1000000,220967],"span":4},{"id":[1000000,221053],"span":2},{"id":[1000000,221063],"span":2},{"id":[1000000,221067],"span":15},{"id":[1000000,221092],"span":6},{"id":[1000000,221201],"span":7},{"id":[1000000,221098],"span":20},{"id":[1000000,221132],"span":4},{"id":[1000000,221140],"span":2},{"id":[1000000,221150],"span":46},{"id":[1000000,221142],"span":4},{"id":[1000000,221136],"span":2},{"id":[1000000,221118],"span":7},{"id":[1000000,221082],"span":5},{"id":[1000000,221065],"span":1},{"id":[1000000,221055],"span":4},{"id":[1000000,221027],"span":13},{"id":[1000000,220971],"span":28},{"id":[1000000,106421],"value":" "},{"id":[1000000,106444],"value":"In a"},{"id":[1000000,106422],"span":1},{"id":[1000000,106423],"value":" document that maps "},{"id":[1000000,106448],"value":"``key'' to"},{"id":[1000000,107058],"value":" a register with value"},{"id":[1000000,106458],"value":" ``A'',"},{"id":[1000000,106465],"span":4},{"id":[1000000,106469],"value":" replica"},{"id":[1000000,223156],"value":" $p$"},{"id":[1000000,106477],"value":" sets the value of the "},{"id":[1000000,106612],"value":"register"},{"id":[1000000,106500],"span":3},{"id":[1000000,106503],"value":" to ``B'', while "},{"id":[1000000,223167],"value":"replica $q$"},{"id":[1000000,106520],"span":7},{"id":[1000000,106527],"value":" concurrently sets it to ``C''. As the replicas subsequently exchange edits"},{"id":[1000000,222931],"value":" via network communication"},{"id":[1000000,106602],"value":", they "},{"id":[1000000,106620],"value":"detect the conflict. Since we "},{"id":[1000000,106676],"value":"do not want to simply discard one of the edits, and the strings ``B'' and ``C'' cannot"},{"id":[1000000,180969],"value":" be"},{"id":[1000000,106762],"value":" meaningfully "},{"id":[1000000,106776],"span":3},{"id":[1000000,106779],"value":"merged, the system must preserve both concurrent updates. This datatype"},{"id":[1000000,106852],"value":" is known as a \\emph{multi-value register}: although a replica can only assign a"},{"id":[1000000,106934],"value":" single value to the register, "},{"id":[1000000,106989],"value":"reading the register may return a set of "},{"id":[1000000,109504],"value":"multiple values that were "},{"id":[1000000,107030],"value":"concurrently written"},{"id":[1000000,107050],"span":7},{"id":[1000000,107057],"value":"."},{"id":[1000000,240360],"value":"\n\nA multi"},{"id":[1000000,240371],"value":"-value register is hardly an impressive CRDT, since it does not actually perform any conflict resolution. "},{"id":[1000000,240485],"value":"We use it only for primitive values for which no "},{"id":[1000000,240551],"value":"automa"},{"id":[1000000,240559],"value":"tic"},{"id":[1000000,240557],"span":1},{"id":[1000000,240534],"span":5},{"id":[1000000,240539],"value":" merge "},{"id":[1000000,240562],"value":"function is defined. Other CRDTs could be substituted in its place: for example, a cou"},{"id":[1000000,240650],"value":"nter CRDT for a number that can only be incremented and decremented, or an ordered list of characters for a collaboratively editable string (see also Figure~\\ref{fig:text-edit})."},{"id":[1000000,240828],"span":1},{"id":[1000000,240648],"span":1},{"id":[1000000,240477],"span":4},{"id":[1000000,240369],"span":1},{"id":[1000000,114063],"span":1},{"id":[1000000,240357],"span":2},{"id":[1000000,114064],"span":108},{"id":[1000000,114186],"span":1},{"id":[1000000,114172],"span":14},{"id":[1000000,114187],"span":10},{"id":[1000000,222957],"span":51},{"id":[1000000,223012],"span":3},{"id":[1000000,223019],"span":2},{"id":[1000000,223107],"span":32},{"id":[1000000,223021],"span":5},{"id":[1000000,223032],"span":15},{"id":[1000000,223151],"span":1},{"id":[1000000,223047],"span":7},{"id":[1000000,223026],"span":3},{"id":[1000000,223015],"span":2},{"id":[1000000,223008],"span":2},{"id":[1000000,114197],"span":7},{"id":[1000000,223058],"span":3},{"id":[1000000,114204],"span":5},{"id":[1000000,114232],"span":6},{"id":[1000000,223061],"span":3},{"id":[1000000,223068],"span":3},{"id":[1000000,223073],"span":7},{"id":[1000000,223071],"span":1},{"id":[1000000,223064],"span":2},{"id":[1000000,114238],"span":3},{"id":[1000000,114209],"span":23},{"id":[1000000,107080],"value":"\n\n"},{"id":[1000000,107084],"value":"\\begin{figure*}"},{"id":[1000000,242327],"value":"[p]"},{"id":[1000000,107113],"value":"\n\\centering\n\\begin{tikzpicture}[auto"},{"id":[1000000,218564],"value":",scale=0.8"},{"id":[1000000,107149],"value":"]"},{"id":[1000000,218513],"value":"\n\\path [draw,dotted] ("},{"id":[1000000,218595],"value":"4"},{"id":[1000000,218535],"span":1},{"id":[1000000,218536],"value":",-"},{"id":[1000000,218601],"value":"1"},{"id":[1000000,218538],"span":3},{"id":[1000000,218541],"value":") -- ("},{"id":[1000000,218597],"value":"4"},{"id":[1000000,218547],"span":1},{"id":[1000000,218548],"value":","},{"id":[1000000,234695],"value":"8"},{"id":[1000000,219709],"span":1},{"id":[1000000,218603],"span":3},{"id":[1000000,218549],"span":1},{"id":[1000000,218550],"value":");"},{"id":[1000000,107310],"value":"\n\\node ("},{"id":[1000000,218166],"value":"left0"},{"id":[1000000,107318],"span":5},{"id":[1000000,107323],"value":") "},{"id":[1000000,218200],"value":" "},{"id":[1000000,107391],"span":1},{"id":[1000000,107325],"value":"at ("},{"id":[1000000,218172],"value":"0"},{"id":[1000000,107781],"span":1},{"id":[1000000,107329],"span":1},{"id":[1000000,107330],"value":","},{"id":[1000000,235073],"value":"7.5"},{"id":[1000000,234693],"span":1},{"id":[1000000,219707],"span":1},{"id":[1000000,218561],"span":1},{"id":[1000000,108948],"span":1},{"id":[1000000,108703],"span":1},{"id":[1000000,107331],"span":1},{"id":[1000000,107332],"value":")"},{"id":[1000000,218342],"value":" [rectangle,draw]"},{"id":[1000000,107333],"value":" {\\"},{"id":[1000000,107336],"span":5},{"id":[1000000,107341],"value":"{"},{"id":[1000000,218110],"value":"``"},{"id":[1000000,107342],"span":1},{"id":[1000000,107343],"value":"colors"},{"id":[1000000,218113],"value":"''"},{"id":[1000000,107349],"span":1},{"id":[1000000,107350],"value":": "},{"id":[1000000,218115],"value":"\\"},{"id":[1000000,107352],"value":"{"},{"id":[1000000,218107],"value":"``"},{"id":[1000000,107353],"span":1},{"id":[1000000,107354],"value":"blue"},{"id":[1000000,218104],"value":"''"},{"id":[1000000,107358],"span":1},{"id":[1000000,107359],"value":": "},{"id":[1000000,218101],"value":"``"},{"id":[1000000,218121],"value":"\\"},{"id":[1000000,107361],"span":1},{"id":[1000000,107362],"value":"#0000ff"},{"id":[1000000,218098],"value":"''"},{"id":[1000000,107369],"span":1},{"id":[1000000,218096],"value":"\\"},{"id":[1000000,107370],"value":"}"},{"id":[1000000,218095],"value":"\\"},{"id":[1000000,107371],"value":"}"},{"id":[1000000,107372],"span":1},{"id":[1000000,107373],"value":"};"},{"id":[1000000,218173],"value":"\n\\node (right0) at ("},{"id":[1000000,218607],"value":"8"},{"id":[1000000,218506],"span":1},{"id":[1000000,218193],"span":1},{"id":[1000000,218194],"value":","},{"id":[1000000,235077],"value":"7.5"},{"id":[1000000,234691],"span":1},{"id":[1000000,219705],"span":1},{"id":[1000000,218559],"span":1},{"id":[1000000,218195],"span":1},{"id":[1000000,218196],"value":")"},{"id":[1000000,218359],"value":" [rectangle,draw]"},{"id":[1000000,218197],"value":" {"},{"id":[1000000,218202],"value":"\\{``colors'': \\{``blue'': ``\\#0000ff''\\}\\}};"},{"id":[1000000,218199],"span":1},{"id":[1000000,107375],"value":"\n\\node"},{"id":[1000000,107485],"value":" [matrix]"},{"id":[1000000,107381],"value":" (left1)"},{"id":[1000000,107389],"span":1},{"id":[1000000,107390],"value":" "},{"id":[1000000,107392],"value":"at (0,"},{"id":[1000000,219703],"value":"4"},{"id":[1000000,218563],"span":1},{"id":[1000000,107398],"span":1},{"id":[1000000,107399],"value":")"},{"id":[1000000,218376],"value":" [rectangle,draw]"},{"id":[1000000,107400],"value":" {"},{"id":[1000000,107516],"value":"\n    "},{"id":[1000000,107501],"value":"\\node {"},{"id":[1000000,107595],"value":"\\"},{"id":[1000000,107596],"span":5},{"id":[1000000,107601],"value":"{"},{"id":[1000000,218075],"value":"``"},{"id":[1000000,107602],"span":1},{"id":[1000000,107603],"value":"colors"},{"id":[1000000,218078],"value":"''"},{"id":[1000000,107609],"span":1},{"id":[1000000,107610],"value":": "},{"id":[1000000,218080],"value":"\\"},{"id":[1000000,107612],"value":"{"},{"id":[1000000,218082],"value":"``"},{"id":[1000000,107613],"span":1},{"id":[1000000,107620],"value":"blue"},{"id":[1000000,218085],"value":"''"},{"id":[1000000,107624],"span":1},{"id":[1000000,107625],"value":": "},{"id":[1000000,218088],"value":"``"},{"id":[1000000,218122],"value":"\\"},{"id":[1000000,107627],"span":1},{"id":[1000000,107628],"value":"#0000ff"},{"id":[1000000,218091],"value":"''"},{"id":[1000000,107635],"span":1},{"id":[1000000,107636],"value":","},{"id":[1000000,107637],"span":1},{"id":[1000000,107614],"span":3},{"id":[1000000,107528],"span":1},{"id":[1000000,107473],"span":6},{"id":[1000000,107402],"span":35},{"id":[1000000,107440],"span":1},{"id":[1000000,107437],"span":1},{"id":[1000000,107508],"value":"}"},{"id":[1000000,107592],"value":";"},{"id":[1000000,107441],"value":" \\\\"},{"id":[1000000,107521],"value":"\n   "},{"id":[1000000,107444],"value":" "},{"id":[1000000,107509],"value":"\\node"},{"id":[1000000,107525],"value":" "},{"id":[1000000,107514],"value":"{"},{"id":[1000000,218064],"value":"``"},{"id":[1000000,107639],"span":6},{"id":[1000000,107647],"span":1},{"id":[1000000,107648],"value":"red"},{"id":[1000000,218067],"value":"''"},{"id":[1000000,107653],"span":1},{"id":[1000000,107654],"value":": "},{"id":[1000000,218055],"value":"``"},{"id":[1000000,218123],"value":"\\"},{"id":[1000000,107656],"span":1},{"id":[1000000,107657],"value":"#ff0000"},{"id":[1000000,218052],"value":"''"},{"id":[1000000,107664],"span":1},{"id":[1000000,218050],"value":"\\"},{"id":[1000000,107665],"value":"}"},{"id":[1000000,218049],"value":"\\"},{"id":[1000000,107666],"value":"}"},{"id":[1000000,107667],"span":1},{"id":[1000000,107651],"span":1},{"id":[1000000,107645],"span":1},{"id":[1000000,107591],"span":1},{"id":[1000000,107445],"span":5},{"id":[1000000,107468],"span":1},{"id":[1000000,107450],"span":17},{"id":[1000000,107469],"span":3},{"id":[1000000,107515],"value":"}"},{"id":[1000000,107593],"value":";"},{"id":[1000000,107496],"value":" \\\\"},{"id":[1000000,107527],"value":"\n"},{"id":[1000000,107499],"span":1},{"id":[1000000,107472],"span":1},{"id":[1000000,107438],"value":"};"},{"id":[1000000,107668],"value":"\n\\node (right1) at ("},{"id":[1000000,218609],"value":"8"},{"id":[1000000,218508],"span":1},{"id":[1000000,107784],"span":1},{"id":[1000000,107688],"span":2},{"id":[1000000,107690],"value":","},{"id":[1000000,235081],"value":"5.5"},{"id":[1000000,234689],"span":1},{"id":[1000000,219701],"span":1},{"id":[1000000,218557],"span":1},{"id":[1000000,108701],"span":1},{"id":[1000000,108691],"span":3},{"id":[1000000,107693],"span":1},{"id":[1000000,107694],"value":")"},{"id":[1000000,218393],"value":" [rectangle,draw]"},{"id":[1000000,107695],"value":" {\\"},{"id":[1000000,107698],"span":5},{"id":[1000000,107703],"value":"{"},{"id":[1000000,218038],"value":"``"},{"id":[1000000,108965],"span":1},{"id":[1000000,108966],"value":"colors"},{"id":[1000000,218041],"value":"''"},{"id":[1000000,108972],"span":1},{"id":[1000000,108973],"value":": "},{"id":[1000000,218036],"value":"\\"},{"id":[1000000,108975],"value":"{"},{"id":[1000000,218035],"value":"\\"},{"id":[1000000,108976],"value":"}"},{"id":[1000000,218034],"value":"\\"},{"id":[1000000,107704],"value":"}"},{"id":[1000000,107705],"span":1},{"id":[1000000,107706],"value":"};\n\\node (right2) at ("},{"id":[1000000,218611],"value":"8"},{"id":[1000000,218510],"span":1},{"id":[1000000,107787],"span":1},{"id":[1000000,107728],"span":2},{"id":[1000000,107730],"value":","},{"id":[1000000,219699],"value":"3"},{"id":[1000000,218555],"span":1},{"id":[1000000,108695],"span":3},{"id":[1000000,107731],"span":1},{"id":[1000000,107732],"value":")"},{"id":[1000000,218410],"value":" [rectangle,draw]"},{"id":[1000000,107733],"value":" {\\"},{"id":[1000000,107736],"span":5},{"id":[1000000,107741],"value":"{"},{"id":[1000000,218012],"value":"``"},{"id":[1000000,107742],"span":1},{"id":[1000000,107743],"value":"colors"},{"id":[1000000,218015],"value":"''"},{"id":[1000000,107749],"span":1},{"id":[1000000,107750],"value":": "},{"id":[1000000,218017],"value":"\\"},{"id":[1000000,107756],"value":"{"},{"id":[1000000,218019],"value":"``"},{"id":[1000000,107757],"span":1},{"id":[1000000,107758],"value":"green"},{"id":[1000000,218022],"value":"''"},{"id":[1000000,107763],"span":1},{"id":[1000000,107764],"value":": "},{"id":[1000000,218025],"value":"``"},{"id":[1000000,218124],"value":"\\"},{"id":[1000000,218125],"span":1},{"id":[1000000,107766],"span":1},{"id":[1000000,107767],"value":"#00ff00"},{"id":[1000000,218028],"value":"''\\"},{"id":[1000000,107774],"span":1},{"id":[1000000,107775],"value":"}"},{"id":[1000000,218031],"value":"\\"},{"id":[1000000,107776],"value":"}"},{"id":[1000000,107777],"span":1},{"id":[1000000,107778],"value":"};"},{"id":[1000000,107788],"value":"\n\\node"},{"id":[1000000,107872],"value":" [matrix]"},{"id":[1000000,107794],"value":" (left2) at (0,0)"},{"id":[1000000,218427],"value":" [rectangle,draw]"},{"id":[1000000,107811],"value":" {"},{"id":[1000000,107881],"value":"\n    \\node {"},{"id":[1000000,107813],"value":"\\"},{"id":[1000000,107814],"span":5},{"id":[1000000,107819],"value":"{"},{"id":[1000000,217999],"value":"``"},{"id":[1000000,107820],"span":1},{"id":[1000000,107821],"value":"colors"},{"id":[1000000,217996],"value":"''"},{"id":[1000000,107827],"span":1},{"id":[1000000,107828],"value":": "},{"id":[1000000,217994],"value":"\\"},{"id":[1000000,107830],"value":"{"},{"id":[1000000,217992],"value":"``"},{"id":[1000000,107831],"span":1},{"id":[1000000,107832],"value":"red"},{"id":[1000000,217989],"value":"''"},{"id":[1000000,107835],"span":1},{"id":[1000000,107836],"value":": "},{"id":[1000000,217986],"value":"``"},{"id":[1000000,218127],"value":"\\"},{"id":[1000000,218128],"span":1},{"id":[1000000,107838],"span":1},{"id":[1000000,107839],"value":"#ff0000"},{"id":[1000000,217983],"value":"''"},{"id":[1000000,107846],"span":1},{"id":[1000000,107847],"value":","},{"id":[1000000,107893],"span":1},{"id":[1000000,107894],"value":"};"},{"id":[1000000,108055],"value":" \\\\"},{"id":[1000000,107896],"value":"\n    \\node"},{"id":[1000000,107848],"value":" "},{"id":[1000000,107906],"value":"{"},{"id":[1000000,217967],"value":"``"},{"id":[1000000,107907],"span":6},{"id":[1000000,107849],"span":1},{"id":[1000000,107850],"value":"green"},{"id":[1000000,217970],"value":"''"},{"id":[1000000,107855],"span":1},{"id":[1000000,107856],"value":": "},{"id":[1000000,217973],"value":"``"},{"id":[1000000,218129],"value":"\\"},{"id":[1000000,107858],"span":1},{"id":[1000000,107859],"value":"#00ff00"},{"id":[1000000,217976],"value":"''\\"},{"id":[1000000,107866],"span":1},{"id":[1000000,107867],"value":"}"},{"id":[1000000,217979],"value":"\\"},{"id":[1000000,107868],"value":"}"},{"id":[1000000,107869],"span":1},{"id":[1000000,107870],"value":"};"},{"id":[1000000,108058],"value":" \\\\"},{"id":[1000000,107913],"value":"\n};\n"},{"id":[1000000,108054],"span":1},{"id":[1000000,107917],"value":"\\node [matrix] (right3) at ("},{"id":[1000000,218613],"value":"8"},{"id":[1000000,218512],"span":1},{"id":[1000000,107945],"span":1},{"id":[1000000,107946],"value":","},{"id":[1000000,107949],"value":"0)"},{"id":[1000000,218444],"value":" [rectangle,draw]"},{"id":[1000000,107951],"value":" {\n"},{"id":[1000000,108053],"span":1},{"id":[1000000,107954],"value":"    \\node {\\"},{"id":[1000000,107966],"span":5},{"id":[1000000,107971],"value":"{"},{"id":[1000000,217924],"value":"``"},{"id":[1000000,107972],"span":1},{"id":[1000000,107973],"value":"colors"},{"id":[1000000,217933],"value":"''"},{"id":[1000000,107979],"span":1},{"id":[1000000,107980],"value":": "},{"id":[1000000,217935],"value":"\\"},{"id":[1000000,107982],"value":"{"},{"id":[1000000,217937],"value":"``"},{"id":[1000000,107983],"span":1},{"id":[1000000,107984],"value":"red"},{"id":[1000000,217940],"value":"''"},{"id":[1000000,107987],"span":1},{"id":[1000000,107988],"value":": "},{"id":[1000000,217943],"value":"``"},{"id":[1000000,218131],"value":"\\"},{"id":[1000000,107990],"span":1},{"id":[1000000,107991],"value":"#ff0000"},{"id":[1000000,217946],"value":"''"},{"id":[1000000,107998],"span":1},{"id":[1000000,107999],"value":","},{"id":[1000000,108002],"span":1},{"id":[1000000,108003],"value":"};"},{"id":[1000000,108072],"value":" \\\\"},{"id":[1000000,108005],"value":"\n"},{"id":[1000000,108052],"span":1},{"id":[1000000,108006],"value":"    \\node {"},{"id":[1000000,108017],"span":1},{"id":[1000000,217922],"span":1},{"id":[1000000,217927],"value":"``"},{"id":[1000000,108018],"span":6},{"id":[1000000,108024],"value":"green"},{"id":[1000000,217930],"value":"''"},{"id":[1000000,108029],"span":1},{"id":[1000000,108030],"value":": "},{"id":[1000000,217949],"value":"``"},{"id":[1000000,218132],"value":"\\"},{"id":[1000000,108032],"span":1},{"id":[1000000,108033],"value":"#00ff00"},{"id":[1000000,217952],"value":"''\\"},{"id":[1000000,108040],"span":1},{"id":[1000000,108041],"value":"}"},{"id":[1000000,217955],"value":"\\"},{"id":[1000000,108042],"value":"}"},{"id":[1000000,108043],"span":1},{"id":[1000000,108044],"value":"};"},{"id":[1000000,108065],"value":" "},{"id":[1000000,108070],"value":"\\\\"},{"id":[1000000,108066],"span":2},{"id":[1000000,108046],"value":"\n"},{"id":[1000000,108051],"span":1},{"id":[1000000,108047],"value":"};"},{"id":[1000000,219810],"value":"\n\\node (comms) "},{"id":[1000000,219825],"span":1},{"id":[1000000,219826],"value":"at (4,"},{"id":[1000000,219891],"value":"2"},{"id":[1000000,219896],"value":".1"},{"id":[1000000,219892],"span":2},{"id":[1000000,219832],"span":3},{"id":[1000000,219835],"value":") [text=blue] {\\footnotesize network communication};"},{"id":[1000000,108075],"value":"\n\\draw [thick,->] ("},{"id":[1000000,218251],"value":"left0"},{"id":[1000000,108094],"span":5},{"id":[1000000,108099],"value":") "},{"id":[1000000,111184],"value":" "},{"id":[1000000,234590],"value":"-- (left1)\n    "},{"id":[1000000,108101],"span":3},{"id":[1000000,108104],"value":"node ["},{"id":[1000000,108200],"value":"left"},{"id":[1000000,234608],"value":",text width="},{"id":[1000000,234683],"value":"4"},{"id":[1000000,234686],"value":".2"},{"id":[1000000,234620],"span":1},{"id":[1000000,234621],"value":"cm,text centered,midway"},{"id":[1000000,108385],"span":1},{"id":[1000000,111185],"span":1},{"id":[1000000,108386],"span":6},{"id":[1000000,110514],"span":1},{"id":[1000000,108392],"span":4},{"id":[1000000,108400],"span":2},{"id":[1000000,108396],"span":3},{"id":[1000000,108110],"span":12},{"id":[1000000,108122],"value":"]"},{"id":[1000000,218734],"value":" "},{"id":[1000000,108123],"value":" {"},{"id":[1000000,108125],"span":14},{"id":[1000000,108163],"value":"doc"},{"id":[1000000,234334],"value":".get("},{"id":[1000000,108166],"span":1},{"id":[1000000,108167],"value":"``colors''"},{"id":[1000000,234341],"value":").get("},{"id":[1000000,108177],"span":1},{"id":[1000000,108204],"span":1},{"id":[1000000,108205],"value":"``red''"},{"id":[1000000,234348],"value":")"},{"id":[1000000,108212],"span":1},{"id":[1000000,108213],"value":" := ``\\#ff0000'';"},{"id":[1000000,108236],"span":1},{"id":[1000000,108267],"span":11},{"id":[1000000,108259],"span":4},{"id":[1000000,108237],"span":11},{"id":[1000000,108232],"span":2},{"id":[1000000,108230],"span":1},{"id":[1000000,108178],"value":"}"},{"id":[1000000,108402],"span":3},{"id":[1000000,108179],"span":8},{"id":[1000000,108187],"value":";"},{"id":[1000000,108408],"value":"\n\\draw [thick,-"},{"id":[1000000,108425],"value":">] ("},{"id":[1000000,218261],"value":"right0"},{"id":[1000000,108429],"span":5},{"id":[1000000,108434],"value":")"},{"id":[1000000,108435],"span":1},{"id":[1000000,111183],"value":" "},{"id":[1000000,108436],"value":"to node [right"},{"id":[1000000,108450],"span":7},{"id":[1000000,110513],"span":1},{"id":[1000000,108457],"span":5},{"id":[1000000,108950],"span":1},{"id":[1000000,108462],"span":3},{"id":[1000000,108465],"value":"] {"},{"id":[1000000,108468],"span":14},{"id":[1000000,108482],"value":"doc"},{"id":[1000000,234350],"value":".get("},{"id":[1000000,108485],"span":1},{"id":[1000000,108486],"value":"``colors''"},{"id":[1000000,234356],"value":")"},{"id":[1000000,108496],"span":1},{"id":[1000000,108958],"value":" "},{"id":[1000000,234377],"value":":"},{"id":[1000000,108959],"value":"= \\{\\}"},{"id":[1000000,108497],"span":7},{"id":[1000000,108504],"value":";} (right1);\n\\draw [thick,->] ("},{"id":[1000000,108639],"value":"right"},{"id":[1000000,108535],"span":4},{"id":[1000000,108539],"value":"1) "},{"id":[1000000,234582],"value":"--"},{"id":[1000000,108542],"span":34},{"id":[1000000,234358],"span":1},{"id":[1000000,234363],"span":4},{"id":[1000000,234359],"span":2},{"id":[1000000,108576],"span":11},{"id":[1000000,234369],"span":1},{"id":[1000000,234373],"span":4},{"id":[1000000,234370],"span":1},{"id":[1000000,108587],"span":1},{"id":[1000000,108590],"span":10},{"id":[1000000,234372],"span":1},{"id":[1000000,108600],"span":2},{"id":[1000000,108606],"span":5},{"id":[1000000,108613],"span":12},{"id":[1000000,108625],"value":" (right2)"},{"id":[1000000,234378],"value":"\n"},{"id":[1000000,234586],"value":"    "},{"id":[1000000,234379],"value":"node [right,text width="},{"id":[1000000,234681],"value":"4"},{"id":[1000000,234684],"value":".2"},{"id":[1000000,234585],"span":1},{"id":[1000000,234404],"span":1},{"id":[1000000,234405],"value":"cm,text "},{"id":[1000000,234672],"value":"centered"},{"id":[1000000,234660],"span":6},{"id":[1000000,234572],"span":8},{"id":[1000000,234558],"span":1},{"id":[1000000,234561],"span":5},{"id":[1000000,234559],"span":1},{"id":[1000000,234413],"span":8},{"id":[1000000,234543],"value":",midway"},{"id":[1000000,234421],"value":"] {doc.get(``colors'').get(``green'') := ``\\#00ff00'';}"},{"id":[1000000,234402],"span":1},{"id":[1000000,108634],"value":";"},{"id":[1000000,108704],"value":"\n\\draw [thick,"},{"id":[1000000,108718],"span":2},{"id":[1000000,217876],"span":12},{"id":[1000000,217906],"span":1},{"id":[1000000,217907],"value":"->"},{"id":[1000000,108720],"value":"] (left1) "},{"id":[1000000,111182],"value":" "},{"id":[1000000,108730],"value":"to "},{"id":[1000000,108733],"span":6},{"id":[1000000,108743],"span":6},{"id":[1000000,111186],"span":1},{"id":[1000000,108749],"span":21},{"id":[1000000,108772],"span":2},{"id":[1000000,108774],"value":"(left2);\n\\draw [thick,"},{"id":[1000000,108796],"span":2},{"id":[1000000,217888],"span":12},{"id":[1000000,217909],"span":1},{"id":[1000000,217910],"value":"->"},{"id":[1000000,108798],"value":"] (right"},{"id":[1000000,108808],"value":"2) to "},{"id":[1000000,108814],"span":34},{"id":[1000000,108852],"span":2},{"id":[1000000,108854],"value":"(right3);\n\\draw [thick,"},{"id":[1000000,218278],"value":"dashed,blue,"},{"id":[1000000,218290],"span":1},{"id":[1000000,108877],"value":"->] (left1"},{"id":[1000000,218461],"value":".south"},{"id":[1000000,218467],"span":5},{"id":[1000000,108887],"value":") "},{"id":[1000000,111181],"value":" "},{"id":[1000000,108889],"value":"to"},{"id":[1000000,219657],"value":" [out=270,in=135]"},{"id":[1000000,108891],"value":" (right3"},{"id":[1000000,218483],"value":".north west"},{"id":[1000000,108899],"value":");\n\\draw [thick,"},{"id":[1000000,218316],"value":"dashed,blue,"},{"id":[1000000,108915],"value":"->] (right2"},{"id":[1000000,218472],"value":".south"},{"id":[1000000,218478],"span":5},{"id":[1000000,108926],"value":") to"},{"id":[1000000,219674],"value":" [ou"},{"id":[1000000,219682],"value":"t=27"},{"id":[1000000,219688],"value":"0,in=45] "},{"id":[1000000,219686],"span":1},{"id":[1000000,219680],"span":1},{"id":[1000000,219678],"span":1},{"id":[1000000,108930],"value":" ("},{"id":[1000000,108940],"value":"left2"},{"id":[1000000,218494],"value":".north east"},{"id":[1000000,108945],"value":");"},{"id":[1000000,108932],"span":4},{"id":[1000000,108850],"span":1},{"id":[1000000,108848],"span":1},{"id":[1000000,108806],"span":1},{"id":[1000000,108770],"span":1},{"id":[1000000,108739],"span":2},{"id":[1000000,108611],"span":1},{"id":[1000000,108602],"span":2},{"id":[1000000,108588],"span":1},{"id":[1000000,108423],"span":1},{"id":[1000000,108139],"span":12},{"id":[1000000,108000],"span":1},{"id":[1000000,107947],"span":1},{"id":[1000000,107752],"span":2},{"id":[1000000,107691],"span":1},{"id":[1000000,107150],"value":"\n"},{"id":[1000000,108049],"span":1},{"id":[1000000,107151],"value":"\\end{tikzpicture}\n\\caption{"},{"id":[1000000,107204],"value":"Modifying the contents of a nested map while concurrently the entire map is "},{"id":[1000000,108984],"value":"overwritten"},{"id":[1000000,154745],"value":"."},{"id":[1000000,107280],"span":7},{"id":[1000000,107287],"value":"}\\label{fig:map-remove}"},{"id":[1000000,107178],"span":13},{"id":[1000000,107099],"value":"\n\\end{figure*}"},{"id":[1000000,108995],"span":57},{"id":[1000000,241134],"span":69},{"id":[1000000,109052],"span":19},{"id":[1000000,241241],"span":4},{"id":[1000000,109071],"span":40},{"id":[1000000,241260],"span":12},{"id":[1000000,109111],"span":69},{"id":[1000000,109182],"span":26},{"id":[1000000,241203],"span":34},{"id":[1000000,241272],"span":122},{"id":[1000000,241396],"span":32},{"id":[1000000,241526],"span":515},{"id":[1000000,242047],"span":5},{"id":[1000000,242064],"span":81},{"id":[1000000,242151],"span":41},{"id":[1000000,242283],"span":41},{"id":[1000000,242192],"span":1},{"id":[1000000,242145],"span":3},{"id":[1000000,242052],"span":6},{"id":[1000000,242041],"span":3},{"id":[1000000,241394],"span":2},{"id":[1000000,109208],"span":168},{"id":[1000000,109380],"span":67},{"id":[1000000,242263],"span":1},{"id":[1000000,109447],"span":25},{"id":[1000000,109376],"span":2},{"id":[1000000,109180],"span":1},{"id":[1000000,107082],"span":1},{"id":[1000000,106965],"span":12},{"id":[1000000,106932],"span":1},{"id":[1000000,106850],"span":1},{"id":[1000000,106650],"span":13},{"id":[1000000,106295],"span":1},{"id":[1000000,63591],"span":1},{"id":[1000000,57367],"span":1},{"id":[1000000,56099],"span":2},{"id":[1000000,56046],"span":2},{"id":[1000000,55994],"span":3},{"id":[1000000,55880],"span":3},{"id":[1000000,35890],"span":1},{"id":[1000000,241428],"span":1},{"id":[1000000,241430],"span":2},{"id":[1000000,242265],"span":2},{"id":[1000000,241432],"span":11},{"id":[1000000,242280],"span":3},{"id":[1000000,241443],"span":10},{"id":[1000000,241459],"span":67},{"id":[1000000,241453],"span":3},{"id":[1000000,241429],"value":"\n"},{"id":[1000000,109530],"value":"\n"},{"id":[1000000,109532],"value":"\\begin{figure*}"},{"id":[1000000,242324],"value":"[p]"},{"id":[1000000,109547],"value":"\n\\centering\n\\begin{tikzpicture}[auto"},{"id":[1000000,218614],"value":",scale=0.8"},{"id":[1000000,109583],"value":"]"},{"id":[1000000,219541],"value":"\n\\path [draw,dotted] (5,-0.5) -- (5,"},{"id":[1000000,235141],"value":"10"},{"id":[1000000,235113],"span":1},{"id":[1000000,219577],"span":3},{"id":[1000000,219580],"value":");"},{"id":[1000000,109723],"value":"\n\\node ("},{"id":[1000000,218638],"value":"left0"},{"id":[1000000,109731],"span":5},{"id":[1000000,109736],"value":") "},{"id":[1000000,109822],"value":" "},{"id":[1000000,109738],"value":"at "},{"id":[1000000,219443],"value":" "},{"id":[1000000,109741],"value":"("},{"id":[1000000,219428],"span":1},{"id":[1000000,218678],"value":"0"},{"id":[1000000,109742],"span":1},{"id":[1000000,109743],"value":","},{"id":[1000000,235109],"value":"9."},{"id":[1000000,235137],"value":"5"},{"id":[1000000,235111],"span":1},{"id":[1000000,219424],"span":1},{"id":[1000000,111178],"span":3},{"id":[1000000,109744],"span":1},{"id":[1000000,109745],"value":")"},{"id":[1000000,219213],"value":" [rectangle,draw]"},{"id":[1000000,109746],"value":" {"},{"id":[1000000,218630],"value":"\\"},{"id":[1000000,109748],"span":6},{"id":[1000000,109754],"value":"{"},{"id":[1000000,218631],"value":"\\"},{"id":[1000000,109755],"value":"}"},{"id":[1000000,109756],"span":1},{"id":[1000000,109757],"value":"};"},{"id":[1000000,218643],"value":"\n\\node (right0) at ("},{"id":[1000000,219426],"value":"10"},{"id":[1000000,218663],"span":1},{"id":[1000000,218664],"value":","},{"id":[1000000,235105],"value":"9."},{"id":[1000000,235135],"value":"5"},{"id":[1000000,235107],"span":1},{"id":[1000000,219420],"span":1},{"id":[1000000,218665],"span":3},{"id":[1000000,218668],"value":")"},{"id":[1000000,219230],"value":" [rectangle,draw]"},{"id":[1000000,218669],"value":" {\\{\\}};"},{"id":[1000000,109759],"value":"\n\\node (left1) "},{"id":[1000000,109821],"value":" "},{"id":[1000000,109774],"value":"at "},{"id":[1000000,219441],"value":" "},{"id":[1000000,109777],"value":"("},{"id":[1000000,219429],"span":1},{"id":[1000000,109778],"value":"0,"},{"id":[1000000,235101],"value":"7."},{"id":[1000000,235133],"value":"5"},{"id":[1000000,235103],"span":1},{"id":[1000000,219416],"span":1},{"id":[1000000,111174],"span":3},{"id":[1000000,109780],"span":1},{"id":[1000000,109781],"value":")"},{"id":[1000000,219247],"value":" [rectangle,draw]"},{"id":[1000000,109782],"value":" {\\"},{"id":[1000000,109785],"span":5},{"id":[1000000,109790],"value":"{"},{"id":[1000000,218799],"value":"``"},{"id":[1000000,227757],"value":"grocery"},{"id":[1000000,227355],"span":8},{"id":[1000000,225426],"span":2},{"id":[1000000,225430],"span":7},{"id":[1000000,225428],"span":1},{"id":[1000000,109791],"span":1},{"id":[1000000,109971],"span":3},{"id":[1000000,218802],"value":"''"},{"id":[1000000,109792],"span":5},{"id":[1000000,109797],"value":":"},{"id":[1000000,218804],"value":" "},{"id":[1000000,109798],"value":"[]"},{"id":[1000000,218805],"value":"\\"},{"id":[1000000,109800],"value":"}"},{"id":[1000000,109803],"span":1},{"id":[1000000,109804],"value":"};\n\\node (right1)"},{"id":[1000000,109823],"value":" at ("},{"id":[1000000,219435],"value":"10"},{"id":[1000000,219431],"span":2},{"id":[1000000,109828],"span":1},{"id":[1000000,109829],"value":","},{"id":[1000000,235097],"value":"7."},{"id":[1000000,235131],"value":"5"},{"id":[1000000,235099],"span":1},{"id":[1000000,219412],"span":1},{"id":[1000000,111170],"span":3},{"id":[1000000,109830],"span":1},{"id":[1000000,109831],"value":")"},{"id":[1000000,219264],"value":" [rectangle,draw]"},{"id":[1000000,109832],"value":" {\\"},{"id":[1000000,109835],"span":5},{"id":[1000000,109840],"value":"{"},{"id":[1000000,218813],"value":"``"},{"id":[1000000,227742],"value":"grocery"},{"id":[1000000,227372],"span":8},{"id":[1000000,225440],"span":9},{"id":[1000000,109841],"span":1},{"id":[1000000,109978],"span":3},{"id":[1000000,218810],"value":"''"},{"id":[1000000,109842],"span":5},{"id":[1000000,109847],"value":":"},{"id":[1000000,218808],"value":" "},{"id":[1000000,109850],"value":"[]"},{"id":[1000000,218807],"value":"\\"},{"id":[1000000,109852],"value":"}"},{"id":[1000000,109853],"span":1},{"id":[1000000,109854],"value":"};\n\\node (left2)  at "},{"id":[1000000,219439],"value":" "},{"id":[1000000,109875],"value":"("},{"id":[1000000,219437],"span":1},{"id":[1000000,109876],"value":"0,"},{"id":[1000000,235127],"value":"5.0"},{"id":[1000000,219408],"span":1},{"id":[1000000,235094],"span":2},{"id":[1000000,111166],"span":3},{"id":[1000000,109878],"span":1},{"id":[1000000,109879],"value":")"},{"id":[1000000,219281],"value":" [rectangle,draw]"},{"id":[1000000,109880],"value":" {\\"},{"id":[1000000,109883],"span":5},{"id":[1000000,109888],"value":"{"},{"id":[1000000,218826],"value":"``"},{"id":[1000000,227727],"value":"grocery"},{"id":[1000000,227389],"span":8},{"id":[1000000,225452],"span":9},{"id":[1000000,109889],"span":1},{"id":[1000000,109985],"span":3},{"id":[1000000,218869],"value":"''"},{"id":[1000000,109890],"span":5},{"id":[1000000,109895],"value":":"},{"id":[1000000,218886],"value":" "},{"id":[1000000,109896],"value":"["},{"id":[1000000,218893],"value":"``"},{"id":[1000000,109897],"span":1},{"id":[1000000,109898],"value":"eggs"},{"id":[1000000,218911],"value":"''"},{"id":[1000000,109902],"span":1},{"id":[1000000,109903],"value":"]"},{"id":[1000000,218997],"value":"\\"},{"id":[1000000,109904],"value":"}"},{"id":[1000000,109905],"span":1},{"id":[1000000,109906],"value":"};\n\\node (left3)  at "},{"id":[1000000,219444],"value":" "},{"id":[1000000,109927],"value":"(0,"},{"id":[1000000,219404],"value":"2"},{"id":[1000000,235092],"value":"."},{"id":[1000000,235123],"value":"5"},{"id":[1000000,235093],"span":1},{"id":[1000000,109930],"span":1},{"id":[1000000,111163],"span":2},{"id":[1000000,109931],"value":")"},{"id":[1000000,219298],"value":" [rectangle,draw]"},{"id":[1000000,109932],"value":" {\\"},{"id":[1000000,109935],"span":5},{"id":[1000000,109940],"value":"{"},{"id":[1000000,218858],"value":"``"},{"id":[1000000,227712],"value":"grocery"},{"id":[1000000,227406],"span":8},{"id":[1000000,225464],"span":9},{"id":[1000000,109941],"span":1},{"id":[1000000,109992],"span":3},{"id":[1000000,218872],"value":"''"},{"id":[1000000,109942],"span":5},{"id":[1000000,109947],"value":":"},{"id":[1000000,218887],"value":" "},{"id":[1000000,109948],"value":"["},{"id":[1000000,218896],"value":"``"},{"id":[1000000,109949],"span":1},{"id":[1000000,109950],"value":"eggs"},{"id":[1000000,218914],"value":"''"},{"id":[1000000,109954],"span":1},{"id":[1000000,109955],"value":","},{"id":[1000000,218916],"value":" "},{"id":[1000000,218918],"value":"``"},{"id":[1000000,109956],"span":1},{"id":[1000000,110046],"value":"ham"},{"id":[1000000,218921],"value":"''"},{"id":[1000000,109957],"span":5},{"id":[1000000,109962],"value":"]"},{"id":[1000000,218995],"value":"\\"},{"id":[1000000,109963],"value":"}"},{"id":[1000000,109964],"span":1},{"id":[1000000,109965],"value":"};"},{"id":[1000000,109995],"value":"\n\\node (right2) at "},{"id":[1000000,110018],"value":"("},{"id":[1000000,219446],"value":"10"},{"id":[1000000,110014],"span":1},{"id":[1000000,110015],"value":","},{"id":[1000000,235119],"value":"5.0"},{"id":[1000000,219400],"span":1},{"id":[1000000,235084],"span":2},{"id":[1000000,111160],"span":3},{"id":[1000000,110016],"span":1},{"id":[1000000,110017],"value":")"},{"id":[1000000,110019],"value":" "},{"id":[1000000,219315],"value":"[rectangle,draw] "},{"id":[1000000,110020],"value":"{\\"},{"id":[1000000,110022],"span":5},{"id":[1000000,110027],"value":"{"},{"id":[1000000,218860],"value":"``"},{"id":[1000000,227697],"value":"grocery"},{"id":[1000000,227423],"span":8},{"id":[1000000,225476],"span":9},{"id":[1000000,110028],"span":4},{"id":[1000000,218875],"value":"''"},{"id":[1000000,110032],"span":1},{"id":[1000000,110033],"value":":"},{"id":[1000000,218888],"value":" "},{"id":[1000000,110034],"value":"["},{"id":[1000000,218899],"value":"``"},{"id":[1000000,110035],"span":1},{"id":[1000000,110052],"value":"milk"},{"id":[1000000,218924],"value":"''"},{"id":[1000000,110036],"span":4},{"id":[1000000,110040],"value":"]"},{"id":[1000000,218993],"value":"\\"},{"id":[1000000,110041],"value":"}"},{"id":[1000000,110056],"span":1},{"id":[1000000,110057],"value":"};\n\\node (right3) at ("},{"id":[1000000,219453],"value":"10"},{"id":[1000000,219449],"span":2},{"id":[1000000,110079],"span":1},{"id":[1000000,110080],"value":","},{"id":[1000000,219396],"value":"2"},{"id":[1000000,235086],"value":"."},{"id":[1000000,235115],"value":"5"},{"id":[1000000,235087],"span":1},{"id":[1000000,110081],"span":1},{"id":[1000000,111153],"span":2},{"id":[1000000,110082],"value":")"},{"id":[1000000,219332],"value":" [rect"},{"id":[1000000,219342],"value":"angle,draw]"},{"id":[1000000,219338],"span":2},{"id":[1000000,110083],"value":" {\\"},{"id":[1000000,110086],"span":5},{"id":[1000000,110091],"value":"{"},{"id":[1000000,218862],"value":"``"},{"id":[1000000,227682],"value":"grocery"},{"id":[1000000,227440],"span":8},{"id":[1000000,225488],"span":9},{"id":[1000000,110092],"span":4},{"id":[1000000,218878],"value":"''"},{"id":[1000000,110096],"span":1},{"id":[1000000,110097],"value":":"},{"id":[1000000,218889],"value":" "},{"id":[1000000,110098],"value":"["},{"id":[1000000,218902],"value":"``"},{"id":[1000000,110099],"span":1},{"id":[1000000,110100],"value":"milk"},{"id":[1000000,218927],"value":"''"},{"id":[1000000,110104],"span":1},{"id":[1000000,110105],"value":","},{"id":[1000000,218929],"value":" "},{"id":[1000000,218931],"value":"``"},{"id":[1000000,110106],"span":1},{"id":[1000000,110107],"value":"flour"},{"id":[1000000,218934],"value":"''"},{"id":[1000000,110112],"span":1},{"id":[1000000,110113],"value":"]"},{"id":[1000000,218991],"value":"\\"},{"id":[1000000,110114],"value":"}"},{"id":[1000000,110115],"span":1},{"id":[1000000,110116],"value":"};\n\\node "},{"id":[1000000,110125],"span":5},{"id":[1000000,110132],"span":4},{"id":[1000000,110136],"value":"(left4) "},{"id":[1000000,111142],"value":" "},{"id":[1000000,110144],"value":"at "},{"id":[1000000,219455],"value":" "},{"id":[1000000,110147],"value":"(0,0"},{"id":[1000000,235088],"value":".0"},{"id":[1000000,111155],"span":2},{"id":[1000000,110151],"value":") "},{"id":[1000000,219355],"value":"[rectangle,draw] "},{"id":[1000000,219353],"span":1},{"id":[1000000,110188],"value":"{\\"},{"id":[1000000,110190],"span":5},{"id":[1000000,110195],"value":"{"},{"id":[1000000,218864],"value":"``"},{"id":[1000000,227667],"value":"grocery"},{"id":[1000000,227457],"span":8},{"id":[1000000,225506],"span":9},{"id":[1000000,225500],"span":3},{"id":[1000000,110196],"span":4},{"id":[1000000,218881],"value":"''"},{"id":[1000000,110200],"span":1},{"id":[1000000,110201],"value":":"},{"id":[1000000,218890],"value":" "},{"id":[1000000,110202],"value":"["},{"id":[1000000,218905],"value":"``"},{"id":[1000000,110203],"span":1},{"id":[1000000,110204],"value":"eggs"},{"id":[1000000,218937],"value":"''"},{"id":[1000000,110208],"span":1},{"id":[1000000,110209],"value":","},{"id":[1000000,218939],"value":" "},{"id":[1000000,218941],"value":"``"},{"id":[1000000,110210],"span":1},{"id":[1000000,110211],"value":"ham"},{"id":[1000000,218944],"value":"''"},{"id":[1000000,110214],"span":1},{"id":[1000000,110215],"value":","},{"id":[1000000,218946],"value":" "},{"id":[1000000,218948],"value":"``"},{"id":[1000000,110216],"span":1},{"id":[1000000,110217],"value":"milk"},{"id":[1000000,218951],"value":"''"},{"id":[1000000,110221],"span":1},{"id":[1000000,110222],"value":","},{"id":[1000000,218953],"value":" "},{"id":[1000000,218955],"value":"``"},{"id":[1000000,110223],"span":1},{"id":[1000000,110224],"value":"flour"},{"id":[1000000,218958],"value":"''"},{"id":[1000000,110229],"span":1},{"id":[1000000,110230],"value":"]"},{"id":[1000000,218987],"value":"\\"},{"id":[1000000,110231],"value":"}"},{"id":[1000000,110232],"span":1},{"id":[1000000,110233],"value":"};\n\\node (right4) at ("},{"id":[1000000,219457],"value":"10"},{"id":[1000000,110255],"span":1},{"id":[1000000,110256],"value":",0"},{"id":[1000000,235090],"value":".0"},{"id":[1000000,111157],"span":2},{"id":[1000000,110258],"value":")"},{"id":[1000000,219372],"value":" [rectangle,draw]"},{"id":[1000000,110259],"value":" {\\"},{"id":[1000000,110262],"span":5},{"id":[1000000,110267],"value":"{"},{"id":[1000000,218866],"value":"``"},{"id":[1000000,227652],"value":"grocery"},{"id":[1000000,227474],"span":8},{"id":[1000000,225518],"span":9},{"id":[1000000,110268],"span":4},{"id":[1000000,218884],"value":"''"},{"id":[1000000,110272],"span":1},{"id":[1000000,110273],"value":":"},{"id":[1000000,218891],"value":" "},{"id":[1000000,110274],"value":"["},{"id":[1000000,218908],"value":"``"},{"id":[1000000,110275],"span":1},{"id":[1000000,110276],"value":"eggs"},{"id":[1000000,218961],"value":"''"},{"id":[1000000,110280],"span":1},{"id":[1000000,110281],"value":","},{"id":[1000000,218963],"value":" "},{"id":[1000000,218965],"value":"``"},{"id":[1000000,110282],"span":1},{"id":[1000000,110283],"value":"ham"},{"id":[1000000,218968],"value":"''"},{"id":[1000000,218970],"span":1},{"id":[1000000,110286],"span":1},{"id":[1000000,110287],"value":","},{"id":[1000000,218972],"value":" "},{"id":[1000000,218974],"value":"``"},{"id":[1000000,110288],"span":1},{"id":[1000000,110289],"value":"milk"},{"id":[1000000,218977],"value":"''"},{"id":[1000000,110293],"span":1},{"id":[1000000,110294],"value":","},{"id":[1000000,218979],"value":" "},{"id":[1000000,218981],"value":"``"},{"id":[1000000,110295],"span":1},{"id":[1000000,110296],"value":"flour"},{"id":[1000000,218984],"value":"''"},{"id":[1000000,110301],"span":1},{"id":[1000000,110302],"value":"]"},{"id":[1000000,218986],"value":"\\"},{"id":[1000000,110303],"value":"}"},{"id":[1000000,110304],"span":1},{"id":[1000000,110305],"value":"};"},{"id":[1000000,219898],"value":"\n\\node (comms) "},{"id":[1000000,219919],"value":" "},{"id":[1000000,219913],"value":"at "},{"id":[1000000,219921],"value":" (5,1."},{"id":[1000000,219983],"value":"4"},{"id":[1000000,219981],"span":1},{"id":[1000000,219927],"span":1},{"id":[1000000,219928],"value":") [text=blue] {\\footnotesize network communication};"},{"id":[1000000,219918],"span":1},{"id":[1000000,219916],"span":1},{"id":[1000000,110307],"value":"\n\\draw [thick,->] ("},{"id":[1000000,218684],"value":"left0"},{"id":[1000000,110326],"span":5},{"id":[1000000,110331],"value":") "},{"id":[1000000,111143],"value":" "},{"id":[1000000,110333],"value":"to node [left"},{"id":[1000000,110346],"span":1},{"id":[1000000,111152],"span":1},{"id":[1000000,110347],"span":6},{"id":[1000000,110512],"span":1},{"id":[1000000,110353],"span":5},{"id":[1000000,110516],"span":1},{"id":[1000000,110358],"span":3},{"id":[1000000,110361],"value":"] "},{"id":[1000000,219032],"value":" "},{"id":[1000000,110363],"value":"{"},{"id":[1000000,110364],"span":14},{"id":[1000000,110378],"value":"doc"},{"id":[1000000,234697],"value":".get("},{"id":[1000000,110381],"span":1},{"id":[1000000,110382],"value":"``"},{"id":[1000000,227637],"value":"grocery"},{"id":[1000000,227491],"span":8},{"id":[1000000,225530],"span":9},{"id":[1000000,110384],"span":3},{"id":[1000000,110387],"value":"''"},{"id":[1000000,234721],"value":")"},{"id":[1000000,110389],"span":1},{"id":[1000000,110390],"value":" := [];} (left1);\n\\draw [thick,->] ("},{"id":[1000000,218694],"value":"right0"},{"id":[1000000,110426],"span":5},{"id":[1000000,110431],"value":")"},{"id":[1000000,110432],"span":1},{"id":[1000000,111144],"value":" "},{"id":[1000000,110433],"value":"to node [right"},{"id":[1000000,110447],"span":1},{"id":[1000000,110450],"span":6},{"id":[1000000,110511],"span":1},{"id":[1000000,110456],"span":5},{"id":[1000000,110518],"span":1},{"id":[1000000,110461],"span":3},{"id":[1000000,110464],"value":"] {"},{"id":[1000000,110467],"span":14},{"id":[1000000,110481],"value":"doc"},{"id":[1000000,234703],"value":".get("},{"id":[1000000,110484],"span":1},{"id":[1000000,110485],"value":"``"},{"id":[1000000,227622],"value":"grocery"},{"id":[1000000,227508],"span":8},{"id":[1000000,225542],"span":9},{"id":[1000000,110487],"span":3},{"id":[1000000,110490],"value":"''"},{"id":[1000000,234723],"value":")"},{"id":[1000000,110492],"span":1},{"id":[1000000,110493],"value":" := [];} (right1);"},{"id":[1000000,110519],"value":"\n\\draw [thick,->"},{"id":[1000000,110537],"value":"] (left1) "},{"id":[1000000,111145],"value":" "},{"id":[1000000,234814],"value":"-- (left2)\n   "},{"id":[1000000,110547],"span":2},{"id":[1000000,110549],"value":" node [left"},{"id":[1000000,234828],"value":",text wid"},{"id":[1000000,234839],"value":"th=4cm,text centered,midway"},{"id":[1000000,234837],"span":1},{"id":[1000000,110560],"value":"]"},{"id":[1000000,234867],"value":" "},{"id":[1000000,110561],"span":1},{"id":[1000000,111151],"value":" "},{"id":[1000000,110562],"value":"{"},{"id":[1000000,110563],"span":14},{"id":[1000000,110577],"value":"doc"},{"id":[1000000,234709],"value":".get("},{"id":[1000000,110580],"span":1},{"id":[1000000,110581],"value":"``"},{"id":[1000000,227607],"value":"grocery"},{"id":[1000000,227525],"span":8},{"id":[1000000,225554],"span":9},{"id":[1000000,110583],"span":3},{"id":[1000000,110586],"value":"''"},{"id":[1000000,234725],"value":")"},{"id":[1000000,110588],"span":1},{"id":[1000000,110589],"value":".i"},{"id":[1000000,234731],"value":"dx(0)"},{"id":[1000000,234868],"value":" "},{"id":[1000000,110591],"span":3},{"id":[1000000,110594],"value":".insert"},{"id":[1000000,248892],"value":"After"},{"id":[1000000,110601],"value":"(``eggs'');}"},{"id":[1000000,110613],"span":8},{"id":[1000000,110621],"value":";\n\\draw [thick,->] (right1) "},{"id":[1000000,234877],"value":"-- (right2)\n    "},{"id":[1000000,110649],"span":3},{"id":[1000000,110652],"value":"node [right"},{"id":[1000000,234896],"value":",text width=4cm,text centered,midway"},{"id":[1000000,110663],"value":"] {"},{"id":[1000000,110666],"span":14},{"id":[1000000,110680],"value":"doc"},{"id":[1000000,234715],"value":".get("},{"id":[1000000,110683],"span":1},{"id":[1000000,110684],"value":"``"},{"id":[1000000,227592],"value":"grocery"},{"id":[1000000,227542],"span":8},{"id":[1000000,225566],"span":9},{"id":[1000000,110686],"span":3},{"id":[1000000,110689],"value":"''"},{"id":[1000000,234727],"value":")"},{"id":[1000000,110691],"span":1},{"id":[1000000,110692],"value":".i"},{"id":[1000000,234739],"value":"dx(0)"},{"id":[1000000,234995],"value":" "},{"id":[1000000,110694],"span":3},{"id":[1000000,110697],"value":".insert"},{"id":[1000000,248897],"value":"After"},{"id":[1000000,110704],"value":"(``milk'');}"},{"id":[1000000,110716],"span":9},{"id":[1000000,110725],"value":";\n\\draw [thick,->] (left2) "},{"id":[1000000,111146],"value":" "},{"id":[1000000,234941],"value":"-- (left3)\n"},{"id":[1000000,234954],"value":"   "},{"id":[1000000,110752],"span":2},{"id":[1000000,110754],"value":" node [left"},{"id":[1000000,234957],"value":",text width="},{"id":[1000000,234971],"value":"4cm,text centered,midway"},{"id":[1000000,234969],"span":1},{"id":[1000000,110765],"value":"] "},{"id":[1000000,111150],"value":" "},{"id":[1000000,110767],"value":"{"},{"id":[1000000,234748],"value":"doc.get(``grocery'').idx(1)"},{"id":[1000000,234996],"value":" "},{"id":[1000000,110768],"span":18},{"id":[1000000,110786],"value":".insert"},{"id":[1000000,248902],"value":"After"},{"id":[1000000,110793],"value":"(``ham'');}"},{"id":[1000000,110804],"span":8},{"id":[1000000,110812],"value":";\n\\draw [thick,->] (right2) "},{"id":[1000000,235005],"value":"-- (right3)\n    "},{"id":[1000000,110840],"span":3},{"id":[1000000,110843],"value":"node [right"},{"id":[1000000,235024],"value":",text width=4cm,text centered,midway"},{"id":[1000000,110854],"value":"] {"},{"id":[1000000,234779],"value":"doc.get("},{"id":[1000000,234791],"value":"``groc"},{"id":[1000000,234799],"value":"ery'').idx(1)"},{"id":[1000000,235060],"value":" "},{"id":[1000000,234797],"span":1},{"id":[1000000,234787],"span":2},{"id":[1000000,110857],"span":18},{"id":[1000000,110875],"value":".insert"},{"id":[1000000,248907],"value":"After"},{"id":[1000000,110882],"value":"(``flour'');}"},{"id":[1000000,110895],"span":9},{"id":[1000000,110904],"value":";\n\\draw [thick,->] (left3) "},{"id":[1000000,111147],"value":" "},{"id":[1000000,110931],"value":"to "},{"id":[1000000,110934],"span":12},{"id":[1000000,111149],"span":1},{"id":[1000000,110946],"span":21},{"id":[1000000,110969],"span":2},{"id":[1000000,110971],"value":"(left"},{"id":[1000000,110978],"value":"4);\n"},{"id":[1000000,242342],"span":4},{"id":[1000000,110982],"value":"\\draw [thick,->] (right3) to "},{"id":[1000000,111011],"span":36},{"id":[1000000,111047],"value":"(right4);\n\\draw [thick,"},{"id":[1000000,219189],"value":"dashed,blue,"},{"id":[1000000,111070],"value":"->] (left3"},{"id":[1000000,219459],"value":".south"},{"id":[1000000,219465],"span":5},{"id":[1000000,111080],"value":") "},{"id":[1000000,111148],"value":" "},{"id":[1000000,111082],"value":"to"},{"id":[1000000,219592],"value":" [out="},{"id":[1000000,219622],"value":"27"},{"id":[1000000,219614],"span":1},{"id":[1000000,219598],"span":2},{"id":[1000000,219600],"value":"0"},{"id":[1000000,219624],"value":",in="},{"id":[1000000,219639],"value":"135"},{"id":[1000000,219628],"span":2},{"id":[1000000,219601],"value":"]"},{"id":[1000000,111084],"value":" (right"},{"id":[1000000,111093],"value":"4"},{"id":[1000000,219470],"value":"."},{"id":[1000000,219508],"value":"north"},{"id":[1000000,219471],"span":5},{"id":[1000000,219476],"value":" west"},{"id":[1000000,111094],"value":");\n\\draw [thick,"},{"id":[1000000,219201],"value":"dashed,blue,"},{"id":[1000000,111110],"value":"->"},{"id":[1000000,111114],"value":"] (right3"},{"id":[1000000,219481],"value":"."},{"id":[1000000,219518],"value":"south"},{"id":[1000000,219523],"span":5},{"id":[1000000,219482],"span":6},{"id":[1000000,219496],"span":4},{"id":[1000000,219488],"span":4},{"id":[1000000,111125],"value":") to"},{"id":[1000000,219602],"value":" [out="},{"id":[1000000,219619],"value":"27"},{"id":[1000000,219617],"span":1},{"id":[1000000,219608],"span":2},{"id":[1000000,219610],"value":"0"},{"id":[1000000,219630],"value":",in="},{"id":[1000000,219645],"value":"45"},{"id":[1000000,219634],"span":3},{"id":[1000000,219611],"value":"]"},{"id":[1000000,111129],"value":" "},{"id":[1000000,219697],"value":" "},{"id":[1000000,111130],"value":"(left"},{"id":[1000000,111139],"value":"4"},{"id":[1000000,219500],"value":".no"},{"id":[1000000,219533],"value":"rth east"},{"id":[1000000,111140],"value":");"},{"id":[1000000,111135],"span":2},{"id":[1000000,111123],"span":1},{"id":[1000000,111112],"span":1},{"id":[1000000,111091],"span":1},{"id":[1000000,110976],"span":1},{"id":[1000000,110967],"span":1},{"id":[1000000,110535],"span":1},{"id":[1000000,110448],"span":1},{"id":[1000000,110186],"span":1},{"id":[1000000,110153],"span":12},{"id":[1000000,110130],"span":1},{"id":[1000000,109848],"span":1},{"id":[1000000,109801],"span":1},{"id":[1000000,109584],"value":"\n\\end{tikzpicture}\n\\caption{Two replicas concurrently create "},{"id":[1000000,109651],"value":"ordered lists under the same map key"},{"id":[1000000,154746],"value":"."},{"id":[1000000,109687],"value":"}\\label{fig:two-lists}\n\\end{figure*}"},{"id":[1000000,112232],"value":"\n\n"},{"id":[1000000,112234],"span":89},{"id":[1000000,112362],"span":8},{"id":[1000000,112347],"span":8},{"id":[1000000,112323],"span":24},{"id":[1000000,112370],"span":6},{"id":[1000000,227575],"span":8},{"id":[1000000,227559],"span":8},{"id":[1000000,225578],"span":9},{"id":[1000000,112376],"span":46},{"id":[1000000,225628],"span":26},{"id":[1000000,112422],"span":9},{"id":[1000000,225597],"span":11},{"id":[1000000,112431],"span":39},{"id":[1000000,112472],"span":32},{"id":[1000000,112518],"span":57},{"id":[1000000,112577],"span":38},{"id":[1000000,112617],"span":48},{"id":[1000000,112681],"span":28},{"id":[1000000,112725],"span":69},{"id":[1000000,112800],"span":33},{"id":[1000000,112837],"span":24},{"id":[1000000,112865],"span":77},{"id":[1000000,112950],"span":27},{"id":[1000000,231317],"span":2},{"id":[1000000,231319],"value":"\\begin{figure*}"},{"id":[1000000,242333],"value":"[p]"},{"id":[1000000,231334],"value":"\n\\centering\n\\begin{tikzpicture}[auto,scale=0.8]"},{"id":[1000000,236410],"value":"\n\\"},{"id":[1000000,236432],"value":"path [draw,dotted] (4,-0"},{"id":[1000000,236458],"value":".5) -- (4,"},{"id":[1000000,236658],"value":"8.5"},{"id":[1000000,236501],"span":1},{"id":[1000000,236468],"span":3},{"id":[1000000,236471],"value":");\n\\node (leftR)  at (0,8"},{"id":[1000000,236496],"span":2},{"id":[1000000,236502],"value":") {Replica $p$:};\n\\node (rightR) at (8,8"},{"id":[1000000,236542],"span":2},{"id":[1000000,236544],"value":") {Replica $q$:};"},{"id":[1000000,236456],"span":1},{"id":[1000000,236412],"span":10},{"id":[1000000,231500],"value":"\n\\node (left1) "},{"id":[1000000,235173],"value":" "},{"id":[1000000,231515],"value":"at (0,"},{"id":[1000000,236162],"value":"7"},{"id":[1000000,235227],"span":1},{"id":[1000000,231521],"span":1},{"id":[1000000,231522],"value":") [rectangle,draw] {"},{"id":[1000000,231542],"span":12},{"id":[1000000,231554],"value":"["},{"id":[1000000,231559],"value":"``"},{"id":[1000000,231581],"value":"a"},{"id":[1000000,231561],"span":1},{"id":[1000000,231562],"value":"'', ``"},{"id":[1000000,231583],"value":"b"},{"id":[1000000,231568],"span":1},{"id":[1000000,231569],"value":"''"},{"id":[1000000,231584],"value":", ``c''"},{"id":[1000000,231571],"value":"]"},{"id":[1000000,231572],"span":2},{"id":[1000000,231578],"value":"};"},{"id":[1000000,235157],"span":16},{"id":[1000000,235174],"span":5},{"id":[1000000,235181],"span":1},{"id":[1000000,235229],"span":1},{"id":[1000000,235182],"span":44},{"id":[1000000,235230],"value":"\n\\node (left2)  at (0,"},{"id":[1000000,236160],"value":"5"},{"id":[1000000,235252],"span":1},{"id":[1000000,235253],"value":") [rectangle,draw] {[``a'', ``c'']};\n\\node ("},{"id":[1000000,235443],"value":"left3)  at (0,"},{"id":[1000000,236158],"value":"3"},{"id":[1000000,235457],"span":1},{"id":[1000000,235458],"value":") [rectangle,draw] {[``a'', ``x'', ``c'']};"},{"id":[1000000,235666],"value":"\n\\node (left4)  at (0,0) [rectangle,draw] "},{"id":[1000000,235710],"value":"{[``y'', ``a'', ``x'', ``z'', ``c'']};"},{"id":[1000000,235708],"span":1},{"id":[1000000,235297],"value":"\n\\node (right1) at ("},{"id":[1000000,235319],"value":"8,"},{"id":[1000000,236156],"value":"7"},{"id":[1000000,235321],"span":1},{"id":[1000000,235322],"value":") [rectangle,draw] {[``a'', "},{"id":[1000000,235362],"value":"``b'', ``c'']};"},{"id":[1000000,235501],"value":"\n\\node (right2) at (8,"},{"id":[1000000,236154],"value":"5"},{"id":[1000000,235523],"span":1},{"id":[1000000,235524],"value":") [rectangle,draw] {[``y'', "},{"id":[1000000,235556],"value":"``a'', ``b'', ``c'']};\n\\node "},{"id":[1000000,235589],"value":"(right3) at (8,"},{"id":[1000000,236152],"value":"3"},{"id":[1000000,235606],"span":1},{"id":[1000000,235607],"value":") [rectangle,draw] {[``y'', ``a'', ``z''"},{"id":[1000000,235649],"value":", ``b'', ``c'']};"},{"id":[1000000,235748],"value":"\n\\node (right"},{"id":[1000000,235765],"value":"4) at (8,0) [rectangle,draw] {[``y'', "},{"id":[1000000,235805],"value":"``a'', ``x'', ``z'', ``c'']};"},{"id":[1000000,236332],"value":"\n\\node (comms)  at ("},{"id":[1000000,236650],"value":"4"},{"id":[1000000,236352],"span":1},{"id":[1000000,236353],"value":", 1."},{"id":[1000000,236652],"value":"5"},{"id":[1000000,236357],"span":1},{"id":[1000000,236358],"value":") [text=blue] {\\footnotesize network communication};"},{"id":[1000000,235834],"value":"\n\\draw [thick,->] (left1)  to node [left]  {doc.idx(2).delete;} (left2);\n\\draw [thick,->] (left2"},{"id":[1000000,235932],"value":")  to node [left]  {doc.idx(1).insert"},{"id":[1000000,248912],"value":"A"},{"id":[1000000,248921],"value":"fter"},{"id":[1000000,248913],"span":4},{"id":[1000000,235969],"value":"(``x'');} (left3);\n\\draw [thick,->] (right1) to node [right] {doc.idx("},{"id":[1000000,236041],"value":"0).insert"},{"id":[1000000,248925],"value":"After"},{"id":[1000000,236050],"value":"(``y'');} (right2);\n\\draw"},{"id":[1000000,236077],"value":" [thick,->] (right2) to node [right] {doc.idx(2).insert"},{"id":[1000000,248930],"value":"After"},{"id":[1000000,236132],"value":"(``z'');} (right3);"},{"id":[1000000,236669],"value":"\n\\draw [thick,->"},{"id":[1000000,236689],"value":"] (left3) "},{"id":[1000000,236702],"value":" "},{"id":[1000000,236699],"value":"to "},{"id":[1000000,236703],"value":"(left4);\n\\draw [thick,->] (right3) to (right"},{"id":[1000000,236749],"value":"4);"},{"id":[1000000,236747],"span":1},{"id":[1000000,236685],"span":2},{"id":[1000000,236163],"value":"\n\\draw [thick,dashed,blue,->] (left3.south)  to [out=270,in=135] (right4.north west);\n\\draw [thick,dashed,blue,->"},{"id":[1000000,236288],"value":"]"},{"id":[1000000,236276],"value":" (right3.sou"},{"id":[1000000,236289],"value":"th) to [out=270,in=45]  (left4.north east);"},{"id":[1000000,236661],"span":4},{"id":[1000000,236075],"span":1},{"id":[1000000,236039],"span":1},{"id":[1000000,235930],"span":1},{"id":[1000000,235803],"span":1},{"id":[1000000,235761],"span":2},{"id":[1000000,235647],"span":1},{"id":[1000000,235604],"span":1},{"id":[1000000,235585],"span":2},{"id":[1000000,235552],"span":2},{"id":[1000000,235360],"span":1},{"id":[1000000,235354],"span":3},{"id":[1000000,235350],"span":2},{"id":[1000000,235317],"span":1},{"id":[1000000,235179],"span":1},{"id":[1000000,231576],"span":1},{"id":[1000000,231574],"span":1},{"id":[1000000,231555],"span":2},{"id":[1000000,231381],"value":"\n\\end{tikzpicture}\n\\caption{Concurrent editing of an ordered list of characters (i.e., a text document).}"},{"id":[1000000,239606],"value":"\\label{fig:text-edit}"},{"id":[1000000,231486],"value":"\n\\end{figure*}"},{"id":[1000000,236814],"value":"\n\n\\begin{figure*}"},{"id":[1000000,242336],"value":"[p]"},{"id":[1000000,236831],"value":"\n\\centering\n\\begin{tikzpicture}[auto,scale=0.8]"},{"id":[1000000,236990],"value":"\n\\path [draw,dotted] (4,-"},{"id":[1000000,238313],"value":"1"},{"id":[1000000,237015],"span":3},{"id":[1000000,237018],"value":") -- (4,"},{"id":[1000000,238309],"value":"7"},{"id":[1000000,237026],"span":1},{"id":[1000000,237027],"value":".5);\n\\node (left1)  at (0,7) [rectangle,draw"},{"id":[1000000,237073],"value":"] {\\{\\}};"},{"id":[1000000,237133],"value":"\n\\node (left2)  at (0,5) [rectangle,draw] {\\{``a'': \\{\\}\\}};\n\\node (left3)  at (0,"},{"id":[1000000,237217],"value":"3) [rectangle,dr"},{"id":[1000000,237239],"value":"aw] {\\{``a'': \\{``x'': ``y''\\}\\}};"},{"id":[1000000,237402],"value":"\n\\node"},{"id":[1000000,237509],"value":" [matrix]"},{"id":[1000000,237408],"value":" (left"},{"id":[1000000,237416],"value":"4) "},{"id":[1000000,237419],"span":1},{"id":[1000000,237420],"value":"at (0,0) [rectangle,draw] {"},{"id":[1000000,237519],"value":"\n    \\node {"},{"id":[1000000,237447],"value":"\\"},{"id":[1000000,237450],"value":"{"},{"id":[1000000,237455],"value":"mapT("},{"id":[1000000,237451],"value":"``a'"},{"id":[1000000,237460],"value":"'): \\{``x'': ``y''\\},"},{"id":[1000000,237531],"value":"}; \\\\\n    \\node {"},{"id":[1000000,237481],"span":1},{"id":[1000000,237482],"value":"listT(``a'"},{"id":[1000000,237494],"value":"'): [``z'']\\}};"},{"id":[1000000,237549],"value":" \\\\\n};"},{"id":[1000000,237492],"span":1},{"id":[1000000,237448],"span":1},{"id":[1000000,237414],"span":1},{"id":[1000000,237233],"span":3},{"id":[1000000,237215],"span":1},{"id":[1000000,237082],"value":"\n\\node (right1) at ("},{"id":[1000000,237104],"value":"8,7) [rectangle,draw] {\\{\\}};"},{"id":[1000000,237273],"value":"\n\\node (right2) at (8,5) [rectangle,draw] "},{"id":[1000000,237317],"value":"{\\{``a'': []\\}};\n\\node (right3) at (8,"},{"id":[1000000,237357],"value":"3) [rectangle,draw] {\\{``a'': [``z'']\\}"},{"id":[1000000,237401],"value":"}"},{"id":[1000000,237399],"span":1},{"id":[1000000,237396],"span":1},{"id":[1000000,237397],"value":";"},{"id":[1000000,237555],"value":"\n\\node [matrix] (right4"},{"id":[1000000,237580],"value":") at (8,0) [rectangle,draw] {\n    \\node {\\{mapT(``a''): "},{"id":[1000000,237640],"value":"\\{``x'': ``y''\\},}; \\\\\n    \\node {listT(``a''): [``z'']\\}}; \\\\\n};"},{"id":[1000000,238314],"value":"\n\\node (comms)  at (4,"},{"id":[1000000,238394],"value":"2.0"},{"id":[1000000,238336],"span":3},{"id":[1000000,238339],"value":") [text=blue] {\\footnotesize network communication};"},{"id":[1000000,237705],"value":"\n\\draw [thick,->"},{"id":[1000000,237723],"value":"] (left1)  to node [left"},{"id":[1000000,237749],"value":"]  {doc.get(``a'') := \\{\\};} (left2);\n\\draw [thick,->"},{"id":[1000000,237804],"value":"] (left2)  to node [left]  "},{"id":[1000000,237923],"value":"{"},{"id":[1000000,237831],"span":1},{"id":[1000000,237832],"value":"doc.get(``a'').get(``x'') := ``y'';} (left3);\n\\draw [thick,->"},{"id":[1000000,237895],"value":"] (right1) to node [right] "},{"id":[1000000,237924],"value":"{doc.get(``a'') := [];} (right2);\n\\draw [thick,->"},{"id":[1000000,237977],"value":"] (right2) to node [right] {doc.get(``a'')"},{"id":[1000000,238021],"value":".idx(0).insert"},{"id":[1000000,248935],"value":"After"},{"id":[1000000,238035],"value":"(``z'');} (right3);\n\\draw [thick,->] (left3)  to "},{"id":[1000000,238086],"value":"(left4);\n\\draw [thick,->] ("},{"id":[1000000,238115],"value":"right3) to (right4);\n\\draw [thick,dashed,blue,->] (left3.south)  to [out=270,in=135] (right4.north west);\n\\draw [thick,dashed,blue,->"},{"id":[1000000,238252],"value":"] (right3.south) to [out=270,in=45]  (left4.north east);"},{"id":[1000000,238248],"span":2},{"id":[1000000,238113],"span":1},{"id":[1000000,238084],"span":1},{"id":[1000000,238019],"span":1},{"id":[1000000,237973],"span":2},{"id":[1000000,237893],"span":1},{"id":[1000000,237802],"span":1},{"id":[1000000,237747],"span":1},{"id":[1000000,237721],"span":1},{"id":[1000000,237636],"span":2},{"id":[1000000,237578],"span":1},{"id":[1000000,237355],"span":1},{"id":[1000000,237315],"span":1},{"id":[1000000,237102],"span":1},{"id":[1000000,237071],"span":1},{"id":[1000000,236878],"value":"\n\\end{tikzpicture}\n\\caption{Concurrently assigning values of different types to the same map key.}"},{"id":[1000000,239627],"value":"\\label{fig"},{"id":[1000000,239645],"value":":type-clash}"},{"id":[1000000,239637],"span":4},{"id":[1000000,236976],"value":"\n\\end{figure*}"},{"id":[1000000,112942],"span":4},{"id":[1000000,112861],"span":2},{"id":[1000000,112833],"span":2},{"id":[1000000,112794],"span":3},{"id":[1000000,112723],"span":1},{"id":[1000000,112709],"span":7},{"id":[1000000,112665],"span":8},{"id":[1000000,112615],"span":1},{"id":[1000000,112575],"span":1},{"id":[1000000,112504],"span":7},{"id":[1000000,112470],"span":1},{"id":[1000000,111187],"value":"\n\n\\begin{figure*}"},{"id":[1000000,242339],"value":"[p]"},{"id":[1000000,111220],"value":"\n\\centering\n\\begin{tikzpicture}[auto"},{"id":[1000000,219986],"value":",scale=0.8"},{"id":[1000000,111256],"value":"]"},{"id":[1000000,220847],"value":"\n\\path [draw,dotted] (4,-0.5) -- (4,"},{"id":[1000000,236755],"value":"7.0"},{"id":[1000000,236562],"span":3},{"id":[1000000,220883],"span":1},{"id":[1000000,220884],"value":");"},{"id":[1000000,220751],"span":15},{"id":[1000000,220810],"span":1},{"id":[1000000,220766],"span":3},{"id":[1000000,220771],"span":2},{"id":[1000000,220775],"span":1},{"id":[1000000,220840],"span":3},{"id":[1000000,220776],"span":34},{"id":[1000000,220811],"span":6},{"id":[1000000,220836],"span":3},{"id":[1000000,220817],"span":18},{"id":[1000000,220843],"span":2},{"id":[1000000,220773],"span":1},{"id":[1000000,220769],"span":1},{"id":[1000000,111392],"value":"\n\\node"},{"id":[1000000,220597],"value":" [matrix]"},{"id":[1000000,111398],"value":" ("},{"id":[1000000,220476],"value":"left0"},{"id":[1000000,111400],"span":5},{"id":[1000000,111405],"value":")"},{"id":[1000000,111406],"span":1},{"id":[1000000,111407],"value":" at ("},{"id":[1000000,220453],"value":"0"},{"id":[1000000,111412],"span":1},{"id":[1000000,111413],"value":","},{"id":[1000000,220705],"value":"6"},{"id":[1000000,220697],"span":1},{"id":[1000000,220455],"span":1},{"id":[1000000,219999],"span":1},{"id":[1000000,111751],"span":3},{"id":[1000000,111484],"span":1},{"id":[1000000,111414],"span":1},{"id":[1000000,111415],"value":")"},{"id":[1000000,220367],"value":" [rectangle,draw]"},{"id":[1000000,111416],"value":" {"},{"id":[1000000,220616],"value":"\n    \\node {"},{"id":[1000000,111418],"value":"\\"},{"id":[1000000,111419],"span":5},{"id":[1000000,111427],"value":"{"},{"id":[1000000,220038],"value":"``"},{"id":[1000000,111428],"span":1},{"id":[1000000,111429],"value":"todo"},{"id":[1000000,220053],"value":"''"},{"id":[1000000,111433],"span":1},{"id":[1000000,111434],"value":":"},{"id":[1000000,111482],"value":" "},{"id":[1000000,111435],"value":"["},{"id":[1000000,220067],"value":"\\"},{"id":[1000000,111436],"value":"{"},{"id":[1000000,220069],"value":"``"},{"id":[1000000,111437],"span":1},{"id":[1000000,111438],"value":"t"},{"id":[1000000,111445],"value":"itle"},{"id":[1000000,220072],"value":"''"},{"id":[1000000,111449],"span":1},{"id":[1000000,111450],"value":":"},{"id":[1000000,111481],"value":" "},{"id":[1000000,220075],"value":"``"},{"id":[1000000,111451],"span":1},{"id":[1000000,111452],"value":"buy milk"},{"id":[1000000,220078],"value":"''"},{"id":[1000000,111460],"span":1},{"id":[1000000,111461],"value":","},{"id":[1000000,220628],"value":"}; \\\\\n    \\"},{"id":[1000000,220647],"value":"node {"},{"id":[1000000,220639],"span":4},{"id":[1000000,111462],"span":1},{"id":[1000000,220081],"value":"``"},{"id":[1000000,111463],"span":1},{"id":[1000000,111464],"value":"done"},{"id":[1000000,220084],"value":"''"},{"id":[1000000,111470],"span":1},{"id":[1000000,111471],"value":": false"},{"id":[1000000,220086],"value":"\\"},{"id":[1000000,111478],"value":"}]"},{"id":[1000000,220087],"value":"\\"},{"id":[1000000,111480],"value":"}"},{"id":[1000000,111468],"span":1},{"id":[1000000,111439],"span":3},{"id":[1000000,111424],"span":1},{"id":[1000000,111425],"value":"};"},{"id":[1000000,220654],"value":" \\\\\n};"},{"id":[1000000,220456],"value":"\n\\node"},{"id":[1000000,220606],"value":" [matrix]"},{"id":[1000000,220462],"value":" (right0)"},{"id":[1000000,220481],"value":" at (8,"},{"id":[1000000,220703],"value":"6"},{"id":[1000000,220695],"span":1},{"id":[1000000,220488],"span":1},{"id":[1000000,220489],"value":") [rectangle,draw] {"},{"id":[1000000,220660],"value":"\n    \\node {"},{"id":[1000000,220509],"value":"\\{``todo'': [\\{``title'': ``buy milk'',"},{"id":[1000000,220672],"value":"}; \\\\\n  "},{"id":[1000000,220548],"value":" "},{"id":[1000000,220680],"value":" \\node {"},{"id":[1000000,220549],"value":"``done'': false\\}]\\}"},{"id":[1000000,220571],"value":"}"},{"id":[1000000,220574],"value":";"},{"id":[1000000,220688],"value":" \\\\\n};"},{"id":[1000000,220572],"span":1},{"id":[1000000,220569],"span":1},{"id":[1000000,111485],"value":"\n\\node (left1)  at (0,"},{"id":[1000000,220701],"value":"3"},{"id":[1000000,220003],"span":1},{"id":[1000000,111747],"span":3},{"id":[1000000,111507],"span":1},{"id":[1000000,111508],"value":")"},{"id":[1000000,220384],"value":" [rectangle,draw]"},{"id":[1000000,111509],"value":" {\\"},{"id":[1000000,111512],"span":5},{"id":[1000000,111517],"value":"{"},{"id":[1000000,220041],"value":"``"},{"id":[1000000,111518],"span":1},{"id":[1000000,111519],"value":"todo"},{"id":[1000000,220056],"value":"''"},{"id":[1000000,111523],"span":1},{"id":[1000000,111524],"value":": []"},{"id":[1000000,220090],"value":"\\"},{"id":[1000000,111528],"value":"}"},{"id":[1000000,111529],"span":1},{"id":[1000000,111530],"value":"};\n\\node"},{"id":[1000000,220706],"value":" [matrix]"},{"id":[1000000,111538],"value":" (right1) at (8,"},{"id":[1000000,220699],"value":"3"},{"id":[1000000,220007],"span":1},{"id":[1000000,111743],"span":3},{"id":[1000000,111554],"span":1},{"id":[1000000,111555],"value":")"},{"id":[1000000,220401],"value":" [rectangle,draw]"},{"id":[1000000,111556],"value":" {"},{"id":[1000000,220715],"value":"\n    \\node {"},{"id":[1000000,111558],"value":"\\"},{"id":[1000000,111559],"span":5},{"id":[1000000,111564],"value":"{"},{"id":[1000000,220044],"value":"``"},{"id":[1000000,111565],"span":1},{"id":[1000000,111566],"value":"todo"},{"id":[1000000,220059],"value":"''"},{"id":[1000000,111570],"span":1},{"id":[1000000,111571],"value":": ["},{"id":[1000000,220091],"value":"\\"},{"id":[1000000,111574],"value":"{"},{"id":[1000000,220093],"value":"``"},{"id":[1000000,111575],"span":1},{"id":[1000000,111576],"value":"title"},{"id":[1000000,220096],"value":"''"},{"id":[1000000,111581],"span":1},{"id":[1000000,111582],"value":": "},{"id":[1000000,220099],"value":"``"},{"id":[1000000,111584],"span":1},{"id":[1000000,111585],"value":"buy milk"},{"id":[1000000,220102],"value":"''"},{"id":[1000000,111593],"span":1},{"id":[1000000,111594],"value":","},{"id":[1000000,220728],"value":"}; \\\\\n    \\node {"},{"id":[1000000,111595],"span":1},{"id":[1000000,220105],"value":"``"},{"id":[1000000,111596],"span":1},{"id":[1000000,111597],"value":"done"},{"id":[1000000,220108],"value":"''"},{"id":[1000000,111601],"span":1},{"id":[1000000,111602],"value":": true"},{"id":[1000000,220110],"value":"\\"},{"id":[1000000,111608],"value":"}]"},{"id":[1000000,220111],"value":"\\"},{"id":[1000000,111610],"value":"}"},{"id":[1000000,111611],"span":1},{"id":[1000000,111612],"value":"};"},{"id":[1000000,220745],"value":" \\\\\n};"},{"id":[1000000,111614],"value":"\n\\node (left2)  at (0,0"},{"id":[1000000,111754],"span":2},{"id":[1000000,111637],"value":")"},{"id":[1000000,220418],"value":" [rectangle,draw]"},{"id":[1000000,111638],"value":" {\\"},{"id":[1000000,111641],"span":5},{"id":[1000000,111650],"value":"{"},{"id":[1000000,220047],"value":"``"},{"id":[1000000,111651],"span":1},{"id":[1000000,111652],"value":"todo"},{"id":[1000000,220062],"value":"''"},{"id":[1000000,111656],"span":1},{"id":[1000000,111657],"value":": ["},{"id":[1000000,220113],"value":"\\"},{"id":[1000000,111660],"value":"{"},{"id":[1000000,220116],"value":"``"},{"id":[1000000,111661],"span":1},{"id":[1000000,111662],"value":"done"},{"id":[1000000,220122],"value":"''"},{"id":[1000000,111666],"span":1},{"id":[1000000,111667],"value":": true"},{"id":[1000000,220129],"value":"\\"},{"id":[1000000,111673],"value":"}]"},{"id":[1000000,220131],"value":"\\"},{"id":[1000000,111675],"value":"}"},{"id":[1000000,111676],"span":1},{"id":[1000000,111677],"value":"};\n\\node (right2) at (8,0"},{"id":[1000000,111756],"span":2},{"id":[1000000,111702],"value":")"},{"id":[1000000,220435],"value":" [rectangle,draw]"},{"id":[1000000,111703],"value":" {\\"},{"id":[1000000,111706],"span":5},{"id":[1000000,111711],"value":"{"},{"id":[1000000,220050],"value":"``"},{"id":[1000000,111712],"span":1},{"id":[1000000,111713],"value":"todo"},{"id":[1000000,220065],"value":"''"},{"id":[1000000,111717],"span":1},{"id":[1000000,111718],"value":": ["},{"id":[1000000,220114],"value":"\\"},{"id":[1000000,111723],"value":"{"},{"id":[1000000,220119],"value":"``"},{"id":[1000000,111724],"span":1},{"id":[1000000,111725],"value":"done"},{"id":[1000000,220127],"value":"''"},{"id":[1000000,111729],"span":1},{"id":[1000000,220124],"span":1},{"id":[1000000,111730],"value":": true"},{"id":[1000000,220130],"value":"\\"},{"id":[1000000,111736],"value":"}]"},{"id":[1000000,220132],"value":"\\"},{"id":[1000000,111738],"value":"}"},{"id":[1000000,111739],"span":1},{"id":[1000000,111740],"value":"};"},{"id":[1000000,220886],"value":"\n\\node (comms)  at (4,1."},{"id":[1000000,220964],"value":"6"},{"id":[1000000,220910],"span":1},{"id":[1000000,220911],"value":") [text=blue] {\\footnotesize network communication};"},{"id":[1000000,111758],"value":"\n\\draw [thick,->] ("},{"id":[1000000,220580],"value":"left0"},{"id":[1000000,111777],"span":5},{"id":[1000000,111782],"value":")  to node [left"},{"id":[1000000,111798],"span":17},{"id":[1000000,111815],"value":"]"},{"id":[1000000,220152],"value":" "},{"id":[1000000,111816],"value":" {"},{"id":[1000000,111818],"span":14},{"id":[1000000,111832],"value":"doc"},{"id":[1000000,236759],"value":".get("},{"id":[1000000,111835],"span":1},{"id":[1000000,111836],"value":"``todo''"},{"id":[1000000,236771],"value":").idx(1)"},{"id":[1000000,111844],"span":11},{"id":[1000000,111855],"value":".delete;} (left1);\n\\draw [thick,->] ("},{"id":[1000000,220590],"value":"right0"},{"id":[1000000,111892],"span":5},{"id":[1000000,111897],"value":")"},{"id":[1000000,111898],"span":1},{"id":[1000000,111899],"value":" to node [right"},{"id":[1000000,111914],"span":16},{"id":[1000000,111930],"value":"] {"},{"id":[1000000,111933],"span":14},{"id":[1000000,111947],"value":"doc"},{"id":[1000000,236765],"value":".get("},{"id":[1000000,111950],"span":1},{"id":[1000000,111951],"value":"``todo''"},{"id":[1000000,236795],"value":")"},{"id":[1000000,111959],"span":1},{"id":[1000000,111962],"span":5},{"id":[1000000,111967],"value":"."},{"id":[1000000,236796],"value":"idx(1)."},{"id":[1000000,236808],"value":"get("},{"id":[1000000,111968],"span":5},{"id":[1000000,111973],"value":"``done''"},{"id":[1000000,236813],"value":")"},{"id":[1000000,111981],"span":1},{"id":[1000000,111982],"value":" := true;} (right"},{"id":[1000000,112001],"value":"1);\n\\draw [thick,->] (left1)  to "},{"id":[1000000,112034],"span":36},{"id":[1000000,112072],"value":"(left2);\n\\draw [thick,->] (right1) to "},{"id":[1000000,112110],"span":36},{"id":[1000000,112146],"value":"(right2);\n\\draw [thick,"},{"id":[1000000,220269],"value":"dashed,blue,"},{"id":[1000000,112169],"value":"->] (left1"},{"id":[1000000,220293],"value":".south"},{"id":[1000000,112179],"value":")  to"},{"id":[1000000,220305],"value":" [out=2"},{"id":[1000000,220316],"value":"70"},{"id":[1000000,220320],"value":",in=135]"},{"id":[1000000,220318],"span":1},{"id":[1000000,220312],"span":2},{"id":[1000000,112184],"value":" (right2"},{"id":[1000000,220345],"value":".north west"},{"id":[1000000,112192],"value":");\n\\draw [thick,"},{"id":[1000000,220281],"value":"dashed,blue,"},{"id":[1000000,112208],"value":"->] (right1"},{"id":[1000000,220299],"value":".south"},{"id":[1000000,112219],"value":") to"},{"id":[1000000,220328],"value":" [out=270,in=45] "},{"id":[1000000,112223],"value":" (left2"},{"id":[1000000,220356],"value":".north east"},{"id":[1000000,112230],"value":");"},{"id":[1000000,112070],"span":1},{"id":[1000000,111999],"span":1},{"id":[1000000,111960],"span":1},{"id":[1000000,111721],"span":1},{"id":[1000000,111646],"span":2},{"id":[1000000,111257],"value":"\n\\end{tikzpicture}\n\\capt"},{"id":[1000000,111283],"value":"ion{One replica removes a list element, while another concurrently updates its contents"},{"id":[1000000,154747],"value":"."},{"id":[1000000,111370],"value":"}\\label{fig:todo-item}"},{"id":[1000000,111281],"span":1},{"id":[1000000,111204],"value":"\n"},{"id":[1000000,243013],"span":1},{"id":[1000000,111205],"value":"\\end{figure*"},{"id":[1000000,111219],"value":"}"},{"id":[1000000,112977],"value":"\n"},{"id":[1000000,243015],"value":"\n"},{"id":[1000000,243017],"value":"Figure~\\ref{fig:map-remove} gives an example of concurrent edits at different levels of the JSON tree. Here, replica $p$ adds ``red'' to a map of colors, while replica $q$ concurrently blanks out the entire map of colors"},{"id":[1000000,243237],"span":1},{"id":[1000000,243238],"value":" and then adds "},{"id":[1000000,243254],"value":"``green''. Instead"},{"id":[1000000,243274],"value":" of assigning an empty map, $q$ could equivalently remove the entire key ``colors'' from the outer map, and then assign a new em"},{"id":[1000000,243404],"value":"pty map to that key. The difficulty in this example is that the addition of ``red'' occurs at a lower level of the tree, while concurrently the removal of the map of colors occurs at a higher level of the tree.\n\nOne possible way of handling such a conflict would be to let edits at higher levels of the tree always override concurrent edits within that subtree. In this case, that would mean the addition of ``red'' would be discarded, since it would be overridden by the blanking-out of the entire map of colors. However, that behavior would "},{"id":[1000000,243985],"value":"violate"},{"id":[1000000,243947],"span":8},{"id":[1000000,243955],"value":" our requirement that "},{"id":[1000000,243992],"value":"no user input should be lost due to concurrent modifications. Instead, we "},{"id":[1000000,244068],"value":"define merge semantics that preserve all changes, as shown in Figure~\\ref{fig:map-remove}: ``blue'' must be absent from the final map, since it was removed by blanking out the map, while ``red'' and ``green'' must be present"},{"id":[1000000,244294],"value":", since they were explicitly added. This behavior matches that of CRDT maps in Riak~\\cite{Brown:2014hs,Brown:2013wy}."},{"id":[1000000,245839],"value":"\n\nFigure~\\ref{fig:two-lists} illustrates another problem with maps: two replicas can concurrently insert the same map key. Here, $p$ and $q$ each independently create a new shopping list under the same map key ``grocery'', and add items to the list. In the case of Figure~\\ref{fig:register-assign}, concurrent assignments to the same map key were left to be resolved by the application, but in Figure~\\ref{fig:two-lists}, both values are lists and so they can be merged automatically. We preserve the ordering and adjacency of items inserted at each replica, so ``ham'' appears after ``eggs'', and ``flour'' appears after ``milk'' in the merged result. There is no information on which replica's items should appear first in the merged result, so the algorithm can make an arbitrary choice between ``eggs, ham, milk, flour'' and ``milk, flour, eggs, ham'', provided that all replicas end up with the"},{"id":[1000000,246750],"value":" items in the"},{"id":[1000000,246738],"value":" same order."},{"id":[1000000,246763],"value":"\n\nFigure~\\ref{fig:text-edit} shows how a collaborative text editor can be implemented, "},{"id":[1000000,246866],"value":"by treating the document as a list of characters."},{"id":[1000000,246972],"value":" All changes are preserved in the merged result:"},{"id":[1000000,246915],"value":" ``y'' is inserted before ``a''"},{"id":[1000000,246971],"value":";"},{"id":[1000000,247036],"value":" ``x'' and ``z'' are inserte"},{"id":[1000000,247068],"value":"d between "},{"id":[1000000,247082],"value":"``a'' and ``c''; and"},{"id":[1000000,247078],"span":2},{"id":[1000000,247064],"span":2},{"id":[1000000,246946],"span":1},{"id":[1000000,246947],"value":" ``b'' is deleted"},{"id":[1000000,247102],"value":".\n\nFigure~\\ref{fig:type-clash} demonstrates a variant of the situation in Figure~\\ref{fig:two-lists}, where "},{"id":[1000000,247212],"value":"two replicas concurrently insert the same map key, but they do so with different datatypes as values: $"},{"id":[1000000,247317],"value":"p$ inserts a nested map, whereas $q$ inserts a list. These datatypes cannot"},{"id":[1000000,248979],"value":" be"},{"id":[1000000,248977],"span":1},{"id":[1000000,247392],"value":" meaningfully"},{"id":[1000000,247405],"span":3},{"id":[1000000,247408],"value":" merged, so we preserve both values separately. We do this by"},{"id":[1000000,247507],"value":" tagging each map key with a type annotation (\\textsf{mapT}"},{"id":[1000000,247591],"value":","},{"id":[1000000,247566],"span":3},{"id":[1000000,247569],"value":" \\textsf{"},{"id":[1000000,247582],"value":"listT}"},{"id":[1000000,247592],"value":", or \\textsf{regT} for a map, list, or register value respectively), so each type inhabits a separate namespace."},{"id":[1000000,247704],"span":8},{"id":[1000000,247578],"span":2},{"id":[1000000,247469],"span":19},{"id":[1000000,247315],"span":1},{"id":[1000000,247210],"span":1},{"id":[1000000,247021],"span":1},{"id":[1000000,246964],"span":6},{"id":[1000000,247026],"span":2},{"id":[1000000,247022],"span":2},{"id":[1000000,246850],"span":8},{"id":[1000000,244292],"span":1},{"id":[1000000,244066],"span":1},{"id":[1000000,243402],"span":1},{"id":[1000000,243272],"span":1},{"id":[1000000,243016],"value":"\n"},{"id":[1000000,112978],"value":"\n"},{"id":[1000000,227804],"value":"F"},{"id":[1000000,112979],"span":5},{"id":[1000000,112984],"value":"inal"},{"id":[1000000,227805],"value":"ly,"},{"id":[1000000,112988],"value":" "},{"id":[1000000,112989],"span":11},{"id":[1000000,113000],"value":"Figure~\\ref{fig:todo-item} shows a limitation of the principle of preserving all user input. In "},{"id":[1000000,113112],"value":"a to-do list application, one replica removes a to-do item from the list, while another replica concurrently marks the same item as done. As the changes are merged, the update of the map key ``done'' effectively causes the list item to be resurrected on"},{"id":[1000000,113365],"span":9},{"id":[1000000,113374],"value":" replica"},{"id":[1000000,227773],"value":" $p$"},{"id":[1000000,113386],"value":", lea"},{"id":[1000000,227784],"value":"ving"},{"id":[1000000,113391],"span":7},{"id":[1000000,113398],"value":" a to-do"},{"id":[1000000,113408],"value":" item without a title (since the title was deleted as part of deleting the list item). This behavior is consistent with the example in Figure~\\"},{"id":[1000000,113553],"value":"ref{fig:map-remove}, but it is perhaps surprising"},{"id":[1000000,113602],"span":9},{"id":[1000000,113611],"value":". In this "},{"id":[1000000,227795],"value":"case"},{"id":[1000000,113621],"span":7},{"id":[1000000,113628],"value":" it may be more desirable to discard one of the concurrent updates, and thus preserve the implicit schema that a to-do item has both a ``title'' and a ``done'' field."},{"id":[1000000,223542],"value":" We leave t"},{"id":[1000000,223555],"value":"he"},{"id":[1000000,223628],"value":" analysis"},{"id":[1000000,223691],"value":" of developer expectation"},{"id":[1000000,223755],"value":"s"},{"id":[1000000,223637],"value":" "},{"id":[1000000,223686],"value":"and"},{"id":[1000000,223716],"span":4},{"id":[1000000,223689],"span":1},{"id":[1000000,223638],"span":13},{"id":[1000000,223655],"span":2},{"id":[1000000,223661],"span":5},{"id":[1000000,223657],"span":2},{"id":[1000000,223651],"span":2},{"id":[1000000,223557],"value":" "},{"id":[1000000,223738],"value":"the "},{"id":[1000000,225682],"value":"development of"},{"id":[1000000,223742],"span":4},{"id":[1000000,223756],"span":15},{"id":[1000000,223746],"span":9},{"id":[1000000,223558],"span":10},{"id":[1000000,223570],"span":4},{"id":[1000000,223574],"value":" a "},{"id":[1000000,223589],"value":"schema lan"},{"id":[1000000,223605],"value":"guage "},{"id":[1000000,227821],"value":"for"},{"id":[1000000,223613],"span":2},{"id":[1000000,223615],"value":" future work."},{"id":[1000000,223611],"span":1},{"id":[1000000,223599],"span":3},{"id":[1000000,223577],"span":6},{"id":[1000000,223568],"span":1},{"id":[1000000,223553],"span":1},{"id":[1000000,113794],"span":2},{"id":[1000000,113798],"span":42},{"id":[1000000,113842],"span":44},{"id":[1000000,113892],"span":171},{"id":[1000000,113886],"span":3},{"id":[1000000,113840],"span":1},{"id":[1000000,113796],"span":1},{"id":[1000000,113551],"span":1},{"id":[1000000,113406],"span":1},{"id":[1000000,113382],"span":2},{"id":[1000000,113096],"span":1},{"id":[1000000,113105],"span":3},{"id":[1000000,113097],"span":4},{"id":[1000000,111217],"span":1},{"id":[1000000,109645],"span":3},{"id":[1000000,109531],"value":"\n"},{"id":[1000000,114312],"value":"\n\\subsection{JSON "},{"id":[1000000,252339],"value":"V"},{"id":[1000000,114330],"span":1},{"id":[1000000,114331],"value":"ersus "},{"id":[1000000,114519],"value":"XML"},{"id":[1000000,114337],"span":12},{"id":[1000000,114349],"value":"}"},{"id":[1000000,144768],"value":"\\label{sec:json-xml}"},{"id":[1000000,114350],"value":"\n\nThe most common alternative to JSON is XML, and collaborative editing of XML documents has been "},{"id":[1000000,114508],"value":"previously"},{"id":[1000000,114448],"span":11},{"id":[1000000,114459],"value":" studied"},{"id":[1000000,123971],"value":"~\\cite{Davis:2002iv,Ignat:2003jy,Wang:2015v"},{"id":[1000000,124134],"value":"o"},{"id":[1000000,124014],"span":1},{"id":[1000000,124015],"value":"}"},{"id":[1000000,114471],"span":22},{"id":[1000000,114496],"span":1},{"id":[1000000,114493],"span":2},{"id":[1000000,114495],"value":"."},{"id":[1000000,114518],"value":" "},{"id":[1000000,114561],"value":"Besides the superficial synta"},{"id":[1000000,114592],"value":"ctical differences, "},{"id":[1000000,114590],"span":1},{"id":[1000000,114534],"span":9},{"id":[1000000,114543],"value":"the tree structure"},{"id":[1000000,114621],"value":" of XML and JSON appears quite similar. However, there is an important difference that we should highlight.\n\nJSON has two collection constructs"},{"id":[1000000,114835],"value":" that can be arbitrarily nested"},{"id":[1000000,114764],"value":": maps for unordered key-value pairs, and lists for ordered sequences. "},{"id":[1000000,115016],"value":"In "},{"id":[1000000,114866],"value":"XM"},{"id":[1000000,115014],"value":"L,"},{"id":[1000000,114868],"span":36},{"id":[1000000,114904],"value":" the children of an element "},{"id":[1000000,114942],"value":"form an "},{"id":[1000000,114966],"span":6},{"id":[1000000,114950],"value":"ordered sequence"},{"id":[1000000,115019],"value":", while the attributes of an element are unordered key-value pairs. However, "},{"id":[1000000,115108],"value":"XML does not allow nested "},{"id":[1000000,115138],"value":"elements inside attributes -- the value of an attribute can only be a primitive datatype. Thus, XM"},{"id":[1000000,115248],"value":"L"},{"id":[1000000,115236],"span":1},{"id":[1000000,115237],"value":" supports "},{"id":[1000000,115249],"value":"maps within lists, but not lists"},{"id":[1000000,115297],"value":" "},{"id":[1000000,115298],"span":7},{"id":[1000000,115281],"span":1},{"id":[1000000,115282],"value":"within"},{"id":[1000000,115305],"value":" "},{"id":[1000000,115306],"span":5},{"id":[1000000,115288],"span":1},{"id":[1000000,115289],"value":"maps."},{"id":[1000000,115400],"value":" In this regard, XML is "},{"id":[1000000,115446],"value":"less expressive than JSON: "},{"id":[1000000,115474],"value":"t"},{"id":[1000000,115424],"span":11},{"id":[1000000,115311],"span":1},{"id":[1000000,115389],"span":5},{"id":[1000000,115312],"span":1},{"id":[1000000,115313],"value":"he "},{"id":[1000000,247755],"value":"scenarios"},{"id":[1000000,115316],"span":7},{"id":[1000000,247720],"span":1},{"id":[1000000,115323],"value":" in Figure"},{"id":[1000000,247721],"value":"s"},{"id":[1000000,115333],"value":"~\\ref{fig:two-lists}"},{"id":[1000000,247722],"value":" and~\\ref{fig:type-clash}"},{"id":[1000000,115353],"value":" cannot occur in XML"},{"id":[1000000,115573],"span":70},{"id":[1000000,115475],"value":"."},{"id":[1000000,115373],"span":16},{"id":[1000000,115294],"value":"\n\nS"},{"id":[1000000,115492],"value":"ome applications may attach map-like semantics to the children of an XML document"},{"id":[1000000,115657],"value":", for example by "},{"id":[1000000,115723],"value":"interpreting"},{"id":[1000000,115674],"span":5},{"id":[1000000,115679],"value":" the "},{"id":[1000000,115712],"value":"child "},{"id":[1000000,115684],"value":"element name "},{"id":[1000000,115752],"value":"as key. However, th"},{"id":[1000000,180565],"value":"is key-value "},{"id":[1000000,180580],"value":"structure is"},{"id":[1000000,180578],"span":1},{"id":[1000000,115771],"span":17},{"id":[1000000,115788],"value":" not part of XML itself"},{"id":[1000000,180592],"value":","},{"id":[1000000,115811],"value":" and would not be enforced"},{"id":[1000000,116050],"value":" by existing collaborative editing algorithms for XML."},{"id":[1000000,115899],"span":1},{"id":[1000000,116022],"value":" "},{"id":[1000000,116106],"value":"I"},{"id":[1000000,116023],"span":1},{"id":[1000000,116024],"value":"f "},{"id":[1000000,116109],"value":"multiple children with the same key are concurrently created, existing algorith"},{"id":[1000000,116190],"value":"ms "},{"id":[1000000,116188],"span":1},{"id":[1000000,116048],"span":2},{"id":[1000000,116026],"span":11},{"id":[1000000,115900],"span":1},{"id":[1000000,115909],"span":50},{"id":[1000000,115959],"value":"would create duplicate "},{"id":[1000000,116245],"value":"c"},{"id":[1000000,115982],"span":1},{"id":[1000000,115983],"value":"hildren with the same key rather than m"},{"id":[1000000,116316],"value":"erging them like in Figure~\\ref{fig:two-lists}."},{"id":[1000000,124016],"value":"\n\n"},{"id":[1000000,124018],"span":11},{"id":[1000000,124055],"span":78},{"id":[1000000,124029],"span":13},{"id":[1000000,115901],"span":4},{"id":[1000000,115837],"span":31},{"id":[1000000,115697],"span":15},{"id":[1000000,115735],"span":1},{"id":[1000000,115134],"span":2},{"id":[1000000,115096],"span":6},{"id":[1000000,114932],"span":5},{"id":[1000000,114467],"span":2},{"id":[1000000,114276],"span":2},{"id":[1000000,114278],"value":"\\subsection{Document "},{"id":[1000000,252341],"value":"E"},{"id":[1000000,114299],"span":1},{"id":[1000000,114300],"value":"diting API}"},{"id":[1000000,144788],"value":"\\label{sec:"},{"id":[1000000,144816],"value":"editing"},{"id":[1000000,144799],"span":6},{"id":[1000000,144805],"value":"-api}"},{"id":[1000000,114311],"value":"\n"},{"id":[1000000,35891],"value":"\n\\begin{figure}"},{"id":[1000000,38814],"value":"\n\\centering"},{"id":[1000000,36034],"value":"\n\\begin{tabular}"},{"id":[1000000,36129],"value":"{rcll}"},{"id":[1000000,36064],"value":"\nCMD & ::= & "},{"id":[1000000,36079],"value":"\\"},{"id":[1000000,36084],"value":"text"},{"id":[1000000,224069],"value":"tt"},{"id":[1000000,36088],"span":2},{"id":[1000000,36090],"value":"{let} $x$ "},{"id":[1000000,224287],"value":"\\texttt{"},{"id":[1000000,36100],"value":"="},{"id":[1000000,224295],"value":"}"},{"id":[1000000,36101],"value":" EXPR & $x \\in \\mathrm{VAR}$"},{"id":[1000000,36135],"value":" \\\\\n& "},{"id":[1000000,36185],"value":"$"},{"id":[1000000,36183],"span":1},{"id":[1000000,36181],"span":1},{"id":[1000000,36141],"value":"|"},{"id":[1000000,36186],"value":"$"},{"id":[1000000,36142],"value":" & "},{"id":[1000000,36829],"value":"$\\mathrm{"},{"id":[1000000,36145],"value":"EXPR"},{"id":[1000000,36838],"value":"}"},{"id":[1000000,224296],"value":"$"},{"id":[1000000,36149],"value":" "},{"id":[1000000,224071],"value":"\\texttt{"},{"id":[1000000,39898],"value":":"},{"id":[1000000,36150],"value":"="},{"id":[1000000,224079],"value":"}"},{"id":[1000000,36151],"value":" "},{"id":[1000000,224297],"value":"$"},{"id":[1000000,36152],"span":1},{"id":[1000000,36153],"value":"v$ & $v \\in "},{"id":[1000000,36168],"value":"\\mathrm{"},{"id":[1000000,36165],"value":"VAL"},{"id":[1000000,36176],"value":"}$ \\\\"},{"id":[1000000,36717],"value":"\n& $|$ & "},{"id":[1000000,36761],"value":"$\\mathrm{"},{"id":[1000000,36726],"value":"EXPR"},{"id":[1000000,36770],"value":"}"},{"id":[1000000,224098],"value":"$"},{"id":[1000000,36730],"span":1},{"id":[1000000,224080],"span":1},{"id":[1000000,36731],"value":"\\"},{"id":[1000000,224087],"value":"texttt"},{"id":[1000000,36775],"span":4},{"id":[1000000,36736],"span":6},{"id":[1000000,36742],"value":"{"},{"id":[1000000,224099],"value":"."},{"id":[1000000,36743],"value":"insert"},{"id":[1000000,248940],"value":"After"},{"id":[1000000,224298],"value":"("},{"id":[1000000,36749],"span":5},{"id":[1000000,36754],"value":"}"},{"id":[1000000,36755],"span":1},{"id":[1000000,224093],"value":"$"},{"id":[1000000,36779],"value":"v"},{"id":[1000000,224094],"value":"$"},{"id":[1000000,224300],"value":"\\texttt{"},{"id":[1000000,36780],"value":")"},{"id":[1000000,224308],"value":"}"},{"id":[1000000,36781],"span":1},{"id":[1000000,36782],"value":" & $v \\in \\mathrm{VAL}$ \\\\\n& "},{"id":[1000000,36813],"value":"$|$ & "},{"id":[1000000,36828],"value":"$"},{"id":[1000000,36826],"span":1},{"id":[1000000,36819],"value":"\\mathrm"},{"id":[1000000,36840],"value":"{EXPR}"},{"id":[1000000,224101],"value":"$"},{"id":[1000000,36846],"span":1},{"id":[1000000,36847],"value":"\\"},{"id":[1000000,224108],"value":"texttt"},{"id":[1000000,36848],"span":6},{"id":[1000000,36854],"value":"{"},{"id":[1000000,224114],"value":"."},{"id":[1000000,36865],"value":"delete}"},{"id":[1000000,36875],"span":1},{"id":[1000000,36872],"value":" \\\\"},{"id":[1000000,37058],"span":65},{"id":[1000000,36855],"span":5},{"id":[1000000,36811],"span":1},{"id":[1000000,36732],"span":2},{"id":[1000000,36386],"value":"\n"},{"id":[1000000,36391],"value":"& $|$ & \\"},{"id":[1000000,36420],"value":"text"},{"id":[1000000,224118],"value":"tt"},{"id":[1000000,36400],"span":6},{"id":[1000000,36406],"value":"{yield} \\\\"},{"id":[1000000,36387],"span":2},{"id":[1000000,36187],"value":"\n"},{"id":[1000000,36190],"value":"& $|$ & CMD"},{"id":[1000000,224334],"value":"\\t"},{"id":[1000000,224340],"value":"exttt{"},{"id":[1000000,224336],"span":2},{"id":[1000000,36201],"value":";"},{"id":[1000000,224346],"value":"}"},{"id":[1000000,36202],"value":" CMD "},{"id":[1000000,36207],"span":2},{"id":[1000000,36430],"value":"\\vspace{"},{"id":[1000000,36710],"value":"0.5"},{"id":[1000000,36438],"span":1},{"id":[1000000,36446],"value":"em"},{"id":[1000000,36439],"span":3},{"id":[1000000,36442],"value":"}"},{"id":[1000000,36448],"value":"\\\\"},{"id":[1000000,36209],"value":"\nEXPR & ::= & \\text"},{"id":[1000000,224121],"value":"t"},{"id":[1000000,224123],"value":"t"},{"id":[1000000,36228],"span":2},{"id":[1000000,36230],"value":"{doc} \\\\"},{"id":[1000000,36941],"value":"\n& $|$ & $x$ & $x \\in \\mathrm{VAR}"},{"id":[1000000,36979],"value":"$ \\\\"},{"id":[1000000,36975],"span":2},{"id":[1000000,36238],"value":"\n& $|$ "},{"id":[1000000,36424],"value":"& "},{"id":[1000000,36245],"value":"EXPR"},{"id":[1000000,224310],"value":"\\texttt{"},{"id":[1000000,231660],"value":".get("},{"id":[1000000,93170],"span":1},{"id":[1000000,36249],"span":2},{"id":[1000000,36267],"span":4},{"id":[1000000,36251],"span":12},{"id":[1000000,36271],"span":1},{"id":[1000000,93192],"span":5},{"id":[1000000,102219],"span":1},{"id":[1000000,224040],"span":1},{"id":[1000000,224061],"span":1},{"id":[1000000,224318],"value":"}$"},{"id":[1000000,224042],"value":"\\math"},{"id":[1000000,225698],"value":"it"},{"id":[1000000,224126],"span":2},{"id":[1000000,224047],"span":2},{"id":[1000000,224049],"value":"{key}"},{"id":[1000000,224320],"value":"$"},{"id":[1000000,224322],"value":"\\te"},{"id":[1000000,224327],"value":"xttt{"},{"id":[1000000,231671],"value":")"},{"id":[1000000,224325],"span":1},{"id":[1000000,224066],"span":1},{"id":[1000000,224332],"value":"}"},{"id":[1000000,224062],"span":1},{"id":[1000000,224041],"span":1},{"id":[1000000,93197],"span":1},{"id":[1000000,93210],"span":3},{"id":[1000000,93198],"span":4},{"id":[1000000,102220],"span":1},{"id":[1000000,93202],"span":1},{"id":[1000000,36272],"span":11},{"id":[1000000,93172],"span":1},{"id":[1000000,36283],"span":1},{"id":[1000000,36284],"value":" & "},{"id":[1000000,36291],"value":"$\\math"},{"id":[1000000,225702],"value":"it"},{"id":[1000000,224130],"span":2},{"id":[1000000,93205],"span":2},{"id":[1000000,36297],"span":2},{"id":[1000000,36299],"value":"{key} \\in \\mathrm"},{"id":[1000000,36318],"value":"{"},{"id":[1000000,37052],"value":"String"},{"id":[1000000,36319],"span":3},{"id":[1000000,36322],"value":"}$ \\"},{"id":[1000000,36908],"value":"\\"},{"id":[1000000,42381],"value":"\n& $|$ & EXPR"},{"id":[1000000,42394],"span":1},{"id":[1000000,42395],"value":"\\text"},{"id":[1000000,224135],"value":"tt"},{"id":[1000000,42400],"span":2},{"id":[1000000,42402],"value":"{"},{"id":[1000000,224137],"value":"."},{"id":[1000000,231667],"value":"idx"},{"id":[1000000,231595],"span":2},{"id":[1000000,231597],"value":"("},{"id":[1000000,42403],"span":4},{"id":[1000000,42407],"value":"}"},{"id":[1000000,231598],"value":"$"},{"id":[1000000,232731],"value":"i"},{"id":[1000000,231599],"span":1},{"id":[1000000,231600],"value":"$\\texttt{)} & $"},{"id":[1000000,232733],"value":"i"},{"id":[1000000,231615],"span":1},{"id":[1000000,231616],"value":" "},{"id":[1000000,231623],"value":"\\ge 0$"},{"id":[1000000,231617],"span":3},{"id":[1000000,42408],"value":" \\\\"},{"id":[1000000,36326],"span":1},{"id":[1000000,36452],"span":22},{"id":[1000000,36512],"span":2},{"id":[1000000,36474],"span":10},{"id":[1000000,36327],"span":7},{"id":[1000000,36426],"span":2},{"id":[1000000,36334],"span":10},{"id":[1000000,224142],"span":2},{"id":[1000000,36344],"span":3},{"id":[1000000,224138],"span":1},{"id":[1000000,36347],"span":8},{"id":[1000000,36484],"span":22},{"id":[1000000,36517],"span":10},{"id":[1000000,36506],"span":3},{"id":[1000000,36355],"value":"\n"},{"id":[1000000,93127],"value":"& $|$ & EXPR"},{"id":[1000000,93139],"span":1},{"id":[1000000,93140],"value":"\\text"},{"id":[1000000,224150],"value":"tt"},{"id":[1000000,93145],"span":1},{"id":[1000000,224145],"span":2},{"id":[1000000,93146],"span":1},{"id":[1000000,93147],"value":"{"},{"id":[1000000,224139],"value":"."},{"id":[1000000,93148],"value":"keys} \\\\"},{"id":[1000000,93126],"value":"\n"},{"id":[1000000,36356],"value":"& $|$ "},{"id":[1000000,36428],"value":"& "},{"id":[1000000,36362],"value":"EXPR"},{"id":[1000000,36366],"span":1},{"id":[1000000,36369],"value":"\\text"},{"id":[1000000,224154],"value":"tt"},{"id":[1000000,36374],"span":2},{"id":[1000000,36376],"value":"{"},{"id":[1000000,224333],"value":"."},{"id":[1000000,36377],"value":"values}"},{"id":[1000000,36527],"value":" "},{"id":[1000000,37035],"value":"\\vspace{0.5em}"},{"id":[1000000,36528],"value":"\\\\\n"},{"id":[1000000,36531],"span":43},{"id":[1000000,36706],"span":3},{"id":[1000000,36574],"span":7},{"id":[1000000,36581],"value":"VAR & ::= & $"},{"id":[1000000,36594],"span":1},{"id":[1000000,36595],"value":"x"},{"id":[1000000,36596],"span":15},{"id":[1000000,36611],"value":"$"},{"id":[1000000,36658],"value":" "},{"id":[1000000,224173],"value":"& $"},{"id":[1000000,224199],"value":"x \\in \\mathrm{"},{"id":[1000000,224220],"value":"Var"},{"id":[1000000,224213],"value":"String}"},{"id":[1000000,224176],"span":3},{"id":[1000000,224179],"value":"$"},{"id":[1000000,36691],"span":14},{"id":[1000000,36659],"value":"\\\\"},{"id":[1000000,36612],"value":"\nVAL & ::= &"},{"id":[1000000,37123],"value":" "},{"id":[1000000,37172],"value":"$"},{"id":[1000000,37124],"value":"n"},{"id":[1000000,37173],"value":"$"},{"id":[1000000,37125],"value":" &"},{"id":[1000000,36624],"value":" "},{"id":[1000000,36632],"value":"$"},{"id":[1000000,37127],"value":"n \\"},{"id":[1000000,37132],"value":"in "},{"id":[1000000,37130],"span":1},{"id":[1000000,36625],"value":"\\math"},{"id":[1000000,63764],"value":"rm"},{"id":[1000000,36630],"span":2},{"id":[1000000,36633],"value":"{"},{"id":[1000000,63767],"value":"Number"},{"id":[1000000,36634],"span":1},{"id":[1000000,36635],"value":"}"},{"id":[1000000,36636],"span":1},{"id":[1000000,36713],"span":2},{"id":[1000000,36637],"span":4},{"id":[1000000,36715],"span":2},{"id":[1000000,36641],"span":16},{"id":[1000000,36657],"value":"$"},{"id":[1000000,37202],"value":" \\\\"},{"id":[1000000,37160],"value":"\n& "},{"id":[1000000,37165],"value":"$|$ & "},{"id":[1000000,224239],"value":"$"},{"id":[1000000,37351],"value":"\\"},{"id":[1000000,224232],"value":"math"},{"id":[1000000,225710],"value":"it"},{"id":[1000000,224236],"span":2},{"id":[1000000,224238],"value":"{"},{"id":[1000000,37352],"span":6},{"id":[1000000,37369],"value":"str"},{"id":[1000000,37374],"span":1},{"id":[1000000,224224],"value":"}"},{"id":[1000000,224240],"value":"$"},{"id":[1000000,37372],"span":1},{"id":[1000000,37358],"span":1},{"id":[1000000,37359],"value":" "},{"id":[1000000,37174],"span":1},{"id":[1000000,37171],"span":1},{"id":[1000000,37175],"span":1},{"id":[1000000,37360],"span":9},{"id":[1000000,37176],"span":1},{"id":[1000000,37177],"value":"& $"},{"id":[1000000,37388],"value":"\\math"},{"id":[1000000,225706],"value":"it"},{"id":[1000000,224243],"span":2},{"id":[1000000,37393],"span":2},{"id":[1000000,37395],"value":"{"},{"id":[1000000,37180],"value":"s"},{"id":[1000000,37396],"value":"tr}"},{"id":[1000000,37181],"value":" \\in \\mathrm{String}$"},{"id":[1000000,37205],"value":" \\\\"},{"id":[1000000,63773],"value":"\n& $|$ & \\"},{"id":[1000000,224250],"value":"texttt{"},{"id":[1000000,63783],"span":5},{"id":[1000000,63788],"value":"true"},{"id":[1000000,224258],"value":"}"},{"id":[1000000,63792],"span":1},{"id":[1000000,63793],"value":" $|$ \\"},{"id":[1000000,224263],"value":"texttt"},{"id":[1000000,224270],"value":"{"},{"id":[1000000,63799],"span":5},{"id":[1000000,63804],"value":"false"},{"id":[1000000,224272],"value":"}"},{"id":[1000000,63813],"span":1},{"id":[1000000,63809],"value":" $|$"},{"id":[1000000,63814],"value":" \\"},{"id":[1000000,224277],"value":"texttt"},{"id":[1000000,224284],"value":"{"},{"id":[1000000,63816],"span":5},{"id":[1000000,63821],"value":"null"},{"id":[1000000,224286],"value":"}"},{"id":[1000000,63828],"span":1},{"id":[1000000,63825],"value":" \\\\"},{"id":[1000000,37208],"value":"\n& $|$ & \\"},{"id":[1000000,37309],"value":"verb|{}|"},{"id":[1000000,37222],"span":4},{"id":[1000000,37291],"span":2},{"id":[1000000,37226],"span":13},{"id":[1000000,37239],"value":" "},{"id":[1000000,37242],"value":"$|$"},{"id":[1000000,37245],"span":2},{"id":[1000000,37333],"value":" "},{"id":[1000000,37342],"value":"\\verb|[]|"},{"id":[1000000,37334],"span":4},{"id":[1000000,37247],"span":1},{"id":[1000000,37274],"span":6},{"id":[1000000,37295],"span":2},{"id":[1000000,37280],"span":4},{"id":[1000000,37287],"span":2},{"id":[1000000,37284],"span":3},{"id":[1000000,37248],"span":13},{"id":[1000000,37240],"span":1},{"id":[1000000,37218],"span":2},{"id":[1000000,37163],"span":1},{"id":[1000000,36384],"span":1},{"id":[1000000,36367],"span":1},{"id":[1000000,36316],"span":1},{"id":[1000000,36287],"span":2},{"id":[1000000,36188],"span":1},{"id":[1000000,36080],"span":2},{"id":[1000000,36077],"span":1},{"id":[1000000,36050],"value":"\n\\end{tabular}"},{"id":[1000000,35919],"value":"\n\\caption{Syntax of command language for "},{"id":[1000000,35976],"value":"querying and modifying a document"},{"id":[1000000,154748],"value":"."},{"id":[1000000,36009],"value":"}\\label{fig:local-syntax}"},{"id":[1000000,35960],"span":8},{"id":[1000000,35906],"value":"\n\\end{figure}"},{"id":[1000000,38777],"value":"\n\n\\begin{figure}\n\\centering"},{"id":[1000000,38915],"span":19},{"id":[1000000,38948],"span":26},{"id":[1000000,39133],"span":1},{"id":[1000000,38974],"span":14},{"id":[1000000,38989],"span":4},{"id":[1000000,38988],"span":1},{"id":[1000000,38993],"span":1},{"id":[1000000,39012],"span":15},{"id":[1000000,39029],"span":16},{"id":[1000000,39132],"span":1},{"id":[1000000,39045],"span":3},{"id":[1000000,39086],"span":7},{"id":[1000000,39095],"span":14},{"id":[1000000,39119],"span":8},{"id":[1000000,39109],"span":5},{"id":[1000000,39093],"span":1},{"id":[1000000,39048],"span":22},{"id":[1000000,39072],"span":13},{"id":[1000000,39128],"span":1},{"id":[1000000,39131],"span":1},{"id":[1000000,39129],"span":2},{"id":[1000000,39134],"span":1},{"id":[1000000,39310],"span":13},{"id":[1000000,39135],"span":8},{"id":[1000000,39327],"span":4},{"id":[1000000,39143],"span":5},{"id":[1000000,39331],"span":18},{"id":[1000000,39353],"span":7},{"id":[1000000,39362],"span":13},{"id":[1000000,39360],"span":1},{"id":[1000000,39349],"span":2},{"id":[1000000,39148],"span":23},{"id":[1000000,39173],"span":1},{"id":[1000000,39182],"span":1},{"id":[1000000,39174],"span":4},{"id":[1000000,39183],"span":2},{"id":[1000000,39186],"span":14},{"id":[1000000,39448],"span":4},{"id":[1000000,39200],"span":35},{"id":[1000000,39239],"span":2},{"id":[1000000,39235],"span":2},{"id":[1000000,39178],"span":2},{"id":[1000000,39171],"span":1},{"id":[1000000,39085],"span":1},{"id":[1000000,39070],"span":1},{"id":[1000000,39027],"span":1},{"id":[1000000,38994],"span":1},{"id":[1000000,39003],"span":4},{"id":[1000000,38995],"span":4},{"id":[1000000,38934],"span":14},{"id":[1000000,39241],"span":13},{"id":[1000000,39254],"value":"\n"},{"id":[1000000,39257],"value":"\\begin{verbatim}"},{"id":[1000000,39461],"value":"\ndoc "},{"id":[1000000,39899],"value":":"},{"id":[1000000,39466],"value":"= {};"},{"id":[1000000,234150],"value":"\ndoc.get(\"shopping\") := [];"},{"id":[1000000,39471],"value":"\n"},{"id":[1000000,39857],"value":"let "},{"id":[1000000,231676],"value":"head"},{"id":[1000000,39861],"span":4},{"id":[1000000,39865],"value":" = "},{"id":[1000000,39472],"value":"doc"},{"id":[1000000,231691],"value":".get("},{"id":[1000000,93178],"span":1},{"id":[1000000,39475],"span":5},{"id":[1000000,39480],"value":"\"shopping\""},{"id":[1000000,231697],"value":")"},{"id":[1000000,93180],"span":1},{"id":[1000000,39492],"span":1},{"id":[1000000,41272],"value":"."},{"id":[1000000,231684],"value":"idx(0)"},{"id":[1000000,42377],"span":4},{"id":[1000000,41273],"span":4},{"id":[1000000,39901],"value":";"},{"id":[1000000,39868],"span":5},{"id":[1000000,39493],"span":1},{"id":[1000000,39900],"span":1},{"id":[1000000,39494],"span":5},{"id":[1000000,39499],"value":"\n"},{"id":[1000000,231702],"value":"head"},{"id":[1000000,39500],"span":4},{"id":[1000000,39873],"span":1},{"id":[1000000,39504],"span":7},{"id":[1000000,39894],"span":4},{"id":[1000000,39511],"span":19},{"id":[1000000,39530],"value":".insert"},{"id":[1000000,248945],"value":"After"},{"id":[1000000,39537],"value":"(\"eggs\");\n"},{"id":[1000000,62795],"value":"let "},{"id":[1000000,249130],"value":"eggs"},{"id":[1000000,234181],"span":4},{"id":[1000000,62799],"span":4},{"id":[1000000,62803],"value":" = "},{"id":[1000000,231715],"value":"doc.get(\"shopping\").idx(1)"},{"id":[1000000,62806],"span":9},{"id":[1000000,62815],"value":";"},{"id":[1000000,62794],"span":1},{"id":[1000000,234189],"span":4},{"id":[1000000,39547],"span":20},{"id":[1000000,40148],"value":"\n"},{"id":[1000000,231745],"value":"head"},{"id":[1000000,40149],"span":4},{"id":[1000000,40153],"value":".insert"},{"id":[1000000,248950],"value":"After"},{"id":[1000000,40160],"value":"(\"cheese\");"},{"id":[1000000,39567],"value":"\n"},{"id":[1000000,249138],"value":"eggs"},{"id":[1000000,234193],"span":4},{"id":[1000000,234197],"value":".insert"},{"id":[1000000,248955],"value":"After"},{"id":[1000000,234204],"value":"(\"milk\");\n"},{"id":[1000000,39568],"value":"\n// Final state:"},{"id":[1000000,39490],"span":1},{"id":[1000000,39288],"value":"\n{\"shopping\": ["},{"id":[1000000,40171],"value":"\"cheese\", "},{"id":[1000000,39303],"value":"\"eggs\","},{"id":[1000000,39452],"value":" \"milk\"]}"},{"id":[1000000,53705],"span":78},{"id":[1000000,53785],"span":2},{"id":[1000000,53783],"span":1},{"id":[1000000,39273],"value":"\n\\end{verbatim}"},{"id":[1000000,39255],"span":1},{"id":[1000000,38804],"value":"\n\\caption{"},{"id":[1000000,38825],"value":"Example of programmatically constructing a JSON document"},{"id":[1000000,154749],"value":"."},{"id":[1000000,38881],"value":"}\\label{fig:make-doc}\n\\end{figure}"},{"id":[1000000,37399],"value":"\n\n"},{"id":[1000000,37401],"span":12},{"id":[1000000,102251],"span":20},{"id":[1000000,37413],"span":16},{"id":[1000000,96051],"span":13},{"id":[1000000,37429],"span":1},{"id":[1000000,102271],"span":2},{"id":[1000000,102273],"value":"To define the semantics for collaboratively editable data structures, we first define a simple command language that is executed locally at any of the "},{"id":[1000000,154143],"value":"replicas"},{"id":[1000000,102424],"span":5},{"id":[1000000,102429],"value":", and which allows th"},{"id":[1000000,102494],"value":"at "},{"id":[1000000,154155],"value":"replica"},{"id":[1000000,102497],"span":4},{"id":[1000000,102501],"value":"'s local copy of the document to be queried and mo"},{"id":[1000000,102553],"value":"dified. Performing read-only queries has no side-effects, but modifying the document has the effect of producing \\emph{operations} describing the mutation. Those operations are "},{"id":[1000000,227839],"value":"immediately "},{"id":[1000000,102730],"value":"applied to the local copy of the document, and also enqueued for"},{"id":[1000000,227824],"value":" asynchronous"},{"id":[1000000,102794],"value":" broadcasting to other "},{"id":[1000000,154167],"value":"replicas"},{"id":[1000000,102817],"span":5},{"id":[1000000,102822],"value":"."},{"id":[1000000,102551],"span":1},{"id":[1000000,102450],"span":22},{"id":[1000000,37430],"value":"\n"},{"id":[1000000,227837],"span":1},{"id":[1000000,37431],"value":"\nT"},{"id":[1000000,37435],"value":"he syntax of the command language is given in Figure~\\ref{fig:local-syntax}."},{"id":[1000000,55106],"value":" It is not a full p"},{"id":[1000000,55133],"value":"rogramming language, but rather an API through which the document state is queried and modified."},{"id":[1000000,95238],"span":1},{"id":[1000000,55229],"value":" We assume that the "},{"id":[1000000,55249],"span":5},{"id":[1000000,55254],"value":"program"},{"id":[1000000,55322],"value":" accepts user input and"},{"id":[1000000,55261],"value":" issues "},{"id":[1000000,55271],"value":"a (possibly infinite) sequence of commands"},{"id":[1000000,55345],"value":" to the API. We model only the semantics of those commands, and "},{"id":[1000000,55421],"value":"do not "},{"id":[1000000,55409],"value":"assume "},{"id":[1000000,55432],"value":"anything about the program in which the command language is embedded."},{"id":[1000000,95240],"value":" The "},{"id":[1000000,95285],"value":"API differs slightly from the JSON libr"},{"id":[1000000,95324],"span":1},{"id":[1000000,95325],"value":"aries "},{"id":[1000000,95332],"value":"found in many programming languages, in order to allow us to define consistent merge semantics."},{"id":[1000000,95245],"span":20},{"id":[1000000,55416],"span":5},{"id":[1000000,55313],"span":2},{"id":[1000000,55269],"span":1},{"id":[1000000,55125],"span":1},{"id":[1000000,55130],"span":1},{"id":[1000000,55126],"span":2},{"id":[1000000,37511],"span":79},{"id":[1000000,37690],"span":16},{"id":[1000000,37590],"span":22},{"id":[1000000,37620],"span":41},{"id":[1000000,37706],"span":12},{"id":[1000000,37724],"span":45},{"id":[1000000,37778],"span":3},{"id":[1000000,37769],"span":9},{"id":[1000000,37781],"span":37},{"id":[1000000,37830],"span":89},{"id":[1000000,37919],"value":"\n\n"},{"id":[1000000,38698],"value":"We first explain the language informally, before giving its formal semantics."},{"id":[1000000,38697],"value":" "},{"id":[1000000,37921],"value":"The"},{"id":[1000000,37924],"span":29},{"id":[1000000,37963],"span":21},{"id":[1000000,38102],"value":" "},{"id":[1000000,37984],"span":4},{"id":[1000000,37988],"value":"expression"},{"id":[1000000,38165],"value":" construct"},{"id":[1000000,38103],"span":1},{"id":[1000000,37998],"value":" EXPR"},{"id":[1000000,38182],"value":" is used to"},{"id":[1000000,38003],"span":12},{"id":[1000000,38107],"span":1},{"id":[1000000,38015],"span":27},{"id":[1000000,95427],"span":8},{"id":[1000000,95435],"value":" construct a \\emph{cursor} which identifies a position in the document"},{"id":[1000000,38193],"value":". An expression starts with either the special token \\text"},{"id":[1000000,224349],"value":"tt"},{"id":[1000000,38251],"span":2},{"id":[1000000,38253],"value":"{doc}, identifying the root of the JSON document tree, or a variable $x$ that was previously defined in a "},{"id":[1000000,38361],"value":"\\text"},{"id":[1000000,224353],"value":"tt"},{"id":[1000000,38366],"span":2},{"id":[1000000,38368],"value":"{let} "},{"id":[1000000,38386],"value":"command. "},{"id":[1000000,224566],"value":"The expression defines"},{"id":[1000000,224612],"value":", lef"},{"id":[1000000,224619],"value":"t to righ"},{"id":[1000000,224629],"value":"t"},{"id":[1000000,224628],"value":","},{"id":[1000000,224617],"span":1},{"id":[1000000,224588],"value":" the path"},{"id":[1000000,95554],"span":32},{"id":[1000000,38395],"span":14},{"id":[1000000,95586],"span":1},{"id":[1000000,95587],"value":" "},{"id":[1000000,95589],"value":"the cursor "},{"id":[1000000,224599],"value":"takes"},{"id":[1000000,224630],"span":20},{"id":[1000000,224604],"value":" as it"},{"id":[1000000,95600],"span":2},{"id":[1000000,95602],"value":" navigate"},{"id":[1000000,224611],"value":"s"},{"id":[1000000,95611],"span":1},{"id":[1000000,95612],"value":" through the tree"},{"id":[1000000,224670],"value":" "},{"id":[1000000,224683],"value":"t"},{"id":[1000000,224686],"value":"owards "},{"id":[1000000,224701],"value":"the leaves"},{"id":[1000000,224693],"span":4},{"id":[1000000,224684],"span":1},{"id":[1000000,224671],"span":6},{"id":[1000000,38409],"span":35},{"id":[1000000,38462],"span":12},{"id":[1000000,38474],"value":": "},{"id":[1000000,95629],"value":"the "},{"id":[1000000,95633],"span":10},{"id":[1000000,95643],"value":"operator \\"},{"id":[1000000,224360],"value":"texttt{"},{"id":[1000000,247775],"value":".get("},{"id":[1000000,95653],"span":6},{"id":[1000000,224367],"value":"}$"},{"id":[1000000,224373],"value":"\\math"},{"id":[1000000,225714],"value":"it"},{"id":[1000000,224378],"span":2},{"id":[1000000,224380],"value":"{"},{"id":[1000000,224371],"span":1},{"id":[1000000,224369],"span":1},{"id":[1000000,95659],"span":1},{"id":[1000000,95660],"value":"key"},{"id":[1000000,224383],"value":"}"},{"id":[1000000,224394],"value":"$"},{"id":[1000000,224384],"value":"\\texttt{"},{"id":[1000000,247781],"value":")"},{"id":[1000000,95663],"span":2},{"id":[1000000,224392],"value":"}"},{"id":[1000000,95665],"span":1},{"id":[1000000,38476],"span":26},{"id":[1000000,38504],"span":2},{"id":[1000000,38506],"value":" selects a key within a map"},{"id":[1000000,38533],"span":16},{"id":[1000000,38549],"value":","},{"id":[1000000,247782],"value":" and"},{"id":[1000000,247786],"span":1},{"id":[1000000,38550],"value":" "},{"id":[1000000,42411],"value":"\\text"},{"id":[1000000,224397],"value":"tt"},{"id":[1000000,42416],"span":2},{"id":[1000000,42418],"value":"{"},{"id":[1000000,247792],"value":".idx("},{"id":[1000000,42419],"span":4},{"id":[1000000,42423],"value":"}"},{"id":[1000000,247797],"value":"$"},{"id":[1000000,247818],"value":"n$\\texttt{)} s"},{"id":[1000000,247834],"value":"e"},{"id":[1000000,247837],"value":"lects the $n$th"},{"id":[1000000,247835],"span":1},{"id":[1000000,247832],"span":1},{"id":[1000000,247798],"span":10},{"id":[1000000,42424],"value":" "},{"id":[1000000,42425],"span":23},{"id":[1000000,57511],"span":1},{"id":[1000000,42448],"span":14},{"id":[1000000,95695],"span":4},{"id":[1000000,42462],"span":2},{"id":[1000000,38553],"span":5},{"id":[1000000,224401],"span":2},{"id":[1000000,38558],"span":27},{"id":[1000000,38585],"value":"element of an ordered list"},{"id":[1000000,95700],"value":"."},{"id":[1000000,247926],"value":" Lists are indexed starting from 1, and \\texttt{.idx(0)} is a special cursor indicating the head of a list"},{"id":[1000000,248985],"value":" (a virtual position before the first list element)"},{"id":[1000000,248032],"value":"."},{"id":[1000000,95701],"value":"\n\nThe expression construct EXPR can also query the state of the document:"},{"id":[1000000,38611],"span":1},{"id":[1000000,93213],"value":" \\text"},{"id":[1000000,224405],"value":"tt"},{"id":[1000000,93219],"span":2},{"id":[1000000,93221],"value":"{keys} returns the set of keys in "},{"id":[1000000,95775],"value":"the"},{"id":[1000000,93255],"span":1},{"id":[1000000,93256],"value":" map"},{"id":[1000000,95778],"value":" at the current cursor"},{"id":[1000000,93260],"value":","},{"id":[1000000,38612],"value":" and \\text"},{"id":[1000000,224409],"value":"tt"},{"id":[1000000,38622],"span":2},{"id":[1000000,38624],"value":"{values} "},{"id":[1000000,38648],"value":"returns the "},{"id":[1000000,225723],"value":"contents"},{"id":[1000000,38660],"span":5},{"id":[1000000,225716],"span":1},{"id":[1000000,38665],"value":" "},{"id":[1000000,57512],"value":"of the"},{"id":[1000000,225731],"value":" multi-value"},{"id":[1000000,57518],"value":" register "},{"id":[1000000,57528],"span":11},{"id":[1000000,38666],"value":"at the current"},{"id":[1000000,95800],"value":" cursor"},{"id":[1000000,38551],"span":1},{"id":[1000000,38502],"span":1},{"id":[1000000,38444],"span":9},{"id":[1000000,38374],"span":6},{"id":[1000000,38359],"span":1},{"id":[1000000,38042],"span":11},{"id":[1000000,38112],"span":2},{"id":[1000000,38053],"span":23},{"id":[1000000,38681],"span":3},{"id":[1000000,38076],"span":10},{"id":[1000000,38696],"value":"."},{"id":[1000000,57539],"value":" (\\"},{"id":[1000000,57599],"value":"text"},{"id":[1000000,224413],"value":"tt"},{"id":[1000000,57542],"span":6},{"id":[1000000,57548],"value":"{values} is not defined "},{"id":[1000000,95839],"value":"if the cursor refers to a"},{"id":[1000000,95864],"span":1},{"id":[1000000,57572],"span":3},{"id":[1000000,57575],"value":" map or list"},{"id":[1000000,57587],"span":6},{"id":[1000000,57593],"value":".)"},{"id":[1000000,38775],"value":"\n\n"},{"id":[1000000,39902],"value":"A command CMD either sets the value of a local variable (\\"},{"id":[1000000,39962],"value":"text"},{"id":[1000000,224417],"value":"tt"},{"id":[1000000,39966],"span":2},{"id":[1000000,39968],"value":"{let}), performs network communication (\\text"},{"id":[1000000,224421],"value":"tt"},{"id":[1000000,40013],"span":2},{"id":[1000000,40015],"value":"{yield}), or modifies the docume"},{"id":[1000000,40073],"value":"nt. A document can be modified by "},{"id":[1000000,248303],"value":"writing to"},{"id":[1000000,40107],"span":22},{"id":[1000000,40129],"value":" "},{"id":[1000000,57639],"value":"a register"},{"id":[1000000,40130],"span":4},{"id":[1000000,40228],"span":1},{"id":[1000000,40241],"span":5},{"id":[1000000,40229],"span":6},{"id":[1000000,40134],"span":6},{"id":[1000000,40140],"value":" ("},{"id":[1000000,40142],"span":6},{"id":[1000000,40181],"value":"the "},{"id":[1000000,40185],"span":11},{"id":[1000000,40196],"value":"operator "},{"id":[1000000,224423],"value":"\\texttt{"},{"id":[1000000,40205],"value":":="},{"id":[1000000,224431],"value":"}"},{"id":[1000000,248225],"value":" "},{"id":[1000000,248317],"value":"assigns"},{"id":[1000000,248226],"span":4},{"id":[1000000,248230],"value":" the value of the register identified by the cursor"},{"id":[1000000,40207],"value":"), by inserting"},{"id":[1000000,40246],"value":" an element into a list (\\text"},{"id":[1000000,224434],"value":"tt"},{"id":[1000000,40276],"span":2},{"id":[1000000,40278],"value":"{i"},{"id":[1000000,40280],"span":1},{"id":[1000000,40281],"value":"n"},{"id":[1000000,40288],"value":"s"},{"id":[1000000,40282],"value":"ert"},{"id":[1000000,248960],"value":"After"},{"id":[1000000,40285],"value":"}"},{"id":[1000000,248033],"value":" places a new element "},{"id":[1000000,248324],"span":6},{"id":[1000000,248055],"value":"after"},{"id":[1000000,248330],"span":1},{"id":[1000000,248060],"value":" "},{"id":[1000000,249038],"value":"the"},{"id":[1000000,248363],"span":2},{"id":[1000000,248061],"span":3},{"id":[1000000,248064],"value":" "},{"id":[1000000,248339],"value":"existing list element"},{"id":[1000000,248065],"span":8},{"id":[1000000,248073],"value":" identified by the cursor, and \\texttt{.idx(0).insert"},{"id":[1000000,248972],"value":"After"},{"id":[1000000,248126],"value":"} inserts at the head of a list"},{"id":[1000000,40286],"value":")"},{"id":[1000000,40289],"value":", "},{"id":[1000000,63713],"value":"or "},{"id":[1000000,40291],"value":"by deleting an element from a list or a map (\\text"},{"id":[1000000,224438],"value":"tt"},{"id":[1000000,40343],"span":2},{"id":[1000000,40345],"value":"{delete}"},{"id":[1000000,248157],"value":" removes the "},{"id":[1000000,248176],"value":"element identified by the cursor"},{"id":[1000000,248170],"span":3},{"id":[1000000,40353],"value":")"},{"id":[1000000,40354],"span":46},{"id":[1000000,40400],"value":"."},{"id":[1000000,40427],"span":4},{"id":[1000000,95910],"span":54},{"id":[1000000,40513],"span":26},{"id":[1000000,40955],"span":1},{"id":[1000000,96027],"span":11},{"id":[1000000,40956],"span":16},{"id":[1000000,96039],"span":5},{"id":[1000000,40972],"span":1},{"id":[1000000,40539],"span":8},{"id":[1000000,96048],"span":3},{"id":[1000000,40976],"span":4},{"id":[1000000,40547],"span":44},{"id":[1000000,40431],"span":41},{"id":[1000000,40421],"value":"\n\n"},{"id":[1000000,40595],"value":"Figure~\\ref{fig:make-doc} shows an example"},{"id":[1000000,40637],"span":5},{"id":[1000000,40642],"value":" sequence of commands"},{"id":[1000000,62821],"value":" that"},{"id":[1000000,40663],"value":" construct"},{"id":[1000000,62829],"value":"s"},{"id":[1000000,40673],"span":3},{"id":[1000000,40676],"value":" a new document representing"},{"id":[1000000,40708],"value":" a shopping list. First \\text"},{"id":[1000000,224442],"value":"tt"},{"id":[1000000,40737],"span":2},{"id":[1000000,40739],"value":"{doc} is "},{"id":[1000000,40754],"value":"set to \\"},{"id":[1000000,224463],"value":"verb|"},{"id":[1000000,224449],"span":7},{"id":[1000000,40762],"span":5},{"id":[1000000,40767],"value":"{}|, the empty map literal"},{"id":[1000000,248471],"value":", and then the key "},{"id":[1000000,248496],"value":"\\"},{"id":[1000000,248524],"value":"verb|"},{"id":[1000000,248497],"span":7},{"id":[1000000,248504],"value":"\"shopping\""},{"id":[1000000,248516],"value":"|"},{"id":[1000000,248529],"value":" within that map is set to the empty list \\verb|[]|"},{"id":[1000000,248514],"span":1},{"id":[1000000,248490],"span":3},{"id":[1000000,40793],"value":". "},{"id":[1000000,41305],"value":"The "},{"id":[1000000,248586],"value":"third"},{"id":[1000000,41309],"span":6},{"id":[1000000,41315],"value":" line navigates to"},{"id":[1000000,40795],"span":16},{"id":[1000000,40811],"value":" the key "},{"id":[1000000,40824],"value":"\\"},{"id":[1000000,248598],"value":"verb|"},{"id":[1000000,234136],"span":7},{"id":[1000000,224473],"span":7},{"id":[1000000,40825],"span":5},{"id":[1000000,40830],"value":"\"shopping\""},{"id":[1000000,248604],"value":"|"},{"id":[1000000,224481],"span":1},{"id":[1000000,40840],"span":1},{"id":[1000000,40841],"value":" "},{"id":[1000000,41333],"span":56},{"id":[1000000,224732],"span":8},{"id":[1000000,224716],"span":8},{"id":[1000000,41389],"span":11},{"id":[1000000,224484],"span":2},{"id":[1000000,41400],"span":3},{"id":[1000000,42468],"span":4},{"id":[1000000,41403],"span":13},{"id":[1000000,41442],"span":39},{"id":[1000000,41481],"value":"and selects the head of the list"},{"id":[1000000,248760],"value":", placing the cursor in a variable called \\texttt{head}"},{"id":[1000000,41513],"span":1},{"id":[1000000,57649],"span":1},{"id":[1000000,224742],"span":5},{"id":[1000000,57650],"span":77},{"id":[1000000,57727],"value":"."},{"id":[1000000,248817],"value":" The list element ``eggs'' is inserted at the head of the list. In line 5, "},{"id":[1000000,249041],"value":"the variable \\texttt{"},{"id":[1000000,249146],"value":"eggs"},{"id":[1000000,249062],"span":4},{"id":[1000000,249066],"value":"} is set to a cursor pointing at the list element ``eggs''. "},{"id":[1000000,249150],"value":"Then two more list elements are inserted: ``cheese'' "},{"id":[1000000,249219],"value":"at the head, and ``milk'' after ``eggs''."},{"id":[1000000,249502],"value":"\n\n"},{"id":[1000000,249260],"span":1},{"id":[1000000,249261],"value":"Note that the cursor "},{"id":[1000000,249294],"value":"\\texttt{eggs} identifies the list element by identity, not by its index: after the insertion of ``cheese'', the element ``eggs'' "},{"id":[1000000,250243],"value":"moves from index 1 to"},{"id":[1000000,249423],"span":3},{"id":[1000000,249426],"value":" "},{"id":[1000000,249427],"span":6},{"id":[1000000,249433],"value":"2, but "},{"id":[1000000,249448],"value":"``milk'' is nevertheless "},{"id":[1000000,249477],"value":"inserted after ``eggs''."},{"id":[1000000,249504],"value":" "},{"id":[1000000,249515],"value":"As we shall see later, this feature is helpful for achieving desirable semantics in the presence of concurrent modifications."},{"id":[1000000,249505],"span":5},{"id":[1000000,249473],"span":2},{"id":[1000000,249440],"span":4},{"id":[1000000,249282],"span":6},{"id":[1000000,249203],"span":8},{"id":[1000000,248815],"value":"\n"},{"id":[1000000,248816],"span":1},{"id":[1000000,41558],"span":9},{"id":[1000000,41416],"span":13},{"id":[1000000,40842],"span":94},{"id":[1000000,224488],"span":2},{"id":[1000000,40936],"span":19},{"id":[1000000,40980],"span":6},{"id":[1000000,40990],"span":10},{"id":[1000000,41002],"span":48},{"id":[1000000,62830],"span":2},{"id":[1000000,41050],"span":1},{"id":[1000000,62834],"span":72},{"id":[1000000,224495],"span":7},{"id":[1000000,62906],"span":4},{"id":[1000000,62912],"span":5},{"id":[1000000,224503],"span":1},{"id":[1000000,62917],"span":44},{"id":[1000000,63292],"span":6},{"id":[1000000,62961],"span":33},{"id":[1000000,224511],"span":7},{"id":[1000000,62994],"span":9},{"id":[1000000,224505],"span":1},{"id":[1000000,63003],"span":70},{"id":[1000000,62910],"span":1},{"id":[1000000,41051],"span":43},{"id":[1000000,41096],"span":20},{"id":[1000000,41184],"span":88},{"id":[1000000,41116],"span":7},{"id":[1000000,41125],"span":41},{"id":[1000000,41170],"span":14},{"id":[1000000,41655],"span":156},{"id":[1000000,41813],"span":28},{"id":[1000000,41845],"span":39},{"id":[1000000,57787],"span":1},{"id":[1000000,41884],"span":1},{"id":[1000000,57780],"span":3},{"id":[1000000,41885],"span":24},{"id":[1000000,57788],"span":39},{"id":[1000000,63842],"span":3},{"id":[1000000,57827],"span":16},{"id":[1000000,63845],"span":11},{"id":[1000000,57843],"span":11},{"id":[1000000,41909],"span":17},{"id":[1000000,41928],"span":32},{"id":[1000000,224520],"span":2},{"id":[1000000,41960],"span":61},{"id":[1000000,42305],"span":9},{"id":[1000000,42021],"span":7},{"id":[1000000,42104],"span":1},{"id":[1000000,42028],"span":14},{"id":[1000000,42106],"span":76},{"id":[1000000,42212],"span":15},{"id":[1000000,42231],"span":74},{"id":[1000000,42314],"span":16},{"id":[1000000,96082],"span":1},{"id":[1000000,102202],"span":16},{"id":[1000000,96083],"span":5},{"id":[1000000,96080],"span":1},{"id":[1000000,42330],"span":1},{"id":[1000000,53704],"span":1},{"id":[1000000,42331],"span":25},{"id":[1000000,53670],"span":21},{"id":[1000000,42356],"span":17},{"id":[1000000,149763],"span":21},{"id":[1000000,42227],"span":2},{"id":[1000000,42182],"span":15},{"id":[1000000,42042],"span":18},{"id":[1000000,42062],"span":12},{"id":[1000000,42060],"span":1},{"id":[1000000,41926],"span":1},{"id":[1000000,41841],"span":2},{"id":[1000000,41811],"span":1},{"id":[1000000,41166],"span":2},{"id":[1000000,41123],"span":1},{"id":[1000000,41094],"span":1},{"id":[1000000,41000],"span":1},{"id":[1000000,40986],"span":2},{"id":[1000000,40820],"span":2},{"id":[1000000,40748],"span":3},{"id":[1000000,40704],"span":2},{"id":[1000000,40423],"span":4},{"id":[1000000,40401],"span":10},{"id":[1000000,40341],"span":1},{"id":[1000000,40047],"span":4},{"id":[1000000,40053],"span":8},{"id":[1000000,40051],"span":1},{"id":[1000000,39960],"span":1},{"id":[1000000,38086],"span":12},{"id":[1000000,37961],"span":1},{"id":[1000000,37953],"span":4},{"id":[1000000,37818],"span":6},{"id":[1000000,37718],"span":3},{"id":[1000000,37661],"span":13},{"id":[1000000,37612],"span":4},{"id":[1000000,37433],"span":1},{"id":[1000000,35835],"span":1},{"id":[1000000,35673],"span":3},{"id":[1000000,35614],"span":8},{"id":[1000000,35469],"span":8},{"id":[1000000,35390],"span":2},{"id":[1000000,4872],"span":1},{"id":[1000000,54730],"span":67},{"id":[1000000,54844],"span":2},{"id":[1000000,54797],"span":7},{"id":[1000000,45694],"span":15},{"id":[1000000,45723],"span":11},{"id":[1000000,46372],"span":2},{"id":[1000000,46380],"span":16},{"id":[1000000,46374],"span":1},{"id":[1000000,45875],"span":3},{"id":[1000000,46310],"span":18},{"id":[1000000,54400],"span":1},{"id":[1000000,46328],"span":2},{"id":[1000000,45873],"span":1},{"id":[1000000,45734],"span":8},{"id":[1000000,45885],"span":5},{"id":[1000000,45742],"span":12},{"id":[1000000,45872],"span":1},{"id":[1000000,54886],"span":1},{"id":[1000000,54856],"span":1},{"id":[1000000,54910],"span":1},{"id":[1000000,54988],"span":12},{"id":[1000000,55029],"span":1},{"id":[1000000,55000],"span":3},{"id":[1000000,54913],"span":8},{"id":[1000000,55030],"span":2},{"id":[1000000,55003],"span":1},{"id":[1000000,54921],"span":4},{"id":[1000000,54953],"span":2},{"id":[1000000,54911],"span":1},{"id":[1000000,54857],"span":1},{"id":[1000000,54864],"span":12},{"id":[1000000,54909],"span":1},{"id":[1000000,54876],"span":3},{"id":[1000000,54395],"span":2},{"id":[1000000,46426],"span":1},{"id":[1000000,45905],"span":3},{"id":[1000000,46375],"span":2},{"id":[1000000,45908],"span":2},{"id":[1000000,46568],"span":3},{"id":[1000000,46560],"span":1},{"id":[1000000,46724],"span":1},{"id":[1000000,46561],"span":1},{"id":[1000000,54860],"span":1},{"id":[1000000,45910],"span":1},{"id":[1000000,46363],"span":2},{"id":[1000000,45958],"span":1},{"id":[1000000,45911],"span":3},{"id":[1000000,46555],"span":2},{"id":[1000000,45914],"span":11},{"id":[1000000,45929],"span":5},{"id":[1000000,46564],"span":1},{"id":[1000000,46470],"span":2},{"id":[1000000,45934],"span":12},{"id":[1000000,46572],"span":5},{"id":[1000000,46472],"span":5},{"id":[1000000,45946],"span":2},{"id":[1000000,46721],"span":1},{"id":[1000000,54963],"span":15},{"id":[1000000,54980],"span":2},{"id":[1000000,54978],"span":1},{"id":[1000000,46722],"span":1},{"id":[1000000,45948],"span":1},{"id":[1000000,46534],"span":3},{"id":[1000000,46330],"span":1},{"id":[1000000,46417],"span":1},{"id":[1000000,46331],"span":1},{"id":[1000000,45949],"span":7},{"id":[1000000,54983],"span":1},{"id":[1000000,54955],"span":1},{"id":[1000000,54958],"span":2},{"id":[1000000,54956],"span":1},{"id":[1000000,54926],"span":1},{"id":[1000000,45956],"span":1},{"id":[1000000,45959],"span":1},{"id":[1000000,45957],"span":1},{"id":[1000000,46029],"span":2},{"id":[1000000,55032],"span":4},{"id":[1000000,54890],"span":1},{"id":[1000000,54900],"span":5},{"id":[1000000,54891],"span":3},{"id":[1000000,46486],"span":1},{"id":[1000000,54401],"span":1},{"id":[1000000,46582],"span":1},{"id":[1000000,45979],"span":1},{"id":[1000000,46465],"span":2},{"id":[1000000,46464],"span":1},{"id":[1000000,45980],"span":14},{"id":[1000000,46567],"span":1},{"id":[1000000,45994],"span":1},{"id":[1000000,54403],"span":2},{"id":[1000000,45995],"span":1},{"id":[1000000,46513],"span":4},{"id":[1000000,46493],"span":9},{"id":[1000000,45996],"span":4},{"id":[1000000,46002],"span":10},{"id":[1000000,46504],"span":3},{"id":[1000000,46012],"span":14},{"id":[1000000,54885],"span":1},{"id":[1000000,54905],"span":2},{"id":[1000000,54884],"span":1},{"id":[1000000,46028],"span":1},{"id":[1000000,46026],"span":2},{"id":[1000000,46000],"span":1},{"id":[1000000,45925],"span":2},{"id":[1000000,45754],"span":1},{"id":[1000000,54405],"span":2},{"id":[1000000,46422],"span":1},{"id":[1000000,46418],"span":1},{"id":[1000000,46365],"span":1},{"id":[1000000,46332],"span":2},{"id":[1000000,46060],"span":14},{"id":[1000000,46099],"span":15},{"id":[1000000,46520],"span":2},{"id":[1000000,46114],"span":8},{"id":[1000000,46074],"span":11},{"id":[1000000,46087],"span":1},{"id":[1000000,46133],"span":1},{"id":[1000000,46517],"span":1},{"id":[1000000,46134],"span":3},{"id":[1000000,46584],"span":1},{"id":[1000000,54407],"span":2},{"id":[1000000,46585],"span":41},{"id":[1000000,46713],"span":4},{"id":[1000000,46626],"span":22},{"id":[1000000,46652],"span":21},{"id":[1000000,53876],"span":8},{"id":[1000000,46673],"span":1},{"id":[1000000,46733],"span":2},{"id":[1000000,46674],"span":39},{"id":[1000000,47015],"span":1},{"id":[1000000,46717],"span":3},{"id":[1000000,46648],"span":2},{"id":[1000000,46137],"span":1},{"id":[1000000,54409],"span":2},{"id":[1000000,46423],"span":1},{"id":[1000000,46419],"span":1},{"id":[1000000,46366],"span":1},{"id":[1000000,46334],"span":2},{"id":[1000000,46138],"span":26},{"id":[1000000,46168],"span":3},{"id":[1000000,46522],"span":2},{"id":[1000000,46171],"span":21},{"id":[1000000,46518],"span":1},{"id":[1000000,96146],"span":2},{"id":[1000000,96088],"span":28},{"id":[1000000,96145],"span":1},{"id":[1000000,96116],"span":28},{"id":[1000000,46192],"span":3},{"id":[1000000,46735],"span":1},{"id":[1000000,54411],"span":2},{"id":[1000000,46736],"span":41},{"id":[1000000,46779],"span":47},{"id":[1000000,53948],"span":8},{"id":[1000000,46826],"span":41},{"id":[1000000,47014],"span":1},{"id":[1000000,46867],"span":3},{"id":[1000000,46777],"span":1},{"id":[1000000,46195],"span":1},{"id":[1000000,54413],"span":2},{"id":[1000000,46424],"span":1},{"id":[1000000,46420],"span":1},{"id":[1000000,46367],"span":1},{"id":[1000000,46336],"span":2},{"id":[1000000,46196],"span":14},{"id":[1000000,46212],"span":10},{"id":[1000000,46226],"span":1},{"id":[1000000,46222],"span":2},{"id":[1000000,46227],"span":2},{"id":[1000000,46524],"span":2},{"id":[1000000,46229],"span":10},{"id":[1000000,46243],"span":11},{"id":[1000000,46519],"span":1},{"id":[1000000,96148],"span":27},{"id":[1000000,96177],"span":31},{"id":[1000000,96175],"span":1},{"id":[1000000,46254],"span":3},{"id":[1000000,46870],"span":1},{"id":[1000000,54415],"span":2},{"id":[1000000,46871],"span":27},{"id":[1000000,46900],"span":14},{"id":[1000000,46918],"span":36},{"id":[1000000,46958],"span":11},{"id":[1000000,54002],"span":8},{"id":[1000000,46969],"span":36},{"id":[1000000,47006],"span":4},{"id":[1000000,47013],"span":1},{"id":[1000000,47010],"span":3},{"id":[1000000,46954],"span":2},{"id":[1000000,46914],"span":2},{"id":[1000000,46898],"span":1},{"id":[1000000,46257],"span":1},{"id":[1000000,54417],"span":2},{"id":[1000000,46425],"span":1},{"id":[1000000,46421],"span":1},{"id":[1000000,46368],"span":1},{"id":[1000000,46338],"span":2},{"id":[1000000,46258],"span":29},{"id":[1000000,46526],"span":2},{"id":[1000000,46287],"span":21},{"id":[1000000,96208],"span":58},{"id":[1000000,46537],"span":4},{"id":[1000000,54863],"span":1},{"id":[1000000,54419],"span":3},{"id":[1000000,96371],"span":15},{"id":[1000000,46727],"span":3},{"id":[1000000,46541],"span":5},{"id":[1000000,46548],"span":3},{"id":[1000000,96266],"span":1},{"id":[1000000,46551],"span":2},{"id":[1000000,96386],"span":4},{"id":[1000000,96267],"span":15},{"id":[1000000,96292],"span":57},{"id":[1000000,96351],"span":17},{"id":[1000000,96391],"span":2},{"id":[1000000,96370],"span":1},{"id":[1000000,96368],"span":2},{"id":[1000000,96349],"span":1},{"id":[1000000,96282],"span":5},{"id":[1000000,46553],"span":2},{"id":[1000000,54393],"span":1},{"id":[1000000,96390],"span":1},{"id":[1000000,54084],"span":4},{"id":[1000000,54104],"span":2},{"id":[1000000,54858],"span":1},{"id":[1000000,54106],"span":1},{"id":[1000000,54088],"span":14},{"id":[1000000,54107],"span":2},{"id":[1000000,54655],"span":6},{"id":[1000000,54721],"span":5},{"id":[1000000,54695],"span":4},{"id":[1000000,54661],"span":8},{"id":[1000000,54703],"span":6},{"id":[1000000,54727],"span":3},{"id":[1000000,54709],"span":1},{"id":[1000000,54669],"span":1},{"id":[1000000,54682],"span":2},{"id":[1000000,54688],"span":1},{"id":[1000000,54684],"span":2},{"id":[1000000,54676],"span":3},{"id":[1000000,54670],"span":3},{"id":[1000000,54576],"span":1},{"id":[1000000,54616],"span":12},{"id":[1000000,54577],"span":18},{"id":[1000000,54422],"span":6},{"id":[1000000,54513],"span":8},{"id":[1000000,54428],"span":13},{"id":[1000000,54109],"span":8},{"id":[1000000,54550],"span":13},{"id":[1000000,54117],"span":52},{"id":[1000000,54595],"span":1},{"id":[1000000,54215],"span":4},{"id":[1000000,54169],"span":46},{"id":[1000000,54219],"span":16},{"id":[1000000,54710],"span":1},{"id":[1000000,54689],"span":1},{"id":[1000000,54596],"span":1},{"id":[1000000,54441],"span":1},{"id":[1000000,54235],"span":4},{"id":[1000000,54859],"span":1},{"id":[1000000,54239],"span":19},{"id":[1000000,54458],"span":6},{"id":[1000000,54492],"span":8},{"id":[1000000,54819],"span":15},{"id":[1000000,54840],"span":2},{"id":[1000000,54834],"span":2},{"id":[1000000,54464],"span":13},{"id":[1000000,54258],"span":25},{"id":[1000000,54442],"span":8},{"id":[1000000,54283],"span":35},{"id":[1000000,54836],"span":1},{"id":[1000000,54318],"span":65},{"id":[1000000,54837],"span":1},{"id":[1000000,54477],"span":1},{"id":[1000000,54383],"span":4},{"id":[1000000,54854],"span":2},{"id":[1000000,54397],"span":2},{"id":[1000000,54387],"span":2},{"id":[1000000,54628],"span":14},{"id":[1000000,54102],"span":1},{"id":[1000000,46546],"span":1},{"id":[1000000,46356],"span":1},{"id":[1000000,46340],"span":14},{"id":[1000000,46416],"span":1},{"id":[1000000,46401],"span":15},{"id":[1000000,46354],"span":1},{"id":[1000000,46369],"span":3},{"id":[1000000,46239],"span":2},{"id":[1000000,46224],"span":1},{"id":[1000000,46210],"span":1},{"id":[1000000,46164],"span":2},{"id":[1000000,46088],"span":11},{"id":[1000000,46085],"span":1},{"id":[1000000,45755],"span":5},{"id":[1000000,45897],"span":5},{"id":[1000000,45760],"span":8},{"id":[1000000,45902],"span":3},{"id":[1000000,45768],"span":18},{"id":[1000000,53787],"span":5},{"id":[1000000,45786],"span":1},{"id":[1000000,54055],"span":15},{"id":[1000000,154179],"span":2},{"id":[1000000,154183],"span":5},{"id":[1000000,154181],"span":1},{"id":[1000000,54070],"span":14},{"id":[1000000,45787],"span":30},{"id":[1000000,45962],"span":8},{"id":[1000000,53805],"span":10},{"id":[1000000,45970],"span":1},{"id":[1000000,45975],"span":4},{"id":[1000000,53815],"span":33},{"id":[1000000,45971],"span":2},{"id":[1000000,45817],"span":55},{"id":[1000000,45709],"span":13},{"id":[1000000,45722],"value":"\n"},{"id":[1000000,42472],"value":"\n"},{"id":[1000000,42474],"value":"\\begin{figure*}"},{"id":[1000000,42503],"value":"\n\\"},{"id":[1000000,44391],"value":"begin{center}"},{"id":[1000000,42505],"span":9},{"id":[1000000,42602],"value":"\n\\AxiomC{$\\"},{"id":[1000000,42615],"value":"mathit{cmd}_1 \\mathbin{:} \\mathrm{CMD}$}"},{"id":[1000000,42791],"value":"\n\\"},{"id":[1000000,42795],"value":"AxiomC{$A_p,\\, \\mathit{cmd}_1 \\evalto A_p'$}"},{"id":[1000000,42793],"span":1},{"id":[1000000,42765],"value":"\n\\LeftLabel{\\textsc{Exec}}"},{"id":[1000000,42655],"value":"\n\\"},{"id":[1000000,42755],"value":"BinaryInfC"},{"id":[1000000,42657],"span":6},{"id":[1000000,42663],"value":"{$A_p,\\, "},{"id":[1000000,42688],"value":"\\langle"},{"id":[1000000,42715],"value":" "},{"id":[1000000,42686],"span":1},{"id":[1000000,42672],"value":"\\mathit{cmd}_1"},{"id":[1000000,42695],"value":" \\mathbin{;} \\mathit"},{"id":[1000000,42716],"value":"{cmd}_2 \\mathbin{;} \\dots \\rangle"},{"id":[1000000,42839],"value":"\n    \\evalto A_p',"},{"id":[1000000,42859],"value":"\\, \\langle \\mathit{cmd}_2 \\mathbin{;} \\dots \\rangle$}\n\\DisplayProof\\h"},{"id":[1000000,43482],"value":"space{"},{"id":[1000000,43527],"value":"4"},{"id":[1000000,43488],"span":1},{"id":[1000000,43489],"value":"em}"},{"id":[1000000,42928],"span":4},{"id":[1000000,42932],"value":"\n%\n\\AxiomC{}\n\\LeftLabel{\\textsc{Doc}}\n\\UnaryInfC{$A_p,\\, \\mathsf{doc} \\evalto \\mathsf{cursor}(\\langle\\rangle,"},{"id":[1000000,43524],"value":"\\,"},{"id":[1000000,43041],"value":" \\mathsf{doc})$}\n"},{"id":[1000000,43062],"value":"\\DisplayProof\\proofSkipAmount"},{"id":[1000000,44404],"value":"\n\\end{center}"},{"id":[1000000,43091],"value":"\n"},{"id":[1000000,44417],"value":"\n\\begin{center}"},{"id":[1000000,43092],"value":"\n"},{"id":[1000000,43506],"span":16},{"id":[1000000,43093],"value":"\\AxiomC{$"},{"id":[1000000,43104],"value":"A_p,\\, \\mathit{expr} \\evalto \\mathit{cur}$}\n\\LeftLabel{\\textsc{Let}}\n\\UnaryInfC{$A_p,\\, \\mathsf{let}"},{"id":[1000000,43522],"value":"\\;"},{"id":[1000000,43204],"value":" x = \\mathit{expr} \\evalto A_p[\\,x "},{"id":[1000000,43247],"value":"\\,"},{"id":[1000000,43239],"value":"\\mapsto"},{"id":[1000000,43250],"value":"\\, \\mathit{cur}\\,]$}\n\\DisplayProof\\h"},{"id":[1000000,43496],"value":"space{"},{"id":[1000000,43529],"value":"3"},{"id":[1000000,43502],"span":1},{"id":[1000000,43503],"value":"em}"},{"id":[1000000,43286],"span":4},{"id":[1000000,43290],"value":"\n%\n\\AxiomC{$x \\in \\mathrm{dom}(A_p)$}\n\\"},{"id":[1000000,43347],"value":"LeftLabel{"},{"id":[1000000,43363],"value":"\\textsc{Var}}\n\\UnaryInfC{$A_p,\\, x \\evalto A_p(x)$}\n\\D"},{"id":[1000000,43439],"value":"isplayProof\\"},{"id":[1000000,43453],"value":"proofSkipA"},{"id":[1000000,43473],"value":"mount"},{"id":[1000000,44432],"value":"\n\\end{center}"},{"id":[1000000,43530],"value":"\n"},{"id":[1000000,44261],"value":"\n\\begin{prooftree}"},{"id":[1000000,43531],"value":"\n"},{"id":[1000000,43616],"value":"\\AxiomC{"},{"id":[1000000,43692],"value":"$A_p,\\, \\mathit{expr} \\evalto \\math"},{"id":[1000000,43733],"value":"sf{cursor}(\\langle k_1, \\dots, "},{"id":[1000000,43766],"value":"k_{n-1} \\rangle,"},{"id":[1000000,43784],"value":"\\, k_n)$}"},{"id":[1000000,210089],"value":"\n\\AxiomC{$k_n \\not= \\mathsf{head}$}"},{"id":[1000000,43793],"value":"\n\\LeftLabel{\\textsc{Get}}"},{"id":[1000000,43782],"span":1},{"id":[1000000,43764],"span":1},{"id":[1000000,43727],"span":3},{"id":[1000000,43680],"value":"\n\\"},{"id":[1000000,210087],"value":"Bi"},{"id":[1000000,43682],"span":1},{"id":[1000000,43683],"value":"naryInfC{"},{"id":[1000000,43624],"value":"$A_p,\\, \\mathit{expr}.\\"},{"id":[1000000,232645],"value":"math"},{"id":[1000000,96541],"span":4},{"id":[1000000,232181],"value":"sf"},{"id":[1000000,43647],"span":4},{"id":[1000000,96511],"span":2},{"id":[1000000,43651],"span":2},{"id":[1000000,43653],"value":"{"},{"id":[1000000,232184],"value":"get"},{"id":[1000000,96516],"span":1},{"id":[1000000,43654],"span":3},{"id":[1000000,43657],"value":"}"},{"id":[1000000,232187],"value":"("},{"id":[1000000,43658],"span":1},{"id":[1000000,43659],"value":"\\mathit{key}"},{"id":[1000000,232188],"value":")"},{"id":[1000000,96519],"span":1},{"id":[1000000,96533],"span":4},{"id":[1000000,96520],"span":9},{"id":[1000000,43671],"span":1},{"id":[1000000,43672],"value":" \\evalto"},{"id":[1000000,43818],"value":"\n    \\mathsf{cursor}(\\langle k_1, \\dots, k_{n-1}, \\mathsf{mapT}(k_n) \\rangle,"},{"id":[1000000,44210],"value":"\\,"},{"id":[1000000,43895],"value":" \\mathit{key})$}\n\\"},{"id":[1000000,44305],"value":"end{prooftree}\n\n\\begin{"},{"id":[1000000,44330],"value":"prooftree}"},{"id":[1000000,44328],"span":1},{"id":[1000000,43913],"span":20},{"id":[1000000,44260],"span":1},{"id":[1000000,43933],"span":6},{"id":[1000000,43939],"value":"\n\\AxiomC{$A_p,\\, \\mathit{expr} \\evalto \\mathsf{cursor}"},{"id":[1000000,43995],"value":"(\\langle k_1, \\dots, "},{"id":[1000000,44018],"value":"k_{n-1} \\rangle,\\, k_n)$"},{"id":[1000000,44046],"value":"}"},{"id":[1000000,231814],"value":"\n\\AxiomC{$A_p,\\, \\mathsf{cursor}(\\langle k_1, \\dots, k_{n-1}, \\mathsf{listT}(k_n) \\rangle,\\,"},{"id":[1000000,231967],"value":"\n   "},{"id":[1000000,231906],"value":" \\mathsf{head})"},{"id":[1000000,231953],"value":".\\mathsf{idx"},{"id":[1000000,232178],"value":"}"},{"id":[1000000,231965],"value":"("},{"id":[1000000,232729],"value":"i"},{"id":[1000000,231966],"span":1},{"id":[1000000,231975],"span":9},{"id":[1000000,231986],"value":")"},{"id":[1000000,231987],"span":1},{"id":[1000000,231984],"span":1},{"id":[1000000,231935],"span":4},{"id":[1000000,231939],"value":" "},{"id":[1000000,231925],"span":1},{"id":[1000000,231926],"value":"\\evalto "},{"id":[1000000,231940],"value":"\\mathit{cur}'"},{"id":[1000000,231923],"value":"$}"},{"id":[1000000,231921],"span":1},{"id":[1000000,44047],"value":"\n\\LeftLabel{"},{"id":[1000000,231754],"value":"$"},{"id":[1000000,44059],"value":"\\textsc{I"},{"id":[1000000,231752],"value":"dx"},{"id":[1000000,44068],"span":3},{"id":[1000000,44071],"value":"}"},{"id":[1000000,231755],"value":"_1$"},{"id":[1000000,44072],"value":"}\n\\"},{"id":[1000000,231812],"value":"Bi"},{"id":[1000000,44075],"span":1},{"id":[1000000,44076],"value":"naryInfC{$A_p,\\, \\mathit{expr}.\\mathsf{i"},{"id":[1000000,231797],"value":"dx"},{"id":[1000000,231799],"span":1},{"id":[1000000,44116],"span":3},{"id":[1000000,44119],"value":"}"},{"id":[1000000,232154],"value":"("},{"id":[1000000,232727],"value":"i"},{"id":[1000000,231800],"span":1},{"id":[1000000,232155],"value":")"},{"id":[1000000,232167],"value":" "},{"id":[1000000,231801],"span":10},{"id":[1000000,44120],"span":1},{"id":[1000000,44121],"value":"\\evalto"},{"id":[1000000,231988],"value":" \\mathit{cur}'$}"},{"id":[1000000,44130],"span":80},{"id":[1000000,44212],"span":17},{"id":[1000000,44229],"value":"\n\\"},{"id":[1000000,44368],"value":"end{prooftree}"},{"id":[1000000,232734],"value":"\n\n\\begin{prooftree}"},{"id":[1000000,232769],"value":"\n\\AxiomC{$k_1 \\in \\mathrm{dom}(\\mathit{ctx})$}\n\\AxiomC{$\\mathit{ctx}(k_1),\\, \\mathsf{cursor}(\\langle k_2, \\dots, k_{n-1} \\rangle,\\, k_n).\\mathsf{idx}(i)\n    \\evalto \\mathsf{cursor}(\\langle k_2, \\dots, k_{n-1} \\rangle,\\, k_n')$}\n\\LeftLabel{$\\textsc{Idx}_2$"},{"id":[1000000,233026],"value":"}\n\\BinaryInfC{$\\mathit{ctx},\\, \\"},{"id":[1000000,233062],"value":"mathsf{cursor}(\\langle k"},{"id":[1000000,233088],"value":"_1, k_2, \\dots, k_"},{"id":[1000000,233112],"value":"{n-1} \\rangle,\\, k_n)"},{"id":[1000000,233135],"value":".\\mathsf{idx}(i)\n    \\evalto \\mathsf{cursor}"},{"id":[1000000,233181],"value":"(\\langle k_1, k_2, \\dots, k_{n-1} \\rangle,\\, k_n')$}"},{"id":[1000000,233179],"span":1},{"id":[1000000,233133],"span":1},{"id":[1000000,233106],"span":3},{"id":[1000000,233086],"span":1},{"id":[1000000,233058],"span":2},{"id":[1000000,233024],"span":1},{"id":[1000000,232753],"value":"\n\\end{prooftree}"},{"id":[1000000,44445],"span":9},{"id":[1000000,93267],"span":9},{"id":[1000000,45552],"span":6},{"id":[1000000,44454],"span":10},{"id":[1000000,44492],"span":10},{"id":[1000000,232725],"span":1},{"id":[1000000,232355],"span":3},{"id":[1000000,44502],"span":124},{"id":[1000000,44630],"span":2},{"id":[1000000,44634],"span":5},{"id":[1000000,231764],"span":3},{"id":[1000000,44639],"span":6},{"id":[1000000,231759],"span":1},{"id":[1000000,44645],"span":4},{"id":[1000000,44651],"span":1},{"id":[1000000,232640],"span":1},{"id":[1000000,44652],"span":5},{"id":[1000000,44661],"span":7},{"id":[1000000,232123],"span":1},{"id":[1000000,232128],"span":11},{"id":[1000000,232124],"span":2},{"id":[1000000,44668],"span":12},{"id":[1000000,232141],"span":2},{"id":[1000000,44680],"span":3},{"id":[1000000,232147],"span":6},{"id":[1000000,44683],"span":5},{"id":[1000000,232199],"span":21},{"id":[1000000,44688],"span":9},{"id":[1000000,232105],"span":3},{"id":[1000000,232224],"span":3},{"id":[1000000,232108],"span":1},{"id":[1000000,44697],"span":1},{"id":[1000000,44704],"span":4},{"id":[1000000,232242],"span":1},{"id":[1000000,232723],"span":1},{"id":[1000000,232246],"span":1},{"id":[1000000,232243],"span":2},{"id":[1000000,232221],"span":1},{"id":[1000000,232223],"span":1},{"id":[1000000,232109],"span":11},{"id":[1000000,44708],"span":8},{"id":[1000000,232359],"span":5},{"id":[1000000,44716],"span":6},{"id":[1000000,232366],"span":2},{"id":[1000000,44722],"span":6},{"id":[1000000,232368],"span":3},{"id":[1000000,44728],"span":1},{"id":[1000000,232372],"span":21},{"id":[1000000,44729],"span":3},{"id":[1000000,45608],"span":2},{"id":[1000000,93294],"span":14},{"id":[1000000,45610],"span":13},{"id":[1000000,45631],"span":1},{"id":[1000000,45654],"span":4},{"id":[1000000,45632],"span":6},{"id":[1000000,45643],"span":1},{"id":[1000000,45638],"span":4},{"id":[1000000,45623],"span":4},{"id":[1000000,44698],"span":3},{"id":[1000000,44657],"span":2},{"id":[1000000,44649],"span":1},{"id":[1000000,44632],"span":1},{"id":[1000000,44626],"span":2},{"id":[1000000,44464],"span":1},{"id":[1000000,45558],"span":1},{"id":[1000000,44465],"span":5},{"id":[1000000,44482],"span":10},{"id":[1000000,44732],"value":"\n"},{"id":[1000000,93309],"value":"\n\\begin{prooftree}"},{"id":[1000000,232393],"span":10},{"id":[1000000,232419],"span":5},{"id":[1000000,232403],"span":8},{"id":[1000000,45559],"span":1},{"id":[1000000,44733],"span":1},{"id":[1000000,45560],"span":1},{"id":[1000000,44734],"span":17},{"id":[1000000,44769],"span":1},{"id":[1000000,44776],"span":1},{"id":[1000000,44770],"span":6},{"id":[1000000,44777],"span":51},{"id":[1000000,44828],"value":"\n\\AxiomC{$"},{"id":[1000000,232721],"value":"i"},{"id":[1000000,232435],"span":1},{"id":[1000000,232436],"value":">0 "},{"id":[1000000,232441],"value":"\\,"},{"id":[1000000,232445],"value":"\\wedge\\, "},{"id":[1000000,232443],"span":1},{"id":[1000000,232439],"span":1},{"id":[1000000,44838],"value":"\\mathit{ctx}(\\mathsf{next}(k)) = k'"},{"id":[1000000,93357],"value":" \\,\\wedge\\, k' \\not= \\mathsf{tail}"},{"id":[1000000,44873],"value":"$}"},{"id":[1000000,93391],"value":"\n\\Ax"},{"id":[1000000,93397],"value":"iomC{$\\mathit{ctx}(\\mathsf{pres}(k"},{"id":[1000000,93936],"value":"'"},{"id":[1000000,93431],"value":")) \\not= \\{\\}$}"},{"id":[1000000,232434],"value":"\n"},{"id":[1000000,232469],"value":"\\Ax"},{"id":[1000000,232477],"value":"iomC{$\\mathit{ctx},\\, \\mathsf{cursor}"},{"id":[1000000,232530],"value":"(\\langle\\rangle,\\, k').\\mathsf{idx}("},{"id":[1000000,232717],"value":"i"},{"id":[1000000,232566],"span":1},{"id":[1000000,232567],"value":"-1) \\evalto \\mathit{ctx}'$}"},{"id":[1000000,93395],"span":1},{"id":[1000000,44875],"value":"\n\\LeftLabel{$\\textsc{"},{"id":[1000000,231771],"value":"Idx"},{"id":[1000000,44896],"span":4},{"id":[1000000,44900],"value":"}_"},{"id":[1000000,231775],"value":"3"},{"id":[1000000,44902],"span":1},{"id":[1000000,44903],"value":"$}\n\\"},{"id":[1000000,232475],"value":"Tr"},{"id":[1000000,232473],"span":1},{"id":[1000000,93525],"span":1},{"id":[1000000,93447],"span":2},{"id":[1000000,44907],"span":1},{"id":[1000000,44908],"value":"inaryInfC{$\\mathit{ctx},\\, \\mathsf{cursor}(\\langle\\rangle,\\, k).\\mathsf{"},{"id":[1000000,232428],"value":"idx"},{"id":[1000000,44980],"span":4},{"id":[1000000,44984],"value":"}"},{"id":[1000000,232431],"value":"("},{"id":[1000000,232715],"value":"i"},{"id":[1000000,232432],"span":1},{"id":[1000000,232433],"value":")"},{"id":[1000000,44985],"value":" \\evalto"},{"id":[1000000,232514],"value":" \\mathit{ctx}'$}"},{"id":[1000000,44995],"span":44},{"id":[1000000,45578],"span":30},{"id":[1000000,44993],"span":1},{"id":[1000000,44751],"value":"\n\\end"},{"id":[1000000,44758],"value":"{"},{"id":[1000000,93455],"value":"prooftree"},{"id":[1000000,45571],"span":6},{"id":[1000000,45577],"value":"}"},{"id":[1000000,93526],"value":"\n\n\\begin{prooftree"},{"id":[1000000,93546],"value":"}"},{"id":[1000000,93563],"value":"\n\\AxiomC{$"},{"id":[1000000,232719],"value":"i"},{"id":[1000000,232649],"span":1},{"id":[1000000,232650],"value":">0 \\,\\wedge\\, "},{"id":[1000000,93573],"value":"\\mathit{ctx}(\\mathsf{next}(k)) = k' \\,\\wedge\\, k' \\not= \\mathsf{tail}$}\n\\AxiomC{$\\mathit{ctx}(\\mathsf{pres}(k"},{"id":[1000000,93935],"value":"'"},{"id":[1000000,93682],"value":")) = \\{\\}$}"},{"id":[1000000,93726],"value":"\n\\AxiomC{$\\mathit{ctx},\\, \\mathsf{cursor}(\\langle\\rangle,\\, k').\\mathsf{"},{"id":[1000000,232668],"value":"idx"},{"id":[1000000,93798],"span":4},{"id":[1000000,93802],"value":"}"},{"id":[1000000,232671],"value":"("},{"id":[1000000,232713],"value":"i"},{"id":[1000000,232672],"span":1},{"id":[1000000,232675],"value":")"},{"id":[1000000,232673],"span":1},{"id":[1000000,93803],"value":" \\evalto \\mathit{cur}'$}"},{"id":[1000000,93693],"value":"\n\\LeftLabel{$\\textsc{"},{"id":[1000000,231782],"value":"Idx"},{"id":[1000000,93714],"span":4},{"id":[1000000,93718],"value":"}_"},{"id":[1000000,231777],"value":"4"},{"id":[1000000,93720],"span":1},{"id":[1000000,93723],"value":"$}\n"},{"id":[1000000,93827],"value":"\\TrinaryInfC{$\\mathit{ctx},\\, \\mathsf{cursor}(\\langle\\rangle,\\, k).\\mathsf{"},{"id":[1000000,232680],"value":"idx"},{"id":[1000000,93902],"span":4},{"id":[1000000,93906],"value":"}"},{"id":[1000000,232683],"value":"("},{"id":[1000000,232711],"value":"i"},{"id":[1000000,232684],"span":1},{"id":[1000000,232685],"value":")"},{"id":[1000000,93907],"value":" \\evalto \\mathit{cur}"},{"id":[1000000,93930],"value":"'$}"},{"id":[1000000,93928],"span":1},{"id":[1000000,93721],"span":1},{"id":[1000000,93547],"value":"\n\\end{prooftree}"},{"id":[1000000,233714],"value":"\n\n\\begin{prooftree}\n\\AxiomC{$i=0$}\n\\LeftLabel{$\\textsc{Idx}_5$}\n\\UnaryInfC{$\\mathit{ctx},\\, \\mathsf{cursor}(\\langle\\rangle,\\, k).\\mathsf{idx}(i) \\evalto\n    \\mathsf{cursor}(\\langle\\rangle,\\, k)$}\n\\end{prooftree}"},{"id":[1000000,93544],"span":1},{"id":[1000000,44759],"span":10},{"id":[1000000,45039],"value":"\n\n"},{"id":[1000000,45041],"span":17},{"id":[1000000,45074],"span":85},{"id":[1000000,45160],"span":6},{"id":[1000000,45159],"span":1},{"id":[1000000,45166],"span":53},{"id":[1000000,232690],"span":3},{"id":[1000000,45219],"span":5},{"id":[1000000,232693],"span":1},{"id":[1000000,232709],"span":1},{"id":[1000000,232694],"span":2},{"id":[1000000,45234],"span":5},{"id":[1000000,45243],"span":91},{"id":[1000000,231789],"span":3},{"id":[1000000,45334],"span":6},{"id":[1000000,231793],"span":1},{"id":[1000000,93934],"span":1},{"id":[1000000,45340],"span":16},{"id":[1000000,45362],"span":59},{"id":[1000000,45423],"span":22},{"id":[1000000,45449],"span":9},{"id":[1000000,232700],"span":3},{"id":[1000000,45458],"span":5},{"id":[1000000,232703],"span":1},{"id":[1000000,232707],"span":1},{"id":[1000000,232704],"span":2},{"id":[1000000,45463],"span":80},{"id":[1000000,45445],"span":2},{"id":[1000000,45421],"span":1},{"id":[1000000,45360],"span":1},{"id":[1000000,45356],"span":2},{"id":[1000000,45239],"span":2},{"id":[1000000,45224],"span":5},{"id":[1000000,45058],"span":16},{"id":[1000000,93937],"span":2},{"id":[1000000,93939],"value":"\\[ \\mathrm{keys}(\\mathit{ctx}) = \\{\\;"},{"id":[1000000,94058],"value":" "},{"id":[1000000,93984],"span":5},{"id":[1000000,93989],"value":"k \\mid"},{"id":[1000000,94059],"value":"\n   "},{"id":[1000000,93995],"value":" \\mathsf"},{"id":[1000000,94011],"value":"{mapT}(k) "},{"id":[1000000,94474],"value":" "},{"id":[1000000,94021],"value":"\\in \\mathrm{dom}("},{"id":[1000000,94446],"value":"\\mathit{"},{"id":[1000000,94038],"value":"ctx"},{"id":[1000000,94454],"value":"}"},{"id":[1000000,94041],"value":") \\,\\vee\\,"},{"id":[1000000,94063],"value":"\n    \\mathsf{listT}(k) \\in \\mathrm{dom}("},{"id":[1000000,94455],"value":"\\mathit{"},{"id":[1000000,94103],"value":"ctx"},{"id":[1000000,94463],"value":"}"},{"id":[1000000,94106],"value":") \\,\\vee\\,\n    \\mathsf{regT}(k) "},{"id":[1000000,94473],"value":" "},{"id":[1000000,94138],"value":"\\in \\mathrm{dom}("},{"id":[1000000,94464],"value":"\\mathit{"},{"id":[1000000,94155],"value":"ctx"},{"id":[1000000,94472],"value":"}"},{"id":[1000000,94158],"value":")"},{"id":[1000000,94051],"span":1},{"id":[1000000,94009],"span":1},{"id":[1000000,94003],"span":3},{"id":[1000000,93976],"value":"\n\\;\\} \\]"},{"id":[1000000,94159],"value":"\n\n\\"},{"id":[1000000,94180],"value":"begin{prooftree"},{"id":[1000000,94199],"value":"}\n\\AxiomC{$A_p,\\, \\mathit{expr} \\evalto \\mathit{cur}$}\n\\AxiomC{$A_p,\\, \\mathit{cur}.\\mathsf{keys}"},{"id":[1000000,94298],"value":" \\evalto \\mathit{"},{"id":[1000000,94321],"value":"keys}"},{"id":[1000000,94315],"span":3},{"id":[1000000,94296],"value":"$}"},{"id":[1000000,94326],"value":"\n\\LeftLabel{$\\textsc{Keys}_1$}\n\\BinaryInfC{$A_p,\\, \\mathit{expr}.\\mathsf{keys} \\evalto \\mathit{keys}$}\n\\end{"},{"id":[1000000,94436],"value":"prooftree}"},{"id":[1000000,94475],"value":"\n\n\\begin{prooftree}"},{"id":[1000000,94510],"value":"\n\\AxiomC{$"},{"id":[1000000,94550],"value":"\\math"},{"id":[1000000,94567],"value":"it"},{"id":[1000000,94555],"span":2},{"id":[1000000,94557],"value":"{"},{"id":[1000000,94573],"value":"map"},{"id":[1000000,94558],"span":4},{"id":[1000000,94562],"value":"}"},{"id":[1000000,94576],"value":" = "},{"id":[1000000,94563],"span":1},{"id":[1000000,94520],"value":"\\mathit{ctx}(\\mathsf{mapT}(k))"},{"id":[1000000,94581],"value":"$}\n\\AxiomC{$\\mathit{keys} = \\{\\; k \\mid k \\in \\mathrm{keys}(\\mathit{map}) \\,\\wedge\\,\n    \\mathit{map}(\\mathsf{pres}(k)) \\not= \\{\\} \\;\\}$}\n\\LeftLabel{$\\textsc{Keys}_2$}\n\\BinaryInfC{$A_p,\\, \\"},{"id":[1000000,94778],"value":"mathsf{cursor}(\\langle\\rangle,\\, k).\\mathsf{keys} \\evalto \\mathit{keys}$}"},{"id":[1000000,94770],"span":4},{"id":[1000000,94564],"span":1},{"id":[1000000,94494],"value":"\n\\end{prooftree}"},{"id":[1000000,94851],"value":"\n\n\\begin{prooftree}"},{"id":[1000000,94886],"value":"\n\\AxiomC{$k_1 \\in \\mathrm{dom}(\\mathit{ctx})$}\n\\AxiomC{$\\mathit{ctx}(k_1),\\, \\mathsf{cursor"},{"id":[1000000,95237],"value":"}"},{"id":[1000000,94977],"value":"(\\langle k_2, \\dots, k_{n-1} \\rangle,\\, k_n).\\mathsf{keys}\n    \\evalto \\mathit{keys}$}\n\\LeftLabel{$\\textsc{Keys}_3"},{"id":[1000000,95095],"value":"$}\n\\BinaryInfC{$\\mathit{ctx},\\, \\mathsf{cursor}(\\langle k_1, k_2, \\dots, k_{n-1"},{"id":[1000000,95176],"value":"} \\rangle"},{"id":[1000000,95187],"value":",\\, k_n).\\mathsf{keys}\n    \\evalto \\mathit{keys}$}"},{"id":[1000000,95185],"span":1},{"id":[1000000,95174],"span":1},{"id":[1000000,95091],"span":2},{"id":[1000000,94870],"value":"\n\\end{prooftree}"},{"id":[1000000,94434],"span":1},{"id":[1000000,94195],"span":2},{"id":[1000000,94162],"span":9},{"id":[1000000,51773],"value":"\n\n\\begin{prooftree}"},{"id":[1000000,51808],"value":"\n\\AxiomC{$A_p,\\, \\mathit{expr} \\evalto \\mathit{"},{"id":[1000000,51889],"value":"cur"},{"id":[1000000,51855],"span":3},{"id":[1000000,51858],"value":"}$}\n\\AxiomC{$A_p,\\, \\mathit{"},{"id":[1000000,51892],"value":"cur}.\\mathsf{values} \\evalto \\mathit{"},{"id":[1000000,51931],"value":"val}$}\n\\LeftLabel{$\\textsc{Val}_1$}\n\\BinaryInfC{$A_p,\\, \\mathit{expr}.\\mathsf{values} \\evalto \\mathit{val}$}"},{"id":[1000000,51929],"span":1},{"id":[1000000,51792],"value":"\n\\end{prooftree}"},{"id":[1000000,52039],"value":"\n\n\\begin{prooftree}\n\\AxiomC{$\\mathsf{regT}(k) \\in \\mathrm{dom}(\\mathit{ctx})$}\n\\AxiomC{$\\mathit{val} = \\"},{"id":[1000000,55086],"value":"mathrm{ran"},{"id":[1000000,55104],"value":"ge"},{"id":[1000000,55096],"value":"}("},{"id":[1000000,52143],"span":50},{"id":[1000000,52193],"value":"\\mathit{ctx}(\\mathsf{regT}(k))"},{"id":[1000000,55098],"value":")"},{"id":[1000000,52223],"span":5},{"id":[1000000,52228],"value":"$}\n\\LeftLabel{$\\textsc{Val}_2$}\n"},{"id":[1000000,52262],"value":"\\BinaryInfC{$"},{"id":[1000000,52289],"value":"\\mathit{ctx},\\, \\mathsf{cursor}(\\langle\\rangle,\\, k).\\mathsf{values} \\evalto \\mathit{val}$}\n\\end{prooftree}\n\n\\begin{prooftree}"},{"id":[1000000,52431],"value":"\n\\AxiomC{$k_1 \\in \\mathrm{dom}(\\mathit{ctx})$}\n\\AxiomC{$\\mathit{ctx}(k_1"},{"id":[1000000,52505],"value":"),\\, \\mathsf{cursor"},{"id":[1000000,52525],"value":"}"},{"id":[1000000,52524],"value":"("},{"id":[1000000,52526],"value":"\\langle k_2, \\dots, k"},{"id":[1000000,52549],"value":"_{n-1} \\rangle,\\, k_n).\\mathsf{values}\n    \\evalto \\mathit{val}$}\n\\LeftLabel{$\\textsc{Val}_3$}\n\\BinaryInfC{$\\mathit{ctx},\\, \\mathsf{cursor}(\\langle k_1, k_2, \\dots, k_{n-1} \\rangle,\\, k_n).\\mathsf{values}\n    \\evalto \\mathit{val}$}"},{"id":[1000000,52547],"span":1},{"id":[1000000,52503],"span":1},{"id":[1000000,52415],"value":"\n\\end{prooftree}"},{"id":[1000000,52275],"span":7},{"id":[1000000,52260],"span":1},{"id":[1000000,44756],"span":1},{"id":[1000000,44470],"span":6},{"id":[1000000,44231],"span":28},{"id":[1000000,44128],"span":1},{"id":[1000000,44042],"span":2},{"id":[1000000,44016],"span":1},{"id":[1000000,43993],"span":1},{"id":[1000000,43532],"span":7},{"id":[1000000,43541],"span":26},{"id":[1000000,43539],"span":1},{"id":[1000000,43463],"span":5},{"id":[1000000,43451],"span":1},{"id":[1000000,43417],"span":11},{"id":[1000000,43357],"span":3},{"id":[1000000,43329],"span":9},{"id":[1000000,43246],"span":1},{"id":[1000000,43102],"span":1},{"id":[1000000,43058],"span":2},{"id":[1000000,42857],"span":1},{"id":[1000000,42613],"span":1},{"id":[1000000,42514],"value":"\n\\caption{Rules for evaluating "},{"id":[1000000,42545],"span":3},{"id":[1000000,42548],"value":"expression"},{"id":[1000000,154769],"value":"s"},{"id":[1000000,154773],"value":"."},{"id":[1000000,42558],"span":19},{"id":[1000000,42577],"value":"}\\label{fig:"},{"id":[1000000,42591],"value":"expr-rules}"},{"id":[1000000,42589],"span":1},{"id":[1000000,42489],"value":"\n\\end{figure*}"},{"id":[1000000,252261],"value":"\n\n\\section{Formal "},{"id":[1000000,252311],"value":"S"},{"id":[1000000,252279],"span":1},{"id":[1000000,252280],"value":"emantics}\\label{sec:semantics}"},{"id":[1000000,47016],"value":"\n\n"},{"id":[1000000,250596],"value":"We now explain formally how to achieve the concurrent semantics outlined in Section~\\ref{sec:composing}. "},{"id":[1000000,250594],"span":1},{"id":[1000000,47018],"value":"The state of "},{"id":[1000000,154192],"value":"replica"},{"id":[1000000,47031],"span":4},{"id":[1000000,47035],"value":" $p$ is described "},{"id":[1000000,47095],"value":"by"},{"id":[1000000,47053],"span":4},{"id":[1000000,47057],"value":" $A_p$, a finite partial function."},{"id":[1000000,47097],"value":" "},{"id":[1000000,47100],"value":"The "},{"id":[1000000,180605],"value":"evaluation rules of"},{"id":[1000000,47104],"span":3},{"id":[1000000,47109],"span":9},{"id":[1000000,47118],"value":" the command language "},{"id":[1000000,47140],"span":26},{"id":[1000000,47166],"value":"inspect and modify this local state $"},{"id":[1000000,47209],"value":"A_p$, and "},{"id":[1000000,180655],"value":"they"},{"id":[1000000,228963],"value":" do not depend on $A_q$ (the state of any other replica $q"},{"id":[1000000,229022],"value":" "},{"id":[1000000,229021],"value":"\\"},{"id":[1000000,229023],"value":"neq "},{"id":[1000000,229029],"value":"p$)"},{"id":[1000000,229027],"span":1},{"id":[1000000,47219],"span":17},{"id":[1000000,47238],"span":18},{"id":[1000000,47262],"span":3},{"id":[1000000,154580],"span":1},{"id":[1000000,47265],"span":19},{"id":[1000000,154203],"span":7},{"id":[1000000,47284],"span":6},{"id":[1000000,154575],"span":1},{"id":[1000000,47290],"span":3},{"id":[1000000,47293],"value":". The only communication "},{"id":[1000000,47322],"value":"between "},{"id":[1000000,154215],"value":"replicas"},{"id":[1000000,47330],"span":5},{"id":[1000000,47335],"value":" occurs in the evaluation of the \\textsf{yield} command, which we discuss later. For now"},{"id":[1000000,47425],"value":", we concentrate on the execution of commands at a single "},{"id":[1000000,154227],"value":"replica"},{"id":[1000000,47483],"span":4},{"id":[1000000,47487],"value":" $p$."},{"id":[1000000,47492],"span":33},{"id":[1000000,154238],"span":7},{"id":[1000000,47525],"span":138},{"id":[1000000,57971],"span":8},{"id":[1000000,47663],"span":15},{"id":[1000000,47680],"span":25},{"id":[1000000,57854],"span":42},{"id":[1000000,57980],"span":2},{"id":[1000000,57896],"span":21},{"id":[1000000,57983],"span":4},{"id":[1000000,57991],"span":138},{"id":[1000000,57987],"span":2},{"id":[1000000,57917],"span":1},{"id":[1000000,47705],"span":55},{"id":[1000000,47764],"span":1},{"id":[1000000,47767],"span":17},{"id":[1000000,58171],"span":86},{"id":[1000000,47784],"span":35},{"id":[1000000,47821],"span":15},{"id":[1000000,47840],"span":3},{"id":[1000000,47863],"span":10},{"id":[1000000,58366],"span":1},{"id":[1000000,47873],"span":16},{"id":[1000000,47893],"span":12},{"id":[1000000,47907],"span":67},{"id":[1000000,47982],"span":14},{"id":[1000000,58367],"span":4},{"id":[1000000,47996],"span":209},{"id":[1000000,48207],"span":7},{"id":[1000000,48216],"span":94},{"id":[1000000,49886],"span":14},{"id":[1000000,48310],"span":1},{"id":[1000000,48311],"value":"\n"},{"id":[1000000,102136],"value":"\n\\subsection{Expression "},{"id":[1000000,252343],"value":"E"},{"id":[1000000,102160],"span":1},{"id":[1000000,102161],"value":"valuation}\n"},{"id":[1000000,48312],"value":"\n"},{"id":[1000000,48378],"value":"Figure~\\ref{"},{"id":[1000000,48392],"value":"fig:expr-rules} gives "},{"id":[1000000,48415],"value":"t"},{"id":[1000000,48390],"span":1},{"id":[1000000,48313],"span":1},{"id":[1000000,48314],"value":"he rules for evaluating EXPR expressions in the command language"},{"id":[1000000,48416],"value":", which are "},{"id":[1000000,48488],"value":"evaluated"},{"id":[1000000,48428],"span":7},{"id":[1000000,48435],"value":" in the context of the local "},{"id":[1000000,154249],"value":"replica"},{"id":[1000000,48464],"span":4},{"id":[1000000,48468],"value":" state $A_p$."},{"id":[1000000,48497],"value":" The \\textsc{Exec} rule "},{"id":[1000000,58388],"value":"formalizes the assumption"},{"id":[1000000,48521],"span":7},{"id":[1000000,48528],"value":" that commands are executed sequentially. The \\textsc{Let} rule allows the program to define a local variable, which is added to the local state"},{"id":[1000000,253759],"value":" (the notation $A_p[\\,x \\,\\mapsto\\, \\mathit{cur}\\,]$ denotes a partial function that is the same as $A_p$, except that $A_p(x) = \\mathit{cur}$)"},{"id":[1000000,253756],"value":". T"},{"id":[1000000,48672],"span":7},{"id":[1000000,48679],"value":"he corresponding \\textsc{Var} rule allows the program to retrieve the value of a previously defined variable.\n\nThe"},{"id":[1000000,253902],"value":" following"},{"id":[1000000,48793],"span":1},{"id":[1000000,48804],"span":9},{"id":[1000000,48813],"value":" rules in "},{"id":[1000000,48825],"value":"Figure"},{"id":[1000000,48917],"span":1},{"id":[1000000,48831],"value":"~\\ref{fig:expr-rules}"},{"id":[1000000,48919],"value":" show how an expression is"},{"id":[1000000,48852],"value":" "},{"id":[1000000,48873],"value":"evaluate"},{"id":[1000000,48945],"value":"d"},{"id":[1000000,48881],"value":" to a "},{"id":[1000000,48887],"span":6},{"id":[1000000,48893],"value":"cursor"},{"id":[1000000,96502],"value":", which"},{"id":[1000000,48899],"span":6},{"id":[1000000,48974],"span":10},{"id":[1000000,48984],"value":" "},{"id":[1000000,48998],"value":"unambiguously "},{"id":[1000000,48985],"value":"identifies a "},{"id":[1000000,49012],"value":"particular position in a JSON document by describing a path from the root of the document tree to some branch or leaf node. "},{"id":[1000000,49138],"value":"A cursor consists only of immutable keys and identifiers, so it can be sent over the network to another "},{"id":[1000000,154260],"value":"replica"},{"id":[1000000,49242],"span":4},{"id":[1000000,49246],"value":", where it can be used to locate the same position in the document.\n\nFor ex"},{"id":[1000000,49867],"value":"am"},{"id":[1000000,49875],"value":"ple,"},{"id":[1000000,49881],"value":"\n"},{"id":[1000000,58373],"value":"\\[ "},{"id":[1000000,49882],"span":1},{"id":[1000000,49879],"span":1},{"id":[1000000,49869],"span":3},{"id":[1000000,49321],"span":8},{"id":[1000000,49329],"value":"\\mathsf{cursor}(\\langle \\mathsf{mapT}(\\mathsf{doc}), \\mathsf{listT}(\\text{``shopping''}) \\rangle,\\, \\mathit{id}_1)"},{"id":[1000000,58378],"value":" \\]"},{"id":[1000000,49443],"span":1},{"id":[1000000,49883],"span":1},{"id":[1000000,49884],"value":"\n"},{"id":[1000000,49444],"span":1},{"id":[1000000,49445],"value":"is a cursor representing the list element \\verb|\"eggs\"| in Figure~\\ref{fig:make-doc}"},{"id":[1000000,253934],"value":", assuming that $\\mathit{id}_1$ is the unique identifier of the operation that inserted this list element (we will discuss "},{"id":[1000000,256991],"value":"these identifiers "},{"id":[1000000,254057],"value":"in Section~\\ref{sec:lamport-ts}"},{"id":[1000000,254088],"span":34},{"id":[1000000,254122],"value":")"},{"id":[1000000,49529],"value":". "},{"id":[1000000,254125],"value":"The cursor"},{"id":[1000000,49545],"span":2},{"id":[1000000,49547],"value":" can be interpreted as a path"},{"id":[1000000,49603],"value":" through the"},{"id":[1000000,253166],"value":" local replica state"},{"id":[1000000,49615],"value":" structure"},{"id":[1000000,253186],"value":" $A_p$"},{"id":[1000000,49625],"span":34},{"id":[1000000,49576],"value":", read from left to right: "},{"id":[1000000,49659],"value":"starting from the \\"},{"id":[1000000,49682],"value":"textsf{doc} map at the root, it traverses through the map "},{"id":[1000000,49772],"value":"entry"},{"id":[1000000,49740],"span":3},{"id":[1000000,49743],"value":" ``shopping'' of type "},{"id":[1000000,49777],"value":"\\"},{"id":[1000000,49856],"value":"text"},{"id":[1000000,49778],"span":4},{"id":[1000000,49782],"value":"sf{"},{"id":[1000000,49765],"value":"list"},{"id":[1000000,49785],"value":"T}, and "},{"id":[1000000,49904],"value":"finishes"},{"id":[1000000,49793],"span":4},{"id":[1000000,49797],"value":" with the list element "},{"id":[1000000,254139],"value":"that has"},{"id":[1000000,49820],"span":4},{"id":[1000000,49824],"value":" identifier $\\mathit{id}_1$."},{"id":[1000000,49912],"value":"\n\nIn general, "},{"id":[1000000,49978],"value":"$\\mathsf{cursor}(\\langle k_1, \\dots, "},{"id":[1000000,50019],"value":"k_{n-1} \\rangle,\\, k_n)$ consists of a"},{"id":[1000000,50092],"value":" (possibly empty)"},{"id":[1000000,50057],"value":" vector of keys $\\langle k_1, \\dots"},{"id":[1000000,50109],"value":", k_{n-1} \\rangle$, and a final key $k_n$ "},{"id":[1000000,50151],"span":1},{"id":[1000000,50152],"value":"which is always present"},{"id":[1000000,50175],"span":1},{"id":[1000000,50176],"value":". $k_n$ can be thought of as the final element of the vector, with the distinction that i"},{"id":[1000000,50267],"value":"t is not tagged with a datatype, whereas the elements of the vector "},{"id":[1000000,58441],"value":"are tagged with the datatype of the branch node"},{"id":[1000000,254147],"value":" being traversed"},{"id":[1000000,58488],"value":", either"},{"id":[1000000,50335],"span":16},{"id":[1000000,50357],"span":12},{"id":[1000000,50369],"value":" "},{"id":[1000000,50374],"value":"\\textsf{mapT} or \\textsf{listT}.\n\nThe \\"},{"id":[1000000,50419],"value":"textsc{Doc} rule in Figure~\\ref{fig:expr-rules} defines the simplest cursor"},{"id":[1000000,50701],"value":" $\\mathsf{cursor}(\\langle\\rangle,\\, \\mathsf{doc})$"},{"id":[1000000,50494],"value":", referencing the root of the document using the special atom \\"},{"id":[1000000,50561],"value":"textsf{doc}. "},{"id":[1000000,50660],"value":"The \\textsc{Get} rule navigates a cursor "},{"id":[1000000,50751],"value":"to a particular key within a "},{"id":[1000000,50914],"value":"map. For example, the expression "},{"id":[1000000,50951],"value":"\\verb|doc"},{"id":[1000000,253734],"value":".get("},{"id":[1000000,96550],"span":1},{"id":[1000000,50960],"span":5},{"id":[1000000,50965],"value":"\"shopping\""},{"id":[1000000,253740],"value":")"},{"id":[1000000,96552],"span":1},{"id":[1000000,50975],"span":1},{"id":[1000000,50976],"value":"| evaluates to "},{"id":[1000000,51015],"value":"$\\mathsf{cursor}(\\langle \\mathsf{mapT}(\\mathsf{doc}) \\rangle,\\, \\text{``shopping''})$ by applying the \\textsc{Doc} and \\textsc{Get} rules."},{"id":[1000000,52780],"value":" Note that "},{"id":[1000000,52799],"value":"the expression \\verb"},{"id":[1000000,52821],"value":"|doc"},{"id":[1000000,253742],"value":".get("},{"id":[1000000,96557],"span":1},{"id":[1000000,96558],"value":"..."},{"id":[1000000,253748],"value":")"},{"id":[1000000,96561],"span":1},{"id":[1000000,52825],"span":4},{"id":[1000000,52829],"value":"| implicitly asserts that \\"},{"id":[1000000,52890],"value":"text"},{"id":[1000000,52856],"span":4},{"id":[1000000,52860],"value":"sf{doc} is of type \\"},{"id":[1000000,52894],"value":"textsf{mapT}, and this assertion is encoded in the cursor."},{"id":[1000000,52880],"span":3},{"id":[1000000,52819],"span":1},{"id":[1000000,52791],"span":4},{"id":[1000000,51153],"value":"\n\nThe"},{"id":[1000000,254163],"value":" rules"},{"id":[1000000,51158],"value":" "},{"id":[1000000,254169],"value":"$"},{"id":[1000000,51159],"value":"\\textsc{I"},{"id":[1000000,254177],"value":"dx"},{"id":[1000000,51168],"span":3},{"id":[1000000,254170],"span":2},{"id":[1000000,51171],"value":"}"},{"id":[1000000,254179],"value":"_{1"},{"id":[1000000,254184],"value":" \\dots 5}$ define how to evaluate the expression \\verb|"},{"id":[1000000,254239],"span":3},{"id":[1000000,254242],"value":".idx(|$n"},{"id":[1000000,254252],"value":"$\\verb|)|"},{"id":[1000000,254263],"value":", moving the cursor to a particular element of a list. "},{"id":[1000000,254318],"span":7},{"id":[1000000,254327],"value":"$\\textsc{Idx}_1$ constructs a cursor representing the head of the list, "},{"id":[1000000,254406],"value":"and delegates to the subsequent rules to scan over the list. $\\textsc{Idx}_2$ recursively descends the local state according to the vector of keys in the cursor. When the vector of keys is empty, the context $\\mathit{ctx}$ is the subtree of $A_p$ "},{"id":[1000000,254679],"value":"that stores the list in question, and the rules $\\textsc{Idx}_{3,4,5}$ iterate over that list until the desired element is f"},{"id":[1000000,254807],"value":"ound.\n\n$\\textsc{Idx}_5$ terminates the iteration when the index reaches zero, while $\\textsc{Idx}_3$ moves to the next element and decrements the index, and $\\textsc{Idx}_4$ skips over "},{"id":[1000000,254992],"span":8},{"id":[1000000,255000],"value":"list elements"},{"id":[1000000,255310],"value":" that are marked as deleted"},{"id":[1000000,255013],"value":". The "},{"id":[1000000,255019],"span":5},{"id":[1000000,255024],"value":"structure resemble"},{"id":[1000000,255044],"value":"s a linked list"},{"id":[1000000,255064],"value":": each list element has a unique identifier $k$, and the partial function representing local state ma"},{"id":[1000000,255167],"value":"ps $\\mathsf{next}(k)$ to the ID of the list element that follows $k$."},{"id":[1000000,255414],"value":"\n\n"},{"id":[1000000,255337],"span":1},{"id":[1000000,255338],"value":"Deleted"},{"id":[1000000,255345],"span":5},{"id":[1000000,255350],"value":" elements are never removed from the"},{"id":[1000000,255391],"value":" linked list structure"},{"id":[1000000,255444],"value":", but only marked as deleted"},{"id":[1000000,259122],"value":" ("},{"id":[1000000,259134],"value":"they become "},{"id":[1000000,259164],"value":"so"},{"id":[1000000,259169],"span":1},{"id":[1000000,259166],"value":"-"},{"id":[1000000,259171],"value":"called "},{"id":[1000000,259167],"span":1},{"id":[1000000,259146],"value":"\\emph{tombstones})"},{"id":[1000000,259124],"span":5},{"id":[1000000,255472],"value":". To this end, the local state "},{"id":[1000000,255595],"value":"main"},{"id":[1000000,255503],"span":3},{"id":[1000000,255506],"value":"tains a \\emph{presence set} $\\mathsf{pres}(k)$ for "},{"id":[1000000,255600],"value":"the"},{"id":[1000000,255591],"span":1},{"id":[1000000,255557],"span":4},{"id":[1000000,255561],"value":" list element with ID $k$"},{"id":[1000000,256018],"value":", which"},{"id":[1000000,255586],"span":1},{"id":[1000000,255621],"span":3},{"id":[1000000,255624],"value":" is the set of all operations that have asserted the existence of th"},{"id":[1000000,256026],"value":"is"},{"id":[1000000,255692],"span":1},{"id":[1000000,255693],"value":" list element. When a list element is deleted, the pre"},{"id":[1000000,255751],"value":"sence set is set to the empty set, "},{"id":[1000000,256032],"value":"which "},{"id":[1000000,255786],"value":"mark"},{"id":[1000000,256031],"value":"s"},{"id":[1000000,255790],"span":3},{"id":[1000000,255793],"value":" it as deleted; however, a concurrent operation that references the list element can cause the presence set to be come non-empty again (leading to the situations in Figures~\\ref{fig:map-remove} and"},{"id":[1000000,255992],"value":"~\\ref{fig:todo-item})."},{"id":[1000000,256038],"value":" "},{"id":[1000000,256041],"value":"Rule $\\textsc{Idx}_4$ handles list element"},{"id":[1000000,256085],"value":"s with "},{"id":[1000000,256106],"value":"an "},{"id":[1000000,256092],"value":"empty presence"},{"id":[1000000,256109],"value":" set by moving to the next list element without decrementing the index"},{"id":[1000000,258137],"value":" "},{"id":[1000000,258139],"value":"("},{"id":[1000000,257046],"span":2},{"id":[1000000,257048],"value":"i.e."},{"id":[1000000,258140],"value":","},{"id":[1000000,257052],"value":" not counting them as list elements"},{"id":[1000000,258141],"value":")"},{"id":[1000000,256179],"value":"."},{"id":[1000000,256083],"span":1},{"id":[1000000,256039],"span":1},{"id":[1000000,255990],"span":1},{"id":[1000000,255747],"span":2},{"id":[1000000,255603],"span":1},{"id":[1000000,255616],"span":2},{"id":[1000000,255604],"span":6},{"id":[1000000,255236],"span":1},{"id":[1000000,255261],"span":14},{"id":[1000000,255283],"span":2},{"id":[1000000,255291],"span":11},{"id":[1000000,255285],"span":3},{"id":[1000000,255275],"span":4},{"id":[1000000,255237],"span":12},{"id":[1000000,255165],"span":1},{"id":[1000000,255042],"span":1},{"id":[1000000,254803],"span":2},{"id":[1000000,254653],"span":13},{"id":[1000000,254325],"span":1},{"id":[1000000,254261],"value":"\n\n"},{"id":[1000000,254250],"span":1},{"id":[1000000,254182],"span":1},{"id":[1000000,51172],"span":8},{"id":[1000000,51182],"span":27},{"id":[1000000,51217],"span":15},{"id":[1000000,51240],"span":11},{"id":[1000000,51255],"span":52},{"id":[1000000,51309],"span":47},{"id":[1000000,96567],"span":4},{"id":[1000000,51356],"span":27},{"id":[1000000,51510],"span":1},{"id":[1000000,51383],"span":1},{"id":[1000000,51511],"span":1},{"id":[1000000,97224],"span":3},{"id":[1000000,96574],"span":7},{"id":[1000000,51512],"span":4},{"id":[1000000,51384],"span":126},{"id":[1000000,51555],"span":109},{"id":[1000000,51681],"span":1},{"id":[1000000,51664],"span":15},{"id":[1000000,96582],"span":1},{"id":[1000000,51679],"span":1},{"id":[1000000,51682],"span":85},{"id":[1000000,96583],"span":23},{"id":[1000000,96622],"span":265},{"id":[1000000,96893],"span":5},{"id":[1000000,96900],"span":30},{"id":[1000000,96930],"value":"The $\\textsc{Keys}_{1,2,3}$ rules allow the application to inspect the set of keys "},{"id":[1000000,97013],"span":17},{"id":[1000000,97030],"value":"in a map. This set is determined by examining the local state, and excluding any keys for which the presence set is empty (indicating that the key has been deleted)."},{"id":[1000000,96898],"span":1},{"id":[1000000,96891],"span":1},{"id":[1000000,96887],"span":2},{"id":[1000000,96606],"span":8},{"id":[1000000,52952],"value":"\n\nFinally, the $\\textsc{Val}_{1,2,3}$ rules "},{"id":[1000000,52998],"value":"allow "},{"id":[1000000,97204],"value":"the application"},{"id":[1000000,53004],"span":9},{"id":[1000000,53013],"value":" to read the "},{"id":[1000000,53038],"value":"contents of "},{"id":[1000000,58511],"value":"a register at"},{"id":[1000000,53050],"span":15},{"id":[1000000,53065],"value":" a particular cursor position"},{"id":[1000000,53515],"value":", using a similar recursive rule structure as the \\textsc{"},{"id":[1000000,257091],"value":"Idx"},{"id":[1000000,53573],"span":4},{"id":[1000000,53577],"value":"} rules"},{"id":[1000000,53094],"value":". "},{"id":[1000000,58581],"value":"A "},{"id":[1000000,53096],"span":49},{"id":[1000000,53145],"value":"registe"},{"id":[1000000,58528],"value":"r is"},{"id":[1000000,53152],"span":3},{"id":[1000000,53159],"span":1},{"id":[1000000,53155],"value":" exp"},{"id":[1000000,53160],"span":1},{"id":[1000000,53161],"value":"ress"},{"id":[1000000,53166],"value":"ed using the "},{"id":[1000000,53183],"value":"\\textsf{regT} type annotation in the local state"},{"id":[1000000,58583],"span":55},{"id":[1000000,58654],"span":25},{"id":[1000000,58638],"span":16},{"id":[1000000,53231],"value":". A"},{"id":[1000000,53278],"value":"lthough a "},{"id":[1000000,154271],"value":"replica"},{"id":[1000000,53288],"span":4},{"id":[1000000,53294],"span":7},{"id":[1000000,53301],"value":" can only a"},{"id":[1000000,53319],"value":"ssign a single value to a register, a register can nevertheless contain multiple values if multi"},{"id":[1000000,53417],"value":"ple "},{"id":[1000000,154282],"value":"replica"},{"id":[1000000,53421],"span":4},{"id":[1000000,53425],"value":"s concurrently assign values to it"},{"id":[1000000,58680],"span":3},{"id":[1000000,53459],"span":22},{"id":[1000000,53483],"span":1},{"id":[1000000,53488],"span":26},{"id":[1000000,53514],"value":"."},{"id":[1000000,53584],"value":"\n\n"},{"id":[1000000,60423],"value":"\\"},{"id":[1000000,53586],"span":4},{"id":[1000000,53590],"value":"subsection{"},{"id":[1000000,60452],"value":"Generating "},{"id":[1000000,252345],"value":"O"},{"id":[1000000,60463],"span":1},{"id":[1000000,60464],"value":"perations"},{"id":[1000000,53625],"span":28},{"id":[1000000,53653],"value":"}"},{"id":[1000000,60473],"value":"\n\n"},{"id":[1000000,60698],"value":"When"},{"id":[1000000,60574],"span":48},{"id":[1000000,60489],"span":18},{"id":[1000000,60507],"value":" commands "},{"id":[1000000,60625],"span":4},{"id":[1000000,60517],"span":4},{"id":[1000000,60521],"value":"mutat"},{"id":[1000000,60632],"value":"e"},{"id":[1000000,60526],"span":3},{"id":[1000000,60529],"value":" the state of the document"},{"id":[1000000,60635],"value":", "},{"id":[1000000,60710],"value":"they generate \\emph{operations} that describe the mutation"},{"id":[1000000,60637],"span":8},{"id":[1000000,60633],"span":1},{"id":[1000000,60555],"value":"."},{"id":[1000000,60768],"value":" In our semantics, "},{"id":[1000000,60885],"value":"a "},{"id":[1000000,60787],"value":"command"},{"id":[1000000,60794],"span":1},{"id":[1000000,60795],"value":" never directly modif"},{"id":[1000000,60889],"value":"ies"},{"id":[1000000,60816],"span":1},{"id":[1000000,60817],"value":" the "},{"id":[1000000,60830],"value":"local "},{"id":[1000000,154293],"value":"replica"},{"id":[1000000,60836],"span":4},{"id":[1000000,60840],"value":" state $A_p$, but only generate"},{"id":[1000000,60892],"value":"s"},{"id":[1000000,60871],"value":" an operation."},{"id":[1000000,60893],"value":" That operation is th"},{"id":[1000000,60920],"value":"en "},{"id":[1000000,60952],"value":"immediately "},{"id":[1000000,60923],"value":"applied to $A_p$ "},{"id":[1000000,60976],"value":"so that it takes effect locally, and "},{"id":[1000000,61028],"value":"the "},{"id":[1000000,257190],"value":"same "},{"id":[1000000,61032],"value":"operation is also "},{"id":[1000000,61013],"value":"asynchronously "},{"id":[1000000,61050],"value":"broadcast to the other "},{"id":[1000000,154304],"value":"replica"},{"id":[1000000,61073],"span":4},{"id":[1000000,61077],"value":"s."},{"id":[1000000,61079],"span":2},{"id":[1000000,154653],"span":4},{"id":[1000000,61081],"span":1},{"id":[1000000,154315],"span":7},{"id":[1000000,61082],"span":11},{"id":[1000000,61097],"span":1},{"id":[1000000,154633],"span":3},{"id":[1000000,61098],"span":10},{"id":[1000000,154657],"span":3},{"id":[1000000,61108],"span":11},{"id":[1000000,154664],"span":1},{"id":[1000000,61119],"span":5},{"id":[1000000,154689],"span":5},{"id":[1000000,61124],"span":7},{"id":[1000000,154326],"span":7},{"id":[1000000,154665],"span":2},{"id":[1000000,154668],"span":21},{"id":[1000000,154333],"span":1},{"id":[1000000,62552],"span":5},{"id":[1000000,61131],"span":68},{"id":[1000000,61199],"value":"\n\n"},{"id":[1000000,61093],"span":2},{"id":[1000000,60940],"span":12},{"id":[1000000,60914],"span":3},{"id":[1000000,60822],"span":4},{"id":[1000000,60475],"span":7},{"id":[1000000,53601],"span":12},{"id":[1000000,53484],"span":2},{"id":[1000000,53481],"span":1},{"id":[1000000,53415],"span":1},{"id":[1000000,53292],"span":1},{"id":[1000000,53234],"span":4},{"id":[1000000,53240],"span":17},{"id":[1000000,53238],"span":1},{"id":[1000000,53179],"span":2},{"id":[1000000,53026],"span":6},{"id":[1000000,52996],"span":1},{"id":[1000000,51307],"span":1},{"id":[1000000,51251],"span":2},{"id":[1000000,51232],"span":4},{"id":[1000000,51209],"span":4},{"id":[1000000,51180],"span":1},{"id":[1000000,50991],"span":12},{"id":[1000000,50947],"span":2},{"id":[1000000,50780],"span":18},{"id":[1000000,50802],"span":47},{"id":[1000000,50798],"span":2},{"id":[1000000,50574],"span":43},{"id":[1000000,50557],"span":2},{"id":[1000000,50413],"span":3},{"id":[1000000,50370],"span":2},{"id":[1000000,50351],"span":3},{"id":[1000000,50265],"span":1},{"id":[1000000,50015],"span":2},{"id":[1000000,49926],"span":12},{"id":[1000000,49948],"span":9},{"id":[1000000,49938],"span":5},{"id":[1000000,49678],"span":2},{"id":[1000000,49531],"span":7},{"id":[1000000,49136],"span":1},{"id":[1000000,48952],"span":11},{"id":[1000000,48948],"span":2},{"id":[1000000,48905],"span":2},{"id":[1000000,48853],"span":6},{"id":[1000000,48863],"span":2},{"id":[1000000,48859],"span":2},{"id":[1000000,48823],"span":1},{"id":[1000000,48794],"span":5},{"id":[1000000,48214],"span":1},{"id":[1000000,48205],"span":1},{"id":[1000000,47974],"span":4},{"id":[1000000,47905],"span":1},{"id":[1000000,47889],"span":2},{"id":[1000000,47843],"span":10},{"id":[1000000,47836],"span":2},{"id":[1000000,47819],"span":1},{"id":[1000000,47765],"span":1},{"id":[1000000,47760],"span":2},{"id":[1000000,47678],"span":1},{"id":[1000000,47423],"span":1},{"id":[1000000,47318],"span":2},{"id":[1000000,47256],"span":3},{"id":[1000000,47236],"span":1},{"id":[1000000,47203],"span":3},{"id":[1000000,47107],"span":1},{"id":[1000000,47098],"span":1},{"id":[1000000,42473],"span":1},{"id":[1000000,35268],"span":1},{"id":[1000000,35269],"value":"\\"},{"id":[1000000,60416],"value":"sub"},{"id":[1000000,35270],"value":"subsection{Lamport "},{"id":[1000000,252347],"value":"T"},{"id":[1000000,35289],"span":1},{"id":[1000000,35290],"value":"imestamps}"},{"id":[1000000,253912],"value":"\\label{sec:lamport"},{"id":[1000000,253931],"value":"-ts"},{"id":[1000000,253930],"value":"}"},{"id":[1000000,35300],"value":"\n"},{"id":[1000000,61204],"value":"\nEvery operation in our model is given a unique identifier, which is used "},{"id":[1000000,61330],"value":"in"},{"id":[1000000,61278],"span":10},{"id":[1000000,61288],"value":" the local state and "},{"id":[1000000,61334],"value":"in"},{"id":[1000000,61309],"span":2},{"id":[1000000,61311],"value":" cursors."},{"id":[1000000,61336],"value":" "},{"id":[1000000,61337],"span":180},{"id":[1000000,61518],"span":4},{"id":[1000000,253227],"span":1},{"id":[1000000,61522],"span":2},{"id":[1000000,61545],"span":1},{"id":[1000000,61524],"span":4},{"id":[1000000,253228],"span":2},{"id":[1000000,253540],"value":"W"},{"id":[1000000,253230],"span":1},{"id":[1000000,253231],"value":"henever an element is inserted into a list"},{"id":[1000000,257334],"value":","},{"id":[1000000,253273],"value":" or a value is assigned to a register, the "},{"id":[1000000,253336],"value":"new list element or register value is identified by the identifier of the operation that created it"},{"id":[1000000,253316],"span":10},{"id":[1000000,61528],"span":17},{"id":[1000000,61546],"span":49},{"id":[1000000,154694],"span":8},{"id":[1000000,154703],"span":31},{"id":[1000000,61595],"value":".\n\n"},{"id":[1000000,61707],"value":"In order to gener"},{"id":[1000000,61726],"value":"ate globally unique operation identifiers without "},{"id":[1000000,61831],"value":"requiring "},{"id":[1000000,61776],"value":"synchro"},{"id":[1000000,61814],"value":"nous coordination"},{"id":[1000000,61783],"span":8},{"id":[1000000,61791],"value":" between "},{"id":[1000000,154338],"value":"replica"},{"id":[1000000,154345],"span":1},{"id":[1000000,61800],"span":4},{"id":[1000000,61804],"value":"s"},{"id":[1000000,61805],"span":1},{"id":[1000000,61724],"span":1},{"id":[1000000,61706],"value":" "},{"id":[1000000,61843],"value":"w"},{"id":[1000000,61604],"span":1},{"id":[1000000,61605],"value":"e use Lamport timestamps~\\cite{Lamport:1978jq"},{"id":[1000000,61872],"value":"}."},{"id":[1000000,62195],"value":" "},{"id":[1000000,61650],"span":2},{"id":[1000000,61680],"span":26},{"id":[1000000,61652],"span":14},{"id":[1000000,61598],"span":3},{"id":[1000000,61203],"span":1},{"id":[1000000,4873],"span":93},{"id":[1000000,4990],"span":163},{"id":[1000000,5155],"span":2},{"id":[1000000,5157],"value":"A Lamport timestamp is a pair "},{"id":[1000000,5189],"value":"$("},{"id":[1000000,5193],"value":"c, "},{"id":[1000000,5396],"value":"p"},{"id":[1000000,5196],"span":1},{"id":[1000000,5197],"value":")$ where"},{"id":[1000000,5246],"value":" $"},{"id":[1000000,5398],"value":"p"},{"id":[1000000,84822],"value":" \\in \\mathrm{"},{"id":[1000000,154351],"value":"Replica"},{"id":[1000000,84835],"span":4},{"id":[1000000,84839],"value":"ID}"},{"id":[1000000,5248],"span":1},{"id":[1000000,5249],"value":"$ is the unique identifier of the "},{"id":[1000000,154366],"value":"replica"},{"id":[1000000,5403],"span":4},{"id":[1000000,5283],"span":4},{"id":[1000000,5287],"value":" on which the edit is made"},{"id":[1000000,61874],"value":" (for example,"},{"id":[1000000,61920],"value":" a "},{"id":[1000000,61923],"span":13},{"id":[1000000,61888],"span":5},{"id":[1000000,61893],"value":"hash of its public"},{"id":[1000000,154360],"value":" k"},{"id":[1000000,61911],"span":2},{"id":[1000000,61913],"value":"ey)"},{"id":[1000000,62197],"value":", and"},{"id":[1000000,5323],"span":1},{"id":[1000000,5313],"span":5},{"id":[1000000,5205],"value":" $c"},{"id":[1000000,84842],"value":" \\in \\math"},{"id":[1000000,84859],"value":"bb"},{"id":[1000000,84852],"span":2},{"id":[1000000,84854],"value":"{N}"},{"id":[1000000,5208],"value":"$ is a counter that is stored at "},{"id":[1000000,5329],"value":"each "},{"id":[1000000,5411],"span":3},{"id":[1000000,5414],"value":"r"},{"id":[1000000,154376],"value":"eplica"},{"id":[1000000,5334],"span":4},{"id":[1000000,5338],"value":" and incremented for every operation. "},{"id":[1000000,62325],"value":"Since each "},{"id":[1000000,154386],"value":"replica"},{"id":[1000000,62336],"span":4},{"id":[1000000,62340],"value":" generates a strictly monotonically increasing sequence of counter values $c$, the pair $(c, p)$ is unique."},{"id":[1000000,5485],"span":67},{"id":[1000000,5443],"span":17},{"id":[1000000,5620],"span":19},{"id":[1000000,5460],"span":4},{"id":[1000000,5594],"span":24},{"id":[1000000,5833],"value":"\n\n"},{"id":[1000000,5618],"span":1},{"id":[1000000,5650],"value":"If a "},{"id":[1000000,5655],"span":3},{"id":[1000000,5658],"value":"r"},{"id":[1000000,154396],"value":"eplica"},{"id":[1000000,5659],"value":" receives an operation with a counter value $c$ that is great"},{"id":[1000000,5722],"value":"er than the locally stored counter value, the local counter is increased to the value of the incoming counter."},{"id":[1000000,5835],"value":" This ensures that if operation $o_1$ "},{"id":[1000000,154734],"value":"causally "},{"id":[1000000,5873],"value":"happened before $o_2$ (that is, the "},{"id":[1000000,5909],"span":3},{"id":[1000000,5912],"value":"r"},{"id":[1000000,154567],"value":"eplica"},{"id":[1000000,5913],"value":" that generated $o_2$ "},{"id":[1000000,5965],"value":"had received and processed $o_1$ before $o_2$ was generated), then $o_2$ must have a greater counter value than $o_1$. Only concurrent operations can have equal counter values.\n\nWe can thus define a total ordering"},{"id":[1000000,6827],"value":" $<$"},{"id":[1000000,6178],"value":" "},{"id":[1000000,6209],"value":"for Lamport timestamps:\n"},{"id":[1000000,62449],"value":"\\[ "},{"id":[1000000,6233],"span":2},{"id":[1000000,6237],"value":"(c_1, p_1) < (c_2, p_2) \\"},{"id":[1000000,6805],"value":";"},{"id":[1000000,6262],"span":4},{"id":[1000000,6268],"value":"\\text{"},{"id":[1000000,6816],"value":" "},{"id":[1000000,6274],"value":"iff"},{"id":[1000000,6815],"value":" "},{"id":[1000000,6277],"value":"}"},{"id":[1000000,6278],"span":1},{"id":[1000000,6810],"span":1},{"id":[1000000,6811],"value":"\\;"},{"id":[1000000,6279],"span":4},{"id":[1000000,6283],"value":" (c_1 < c_2) \\vee (c_1 = c_2 \\wedge p_1 < p_2)."},{"id":[1000000,62454],"value":" \\]"},{"id":[1000000,6330],"span":2},{"id":[1000000,6332],"value":"\n"},{"id":[1000000,6589],"value":"If one operation happened before another, this ordering is consistent with causality (the earlier operation has a lower times"},{"id":[1000000,6714],"span":1},{"id":[1000000,6715],"value":"tamp). If two operations are concurrent, th"},{"id":[1000000,6819],"value":"e"},{"id":[1000000,6831],"value":"ir"},{"id":[1000000,6758],"span":2},{"id":[1000000,6760],"value":" order"},{"id":[1000000,6833],"value":" according to"},{"id":[1000000,6846],"span":1},{"id":[1000000,6823],"value":" $<$"},{"id":[1000000,6766],"span":3},{"id":[1000000,6769],"value":" is arbitrary but deterministic."},{"id":[1000000,62457],"value":" This ordering property is important for our definition of the semantics of ordered lists."},{"id":[1000000,6333],"span":106},{"id":[1000000,6463],"span":10},{"id":[1000000,6439],"span":12},{"id":[1000000,6266],"span":1},{"id":[1000000,6235],"span":1},{"id":[1000000,6179],"span":15},{"id":[1000000,5935],"span":15},{"id":[1000000,5720],"span":1},{"id":[1000000,5640],"span":5},{"id":[1000000,5619],"span":1},{"id":[1000000,5464],"span":13},{"id":[1000000,5376],"span":19},{"id":[1000000,5415],"span":19},{"id":[1000000,5241],"span":5},{"id":[1000000,5191],"span":1},{"id":[1000000,5187],"span":1},{"id":[1000000,5153],"span":1},{"id":[1000000,4966],"span":12},{"id":[1000000,640],"value":"\n"},{"id":[1000000,4824],"value":"\n"},{"id":[1000000,64320],"value":"\\subsubsection{Operation "},{"id":[1000000,252349],"value":"S"},{"id":[1000000,64345],"span":1},{"id":[1000000,64346],"value":"tructure}\n\nAn operation is a t"},{"id":[1000000,64380],"value":"uple of the form"},{"id":[1000000,64645],"value":"\n\\begin{alignat*}{"},{"id":[1000000,84807],"value":"3"},{"id":[1000000,64663],"span":1},{"id":[1000000,64664],"value":"}"},{"id":[1000000,64396],"value":"\n"},{"id":[1000000,64667],"value":"&"},{"id":[1000000,64397],"span":2},{"id":[1000000,64399],"value":" \\mathsf{op}("},{"id":[1000000,64687],"value":" \\\\"},{"id":[1000000,64474],"value":"\n"},{"id":[1000000,64693],"value":"&&"},{"id":[1000000,64475],"span":3},{"id":[1000000,64478],"value":" "},{"id":[1000000,64412],"value":"\\mathit{id}"},{"id":[1000000,64710],"value":" &"},{"id":[1000000,64423],"value":": "},{"id":[1000000,64441],"value":"\\mathbb{N} \\times \\mathrm{"},{"id":[1000000,154406],"value":"Replica"},{"id":[1000000,64467],"span":4},{"id":[1000000,64471],"value":"ID}"},{"id":[1000000,64479],"value":","},{"id":[1000000,64794],"value":" \\\\"},{"id":[1000000,64480],"value":"\n"},{"id":[1000000,64698],"value":"&&"},{"id":[1000000,64481],"span":3},{"id":[1000000,64484],"value":" \\mathit{deps}"},{"id":[1000000,64712],"value":" &"},{"id":[1000000,64498],"value":": \\mathcal{P}("},{"id":[1000000,64514],"value":"\\mathbb{N} \\times \\mathrm{"},{"id":[1000000,154417],"value":"Replica"},{"id":[1000000,64540],"span":4},{"id":[1000000,64544],"value":"ID}),"},{"id":[1000000,64791],"value":" \\\\"},{"id":[1000000,64549],"value":"\n"},{"id":[1000000,64703],"value":"&&"},{"id":[1000000,64550],"span":3},{"id":[1000000,64553],"value":" \\mathit{cur}"},{"id":[1000000,64714],"value":" &"},{"id":[1000000,64566],"value":": \\mathsf{cursor}(\\langle k_1, \\dots, k_{n-1} \\rangle,\\, k_n),"},{"id":[1000000,64788],"value":" \\\\"},{"id":[1000000,64628],"value":"\n"},{"id":[1000000,64708],"value":"&&"},{"id":[1000000,64629],"span":3},{"id":[1000000,64632],"value":" \\mathit{mut}"},{"id":[1000000,64716],"value":" &: \\mathsf{insert}(v) \\mid \\mathsf{delete} \\"},{"id":[1000000,64763],"value":"mid \\mathsf{assign}(v)"},{"id":[1000000,84787],"value":" && "},{"id":[1000000,84810],"value":"\\"},{"id":[1000000,84818],"value":"quad"},{"id":[1000000,84811],"span":3},{"id":[1000000,84814],"value":" "},{"id":[1000000,84791],"value":"v: \\mathrm{VA"},{"id":[1000000,84809],"value":"L"},{"id":[1000000,84804],"span":1},{"id":[1000000,84805],"value":"}"},{"id":[1000000,64785],"value":" \\\\"},{"id":[1000000,64761],"span":1},{"id":[1000000,64512],"span":1},{"id":[1000000,64425],"span":8},{"id":[1000000,64376],"span":2},{"id":[1000000,4825],"span":2},{"id":[1000000,4829],"span":24},{"id":[1000000,4861],"span":11},{"id":[1000000,4853],"span":4},{"id":[1000000,4827],"span":1},{"id":[1000000,641],"span":5},{"id":[1000000,654],"span":212},{"id":[1000000,1363],"span":12},{"id":[1000000,866],"span":97},{"id":[1000000,2114],"span":31},{"id":[1000000,963],"span":15},{"id":[1000000,980],"span":13},{"id":[1000000,2146],"span":11},{"id":[1000000,2206],"span":1},{"id":[1000000,2157],"span":4},{"id":[1000000,2163],"span":2},{"id":[1000000,993],"span":34},{"id":[1000000,6848],"span":22},{"id":[1000000,6872],"span":109},{"id":[1000000,6983],"span":106},{"id":[1000000,7250],"span":128},{"id":[1000000,7089],"span":2},{"id":[1000000,6981],"span":1},{"id":[1000000,6870],"span":1},{"id":[1000000,1027],"span":11},{"id":[1000000,2212],"span":4},{"id":[1000000,1038],"span":5},{"id":[1000000,1055],"span":14},{"id":[1000000,1043],"span":12},{"id":[1000000,1069],"span":4},{"id":[1000000,2221],"span":3},{"id":[1000000,2694],"span":50},{"id":[1000000,2755],"span":2},{"id":[1000000,2744],"span":9},{"id":[1000000,2224],"span":7},{"id":[1000000,1073],"span":36},{"id":[1000000,1342],"span":3},{"id":[1000000,1109],"span":15},{"id":[1000000,1323],"span":1},{"id":[1000000,1124],"span":1},{"id":[1000000,1140],"span":15},{"id":[1000000,1321],"span":1},{"id":[1000000,1155],"span":3},{"id":[1000000,2247],"span":12},{"id":[1000000,1158],"span":5},{"id":[1000000,2234],"span":8},{"id":[1000000,1163],"span":2},{"id":[1000000,2232],"span":1},{"id":[1000000,1165],"span":7},{"id":[1000000,2264],"span":12},{"id":[1000000,1172],"span":6},{"id":[1000000,1322],"span":1},{"id":[1000000,1178],"span":1},{"id":[1000000,7093],"span":2},{"id":[1000000,1360],"span":3},{"id":[1000000,1125],"span":15},{"id":[1000000,1179],"span":9},{"id":[1000000,2281],"span":12},{"id":[1000000,1188],"span":6},{"id":[1000000,2293],"span":20},{"id":[1000000,1194],"span":5},{"id":[1000000,2316],"span":2},{"id":[1000000,1199],"span":11},{"id":[1000000,2318],"span":1},{"id":[1000000,1210],"span":18},{"id":[1000000,2319],"span":9},{"id":[1000000,1228],"span":13},{"id":[1000000,2328],"span":13},{"id":[1000000,1241],"span":52},{"id":[1000000,2382],"span":7},{"id":[1000000,1293],"span":7},{"id":[1000000,1302],"span":19},{"id":[1000000,1375],"span":2},{"id":[1000000,2757],"span":24},{"id":[1000000,3800],"span":2},{"id":[1000000,2781],"span":16},{"id":[1000000,3802],"span":2},{"id":[1000000,2797],"span":68},{"id":[1000000,7546],"span":1},{"id":[1000000,7825],"span":1},{"id":[1000000,7848],"span":131},{"id":[1000000,7832],"span":8},{"id":[1000000,7826],"span":3},{"id":[1000000,7547],"span":1},{"id":[1000000,7596],"span":10},{"id":[1000000,7728],"span":7},{"id":[1000000,7606],"span":31},{"id":[1000000,8016],"span":3},{"id":[1000000,7637],"span":21},{"id":[1000000,8019],"span":25},{"id":[1000000,8045],"span":33},{"id":[1000000,8044],"span":1},{"id":[1000000,8078],"span":59},{"id":[1000000,7658],"span":8},{"id":[1000000,7668],"span":16},{"id":[1000000,7686],"span":17},{"id":[1000000,7753],"span":7},{"id":[1000000,7703],"span":9},{"id":[1000000,7743],"span":2},{"id":[1000000,7712],"span":9},{"id":[1000000,7823],"span":1},{"id":[1000000,7721],"span":1},{"id":[1000000,7762],"span":30},{"id":[1000000,7722],"span":2},{"id":[1000000,7684],"span":1},{"id":[1000000,7666],"span":1},{"id":[1000000,7548],"span":24},{"id":[1000000,1377],"span":3},{"id":[1000000,1390],"span":19},{"id":[1000000,1411],"span":51},{"id":[1000000,1604],"span":5},{"id":[1000000,1462],"span":10},{"id":[1000000,1488],"span":31},{"id":[1000000,1521],"span":1},{"id":[1000000,1519],"span":1},{"id":[1000000,1522],"span":1},{"id":[1000000,1520],"span":1},{"id":[1000000,1523],"span":6},{"id":[1000000,1531],"span":2},{"id":[1000000,2084],"span":1},{"id":[1000000,1533],"span":1},{"id":[1000000,1674],"span":4},{"id":[1000000,1534],"span":17},{"id":[1000000,2092],"span":1},{"id":[1000000,1551],"span":2},{"id":[1000000,1679],"span":4},{"id":[1000000,1553],"span":17},{"id":[1000000,2069],"span":11},{"id":[1000000,1592],"span":4},{"id":[1000000,1570],"span":17},{"id":[1000000,2086],"span":1},{"id":[1000000,1587],"span":5},{"id":[1000000,1793],"span":3},{"id":[1000000,1683],"span":34},{"id":[1000000,1763],"span":1},{"id":[1000000,1717],"span":8},{"id":[1000000,2085],"span":1},{"id":[1000000,1725],"span":16},{"id":[1000000,2093],"span":1},{"id":[1000000,1741],"span":14},{"id":[1000000,2081],"span":2},{"id":[1000000,1755],"span":7},{"id":[1000000,1764],"span":4},{"id":[1000000,2042],"span":11},{"id":[1000000,1768],"span":8},{"id":[1000000,1778],"span":10},{"id":[1000000,2087],"span":1},{"id":[1000000,1788],"span":5},{"id":[1000000,1776],"span":1},{"id":[1000000,1529],"span":1},{"id":[1000000,1472],"span":6},{"id":[1000000,1617],"span":5},{"id":[1000000,1478],"span":10},{"id":[1000000,1409],"span":1},{"id":[1000000,1388],"span":1},{"id":[1000000,1380],"span":4},{"id":[1000000,1300],"span":1},{"id":[1000000,978],"span":1},{"id":[1000000,646],"span":4},{"id":[1000000,607],"span":1},{"id":[1000000,2867],"span":1},{"id":[1000000,2869],"span":57},{"id":[1000000,2928],"span":133},{"id":[1000000,3065],"span":78},{"id":[1000000,3145],"span":80},{"id":[1000000,26359],"value":"\n"},{"id":[1000000,64668],"value":"& )\n\\end{alignat*}"},{"id":[1000000,64799],"value":"\nwhere "},{"id":[1000000,64810],"value":"$\\mathit{id}$ is the Lamport timestamp that uniquely identifies the operation, $\\mathit{cur}$ is the cursor describing the position in the document being modified, and $\\mathit{mut}$ is the mutation that "},{"id":[1000000,65040],"value":"was requested at the specified position.\n\n$\\mathit{deps}$ is the set of "},{"id":[1000000,257335],"value":"\\emph{"},{"id":[1000000,65112],"value":"causal dependencies"},{"id":[1000000,257341],"value":"}"},{"id":[1000000,65131],"value":" of the operation"},{"id":[1000000,257342],"value":"."},{"id":[1000000,257943],"value":" It is defined as follows:"},{"id":[1000000,257477],"value":" "},{"id":[1000000,257970],"value":"i"},{"id":[1000000,257478],"span":1},{"id":[1000000,257479],"value":"f operation $o_2$ was generated by replica $p$, then"},{"id":[1000000,257343],"value":" "},{"id":[1000000,257532],"value":"a"},{"id":[1000000,257344],"span":1},{"id":[1000000,257349],"value":" causal dependency "},{"id":[1000000,257374],"value":"of"},{"id":[1000000,257376],"span":10},{"id":[1000000,257386],"value":" $o_2$ is any operation $o_1$ that had"},{"id":[1000000,257469],"value":" already"},{"id":[1000000,257424],"value":" been applied"},{"id":[1000000,257543],"value":" on $p$ at the time when $o_2$ was generated. In this paper, we define"},{"id":[1000000,257615],"value":" "},{"id":[1000000,257630],"value":"$\\mathit{deps}$ as the set of Lamport timestamps of all causal dependencies."},{"id":[1000000,257624],"span":3},{"id":[1000000,257616],"span":4},{"id":[1000000,257613],"span":1},{"id":[1000000,257437],"value":" "},{"id":[1000000,257438],"span":31},{"id":[1000000,257368],"span":3},{"id":[1000000,257345],"span":2},{"id":[1000000,65148],"span":44},{"id":[1000000,180669],"span":5},{"id":[1000000,65192],"span":22},{"id":[1000000,66376],"span":1},{"id":[1000000,65214],"span":1},{"id":[1000000,65227],"span":32},{"id":[1000000,65274],"span":4},{"id":[1000000,65259],"span":15},{"id":[1000000,65278],"span":9},{"id":[1000000,180674],"span":8},{"id":[1000000,65287],"span":75},{"id":[1000000,65362],"value":"In a real implementation, this set would become impracticably large, so a compact representation of causal history "},{"id":[1000000,65487],"value":"would be used instead -- for example, version vectors"},{"id":[1000000,116405],"value":"~\\cite{ParkerJ"},{"id":[1000000,116423],"value":"r:1983jb}"},{"id":[1000000,116419],"span":2},{"id":[1000000,116366],"value":", state vectors~\\cite{Ellis:1989ue}, or"},{"id":[1000000,65540],"span":3},{"id":[1000000,65543],"value":" dotted version vectors"},{"id":[1000000,116449],"value":"~\\cite{Preguica:2012fx}"},{"id":[1000000,65566],"span":7},{"id":[1000000,65575],"span":10},{"id":[1000000,65585],"value":". "},{"id":[1000000,65764],"value":"However, "},{"id":[1000000,65774],"value":"t"},{"id":[1000000,65721],"span":1},{"id":[1000000,65722],"value":"o avoid ambiguity"},{"id":[1000000,65587],"span":8},{"id":[1000000,65595],"value":" in our "},{"id":[1000000,65603],"span":29},{"id":[1000000,65632],"value":"semantics we give the dependencies as a"},{"id":[1000000,65779],"value":" simple"},{"id":[1000000,65671],"value":" set of operation ID"},{"id":[1000000,65711],"value":"s."},{"id":[1000000,65786],"value":"\n\nThe purpose of the causal dependencies $\\mathit{deps}$ is to impose a partial ordering on operations: an operation can only be applied after all operations that ``happened before'' it have been applied. In particular, this means that the sequence of operations generated at one particular "},{"id":[1000000,66077],"span":3},{"id":[1000000,66080],"value":"r"},{"id":[1000000,154427],"value":"eplica"},{"id":[1000000,66081],"value":" will be applied in the same order at every other "},{"id":[1000000,154437],"value":"replica"},{"id":[1000000,66131],"span":4},{"id":[1000000,66135],"value":". Operations that are concurrent"},{"id":[1000000,66169],"span":1},{"id":[1000000,66170],"value":" "},{"id":[1000000,258143],"value":"("},{"id":[1000000,66171],"value":"i.e."},{"id":[1000000,258144],"value":","},{"id":[1000000,66175],"value":" where there is no causal dependency"},{"id":[1000000,258147],"value":" in either direction"},{"id":[1000000,258146],"value":")"},{"id":[1000000,66211],"span":1},{"id":[1000000,66212],"value":" can be applied in any order.\n\n\\subsubsection{Semantics of "},{"id":[1000000,252351],"value":"G"},{"id":[1000000,66271],"span":1},{"id":[1000000,66272],"value":"enerating "},{"id":[1000000,252353],"value":"O"},{"id":[1000000,66282],"span":1},{"id":[1000000,66283],"value":"perations}"},{"id":[1000000,66167],"span":1},{"id":[1000000,65691],"span":6},{"id":[1000000,65701],"span":2},{"id":[1000000,65697],"span":2},{"id":[1000000,65573],"span":1},{"id":[1000000,65477],"span":5},{"id":[1000000,65215],"span":6},{"id":[1000000,65014],"span":13},{"id":[1000000,64806],"span":2},{"id":[1000000,64686],"value":"\n"},{"id":[1000000,26360],"value":"\n"},{"id":[1000000,27275],"span":1},{"id":[1000000,26361],"value":"\\begin{figure*}"},{"id":[1000000,29096],"value":"\n\\centering"},{"id":[1000000,29107],"span":1},{"id":[1000000,28773],"value":"\n"},{"id":[1000000,64797],"span":1},{"id":[1000000,28774],"value":"\\"},{"id":[1000000,64288],"value":"begin{prooftree}"},{"id":[1000000,66379],"value":"\n"},{"id":[1000000,66382],"value":"\\AxiomC{"},{"id":[1000000,66433],"value":"$"},{"id":[1000000,66390],"value":"A_p,\\, \\mathit{expr} \\evalto \\mathit{cur}"},{"id":[1000000,66432],"value":"$"},{"id":[1000000,66431],"value":"}"},{"id":[1000000,66434],"value":"\n\\AxiomC{$\\mathit{val}: \\mathrm{VAL}"},{"id":[1000000,66470],"span":1},{"id":[1000000,66630],"span":2},{"id":[1000000,66471],"span":6},{"id":[1000000,66632],"span":2},{"id":[1000000,66477],"span":8},{"id":[1000000,66544],"span":5},{"id":[1000000,66485],"span":7},{"id":[1000000,66564],"span":1},{"id":[1000000,66626],"span":4},{"id":[1000000,66565],"span":1},{"id":[1000000,66585],"span":6},{"id":[1000000,66620],"span":2},{"id":[1000000,66591],"span":15},{"id":[1000000,66670],"span":4},{"id":[1000000,66566],"span":4},{"id":[1000000,66492],"span":1},{"id":[1000000,66559],"span":5},{"id":[1000000,66528],"span":7},{"id":[1000000,66493],"span":7},{"id":[1000000,66551],"span":1},{"id":[1000000,66570],"span":1},{"id":[1000000,66522],"span":1},{"id":[1000000,66535],"span":1},{"id":[1000000,66634],"span":2},{"id":[1000000,66536],"span":6},{"id":[1000000,66636],"span":28},{"id":[1000000,66674],"span":1},{"id":[1000000,66664],"span":2},{"id":[1000000,66675],"span":6},{"id":[1000000,66666],"span":2},{"id":[1000000,66681],"span":6},{"id":[1000000,66668],"span":2},{"id":[1000000,66542],"span":2},{"id":[1000000,66500],"span":1},{"id":[1000000,66501],"value":"$}"},{"id":[1000000,66687],"value":"\n\\AxiomC{$A_p,\\, \\mathsf{makeOp}(\\mathit{cur}"},{"id":[1000000,66734],"value":", \\mathsf{assign}(\\mathit{val})) \\evalto A_p'$}"},{"id":[1000000,66874],"value":"\n\\LeftLabel{\\textsc{"},{"id":[1000000,93018],"value":"Make-"},{"id":[1000000,66894],"value":"Assign}}"},{"id":[1000000,66732],"span":1},{"id":[1000000,66503],"value":"\n\\"},{"id":[1000000,66782],"value":"Tr"},{"id":[1000000,66505],"span":1},{"id":[1000000,66506],"value":"inaryInfC{"},{"id":[1000000,66786],"value":"$A_p,\\, \\mathit{expr} "},{"id":[1000000,66916],"value":"\\,"},{"id":[1000000,66812],"span":1},{"id":[1000000,66825],"span":7},{"id":[1000000,66836],"span":1},{"id":[1000000,66840],"value":"\\text{"},{"id":[1000000,66911],"value":" "},{"id":[1000000,66837],"value":":="},{"id":[1000000,66912],"value":" "},{"id":[1000000,66846],"span":1},{"id":[1000000,66839],"value":"}"},{"id":[1000000,66914],"value":"\\,"},{"id":[1000000,66847],"value":" \\mathit{val} \\evalto A_p'$"},{"id":[1000000,66832],"span":2},{"id":[1000000,66813],"span":6},{"id":[1000000,66808],"span":2},{"id":[1000000,66518],"span":2},{"id":[1000000,66520],"value":"}"},{"id":[1000000,66516],"span":1},{"id":[1000000,66380],"span":1},{"id":[1000000,64304],"value":"\n"},{"id":[1000000,64798],"span":1},{"id":[1000000,64305],"value":"\\end{prooftree}"},{"id":[1000000,66918],"value":"\n\n\\begin{prooftree}"},{"id":[1000000,66953],"value":"\n\\AxiomC{$A_p,\\, \\mathit{expr} \\evalto \\mathit{cur}$}\n\\AxiomC{$\\mathit{val}: \\mathrm{VAL}$}\n\\AxiomC{$A_p,\\, \\mathsf{makeOp}(\\mathit{cur}, \\mathsf{insert}(\\mathit{val})) \\evalto "},{"id":[1000000,67130],"span":1},{"id":[1000000,67131],"value":"A"},{"id":[1000000,67134],"value":"_p'$}"},{"id":[1000000,67140],"value":"\n\\LeftLabel{\\textsc{"},{"id":[1000000,93013],"value":"Make-"},{"id":[1000000,67160],"value":"Insert}}\n\\TrinaryInfC{$A"},{"id":[1000000,67186],"value":"_p,\\, \\mathit{expr}.\\mathsf{insert"},{"id":[1000000,257971],"value":"After"},{"id":[1000000,67220],"value":"}(\\mathit{val}) \\evalto A_p'$}"},{"id":[1000000,67184],"span":1},{"id":[1000000,67132],"span":1},{"id":[1000000,66937],"value":"\n\\end{prooftree}"},{"id":[1000000,67250],"value":"\n\n\\begin{prooftree}\n\\AxiomC{$A_p,\\, \\mathit{expr} \\evalto \\mathit{cur}$}\n\\AxiomC{$A_p,\\, \\mathsf{makeOp}(\\mathit{cur}, \\mathsf{delete}) \\evalto A_p'$}\n\\LeftLabel{\\textsc{"},{"id":[1000000,93008],"value":"Make-"},{"id":[1000000,67420],"value":"Delete}}\n\\BinaryInfC{$A_p,\\, \\mathit{expr}.\\mathsf{delete"},{"id":[1000000,67479],"value":"} \\evalto A_p'$}\n\\end{prooftree}\n\n\\begin{prooftree}"},{"id":[1000000,67546],"value":"\n\\AxiomC{$\\mathit{ctr} = \\mathrm{max}(\\{0\\} \\,\\cup\\, \\{ c_i \\mid (c_i, p_i) \\in A_p(\\mathsf{ops}) \\}"},{"id":[1000000,67650],"value":"$}\n"},{"id":[1000000,67653],"span":36},{"id":[1000000,67693],"span":4},{"id":[1000000,67689],"span":4},{"id":[1000000,67697],"span":3},{"id":[1000000,67700],"value":"\\AxiomC{$A_p,\\, \\math"},{"id":[1000000,67733],"value":"sf{apply}(\\mathsf{op}("},{"id":[1000000,67955],"value":"("},{"id":[1000000,67755],"value":"\\mathit{"},{"id":[1000000,67944],"value":"ctr"},{"id":[1000000,67763],"span":2},{"id":[1000000,67765],"value":"}"},{"id":[1000000,67947],"value":" + 1, p)"},{"id":[1000000,67766],"value":", A_p(\\"},{"id":[1000000,67940],"span":1},{"id":[1000000,67773],"value":"mathsf{ops}),"},{"id":[1000000,67956],"value":"\n   "},{"id":[1000000,67786],"value":" \\mathit{cur}, \\mathit{mut}"},{"id":[1000000,68024],"value":")"},{"id":[1000000,67813],"value":") \\evalto A_p'$}\n\\LeftLabel{\\textsc{Make-Op}}\n\\"},{"id":[1000000,68009],"value":"B"},{"id":[1000000,67860],"span":2},{"id":[1000000,67862],"value":"inaryInfC{$A_p,\\, \\mathsf{makeOp}(\\mathit{cur}, \\mathit{mut}) \\evalto "},{"id":[1000000,67932],"span":1},{"id":[1000000,67933],"value":"A_p'$}"},{"id":[1000000,67721],"span":6},{"id":[1000000,67646],"span":2},{"id":[1000000,67530],"value":"\n\\end{prooftree}"},{"id":[1000000,67477],"span":1},{"id":[1000000,28775],"span":8},{"id":[1000000,29115],"span":1},{"id":[1000000,35110],"span":20},{"id":[1000000,35011],"span":13},{"id":[1000000,29116],"span":2},{"id":[1000000,34992],"span":14},{"id":[1000000,35007],"span":2},{"id":[1000000,35024],"span":6},{"id":[1000000,35045],"span":12},{"id":[1000000,35030],"span":1},{"id":[1000000,35009],"span":2},{"id":[1000000,35006],"span":1},{"id":[1000000,29118],"span":1},{"id":[1000000,28783],"span":1},{"id":[1000000,29125],"span":2},{"id":[1000000,28784],"span":20},{"id":[1000000,28882],"span":11},{"id":[1000000,35031],"span":14},{"id":[1000000,28893],"span":3},{"id":[1000000,28901],"span":1},{"id":[1000000,28896],"span":5},{"id":[1000000,28902],"span":15},{"id":[1000000,28804],"span":30},{"id":[1000000,28918],"span":2},{"id":[1000000,28834],"span":12},{"id":[1000000,29127],"span":2},{"id":[1000000,28846],"span":1},{"id":[1000000,28973],"span":1},{"id":[1000000,35208],"span":1},{"id":[1000000,28976],"span":1},{"id":[1000000,28974],"span":1},{"id":[1000000,28847],"span":6},{"id":[1000000,28857],"span":3},{"id":[1000000,29042],"span":5},{"id":[1000000,28860],"span":16},{"id":[1000000,29129],"span":2},{"id":[1000000,28876],"span":6},{"id":[1000000,28920],"span":26},{"id":[1000000,35210],"span":1},{"id":[1000000,28946],"span":1},{"id":[1000000,28950],"span":1},{"id":[1000000,28947],"span":2},{"id":[1000000,29021],"span":2},{"id":[1000000,28949],"span":1},{"id":[1000000,28951],"span":6},{"id":[1000000,28959],"span":13},{"id":[1000000,29109],"span":6},{"id":[1000000,29085],"span":3},{"id":[1000000,29047],"span":7},{"id":[1000000,28972],"span":1},{"id":[1000000,28957],"span":1},{"id":[1000000,28853],"span":2},{"id":[1000000,28395],"span":18},{"id":[1000000,28474],"span":13},{"id":[1000000,28623],"span":1},{"id":[1000000,28613],"span":10},{"id":[1000000,28487],"span":1},{"id":[1000000,28624],"span":8},{"id":[1000000,29131],"span":12},{"id":[1000000,28632],"span":3},{"id":[1000000,28430],"span":41},{"id":[1000000,28491],"span":10},{"id":[1000000,28503],"span":1},{"id":[1000000,29143],"span":2},{"id":[1000000,28504],"span":1},{"id":[1000000,29023],"span":1},{"id":[1000000,35206],"span":1},{"id":[1000000,29024],"span":1},{"id":[1000000,28505],"span":33},{"id":[1000000,28577],"span":9},{"id":[1000000,28538],"span":2},{"id":[1000000,29145],"span":2},{"id":[1000000,28540],"span":8},{"id":[1000000,28552],"span":4},{"id":[1000000,28757],"span":3},{"id":[1000000,28556],"span":1},{"id":[1000000,28760],"span":1},{"id":[1000000,28557],"span":19},{"id":[1000000,28586],"span":16},{"id":[1000000,28761],"span":3},{"id":[1000000,28602],"span":1},{"id":[1000000,28764],"span":1},{"id":[1000000,28603],"span":10},{"id":[1000000,28548],"span":2},{"id":[1000000,28501],"span":2},{"id":[1000000,28471],"span":3},{"id":[1000000,28413],"span":2},{"id":[1000000,29009],"span":12},{"id":[1000000,32926],"span":16},{"id":[1000000,29123],"value":"\n"},{"id":[1000000,29490],"span":1},{"id":[1000000,29525],"span":1},{"id":[1000000,29800],"span":16},{"id":[1000000,29526],"span":27},{"id":[1000000,29583],"span":9},{"id":[1000000,35144],"span":1},{"id":[1000000,29592],"span":45},{"id":[1000000,35204],"span":1},{"id":[1000000,29637],"span":24},{"id":[1000000,32535],"span":4},{"id":[1000000,29661],"span":21},{"id":[1000000,32555],"span":2},{"id":[1000000,29682],"span":7},{"id":[1000000,32557],"span":2},{"id":[1000000,29689],"span":20},{"id":[1000000,32541],"span":1},{"id":[1000000,32544],"span":1},{"id":[1000000,32542],"span":1},{"id":[1000000,29709],"span":4},{"id":[1000000,32539],"span":1},{"id":[1000000,32546],"span":1},{"id":[1000000,32540],"span":1},{"id":[1000000,29713],"span":13},{"id":[1000000,31192],"span":5},{"id":[1000000,29726],"span":33},{"id":[1000000,29816],"span":16},{"id":[1000000,29759],"span":1},{"id":[1000000,29833],"span":1},{"id":[1000000,31385],"span":17},{"id":[1000000,29834],"span":1},{"id":[1000000,30436],"span":15},{"id":[1000000,30463],"span":1},{"id":[1000000,30451],"span":11},{"id":[1000000,29835],"span":5},{"id":[1000000,29842],"span":11},{"id":[1000000,29840],"span":1},{"id":[1000000,29760],"span":1},{"id":[1000000,29491],"span":17},{"id":[1000000,29124],"span":1},{"id":[1000000,29223],"span":1},{"id":[1000000,29272],"span":9},{"id":[1000000,68014],"span":1},{"id":[1000000,29281],"span":10},{"id":[1000000,68017],"span":2},{"id":[1000000,29291],"span":3},{"id":[1000000,68020],"span":1},{"id":[1000000,29294],"span":4},{"id":[1000000,68022],"span":2},{"id":[1000000,29298],"span":48},{"id":[1000000,35202],"span":1},{"id":[1000000,29346],"span":15},{"id":[1000000,29363],"span":9},{"id":[1000000,32527],"span":4},{"id":[1000000,29372],"span":5},{"id":[1000000,29379],"span":16},{"id":[1000000,32551],"span":2},{"id":[1000000,29395],"span":7},{"id":[1000000,32553],"span":2},{"id":[1000000,29402],"span":20},{"id":[1000000,32533],"span":1},{"id":[1000000,32550],"span":1},{"id":[1000000,32534],"span":1},{"id":[1000000,29422],"span":4},{"id":[1000000,32531],"span":1},{"id":[1000000,32548],"span":1},{"id":[1000000,32532],"span":1},{"id":[1000000,29426],"span":25},{"id":[1000000,31343],"span":15},{"id":[1000000,31821],"span":1},{"id":[1000000,31822],"value":"\n\\begin{prooftree}\n\\AxiomC{$A_p,\\"},{"id":[1000000,35200],"value":","},{"id":[1000000,31855],"span":1},{"id":[1000000,31856],"value":" \\mathit{"},{"id":[1000000,33798],"value":"op"},{"id":[1000000,31865],"span":3},{"id":[1000000,31868],"value":"} \\evalto A_p'"},{"id":[1000000,31882],"span":15},{"id":[1000000,31897],"value":"$}"},{"id":[1000000,33330],"span":10},{"id":[1000000,34018],"span":14},{"id":[1000000,33850],"span":5},{"id":[1000000,33857],"span":30},{"id":[1000000,33891],"span":38},{"id":[1000000,33887],"span":2},{"id":[1000000,33855],"span":1},{"id":[1000000,33340],"span":35},{"id":[1000000,31899],"value":"\n\\LeftLabel{\\textsc{Apply-Local}}\n\\"},{"id":[1000000,68090],"value":"U"},{"id":[1000000,68091],"span":1},{"id":[1000000,33328],"span":2},{"id":[1000000,31934],"span":1},{"id":[1000000,31935],"value":"naryInfC{$A_p,\\"},{"id":[1000000,35198],"value":","},{"id":[1000000,31950],"span":1},{"id":[1000000,31951],"value":" "},{"id":[1000000,33779],"value":"\\mathsf{apply}("},{"id":[1000000,33777],"span":1},{"id":[1000000,31952],"value":"\\mathit{"},{"id":[1000000,33775],"value":"op"},{"id":[1000000,31960],"span":3},{"id":[1000000,31963],"value":"}"},{"id":[1000000,33794],"value":")"},{"id":[1000000,31964],"value":" \\evalto A_p"},{"id":[1000000,33375],"span":1},{"id":[1000000,31976],"value":"'"},{"id":[1000000,31981],"value":"[\\,\n    \\mathsf{queue} "},{"id":[1000000,32559],"value":"\\,"},{"id":[1000000,32004],"value":"\\mapsto"},{"id":[1000000,32561],"value":"\\,"},{"id":[1000000,32011],"value":" "},{"id":[1000000,68057],"value":"A_p'("},{"id":[1000000,34000],"value":"\\math"},{"id":[1000000,68055],"value":"sf"},{"id":[1000000,34009],"span":2},{"id":[1000000,34011],"value":"{"},{"id":[1000000,34005],"span":2},{"id":[1000000,33999],"value":"q"},{"id":[1000000,34012],"value":"ueue}"},{"id":[1000000,68062],"value":") \\,\\cup\\, \\{\\mathit{op}\\}"},{"id":[1000000,32012],"span":3},{"id":[1000000,33376],"span":1},{"id":[1000000,32015],"span":18},{"id":[1000000,32130],"span":1},{"id":[1000000,32574],"span":1},{"id":[1000000,32131],"span":1},{"id":[1000000,32033],"span":4},{"id":[1000000,32132],"span":1},{"id":[1000000,32572],"span":1},{"id":[1000000,32133],"span":1},{"id":[1000000,32037],"span":7},{"id":[1000000,33377],"span":1},{"id":[1000000,32044],"span":31},{"id":[1000000,32075],"value":",\\"},{"id":[1000000,32079],"value":";\n    \\mathsf{ops} "},{"id":[1000000,32563],"value":"\\,"},{"id":[1000000,32098],"value":"\\mapsto"},{"id":[1000000,32565],"value":"\\,"},{"id":[1000000,32105],"value":" "},{"id":[1000000,32106],"span":1},{"id":[1000000,32107],"value":"A_p"},{"id":[1000000,33378],"span":1},{"id":[1000000,32110],"value":"'(\\mathsf{ops}) "},{"id":[1000000,32511],"value":"\\"},{"id":[1000000,32570],"value":","},{"id":[1000000,32512],"span":1},{"id":[1000000,32126],"value":"\\cup"},{"id":[1000000,32513],"value":"\\"},{"id":[1000000,32568],"value":","},{"id":[1000000,32514],"span":1},{"id":[1000000,32134],"value":" \\{\\mathit{op"},{"id":[1000000,68050],"value":".id"},{"id":[1000000,32147],"value":"}"},{"id":[1000000,68026],"span":12},{"id":[1000000,32148],"value":"\\}\\,]$}\n\\end{prooftree}"},{"id":[1000000,32077],"span":1},{"id":[1000000,31977],"span":2},{"id":[1000000,29761],"span":1},{"id":[1000000,30478],"span":12},{"id":[1000000,30615],"span":9},{"id":[1000000,30631],"span":2},{"id":[1000000,30624],"span":4},{"id":[1000000,30492],"span":2},{"id":[1000000,30524],"span":23},{"id":[1000000,30554],"span":1},{"id":[1000000,30547],"span":6},{"id":[1000000,30555],"span":60},{"id":[1000000,30494],"span":30},{"id":[1000000,30490],"span":1},{"id":[1000000,29881],"span":14},{"id":[1000000,29915],"value":"\n\n\\begin{prooftree}"},{"id":[1000000,29950],"value":"\n\\AxiomC{$"},{"id":[1000000,29960],"span":6},{"id":[1000000,29972],"span":10},{"id":[1000000,29982],"value":"\\mathit{"},{"id":[1000000,29994],"value":"op}"},{"id":[1000000,29997],"span":1},{"id":[1000000,29998],"value":" \\in A_p(\\mathsf{recv})$}"},{"id":[1000000,68208],"value":"\n\\AxiomC{$\\mathit{op.id} \\not"},{"id":[1000000,68237],"span":1},{"id":[1000000,68238],"value":"in "},{"id":[1000000,68242],"value":"A_p"},{"id":[1000000,68247],"value":"(\\mathsf{ops})$}"},{"id":[1000000,68245],"span":1},{"id":[1000000,30023],"value":"\n\\AxiomC{$"},{"id":[1000000,30035],"value":"\\mathit{"},{"id":[1000000,68205],"value":"op."},{"id":[1000000,30043],"value":"deps} \\subseteq A_p(\\mathsf{ops})$}\n\\AxiomC{$A_p,"},{"id":[1000000,30275],"value":"\\"},{"id":[1000000,35196],"value":","},{"id":[1000000,30276],"span":1},{"id":[1000000,30092],"value":" \\mathit{op} \\evalto A_p'$}\n\\LeftLabel{\\textsc{Apply"},{"id":[1000000,31626],"value":"-Remote"},{"id":[1000000,31512],"span":2},{"id":[1000000,30144],"value":"}}\n\\"},{"id":[1000000,68266],"value":"Quater"},{"id":[1000000,30148],"span":1},{"id":[1000000,30161],"span":2},{"id":[1000000,30163],"value":"naryInfC{$A_p,\\"},{"id":[1000000,35194],"value":","},{"id":[1000000,30178],"span":1},{"id":[1000000,30179],"value":" \\mathsf{yield} \\evalto"},{"id":[1000000,32523],"value":"\n   "},{"id":[1000000,30202],"value":" A_p'[\\,\\mathsf{ops} "},{"id":[1000000,32579],"value":"\\,"},{"id":[1000000,30223],"value":"\\mapsto"},{"id":[1000000,32581],"value":"\\,"},{"id":[1000000,30230],"value":" A_p'(\\mathsf{ops}) "},{"id":[1000000,32519],"value":"\\"},{"id":[1000000,32576],"value":","},{"id":[1000000,32520],"span":1},{"id":[1000000,32515],"span":2},{"id":[1000000,30250],"value":"\\cup"},{"id":[1000000,32521],"value":"\\"},{"id":[1000000,32578],"value":","},{"id":[1000000,32522],"span":1},{"id":[1000000,30254],"value":" \\{"},{"id":[1000000,30266],"value":"\\mathit{"},{"id":[1000000,30257],"value":"op"},{"id":[1000000,68272],"value":".id"},{"id":[1000000,30274],"value":"}"},{"id":[1000000,30259],"value":"\\}\\,]$}"},{"id":[1000000,30149],"span":6},{"id":[1000000,30033],"span":1},{"id":[1000000,29990],"span":2},{"id":[1000000,29966],"span":3},{"id":[1000000,29934],"value":"\n\\end{prooftree}"},{"id":[1000000,68276],"value":"\n\n\\begin{prooftree}\n\\AxiomC{}\n\\LeftLabel{\\textsc{Send}}\n\\UnaryInfC{$A_p,\\, \\mathsf{yield} \\evalto\n    A_p[\\,\\mathsf{send} \\,\\mapsto\\, A_p(\\mathsf{send}) \\,\\cup\\, "},{"id":[1000000,68440],"value":"A_p(\\mathsf{queue})\\,]$}\n\\end{prooftree}\n\n\\begin{prooftree}\n\\AxiomC{$"},{"id":[1000000,68515],"value":"q: \\mathrm{"},{"id":[1000000,154448],"value":"Replica"},{"id":[1000000,68526],"span":4},{"id":[1000000,68530],"value":"ID}$}\n\\LeftLabel{\\textsc{Recv}}\n\\UnaryInfC{$A_p,\\, \\mathsf{yield} \\evalto\n    A_p[\\,\\mathsf{recv} \\,\\mapsto\\, A_p(\\mathsf{recv}) \\,\\cup\\, A_q(\\mathsf{send})\\,]$}\n\\"},{"id":[1000000,68703],"value":"end{prooftree}"},{"id":[1000000,69186],"value":"\n\n\\begin{prooftree}\n\\AxiomC{$A_p,\\, \\mathsf{yield} \\evalto A_p'$}\n\\AxiomC{$A_p"},{"id":[1000000,69269],"value":"'"},{"id":[1000000,69264],"value":",\\, \\"},{"id":[1000000,69270],"value":"mathsf{yield} \\evalto A_p''$}\n\\LeftLabel{\\textsc{Yield}}\n\\BinaryInfC{$A_p,\\, \\mathsf{yield} \\evalto A_p''$}\n\\end{prooftree}"},{"id":[1000000,68693],"span":5},{"id":[1000000,68509],"span":3},{"id":[1000000,68438],"span":1},{"id":[1000000,31457],"span":19},{"id":[1000000,31553],"span":45},{"id":[1000000,31601],"span":1},{"id":[1000000,31598],"span":3},{"id":[1000000,31602],"span":10},{"id":[1000000,31615],"span":11},{"id":[1000000,31633],"span":22},{"id":[1000000,31492],"span":2},{"id":[1000000,31614],"span":1},{"id":[1000000,31494],"span":18},{"id":[1000000,31516],"span":26},{"id":[1000000,31550],"span":3},{"id":[1000000,31655],"span":28},{"id":[1000000,31685],"span":136},{"id":[1000000,31683],"span":1},{"id":[1000000,31542],"span":4},{"id":[1000000,31476],"span":16},{"id":[1000000,30277],"value":"\n\\caption{Rules for "},{"id":[1000000,69172],"value":"generating"},{"id":[1000000,30309],"span":18},{"id":[1000000,30327],"value":", send"},{"id":[1000000,30339],"value":"ing"},{"id":[1000000,34048],"value":","},{"id":[1000000,30342],"span":4},{"id":[1000000,30346],"value":" "},{"id":[1000000,69182],"value":"and "},{"id":[1000000,30347],"value":"receiving"},{"id":[1000000,34049],"span":14},{"id":[1000000,30356],"value":" operations"},{"id":[1000000,154774],"value":"."},{"id":[1000000,30367],"value":"}\n\\label{fig:send-recv}\n\\end{figure*}"},{"id":[1000000,66293],"value":"\n\nThe "},{"id":[1000000,66299],"span":7},{"id":[1000000,66306],"value":"evaluation rules for commands are given in Figure~\\ref{fig:send-recv}."},{"id":[1000000,69393],"value":" The \\textsc{"},{"id":[1000000,92993],"value":"Make-"},{"id":[1000000,69406],"value":"Assign}, \\textsc{"},{"id":[1000000,92998],"value":"Make-"},{"id":[1000000,69423],"value":"Insert} and \\textsc{"},{"id":[1000000,93003],"value":"Make-"},{"id":[1000000,69443],"value":"Delete} rules "},{"id":[1000000,69467],"value":"define how these respective commands mutate the document: all three delegate "},{"id":[1000000,69552],"value":"to the \\textsc{Make-Op} rule "},{"id":[1000000,69599],"value":"to"},{"id":[1000000,69581],"span":3},{"id":[1000000,69584],"value":" generat"},{"id":[1000000,69605],"value":"e and apply the operation. \\textsc{Make-Op} "},{"id":[1000000,69673],"value":"generates a new Lamport timestamp by choosing a counter value that is 1 greater than any existing counter in $A_p(\\mathsf{ops})$"},{"id":[1000000,69806],"value":","},{"id":[1000000,69801],"value":" the "},{"id":[1000000,69807],"value":"set of all operation IDs that have been applied to "},{"id":[1000000,154995],"value":"replica $p$"},{"id":[1000000,69858],"span":12},{"id":[1000000,69870],"value":".\n\n\\textsc{Make-Op} constructs an \\textsf{op"},{"id":[1000000,69916],"value":"()"},{"id":[1000000,69914],"value":"} "},{"id":[1000000,69918],"value":"tuple of the form described above, and delegates to the \\textsc{Apply-Local} rule to process the operation. \\textsc{Apply-Local} does three things: it evaluates the operation to produce a modified local state $A_p'$, it adds the operation to the queue of "},{"id":[1000000,70181],"value":"generated operations $A_p(\\mathsf{queue})$, and it adds "},{"id":[1000000,258207],"value":"the"},{"id":[1000000,258201],"span":3},{"id":[1000000,70237],"span":13},{"id":[1000000,70250],"value":" ID to the set of processed operations $A_p(\\mathsf{ops})$.\n"},{"id":[1000000,152629],"value":"\nThe \\textsf{yield} command, inspired by Burckhardt et al.~\\cite{Burckhardt:2012jy}, performs network communication: sending and receiving operations to and from other "},{"id":[1000000,154460],"value":"replic"},{"id":[1000000,154468],"value":"as"},{"id":[1000000,154466],"span":1},{"id":[1000000,152797],"span":5},{"id":[1000000,152802],"value":", and applying operations from remote "},{"id":[1000000,152840],"span":3},{"id":[1000000,152843],"value":"r"},{"id":[1000000,154473],"value":"eplica"},{"id":[1000000,152844],"value":"s."},{"id":[1000000,152847],"value":" "},{"id":[1000000,70310],"span":1},{"id":[1000000,70311],"value":"The "},{"id":[1000000,70315],"span":10},{"id":[1000000,70325],"value":"rules "},{"id":[1000000,70331],"span":29},{"id":[1000000,70362],"span":2},{"id":[1000000,70364],"value":"\\textsc{Apply-Remote}, \\textsc{Send}, \\textsc{Recv} and \\textsc{Yield} define the semantics of "},{"id":[1000000,70459],"span":4},{"id":[1000000,70463],"value":"\\textsf{yield}"},{"id":[1000000,70477],"span":8},{"id":[1000000,70485],"value":". "},{"id":[1000000,70515],"value":"Since any of these rules can be used to evaluate \\textsf{yield}, the"},{"id":[1000000,180692],"value":"ir effect"},{"id":[1000000,70583],"span":10},{"id":[1000000,70593],"value":" is nondeterministic, which models the asynchronicity of "},{"id":[1000000,70652],"value":"the network"},{"id":[1000000,70663],"span":13},{"id":[1000000,154482],"span":6},{"id":[1000000,70676],"span":1},{"id":[1000000,70677],"value":": a "},{"id":[1000000,70688],"value":"m"},{"id":[1000000,70681],"span":1},{"id":[1000000,70682],"value":"essag"},{"id":[1000000,70689],"value":"e sent by one "},{"id":[1000000,70703],"span":3},{"id":[1000000,70706],"value":"r"},{"id":[1000000,154491],"value":"eplica"},{"id":[1000000,70707],"value":" arrives at another "},{"id":[1000000,70727],"span":3},{"id":[1000000,70730],"value":"r"},{"id":[1000000,154500],"value":"eplica"},{"id":[1000000,70731],"value":" "},{"id":[1000000,70752],"value":"at some arbitrarily later point in time"},{"id":[1000000,70792],"value":", and there is no "},{"id":[1000000,70843],"value":"mes"},{"id":[1000000,259732],"value":"s"},{"id":[1000000,70846],"value":"age "},{"id":[1000000,70810],"value":"ordering guarantee in the network"},{"id":[1000000,70791],"value":"."},{"id":[1000000,70850],"value":"\n\n"},{"id":[1000000,70866],"value":"The "},{"id":[1000000,70852],"value":"\\textsc{Send} "},{"id":[1000000,70870],"value":"rule takes any operations that were placed in"},{"id":[1000000,70921],"value":" $A_p(\\mathsf{queue})$ by \\textsc{Apply-Local} and adds them to a send buffer $A_p(\\mathsf{send})$. Correspondingly, the \\textsc{Recv} rule takes operations in the send buffer of "},{"id":[1000000,71100],"span":3},{"id":[1000000,71103],"value":"r"},{"id":[1000000,154509],"value":"eplica"},{"id":[1000000,71104],"value":" $q$ and adds them to the receive buffer "},{"id":[1000000,71147],"value":"$A_p(\\"},{"id":[1000000,71345],"value":"math"},{"id":[1000000,71153],"span":4},{"id":[1000000,71157],"value":"sf{recv})$ of "},{"id":[1000000,71171],"span":3},{"id":[1000000,71174],"value":"r"},{"id":[1000000,154518],"value":"eplica"},{"id":[1000000,71175],"value":" $p$. This is the only rule that involves more than one "},{"id":[1000000,71231],"span":3},{"id":[1000000,71234],"value":"r"},{"id":[1000000,154527],"value":"eplica"},{"id":[1000000,71235],"value":", and it models all network communication.\n\nOnce an operation "},{"id":[1000000,71299],"value":"appears in the receive buffer $A_p(\\"},{"id":[1000000,71353],"value":"math"},{"id":[1000000,71357],"span":1},{"id":[1000000,71335],"span":4},{"id":[1000000,71339],"value":"sf"},{"id":[1000000,71359],"value":"{recv})$, the rule \\textsc{Apply-Remote} may apply. Under the precondition"},{"id":[1000000,71483],"value":"s"},{"id":[1000000,71433],"value":" that the operation has not already been processed"},{"id":[1000000,71484],"value":" and that its causal dependencies "},{"id":[1000000,71524],"value":"are satis"},{"id":[1000000,71533],"span":1},{"id":[1000000,71534],"value":"fied, \\textsc{Apply-Remote} "},{"id":[1000000,258270],"value":"applies"},{"id":[1000000,71562],"span":9},{"id":[1000000,71571],"value":" the operation in the same "},{"id":[1000000,71600],"value":"way as \\textsc{Apply-Local}, and adds "},{"id":[1000000,258223],"value":"its"},{"id":[1000000,71638],"span":3},{"id":[1000000,71641],"value":" "},{"id":[1000000,71642],"span":10},{"id":[1000000,71652],"value":"ID to the set of processed operations $A_p(\\mathsf{ops})$.\n\nThe actual document modifications are performed by "},{"id":[1000000,258253],"value":"applying"},{"id":[1000000,71763],"span":8},{"id":[1000000,71777],"span":2},{"id":[1000000,71779],"value":" the operations, which we discuss "},{"id":[1000000,224768],"value":"next"},{"id":[1000000,71813],"span":9},{"id":[1000000,71832],"span":1},{"id":[1000000,71822],"span":9},{"id":[1000000,71831],"value":"."},{"id":[1000000,71833],"value":"\n\n\\subsection{Applying "},{"id":[1000000,252357],"value":"O"},{"id":[1000000,252354],"span":1},{"id":[1000000,71856],"span":1},{"id":[1000000,71857],"value":"perations}"},{"id":[1000000,71873],"value":"\n\n"},{"id":[1000000,71875],"span":8},{"id":[1000000,71883],"value":"\\begin{"},{"id":[1000000,84717],"value":"sideways"},{"id":[1000000,71890],"value":"figure"},{"id":[1000000,84861],"value":"*"},{"id":[1000000,71896],"span":1},{"id":[1000000,71897],"value":"}"},{"id":[1000000,72026],"value":"\n\\begin{prooftree}"},{"id":[1000000,72060],"value":"\n\\AxiomC{$"},{"id":[1000000,72072],"span":21},{"id":[1000000,72093],"value":"\\mathit{ctx}"},{"id":[1000000,82281],"value":",\\, k_1 "},{"id":[1000000,82291],"value":"\\evalto \\mathit{child}"},{"id":[1000000,82289],"span":1},{"id":[1000000,72105],"span":1},{"id":[1000000,72106],"value":"$}\n\\AxiomC{$"},{"id":[1000000,82324],"span":19},{"id":[1000000,72118],"value":"\\mathit{c"},{"id":[1000000,82320],"value":"hild"},{"id":[1000000,72127],"span":2},{"id":[1000000,72129],"value":"}"},{"id":[1000000,72130],"span":5},{"id":[1000000,72135],"value":",\\, \\mathsf{op}(\\mathit{id}, \\mathit{deps},"},{"id":[1000000,82343],"span":3},{"id":[1000000,72180],"value":"\n    \\mathsf{cursor}(\\langle k_2, \\dots, k_{n-1} \\rangle,\\, k_n), \\mathit{mut}) "},{"id":[1000000,82375],"span":7},{"id":[1000000,72260],"value":"\\evalto \\mathit{"},{"id":[1000000,82351],"value":"child"},{"id":[1000000,72276],"span":5},{"id":[1000000,72281],"value":"}"},{"id":[1000000,82356],"value":"'"},{"id":[1000000,85109],"value":"$}"},{"id":[1000000,82357],"span":18},{"id":[1000000,72282],"span":2},{"id":[1000000,82389],"value":"\n\\AxiomC{$\\mathit{ctx},\\, \\mathsf{addId}(k_1, \\mathit{id}"},{"id":[1000000,203914],"value":", \\mathit{mut}"},{"id":[1000000,82446],"value":") \\evalto \\mathit{ctx}'$}"},{"id":[1000000,72284],"value":"\n\\LeftLabel{\\textsc{Descend}}\n\\"},{"id":[1000000,82472],"value":"Tr"},{"id":[1000000,72315],"span":1},{"id":[1000000,72316],"value":"inaryInfC{$"},{"id":[1000000,72329],"value":"\\mathit{ctx},\\, \\mathsf{op}(\\mathit{id}, \\mathit{deps},\n    \\mathsf{cursor}(\\langle k_1, k_2, \\dots, k_{n-1} \\rangle,\\, k_n), \\mathit{mut}) \\evalto\n    \\mathit{ctx}"},{"id":[1000000,82474],"value":"'"},{"id":[1000000,82486],"value":" "},{"id":[1000000,72493],"value":"[\\, k_1 "},{"id":[1000000,72528],"value":"\\"},{"id":[1000000,72527],"value":","},{"id":[1000000,72501],"value":"\\mapsto"},{"id":[1000000,72529],"value":"\\,"},{"id":[1000000,72508],"value":" \\mathit{"},{"id":[1000000,82480],"value":"child"},{"id":[1000000,72517],"span":5},{"id":[1000000,72522],"value":"}"},{"id":[1000000,82485],"value":"'"},{"id":[1000000,72523],"value":" \\,]"},{"id":[1000000,72327],"value":"$}"},{"id":[1000000,72178],"span":1},{"id":[1000000,72070],"span":1},{"id":[1000000,72044],"value":"\n\\end{prooftree}"},{"id":[1000000,155006],"value":"\\vspace{6pt}"},{"id":[1000000,72531],"value":"\n\n"},{"id":[1000000,82487],"value":"\\begin{center}"},{"id":[1000000,82514],"value":"\n\\AxiomC{$k \\in \\mathrm{dom}(\\mathit{ctx})$}\n\\LeftLabel{"},{"id":[1000000,82576],"span":1},{"id":[1000000,82577],"value":"\\textsc{Child"},{"id":[1000000,83244],"value":"-Get"},{"id":[1000000,82590],"value":"}"},{"id":[1000000,82591],"span":3},{"id":[1000000,82594],"value":"}\n\\UnaryInfC{$\\mathit{ctx},\\, "},{"id":[1000000,82626],"value":"k \\evalto \\mathit{ctx}(k)$}\n\\DisplayProof\\h"},{"id":[1000000,82677],"value":"space{3em}\n%\n\\AxiomC{$\\mathsf{mapT}(k) \\notin \\math"},{"id":[1000000,82730],"value":"rm{dom}(\\mathit{ctx})$}\n\\LeftLabel{"},{"id":[1000000,82765],"span":1},{"id":[1000000,82766],"value":"\\textsc{Child"},{"id":[1000000,83251],"value":"-Map"},{"id":[1000000,82781],"value":"}"},{"id":[1000000,82782],"span":3},{"id":[1000000,82785],"value":"}\n\\UnaryInfC{$\\mathit{ctx},\\, \\mathsf{mapT}(k) "},{"id":[1000000,82834],"value":"\\evalto \\{\\}$}\n\\DisplayProof\\"},{"id":[1000000,87078],"value":"hspace{3em}"},{"id":[1000000,85213],"span":28},{"id":[1000000,85146],"span":11},{"id":[1000000,82863],"span":13},{"id":[1000000,82882],"span":2},{"id":[1000000,82876],"span":3},{"id":[1000000,82832],"span":1},{"id":[1000000,82779],"span":1},{"id":[1000000,82728],"span":1},{"id":[1000000,82669],"span":4},{"id":[1000000,82624],"span":1},{"id":[1000000,82570],"span":3},{"id":[1000000,82501],"span":13},{"id":[1000000,82884],"value":"\n"},{"id":[1000000,87049],"value":"%"},{"id":[1000000,85170],"span":1},{"id":[1000000,82885],"span":1},{"id":[1000000,85187],"span":14},{"id":[1000000,85186],"value":"\n"},{"id":[1000000,82886],"span":15},{"id":[1000000,82901],"value":"\\AxiomC{$"},{"id":[1000000,83147],"value":"\\mathsf{listT}("},{"id":[1000000,82910],"value":"k"},{"id":[1000000,83162],"value":")"},{"id":[1000000,82911],"value":" \\notin \\mathrm{dom}(\\mathit{ctx})$}\n\\LeftLabel{"},{"id":[1000000,82959],"span":1},{"id":[1000000,82960],"value":"\\textsc{Child"},{"id":[1000000,83257],"value":"-List"},{"id":[1000000,82973],"value":"}"},{"id":[1000000,82974],"span":3},{"id":[1000000,82977],"value":"}\n\\UnaryInfC{$\\mathit{ctx},\\, \\mathsf{listT}(k) \\evalto"},{"id":[1000000,83078],"value":"\n   "},{"id":[1000000,83032],"value":" \\{\\,\\mathsf{next}(\\mathsf{head}) "},{"id":[1000000,83074],"value":"\\,"},{"id":[1000000,83066],"value":"\\mapsto"},{"id":[1000000,83076],"value":"\\,"},{"id":[1000000,83073],"value":" "},{"id":[1000000,83082],"value":"\\mathsf{tail} \\,\\}$}\n\\DisplayProof\\"},{"id":[1000000,87100],"value":"proofSkipAmount\n\\end{center}"},{"id":[1000000,155018],"value":"\\vspace{6pt}"},{"id":[1000000,87128],"value":"\n"},{"id":[1000000,83117],"span":11},{"id":[1000000,83128],"value":"\n"},{"id":[1000000,87130],"value":"\\begin{center}"},{"id":[1000000,83129],"span":1},{"id":[1000000,83163],"value":"\n\\AxiomC{$\\mathsf{regT}(k) \\notin \\mathrm{dom}(\\mathit{ctx})$}\n\\LeftLabel{"},{"id":[1000000,83266],"value":"\\textsc{Child-Reg}}\n\\UnaryInfC{$\\mathit{ctx},\\, \\mathsf{regT}(k) \\evalto \\{\\}$}\n\\DisplayProof\\"},{"id":[1000000,87163],"value":"hspace{3em}\n%\n"},{"id":[1000000,87235],"value":"\\"},{"id":[1000000,87177],"value":"AxiomC{$\\mathsf{pres}(k) \\in \\mathrm{dom}(\\mathit{ctx})$}\n"},{"id":[1000000,87236],"value":"\\LeftLabel{"},{"id":[1000000,87263],"value":"$"},{"id":[1000000,87247],"value":"\\textsc{Presence"},{"id":[1000000,87266],"value":"}_1$}\n\\UnaryInfC{$\\mathit{ctx},\\, \\mathsf{pres}(k) \\evalto \\mathit{ctx}(\\mathsf{pres}(k))$}\n\\DisplayProof\\hspace{3em}\n%\n\\AxiomC{$\\mathsf{pres}(k) \\notin \\mathrm{dom}(\\mathit{ctx})$}\n\\LeftLabel{$\\textsc{Presence}_2$}\n\\UnaryInfC{$\\mathit{ctx},\\, \\mathsf{pres}(k) \\evalto "},{"id":[1000000,87539],"value":"\\{\\}$}\n\\DisplayProof\\proofSkipAmount"},{"id":[1000000,87535],"span":2},{"id":[1000000,87264],"span":1},{"id":[1000000,83360],"span":15},{"id":[1000000,83239],"span":1},{"id":[1000000,83237],"span":1},{"id":[1000000,83132],"value":"\n\\"},{"id":[1000000,83388],"value":"end{center}"},{"id":[1000000,155030],"value":"\\vspace{6pt}"},{"id":[1000000,83399],"value":"\n\n\\begin{"},{"id":[1000000,203937],"value":"center"},{"id":[1000000,87581],"span":9},{"id":[1000000,85250],"span":6},{"id":[1000000,83408],"span":9},{"id":[1000000,83417],"value":"}"},{"id":[1000000,204008],"value":"\n\\AxiomC{$\\mathit{mut} \\not= \\mathsf{delete}$}"},{"id":[1000000,83434],"value":"\n\\AxiomC{$k_\\mathit{tag} \\in \\{\\mathsf{mapT}(k), \\mathsf{listT}(k), \\mathsf"},{"id":[1000000,83511],"value":"{regT}(k)\\}$}\n\\AxiomC{$"},{"id":[1000000,87605],"value":"\\mathit{ctx},\\, "},{"id":[1000000,83534],"value":"\\mathsf{pres}(k) \\"},{"id":[1000000,87626],"value":"evalto"},{"id":[1000000,83552],"span":5},{"id":[1000000,83557],"value":" \\math"},{"id":[1000000,87634],"value":"it"},{"id":[1000000,83563],"span":2},{"id":[1000000,83565],"value":"{"},{"id":[1000000,87639],"value":"pres"},{"id":[1000000,83566],"span":3},{"id":[1000000,83569],"value":"}"},{"id":[1000000,83572],"span":14},{"id":[1000000,83586],"value":"$}\n\\LeftLabel{"},{"id":[1000000,204097],"value":"$"},{"id":[1000000,83600],"span":1},{"id":[1000000,83601],"value":"\\textsc{Add-ID"},{"id":[1000000,83617],"value":"}"},{"id":[1000000,204098],"value":"_1$"},{"id":[1000000,83618],"span":3},{"id":[1000000,83621],"value":"}"},{"id":[1000000,83622],"span":152},{"id":[1000000,83615],"span":1},{"id":[1000000,83570],"span":1},{"id":[1000000,83509],"span":1},{"id":[1000000,83418],"span":2},{"id":[1000000,85270],"span":14},{"id":[1000000,85368],"span":4},{"id":[1000000,85284],"span":10},{"id":[1000000,83420],"span":14},{"id":[1000000,83774],"span":1},{"id":[1000000,85294],"span":1},{"id":[1000000,83775],"span":18},{"id":[1000000,83809],"span":31},{"id":[1000000,83842],"span":113},{"id":[1000000,83957],"span":35},{"id":[1000000,83992],"value":"\n\\"},{"id":[1000000,204006],"value":"Tr"},{"id":[1000000,83994],"span":1},{"id":[1000000,83995],"value":"inaryInfC{$\\mathit{ctx"},{"id":[1000000,84019],"value":"},\\, \\math"},{"id":[1000000,84031],"value":"sf{addId}(k_\\mathit{tag}, \\mathit{id}"},{"id":[1000000,203991],"value":", \\mathit{mut}"},{"id":[1000000,84068],"value":") \\evalto\n    \\mathit{ctx}[\\, \\mathsf{pres}(k) \\,\\mapsto\\, "},{"id":[1000000,84127],"span":13},{"id":[1000000,84140],"value":"\\math"},{"id":[1000000,88050],"value":"it"},{"id":[1000000,84145],"span":2},{"id":[1000000,84147],"value":"{pres}"},{"id":[1000000,84153],"span":4},{"id":[1000000,84157],"value":" "},{"id":[1000000,84184],"value":"\\,"},{"id":[1000000,84158],"value":"\\cup"},{"id":[1000000,84186],"value":"\\,"},{"id":[1000000,84162],"value":" \\{\\mathit{id}\\} \\,]$}"},{"id":[1000000,203958],"value":"\n\\Displa"},{"id":[1000000,203970],"value":"yProof\\hspace{3em}\n%\n"},{"id":[1000000,204054],"value":"\\AxiomC{$\\mathit{mut} = \\mathsf{delete}$}\n\\"},{"id":[1000000,204101],"value":"LeftLabel{$\\"},{"id":[1000000,204121],"value":"textsc{Add-ID}_2$}\n\\UnaryInfC{$\\mathit{ctx},\\, \\mathsf{addId}(k_\\mathit{tag}, \\mathit{id}, \\mathit{mut}) \\evalto \\mathit{ctx}$}\n\\DisplayProof\\proofSkipAmount"},{"id":[1000000,204113],"span":4},{"id":[1000000,203966],"span":2},{"id":[1000000,85328],"span":30},{"id":[1000000,84029],"span":1},{"id":[1000000,84017],"span":1},{"id":[1000000,83955],"span":1},{"id":[1000000,83840],"span":1},{"id":[1000000,83793],"value":"\n\\end{"},{"id":[1000000,203952],"value":"center"},{"id":[1000000,87596],"span":9},{"id":[1000000,85322],"span":6},{"id":[1000000,83799],"span":9},{"id":[1000000,83808],"value":"}"},{"id":[1000000,155042],"value":"\\vspace{6pt}"},{"id":[1000000,83134],"span":13},{"id":[1000000,83130],"span":1},{"id":[1000000,72533],"span":17},{"id":[1000000,72566],"span":98},{"id":[1000000,72670],"span":27},{"id":[1000000,73082],"span":1},{"id":[1000000,72697],"span":197},{"id":[1000000,72896],"span":35},{"id":[1000000,72940],"span":2},{"id":[1000000,72931],"span":9},{"id":[1000000,72942],"span":114},{"id":[1000000,73058],"span":23},{"id":[1000000,73056],"span":1},{"id":[1000000,72894],"span":1},{"id":[1000000,72664],"span":3},{"id":[1000000,72550],"span":16},{"id":[1000000,73083],"value":"\n\n"},{"id":[1000000,81719],"value":"\\b"},{"id":[1000000,73085],"span":124},{"id":[1000000,73685],"span":19},{"id":[1000000,73209],"span":2},{"id":[1000000,73219],"span":93},{"id":[1000000,73704],"span":3},{"id":[1000000,73312],"span":102},{"id":[1000000,73707],"span":18},{"id":[1000000,73414],"span":147},{"id":[1000000,73562],"span":82},{"id":[1000000,73646],"span":39},{"id":[1000000,73644],"span":1},{"id":[1000000,73211],"span":4},{"id":[1000000,71912],"span":1},{"id":[1000000,75264],"span":3},{"id":[1000000,75267],"value":"egin{prooftree}"},{"id":[1000000,75298],"value":"\n\\AxiomC{$\\mathit{val} \\not= \\texttt{[]} \\,\\wedge\\, \\mathit{val} \\not= \\texttt{\\string"},{"id":[1000000,75386],"value":"{\\string}}"},{"id":[1000000,75398],"value":"$}\n\\AxiomC{$"},{"id":[1000000,75410],"span":34},{"id":[1000000,75444],"value":"\\mathit{ctx}"},{"id":[1000000,84227],"value":",\\, \\mathsf{clear}(\\mathit{deps}, \\mathsf{regT}(k)) \\evalto \\mathit{ctx}',\\, \\mathit{pres}"},{"id":[1000000,84223],"span":2},{"id":[1000000,75456],"span":1},{"id":[1000000,75457],"value":"$}\n\\"},{"id":[1000000,75463],"value":"AxiomC{$"},{"id":[1000000,84530],"value":"\\mathit{ctx}',"},{"id":[1000000,85764],"value":"\\,"},{"id":[1000000,84544],"value":" \\mathsf{addId}(\\mathsf{regT}(k), \\mathit{id}"},{"id":[1000000,204278],"value":", \\mathsf{assign}(\\mathit{val})"},{"id":[1000000,84589],"value":")"},{"id":[1000000,204309],"value":"\n   "},{"id":[1000000,84590],"value":" \\evalto \\mathit{ctx}''"},{"id":[1000000,75538],"span":19},{"id":[1000000,75471],"span":12},{"id":[1000000,76022],"span":6},{"id":[1000000,75483],"span":4},{"id":[1000000,75491],"span":25},{"id":[1000000,75530],"span":8},{"id":[1000000,76028],"span":4},{"id":[1000000,75557],"span":71},{"id":[1000000,75635],"span":2},{"id":[1000000,75628],"span":6},{"id":[1000000,75638],"span":58},{"id":[1000000,75696],"value":"$}"},{"id":[1000000,84613],"value":"\n\\AxiomC{$\\mathit{ctx}'',"},{"id":[1000000,85762],"value":"\\,"},{"id":[1000000,84638],"value":" \\mathsf{regT}(k) \\evalto \\mathit{child}$}"},{"id":[1000000,75698],"value":"\n\\LeftLabel{"},{"id":[1000000,85372],"span":1},{"id":[1000000,75710],"span":1},{"id":[1000000,75711],"value":"\\"},{"id":[1000000,75722],"value":"te"},{"id":[1000000,75732],"value":"xt"},{"id":[1000000,75724],"span":2},{"id":[1000000,75726],"value":"sc{A"},{"id":[1000000,75734],"value":"ssign}"},{"id":[1000000,85373],"span":3},{"id":[1000000,75740],"span":3},{"id":[1000000,75743],"value":"}\n\\"},{"id":[1000000,84702],"value":"Quater"},{"id":[1000000,75746],"span":3},{"id":[1000000,75749],"value":"naryInfC{$\\mathit{ctx},\\, \\mathsf{op}(\\mathit{id}, \\mathit"},{"id":[1000000,75809],"value":"{"},{"id":[1000000,75818],"value":"deps},\n    \\mathsf{cursor}(\\langle"},{"id":[1000000,75854],"value":"\\rangle,\\, k), \\mathsf{assign}(\\mathit{val})"},{"id":[1000000,76734],"value":")"},{"id":[1000000,75898],"value":" \\evalto\n    \\math"},{"id":[1000000,78913],"value":"it"},{"id":[1000000,75916],"span":2},{"id":[1000000,75918],"value":"{ctx}"},{"id":[1000000,84684],"value":"''"},{"id":[1000000,75923],"value":"[\\, \\mathsf{regT}(k) \\,"},{"id":[1000000,75948],"value":"\\mapsto\\,"},{"id":[1000000,76032],"value":"\n   "},{"id":[1000000,75957],"value":" \\mathit{c"},{"id":[1000000,84695],"value":"hild"},{"id":[1000000,75967],"span":3},{"id":[1000000,76036],"span":6},{"id":[1000000,75970],"value":"}[\\, \\mathit{id} \\,\\mapsto\\, \\mathit{val} \\,]\\,]$}"},{"id":[1000000,75946],"span":1},{"id":[1000000,75852],"span":1},{"id":[1000000,75810],"span":4},{"id":[1000000,75807],"span":1},{"id":[1000000,75712],"span":5},{"id":[1000000,75634],"span":1},{"id":[1000000,75516],"span":7},{"id":[1000000,75487],"span":2},{"id":[1000000,75461],"span":1},{"id":[1000000,75396],"span":1},{"id":[1000000,75384],"span":1},{"id":[1000000,75282],"value":"\n\\end{prooftree}"},{"id":[1000000,155054],"value":"\\vspace{6pt}"},{"id":[1000000,76042],"value":"\n\n\\begin{prooftree}"},{"id":[1000000,76077],"value":"\n\\AxiomC{$"},{"id":[1000000,76087],"span":42},{"id":[1000000,76129],"value":"\\mathit{val} "},{"id":[1000000,76142],"span":4},{"id":[1000000,76146],"value":"= \\texttt{\\string{\\string}}$}\n\\AxiomC{$"},{"id":[1000000,76185],"span":37},{"id":[1000000,76222],"value":"\\mathit{ctx}"},{"id":[1000000,85646],"value":",\\, \\mathsf{clearElem}(\\mathit{deps},"},{"id":[1000000,85693],"value":" k) \\evalto \\mathit{ctx}',\\, \\mathit{pres}"},{"id":[1000000,85683],"span":5},{"id":[1000000,76234],"span":1},{"id":[1000000,76235],"value":"$}"},{"id":[1000000,85735],"value":"\n\\AxiomC{$\\mathit{ctx}',\\, "},{"id":[1000000,85766],"value":"\\mathsf{addId}(\\mathsf{"},{"id":[1000000,85795],"value":"mapT}(k), \\mathit{id}"},{"id":[1000000,204313],"value":", \\mathsf{assign}(\\mathit{val})"},{"id":[1000000,85816],"value":")"},{"id":[1000000,204344],"value":"\n   "},{"id":[1000000,85817],"value":" \\evalto \\mathit{ctx}''$}\n\\AxiomC{$\\mathit{ctx}'',\\, \\mathsf{mapT}(k) \\"},{"id":[1000000,85892],"value":"evalto \\mathit{child}$}"},{"id":[1000000,85888],"span":2},{"id":[1000000,85789],"span":3},{"id":[1000000,76237],"value":"\n\\LeftLabel{"},{"id":[1000000,76249],"span":1},{"id":[1000000,76250],"value":"\\textsc{"},{"id":[1000000,85426],"value":"Empty-Map"},{"id":[1000000,76258],"span":6},{"id":[1000000,76264],"value":"}"},{"id":[1000000,76265],"span":3},{"id":[1000000,76268],"value":"}\n\\"},{"id":[1000000,85917],"value":"Quater"},{"id":[1000000,76271],"span":2},{"id":[1000000,76273],"value":"naryInfC{$\\mathit{ctx},\\, \\mathsf{op}"},{"id":[1000000,76312],"value":"(\\mathit{id}, \\mathit{deps},\n    \\mathsf{cursor}(\\langle\\rangle,\\, k), \\mathsf{assign}("},{"id":[1000000,85409],"value":"\\"},{"id":[1000000,85596],"span":1},{"id":[1000000,85597],"value":"mathit{val"},{"id":[1000000,85410],"span":7},{"id":[1000000,85392],"span":16},{"id":[1000000,85408],"value":"}"},{"id":[1000000,76399],"span":12},{"id":[1000000,76733],"value":")"},{"id":[1000000,76411],"value":") \\evalto\n    \\math"},{"id":[1000000,78909],"value":"it"},{"id":[1000000,76430],"span":2},{"id":[1000000,76432],"value":"{ctx}"},{"id":[1000000,85525],"value":"''"},{"id":[1000000,76437],"value":"[\\, \\mathsf{"},{"id":[1000000,85503],"value":"mapT"},{"id":[1000000,76449],"span":4},{"id":[1000000,76453],"value":"}(k) \\,\\ma"},{"id":[1000000,85492],"value":"psto\\, "},{"id":[1000000,85507],"value":"\\mathit{child} \\,]"},{"id":[1000000,76463],"span":56},{"id":[1000000,76519],"value":"$}"},{"id":[1000000,76310],"span":1},{"id":[1000000,76061],"value":"\n\\end{prooftree}"},{"id":[1000000,155066],"value":"\\vspace{6pt}"},{"id":[1000000,85923],"value":"\n\n"},{"id":[1000000,85997],"value":"\\begin{prooftree}"},{"id":[1000000,86030],"value":"\n\\AxiomC{$\\mathit{val} = \\texttt{[]}$}\n\\AxiomC{$\\mathit{ctx},\\, \\mathsf{clearElem}(\\mathit{deps}, k) \\evalto \\mathit{ctx}',\\, \\mathit{pres}$}\n\\"},{"id":[1000000,86175],"value":"AxiomC{$\\mathit{ctx}',\\, \\mathsf{addId}(\\mathsf{listT}(k), \\mathit{id}"},{"id":[1000000,204348],"value":", \\mathsf{assign}(\\mathit{val})"},{"id":[1000000,86245],"value":")"},{"id":[1000000,204379],"value":"\n   "},{"id":[1000000,86246],"value":" \\evalto \\mathit{ctx}''$}\n\\AxiomC{$\\mathit{ctx}'',\\, \\mathsf{listT}(k) \\evalto \\mathit{child}$}\n\\LeftLabel{\\textsc{Empty-List}}\n\\QuaternaryInfC{$\\mathit{ctx},\\, \\mathsf{op}(\\mathit{id}, \\mathit{deps},\n    \\mathsf{cursor}(\\langle\\rangle,\\, k), \\mathsf{assign}(\\mathit{val})) \\evalto\n    \\mathit{ctx}''[\\, \\mathsf{listT}(k) \\,\\mapsto"},{"id":[1000000,86579],"value":"\\, \\mathit{child} \\,]$}"},{"id":[1000000,86577],"span":1},{"id":[1000000,86173],"span":1},{"id":[1000000,86014],"value":"\n\\end{prooftree}"},{"id":[1000000,155078],"value":"\\vspace{6pt}"},{"id":[1000000,85925],"span":8},{"id":[1000000,85968],"span":1},{"id":[1000000,85933],"span":13},{"id":[1000000,85960],"span":7},{"id":[1000000,85946],"span":7},{"id":[1000000,71913],"span":26},{"id":[1000000,71949],"span":45},{"id":[1000000,72000],"span":26},{"id":[1000000,71994],"span":3},{"id":[1000000,71939],"span":5},{"id":[1000000,71898],"span":14},{"id":[1000000,71867],"span":3},{"id":[1000000,71771],"span":3},{"id":[1000000,71598],"span":1},{"id":[1000000,71518],"span":3},{"id":[1000000,71297],"span":1},{"id":[1000000,71145],"span":1},{"id":[1000000,70915],"span":3},{"id":[1000000,70742],"span":5},{"id":[1000000,70732],"span":5},{"id":[1000000,70650],"span":1},{"id":[1000000,70487],"span":2},{"id":[1000000,70497],"span":8},{"id":[1000000,70489],"span":4},{"id":[1000000,70360],"span":1},{"id":[1000000,70173],"span":4},{"id":[1000000,69649],"span":12},{"id":[1000000,69592],"span":4},{"id":[1000000,69544],"span":4},{"id":[1000000,69457],"span":5},{"id":[1000000,30333],"span":3},{"id":[1000000,30297],"span":6},{"id":[1000000,29762],"span":12},{"id":[1000000,29451],"span":1},{"id":[1000000,29568],"span":15},{"id":[1000000,29476],"span":14},{"id":[1000000,29452],"span":12},{"id":[1000000,29377],"span":1},{"id":[1000000,29361],"span":1},{"id":[1000000,29224],"span":24},{"id":[1000000,28415],"span":14},{"id":[1000000,28429],"value":"\n"},{"id":[1000000,30404],"value":"\n"},{"id":[1000000,30405],"span":15},{"id":[1000000,34063],"span":18},{"id":[1000000,34098],"span":9},{"id":[1000000,34158],"span":1},{"id":[1000000,34107],"span":5},{"id":[1000000,35189],"span":2},{"id":[1000000,34112],"span":30},{"id":[1000000,35192],"span":1},{"id":[1000000,34142],"span":16},{"id":[1000000,34159],"span":15},{"id":[1000000,35187],"span":1},{"id":[1000000,34174],"span":25},{"id":[1000000,34206],"span":1},{"id":[1000000,34199],"span":6},{"id":[1000000,34207],"span":35},{"id":[1000000,34246],"span":47},{"id":[1000000,35185],"span":1},{"id":[1000000,34293],"span":10},{"id":[1000000,34305],"span":8},{"id":[1000000,34317],"span":15},{"id":[1000000,34334],"span":1},{"id":[1000000,35183],"span":1},{"id":[1000000,34335],"span":15},{"id":[1000000,34332],"span":1},{"id":[1000000,34313],"span":2},{"id":[1000000,34303],"span":1},{"id":[1000000,34242],"span":2},{"id":[1000000,34081],"span":17},{"id":[1000000,30633],"span":18},{"id":[1000000,30822],"span":10},{"id":[1000000,30834],"span":37},{"id":[1000000,30832],"span":1},{"id":[1000000,30700],"span":10},{"id":[1000000,30712],"span":4},{"id":[1000000,30718],"span":1},{"id":[1000000,35179],"span":1},{"id":[1000000,30719],"span":1},{"id":[1000000,30734],"span":1},{"id":[1000000,30720],"span":14},{"id":[1000000,30735],"span":15},{"id":[1000000,35181],"span":1},{"id":[1000000,30750],"span":8},{"id":[1000000,30764],"span":1},{"id":[1000000,30758],"span":5},{"id":[1000000,30716],"span":1},{"id":[1000000,30710],"span":2},{"id":[1000000,33418],"span":16},{"id":[1000000,35177],"span":1},{"id":[1000000,33434],"span":31},{"id":[1000000,34032],"span":2},{"id":[1000000,33465],"span":49},{"id":[1000000,30890],"span":10},{"id":[1000000,30914],"span":11},{"id":[1000000,31039],"span":55},{"id":[1000000,31096],"span":6},{"id":[1000000,31104],"span":31},{"id":[1000000,31102],"span":2},{"id":[1000000,31094],"span":1},{"id":[1000000,30900],"span":7},{"id":[1000000,30670],"span":28},{"id":[1000000,30765],"span":2},{"id":[1000000,33415],"span":3},{"id":[1000000,32924],"span":2},{"id":[1000000,31138],"span":6},{"id":[1000000,30767],"span":18},{"id":[1000000,35175],"span":1},{"id":[1000000,30785],"span":16},{"id":[1000000,33400],"span":3},{"id":[1000000,33390],"span":5},{"id":[1000000,33384],"span":3},{"id":[1000000,30801],"span":20},{"id":[1000000,30871],"span":3},{"id":[1000000,30821],"span":1},{"id":[1000000,30874],"span":8},{"id":[1000000,33514],"span":8},{"id":[1000000,35173],"span":1},{"id":[1000000,33522],"span":15},{"id":[1000000,30926],"span":5},{"id":[1000000,30882],"span":5},{"id":[1000000,32584],"span":53},{"id":[1000000,30887],"span":1},{"id":[1000000,30931],"span":8},{"id":[1000000,30943],"span":3},{"id":[1000000,31170],"span":5},{"id":[1000000,30946],"span":30},{"id":[1000000,31181],"span":5},{"id":[1000000,30976],"span":16},{"id":[1000000,31010],"span":12},{"id":[1000000,31028],"span":10},{"id":[1000000,31022],"span":3},{"id":[1000000,31008],"span":1},{"id":[1000000,30992],"span":11},{"id":[1000000,31038],"span":1},{"id":[1000000,31003],"span":2},{"id":[1000000,31144],"span":20},{"id":[1000000,31402],"span":26},{"id":[1000000,31434],"span":23},{"id":[1000000,31428],"span":3},{"id":[1000000,31005],"span":3},{"id":[1000000,30939],"span":2},{"id":[1000000,30888],"span":2},{"id":[1000000,30698],"span":1},{"id":[1000000,30651],"span":6},{"id":[1000000,30659],"span":10},{"id":[1000000,33014],"span":19},{"id":[1000000,33049],"span":64},{"id":[1000000,35169],"span":1},{"id":[1000000,33113],"span":31},{"id":[1000000,35171],"span":1},{"id":[1000000,33144],"span":15},{"id":[1000000,33601],"span":16},{"id":[1000000,35167],"span":1},{"id":[1000000,33617],"span":31},{"id":[1000000,34034],"span":2},{"id":[1000000,33648],"span":48},{"id":[1000000,33159],"span":13},{"id":[1000000,33177],"span":1},{"id":[1000000,33172],"span":4},{"id":[1000000,33178],"span":13},{"id":[1000000,33599],"span":2},{"id":[1000000,33191],"span":17},{"id":[1000000,35163],"span":1},{"id":[1000000,33208],"span":15},{"id":[1000000,33409],"span":4},{"id":[1000000,33223],"span":32},{"id":[1000000,33696],"span":6},{"id":[1000000,33771],"span":1},{"id":[1000000,33764],"span":1},{"id":[1000000,35165],"span":1},{"id":[1000000,33765],"span":6},{"id":[1000000,33702],"span":2},{"id":[1000000,33255],"span":60},{"id":[1000000,33033],"span":16},{"id":[1000000,34350],"span":19},{"id":[1000000,34417],"span":46},{"id":[1000000,34465],"span":13},{"id":[1000000,34489],"span":5},{"id":[1000000,35161],"span":1},{"id":[1000000,34494],"span":14},{"id":[1000000,34478],"span":11},{"id":[1000000,34508],"span":16},{"id":[1000000,34463],"span":1},{"id":[1000000,34385],"span":32},{"id":[1000000,34524],"span":14},{"id":[1000000,34540],"span":5},{"id":[1000000,35159],"span":1},{"id":[1000000,34545],"span":38},{"id":[1000000,34587],"span":4},{"id":[1000000,34583],"span":4},{"id":[1000000,34591],"span":16},{"id":[1000000,34614],"span":2},{"id":[1000000,34607],"span":7},{"id":[1000000,34616],"span":42},{"id":[1000000,34538],"span":2},{"id":[1000000,34369],"span":16},{"id":[1000000,30669],"span":1},{"id":[1000000,30657],"span":1},{"id":[1000000,29054],"span":7},{"id":[1000000,28303],"span":1},{"id":[1000000,28316],"span":9},{"id":[1000000,28304],"span":6},{"id":[1000000,27452],"span":1},{"id":[1000000,27453],"value":"\\begin{prooftree}"},{"id":[1000000,28342],"span":41},{"id":[1000000,28385],"span":7},{"id":[1000000,29147],"span":2},{"id":[1000000,28392],"span":3},{"id":[1000000,28383],"span":1},{"id":[1000000,27489],"value":"\n"},{"id":[1000000,27490],"span":4},{"id":[1000000,27494],"value":"\\AxiomC{$"},{"id":[1000000,76573],"value":"\\mathit{ctx}"},{"id":[1000000,27503],"span":31},{"id":[1000000,29149],"span":2},{"id":[1000000,27534],"value":"("},{"id":[1000000,76585],"value":"\\mathsf{next}("},{"id":[1000000,27535],"value":"\\mathit{prev}"},{"id":[1000000,76599],"value":")"},{"id":[1000000,27548],"value":") = "},{"id":[1000000,28203],"span":15},{"id":[1000000,27552],"span":3},{"id":[1000000,29152],"span":13},{"id":[1000000,27555],"span":3},{"id":[1000000,27558],"value":"\\mathit{next}"},{"id":[1000000,27571],"span":1},{"id":[1000000,27572],"value":"$}\n"},{"id":[1000000,27575],"span":4},{"id":[1000000,27579],"value":"\\AxiomC{$"},{"id":[1000000,34658],"span":26},{"id":[1000000,27588],"value":"\\mathit{next} < \\mathit{id}"},{"id":[1000000,34710],"value":" "},{"id":[1000000,34745],"value":"\\,"},{"id":[1000000,34711],"value":"\\vee"},{"id":[1000000,34747],"value":"\\,"},{"id":[1000000,34715],"value":" \\mathit{next} = \\mathsf{tail}"},{"id":[1000000,27615],"value":"$}"},{"id":[1000000,28635],"value":"\n"},{"id":[1000000,28636],"span":4},{"id":[1000000,28640],"value":"\\AxiomC{$"},{"id":[1000000,76678],"value":"\\mathit{ctx},\\, \\math"},{"id":[1000000,77065],"value":"sf"},{"id":[1000000,76699],"span":2},{"id":[1000000,76701],"value":"{op}(\\mathit{id}, \\mathit{deps},"},{"id":[1000000,76735],"value":"\n    \\mathsf{cursor}(\\langle\\rangle,\\, \\mathit{id}), \\mathsf{assign}(\\mathit{val})) \\evalto \\mathit{ctx}'"},{"id":[1000000,28649],"span":1},{"id":[1000000,29165],"span":2},{"id":[1000000,28650],"span":1},{"id":[1000000,29025],"span":1},{"id":[1000000,35157],"span":1},{"id":[1000000,29026],"span":1},{"id":[1000000,28651],"span":35},{"id":[1000000,29169],"span":2},{"id":[1000000,28686],"span":1},{"id":[1000000,28687],"value":"$}"},{"id":[1000000,27617],"value":"\n"},{"id":[1000000,27618],"span":4},{"id":[1000000,27622],"value":"\\LeftLabel{"},{"id":[1000000,27634],"value":"$"},{"id":[1000000,27633],"value":"\\"},{"id":[1000000,27845],"value":"text"},{"id":[1000000,27635],"span":4},{"id":[1000000,27639],"value":"sc{"},{"id":[1000000,27918],"span":6},{"id":[1000000,27642],"value":"Ins"},{"id":[1000000,76840],"value":"ert"},{"id":[1000000,27645],"value":"}_1$}\n"},{"id":[1000000,27651],"span":4},{"id":[1000000,27655],"value":"\\"},{"id":[1000000,76855],"value":"Tri"},{"id":[1000000,28692],"span":6},{"id":[1000000,28338],"span":3},{"id":[1000000,28341],"value":"n"},{"id":[1000000,27656],"span":3},{"id":[1000000,27659],"value":"aryInfC{$"},{"id":[1000000,76861],"value":"\\mathit{ctx}"},{"id":[1000000,27668],"span":1},{"id":[1000000,29167],"span":2},{"id":[1000000,27669],"value":","},{"id":[1000000,29027],"value":"\\"},{"id":[1000000,35155],"value":","},{"id":[1000000,29028],"span":1},{"id":[1000000,27670],"value":" \\mathsf{"},{"id":[1000000,76880],"value":"o"},{"id":[1000000,27679],"span":6},{"id":[1000000,34036],"span":1},{"id":[1000000,34037],"value":"p"},{"id":[1000000,27685],"value":"}(\\mathit{id},"},{"id":[1000000,76881],"value":" \\mathit{deps},\n    \\mathsf{cursor}(\\langle\\rangle,\\,"},{"id":[1000000,27699],"value":" \\mathit{prev}"},{"id":[1000000,76934],"value":")"},{"id":[1000000,27713],"value":", "},{"id":[1000000,76936],"value":"\\mathsf{insert}(\\mathit{val})"},{"id":[1000000,27715],"span":1},{"id":[1000000,27716],"value":") \\evalto"},{"id":[1000000,27727],"value":"\n"},{"id":[1000000,27728],"span":4},{"id":[1000000,27732],"value":"    "},{"id":[1000000,76968],"value":"\\mathit{ctx}"},{"id":[1000000,27751],"span":1},{"id":[1000000,29171],"span":2},{"id":[1000000,28698],"value":"'"},{"id":[1000000,27752],"value":"[\\,"},{"id":[1000000,76980],"value":"\\mathsf{next}("},{"id":[1000000,27755],"value":"\\mathit{prev}"},{"id":[1000000,76994],"value":")"},{"id":[1000000,27768],"value":" "},{"id":[1000000,33315],"value":"\\,"},{"id":[1000000,27769],"value":"\\mapsto"},{"id":[1000000,33317],"value":"\\,"},{"id":[1000000,27776],"value":" "},{"id":[1000000,28218],"span":15},{"id":[1000000,27777],"span":3},{"id":[1000000,29176],"span":13},{"id":[1000000,29174],"span":1},{"id":[1000000,27780],"span":3},{"id":[1000000,27783],"value":"\\mathit{id}"},{"id":[1000000,27794],"span":1},{"id":[1000000,27795],"value":",\\;"},{"id":[1000000,28234],"value":"\n"},{"id":[1000000,28235],"span":4},{"id":[1000000,28239],"value":"    "},{"id":[1000000,77028],"value":"\\mathsf{next}("},{"id":[1000000,27798],"span":1},{"id":[1000000,27799],"value":"\\mathit{id}"},{"id":[1000000,77042],"value":")"},{"id":[1000000,27810],"value":" "},{"id":[1000000,33319],"value":"\\,"},{"id":[1000000,27811],"value":"\\mapsto"},{"id":[1000000,33321],"value":"\\,"},{"id":[1000000,27818],"value":" "},{"id":[1000000,28243],"span":15},{"id":[1000000,27819],"span":4},{"id":[1000000,27823],"value":"\\mathit{next}"},{"id":[1000000,27836],"span":1},{"id":[1000000,27837],"value":"\\,]"},{"id":[1000000,27857],"value":"$"},{"id":[1000000,27840],"value":"}"},{"id":[1000000,27725],"span":1},{"id":[1000000,27470],"value":"\n"},{"id":[1000000,27473],"value":"\\end{prooftree}"},{"id":[1000000,155090],"value":"\\vspace{6pt}"},{"id":[1000000,27488],"span":1},{"id":[1000000,77068],"span":41},{"id":[1000000,77109],"value":"\n"},{"id":[1000000,27471],"span":1},{"id":[1000000,26518],"span":19},{"id":[1000000,26555],"value":"\n"},{"id":[1000000,27278],"value":"\\begin{prooftree}"},{"id":[1000000,27277],"value":"\n"},{"id":[1000000,27319],"span":4},{"id":[1000000,27323],"value":"\\AxiomC{$"},{"id":[1000000,77113],"value":"\\mathit{ctx}"},{"id":[1000000,77125],"span":1},{"id":[1000000,26556],"span":6},{"id":[1000000,27237],"span":4},{"id":[1000000,26562],"span":5},{"id":[1000000,26579],"span":7},{"id":[1000000,26605],"span":14},{"id":[1000000,26758],"span":1},{"id":[1000000,26761],"span":17},{"id":[1000000,27417],"span":3},{"id":[1000000,27015],"span":12},{"id":[1000000,26778],"span":1},{"id":[1000000,27010],"span":2},{"id":[1000000,26779],"span":2},{"id":[1000000,29189],"span":2},{"id":[1000000,26781],"value":"("},{"id":[1000000,77127],"value":"\\mathsf{next}("},{"id":[1000000,26782],"value":"\\mathit{prev}"},{"id":[1000000,77141],"value":")"},{"id":[1000000,26795],"value":") = "},{"id":[1000000,77176],"value":"\\"},{"id":[1000000,28258],"span":15},{"id":[1000000,26799],"span":3},{"id":[1000000,29192],"span":13},{"id":[1000000,26802],"span":4},{"id":[1000000,26808],"value":"mathit{next}"},{"id":[1000000,26820],"span":1},{"id":[1000000,27404],"value":"$"},{"id":[1000000,27335],"value":"}"},{"id":[1000000,26821],"span":1},{"id":[1000000,27242],"span":2},{"id":[1000000,27244],"value":"\n"},{"id":[1000000,27245],"span":4},{"id":[1000000,26822],"span":2},{"id":[1000000,27336],"value":"\\AxiomC{"},{"id":[1000000,27359],"value":"$"},{"id":[1000000,26824],"value":"\\mathit{id} < \\mathit{next}"},{"id":[1000000,27360],"value":"$"},{"id":[1000000,27347],"value":"}"},{"id":[1000000,26945],"span":1},{"id":[1000000,27251],"span":2},{"id":[1000000,26946],"span":1},{"id":[1000000,26947],"value":"\n"},{"id":[1000000,26948],"span":4},{"id":[1000000,27348],"value":"\\AxiomC{"},{"id":[1000000,27358],"value":"$"},{"id":[1000000,77181],"value":"ctx"},{"id":[1000000,26952],"span":1},{"id":[1000000,29207],"span":2},{"id":[1000000,26953],"value":","},{"id":[1000000,29029],"value":"\\"},{"id":[1000000,35153],"value":","},{"id":[1000000,29030],"span":1},{"id":[1000000,26954],"value":" \\mathsf{"},{"id":[1000000,77191],"value":"o"},{"id":[1000000,26963],"span":6},{"id":[1000000,34038],"span":1},{"id":[1000000,34039],"value":"p"},{"id":[1000000,26969],"value":"}(\\mathit{id},"},{"id":[1000000,77192],"value":" \\mathit{deps},\n   "},{"id":[1000000,26983],"value":" "},{"id":[1000000,77211],"value":"\\mathsf{cursor}(\\langle\\rangle,\\, "},{"id":[1000000,26984],"value":"\\mathit{next}"},{"id":[1000000,77245],"value":")"},{"id":[1000000,26997],"value":", "},{"id":[1000000,77246],"value":"\\mathsf{"},{"id":[1000000,81081],"value":"insert"},{"id":[1000000,77254],"span":6},{"id":[1000000,77260],"value":"}(\\mathit{"},{"id":[1000000,26999],"value":"v"},{"id":[1000000,77270],"value":"al})"},{"id":[1000000,27000],"value":")"},{"id":[1000000,27031],"value":" \\evalto"},{"id":[1000000,27001],"span":4},{"id":[1000000,27005],"value":" "},{"id":[1000000,77277],"value":"\\mathit{ctx}"},{"id":[1000000,27006],"span":1},{"id":[1000000,29205],"span":2},{"id":[1000000,27007],"value":"'"},{"id":[1000000,27357],"value":"$"},{"id":[1000000,27356],"value":"}"},{"id":[1000000,27420],"value":"\n"},{"id":[1000000,27421],"span":4},{"id":[1000000,27425],"value":"\\LeftLabel{"},{"id":[1000000,27736],"value":"$"},{"id":[1000000,27436],"value":"\\"},{"id":[1000000,27853],"value":"text"},{"id":[1000000,27741],"span":4},{"id":[1000000,27437],"span":4},{"id":[1000000,27441],"value":"sc{"},{"id":[1000000,27924],"span":6},{"id":[1000000,27444],"value":"Ins"},{"id":[1000000,77289],"value":"ert"},{"id":[1000000,27447],"span":3},{"id":[1000000,27450],"value":"}"},{"id":[1000000,27748],"value":"_2$"},{"id":[1000000,27451],"value":"}"},{"id":[1000000,26851],"value":"\n"},{"id":[1000000,27363],"span":4},{"id":[1000000,27367],"value":"\\TrinaryInfC{"},{"id":[1000000,27385],"value":"$"},{"id":[1000000,77301],"value":"\\mathit{ctx}"},{"id":[1000000,26852],"span":8},{"id":[1000000,29209],"span":2},{"id":[1000000,26860],"value":","},{"id":[1000000,29031],"value":"\\"},{"id":[1000000,35151],"value":","},{"id":[1000000,29032],"span":1},{"id":[1000000,26861],"value":" "},{"id":[1000000,26892],"value":"\\mathsf{"},{"id":[1000000,77320],"value":"o"},{"id":[1000000,26900],"span":6},{"id":[1000000,34040],"span":1},{"id":[1000000,34041],"value":"p"},{"id":[1000000,26906],"value":"}(\\mathit{id},"},{"id":[1000000,77321],"value":" \\mathit{deps},\n   "},{"id":[1000000,26920],"value":" "},{"id":[1000000,77340],"value":"\\mathsf{cursor}(\\langle\\rangle,\\, "},{"id":[1000000,26921],"value":"\\mathit{prev}"},{"id":[1000000,77374],"value":")"},{"id":[1000000,26934],"value":", "},{"id":[1000000,77375],"value":"\\mathsf{insert}(\\mathit{"},{"id":[1000000,26936],"value":"v"},{"id":[1000000,77399],"value":"al}))"},{"id":[1000000,26937],"span":1},{"id":[1000000,27043],"value":" \\evalto"},{"id":[1000000,26938],"span":4},{"id":[1000000,26942],"value":" "},{"id":[1000000,77408],"value":"\\mathit{ctx}"},{"id":[1000000,26943],"span":1},{"id":[1000000,29211],"span":2},{"id":[1000000,26944],"value":"'"},{"id":[1000000,27386],"value":"$}"},{"id":[1000000,27008],"value":"\n"},{"id":[1000000,27389],"value":"\\end{prooftree}"},{"id":[1000000,84942],"value":"\n\\caption{Rules for "},{"id":[1000000,154785],"value":"applying insertion and assignment"},{"id":[1000000,84962],"span":10},{"id":[1000000,84972],"value":" operations"},{"id":[1000000,154848],"value":" to "},{"id":[1000000,154874],"value":"update "},{"id":[1000000,154852],"value":"the state of a replica"},{"id":[1000000,154847],"value":"."},{"id":[1000000,84983],"span":29},{"id":[1000000,85012],"value":"}\\label{fig:operation-rules}\n\\end{sidewaysfigure*}"},{"id":[1000000,97253],"value":"\n\nFigure~\\ref{fig:operation-rules} gives the rules that "},{"id":[1000000,258285],"value":"apply"},{"id":[1000000,97309],"span":8},{"id":[1000000,97317],"value":" an operation $\\mathsf{op}$ "},{"id":[1000000,258296],"value":"to"},{"id":[1000000,97345],"span":6},{"id":[1000000,97351],"value":" a context $\\mathit{ctx}$,"},{"id":[1000000,97377],"span":4},{"id":[1000000,97381],"value":" produc"},{"id":[1000000,258303],"value":"ing"},{"id":[1000000,97388],"span":1},{"id":[1000000,97389],"value":" a"},{"id":[1000000,97401],"value":"n updated context $\\mathit{ctx}'$."},{"id":[1000000,155102],"value":" The context is initially the replica state"},{"id":[1000000,155147],"value":" $A"},{"id":[1000000,155152],"value":"_p$, but may refer to "},{"id":[1000000,155243],"value":"subtrees"},{"id":[1000000,155174],"span":11},{"id":[1000000,155185],"value":" of the state as rules are recursively applied."},{"id":[1000000,155150],"span":1},{"id":[1000000,155145],"span":1},{"id":[1000000,97435],"value":" These rules are used by \\textsc{Apply-Local} and \\textsc{Apply-Remote} to perform the state updates on a document.\n\nWhen the "},{"id":[1000000,97568],"value":"operation"},{"id":[1000000,97577],"span":2},{"id":[1000000,97579],"value":" "},{"id":[1000000,97561],"value":"cursor"},{"id":[1000000,258308],"value":"'s vector of keys is non-empty,"},{"id":[1000000,97567],"value":" "},{"id":[1000000,97580],"span":52},{"id":[1000000,97634],"span":16},{"id":[1000000,97650],"value":"the \\textsc{Descend} rule first applies. It "},{"id":[1000000,97696],"value":"recursively descends the document tree "},{"id":[1000000,258458],"value":"by following the path described by the"},{"id":[1000000,258496],"span":2},{"id":[1000000,258498],"value":" keys"},{"id":[1000000,97735],"span":51},{"id":[1000000,97786],"value":". If the tree node already exists"},{"id":[1000000,97840],"value":" in the local "},{"id":[1000000,97854],"span":3},{"id":[1000000,97857],"value":"r"},{"id":[1000000,154536],"value":"eplica"},{"id":[1000000,97858],"value":" state"},{"id":[1000000,97819],"value":", \\textsc{Child-Get} "},{"id":[1000000,97864],"value":"finds it, otherwise \\textsc{Child-Map} and \\textsc{Child-List} "},{"id":[1000000,97929],"value":"create an empty map or list respectively."},{"id":[1000000,97972],"value":"\n\n"},{"id":[1000000,97976],"value":"The \\textsc{Descend} rule also invokes "},{"id":[1000000,204397],"value":"$"},{"id":[1000000,98015],"value":"\\textsc{Add"},{"id":[1000000,98028],"value":"-ID}"},{"id":[1000000,204398],"value":"_{1,2}$"},{"id":[1000000,98032],"value":" at each tree node along the path described by the cursor, adding the operation ID to the presence set $\\mathsf{pres}(k)$ to indicate that the subtree includes "},{"id":[1000000,98198],"value":"a mutation made by this operation.\n\nThe remaining rules in Figure~\\ref{fig:operation-rules} apply when the vector of keys in the cursor is empty, "},{"id":[1000000,258171],"value":"which is the case"},{"id":[1000000,98344],"span":4},{"id":[1000000,98348],"value":" when descended to the context of the tree node to which the mutation applies. "},{"id":[1000000,98429],"value":"The \\textsc{Assign}"},{"id":[1000000,98551],"value":" rule handles assignment of a"},{"id":[1000000,155251],"value":" primitive value to a"},{"id":[1000000,98580],"value":" register,"},{"id":[1000000,98448],"span":1},{"id":[1000000,98449],"value":" \\textsc{Empty-Map}"},{"id":[1000000,98590],"value":" handles assignment where the value is the empty map literal \\verb|{}|,"},{"id":[1000000,98468],"value":" and \\textsc{Empty-List}"},{"id":[1000000,98492],"span":6},{"id":[1000000,98498],"value":" handle"},{"id":[1000000,98667],"value":"s"},{"id":[1000000,98505],"value":" "},{"id":[1000000,98506],"span":18},{"id":[1000000,98526],"span":2},{"id":[1000000,98534],"span":7},{"id":[1000000,98541],"value":"assign"},{"id":[1000000,98698],"value":"ment of the empty list \\verb|[]|. These "},{"id":[1000000,98755],"value":"three "},{"id":[1000000,98738],"span":11},{"id":[1000000,98749],"value":"rules "},{"id":[1000000,98772],"value":"for \\textsf{assign} have a similar structure: first clearing the prior value at the cursor (as discussed in the next section), then adding the operation ID to the presence set, and finally incorporating the new value into the tree of local state."},{"id":[1000000,98547],"span":3},{"id":[1000000,98528],"span":3},{"id":[1000000,98524],"span":1},{"id":[1000000,98427],"span":1},{"id":[1000000,98192],"span":3},{"id":[1000000,98026],"span":1},{"id":[1000000,97974],"span":1},{"id":[1000000,97970],"span":1},{"id":[1000000,97927],"span":1},{"id":[1000000,97694],"span":1},{"id":[1000000,97632],"span":1},{"id":[1000000,97391],"span":5},{"id":[1000000,27930],"value":"\n"},{"id":[1000000,99018],"value":"\n"},{"id":[1000000,99020],"value":"The $\\textsc{Insert}_{1,2}$ rules handle insertion of a new element into an ordered list. In this case, the cursor re"},{"id":[1000000,99139],"value":"fers to the list element $\\mathit{prev}$, and the new element is inserted after that position in the list. "},{"id":[1000000,99254],"value":"$\\textsc{Insert}_1$ performs the insertion by manipulating the linked list structure"},{"id":[1000000,99346],"value":". $\\textsc{Insert}_2$ handles the case of multiple "},{"id":[1000000,154547],"value":"replicas"},{"id":[1000000,99397],"span":5},{"id":[1000000,99402],"value":" concurrently inserting list elements at the same position, and "},{"id":[1000000,99546],"value":"uses the ordering relation $<$ on Lamport timestamps to "},{"id":[1000000,99634],"value":"consistently "},{"id":[1000000,99602],"value":"determine the insertion point"},{"id":[1000000,99632],"span":1},{"id":[1000000,99631],"value":"."},{"id":[1000000,155272],"value":" Our approach for handling insertions is based on the RGA algorithm~\\cite{Roh:2011dw}."},{"id":[1000000,99647],"value":" We show later that these rules ensure all "},{"id":[1000000,99690],"span":3},{"id":[1000000,99693],"value":"r"},{"id":[1000000,154558],"value":"eplica"},{"id":[1000000,99694],"value":"s converge towards the same state."},{"id":[1000000,99466],"span":30},{"id":[1000000,99498],"span":9},{"id":[1000000,99496],"span":1},{"id":[1000000,99338],"span":4},{"id":[1000000,99246],"span":4},{"id":[1000000,99137],"span":1},{"id":[1000000,99019],"value":"\n"},{"id":[1000000,99729],"value":"\n\\subsubsection{Clearing "},{"id":[1000000,252359],"value":"P"},{"id":[1000000,99754],"span":1},{"id":[1000000,99755],"value":"rior "},{"id":[1000000,252361],"value":"S"},{"id":[1000000,99760],"span":1},{"id":[1000000,99761],"value":"tate}"},{"id":[1000000,99728],"value":"\n"},{"id":[1000000,85062],"value":"\n\\begin{figure*}"},{"id":[1000000,27931],"value":"\n\\begin{prooftree}"},{"id":[1000000,27965],"value":"\n"},{"id":[1000000,27966],"span":4},{"id":[1000000,27970],"value":"\\AxiomC{$"},{"id":[1000000,77493],"span":30},{"id":[1000000,77525],"span":5},{"id":[1000000,77787],"span":13},{"id":[1000000,77523],"span":1},{"id":[1000000,27979],"span":1},{"id":[1000000,29213],"span":2},{"id":[1000000,27980],"span":1},{"id":[1000000,27981],"value":"\\mathit{"},{"id":[1000000,77479],"value":"ctx"},{"id":[1000000,27989],"span":6},{"id":[1000000,27995],"value":"}"},{"id":[1000000,86766],"value":",\\, \\mathsf{clearElem}(\\mathit{deps}, k) \\evalto \\mathit{ctx}',"},{"id":[1000000,86831],"value":"\\, \\mathit{pres}"},{"id":[1000000,86829],"span":1},{"id":[1000000,86764],"span":1},{"id":[1000000,77800],"span":1},{"id":[1000000,77487],"span":3},{"id":[1000000,27996],"span":4},{"id":[1000000,28273],"span":15},{"id":[1000000,28000],"span":18},{"id":[1000000,28018],"value":"$}"},{"id":[1000000,28702],"span":15},{"id":[1000000,29215],"span":2},{"id":[1000000,28717],"span":1},{"id":[1000000,29033],"span":1},{"id":[1000000,35149],"span":1},{"id":[1000000,29034],"span":1},{"id":[1000000,28718],"span":35},{"id":[1000000,29217],"span":2},{"id":[1000000,28753],"span":3},{"id":[1000000,28020],"value":"\n"},{"id":[1000000,28021],"span":4},{"id":[1000000,28025],"value":"\\LeftLabel{"},{"id":[1000000,28036],"span":1},{"id":[1000000,28037],"value":"\\textsc{"},{"id":[1000000,77467],"span":2},{"id":[1000000,77471],"span":2},{"id":[1000000,77469],"span":1},{"id":[1000000,28045],"span":6},{"id":[1000000,28051],"value":"Del"},{"id":[1000000,86712],"value":"ete"},{"id":[1000000,28054],"value":"}"},{"id":[1000000,28058],"value":"}\n"},{"id":[1000000,28060],"span":4},{"id":[1000000,28064],"value":"\\"},{"id":[1000000,77786],"value":"U"},{"id":[1000000,28700],"span":2},{"id":[1000000,28065],"span":1},{"id":[1000000,28066],"value":"naryInfC{$"},{"id":[1000000,77625],"value":"\\mathit{ctx}"},{"id":[1000000,28076],"span":1},{"id":[1000000,29219],"span":2},{"id":[1000000,28077],"value":","},{"id":[1000000,29035],"value":"\\"},{"id":[1000000,35147],"value":","},{"id":[1000000,29036],"span":1},{"id":[1000000,28078],"value":" \\"},{"id":[1000000,28084],"value":"mathsf{"},{"id":[1000000,77645],"value":"op"},{"id":[1000000,28091],"span":6},{"id":[1000000,34042],"span":2},{"id":[1000000,28097],"value":"}(\\mathi"},{"id":[1000000,28107],"value":"t{id}, "},{"id":[1000000,77647],"value":"\\mathit{deps},\n    \\mathsf{cursor}(\\langle"},{"id":[1000000,86602],"span":2},{"id":[1000000,77689],"value":"\\rangle,\\, "},{"id":[1000000,86621],"value":"k"},{"id":[1000000,28114],"span":15},{"id":[1000000,28129],"value":")"},{"id":[1000000,77700],"value":", \\mathsf{"},{"id":[1000000,86629],"value":"delete"},{"id":[1000000,77710],"span":7},{"id":[1000000,77717],"value":"})"},{"id":[1000000,28130],"value":" \\evalto"},{"id":[1000000,86706],"value":" "},{"id":[1000000,28140],"span":9},{"id":[1000000,77723],"value":"\\mathit{ctx}"},{"id":[1000000,86700],"value":"'"},{"id":[1000000,28149],"span":1},{"id":[1000000,29221],"span":2},{"id":[1000000,28756],"span":1},{"id":[1000000,28150],"span":3},{"id":[1000000,77735],"span":17},{"id":[1000000,28153],"span":15},{"id":[1000000,77752],"span":1},{"id":[1000000,28168],"span":1},{"id":[1000000,33323],"span":2},{"id":[1000000,28169],"span":7},{"id":[1000000,33325],"span":2},{"id":[1000000,28176],"span":1},{"id":[1000000,28288],"span":8},{"id":[1000000,77759],"span":4},{"id":[1000000,28296],"span":7},{"id":[1000000,28177],"span":24},{"id":[1000000,28201],"value":"$}"},{"id":[1000000,28138],"span":1},{"id":[1000000,28105],"span":1},{"id":[1000000,28080],"span":2},{"id":[1000000,28055],"span":1},{"id":[1000000,27949],"value":"\n\\end{prooftree}"},{"id":[1000000,86847],"value":"\n\n"},{"id":[1000000,87144],"span":1},{"id":[1000000,86849],"value":"\\begin{prooftree}"},{"id":[1000000,86882],"value":"\n"},{"id":[1000000,87145],"span":1},{"id":[1000000,86883],"value":"\\AxiomC{$\\mathit{ctx},\\, \\mathsf{clearAny}(\\mathit{deps}, k) \\evalto \\mathit{ctx}', \\mathit{pres}"},{"id":[1000000,88114],"value":"_"},{"id":[1000000,88412],"value":"1"},{"id":[1000000,88115],"span":14},{"id":[1000000,88112],"span":1},{"id":[1000000,86980],"value":"$}"},{"id":[1000000,88069],"value":"\n\\AxiomC{$\\mathit{ctx}',\\, \\mathsf{pres}(k)"},{"id":[1000000,88129],"value":" "},{"id":[1000000,88132],"value":"\\evalto \\mathit{pres}_"},{"id":[1000000,88440],"value":"2"},{"id":[1000000,88154],"span":13},{"id":[1000000,88167],"value":"$}"},{"id":[1000000,88130],"span":1},{"id":[1000000,86982],"value":"\n"},{"id":[1000000,87146],"span":1},{"id":[1000000,86983],"value":"\\AxiomC{$\\mathit{pres}"},{"id":[1000000,88473],"value":"_3"},{"id":[1000000,88471],"span":1},{"id":[1000000,87005],"span":1},{"id":[1000000,87006],"value":" = \\mathit{pres}"},{"id":[1000000,88169],"value":"_"},{"id":[1000000,88469],"value":"1"},{"id":[1000000,88170],"span":14},{"id":[1000000,87022],"value":" \\,\\cup\\, "},{"id":[1000000,88184],"value":"\\mathit{pres}_"},{"id":[1000000,88454],"value":"2"},{"id":[1000000,100919],"value":" \\setminus \\mathit{deps}"},{"id":[1000000,88198],"span":13},{"id":[1000000,87032],"value":"$}"},{"id":[1000000,88211],"value":"\n\\LeftLabel{\\textsc{Clear"},{"id":[1000000,88238],"value":"-Elem}}\n\\TrinaryInfC{$\\mathit{ctx},\\, \\mathsf{clearElem}(\\mathit{deps}, k"},{"id":[1000000,88313],"value":") \\evalto"},{"id":[1000000,88336],"value":"\n   "},{"id":[1000000,88322],"value":" \\mathit{ctx}'"},{"id":[1000000,88340],"value":" [\\, \\mathsf{pres}(k) \\,\\mapsto\\, \\mathit{pres}"},{"id":[1000000,88476],"value":"_3"},{"id":[1000000,88387],"span":1},{"id":[1000000,88388],"value":" \\,],\\, \\mathit{pres}"},{"id":[1000000,88479],"value":"_3"},{"id":[1000000,88409],"span":1},{"id":[1000000,88410],"value":"$}"},{"id":[1000000,88311],"span":1},{"id":[1000000,88236],"span":1},{"id":[1000000,86866],"value":"\n"},{"id":[1000000,87147],"span":1},{"id":[1000000,86867],"value":"\\end{prooftree}"},{"id":[1000000,88481],"value":"\n\n\\begin{prooftree}"},{"id":[1000000,88516],"value":"\n\\AxiomC{$\\begin{matrix}\n    \\mathit{ctx},\\, \\mathsf{clear}(\\mathit{deps}, \\mathsf{mapT}(k)) \\\\\n    \\evalto \\mathit{ctx"},{"id":[1000000,88637],"value":"}_1,\\, \\mathit{pres}_1 \\end{matrix}$}\n\\AxiomC{$\\begin{matrix}\n    \\mathit{ctx}_1,\\, \\mathsf{clear}(\\mathit{deps}, \\mathsf{listT}(k)) \\\\\n    \\evalto \\mathit{ctx"},{"id":[1000000,88798],"value":"}_2,\\, \\mathit{pres}_2 \\end{matrix}$}\n\\AxiomC{$\\begin{matrix}\n    \\mathit{ctx}_2,\\, \\mathsf{clear}(\\mathit{deps}, \\mathsf{regT}(k)) \\\\\n    \\evalto \\mathit{ctx}_3,\\, \\mathit{pres}_3"},{"id":[1000000,88982],"value":" \\end{matrix}$}\n\\LeftLabel{\\textsc{Clear-Any}}\n\\TrinaryInfC{$\\mathit{ctx},\\, \\mathsf{clear"},{"id":[1000000,89080],"value":"Any}(\\mathit{deps}, k) \\evalto\n    \\mathit{ctx}"},{"id":[1000000,89129],"value":"_3,\\, \\math"},{"id":[1000000,89142],"value":"it{pres}_1 \\,\\cup\\, \\mathit{pres}_2 \\"},{"id":[1000000,89183],"value":",\\cup\\, \\mathit{pres}_3"},{"id":[1000000,89208],"value":"$}"},{"id":[1000000,89206],"span":1},{"id":[1000000,89179],"span":2},{"id":[1000000,89140],"span":1},{"id":[1000000,89127],"span":1},{"id":[1000000,89072],"span":4},{"id":[1000000,88978],"span":2},{"id":[1000000,88796],"span":1},{"id":[1000000,88635],"span":1},{"id":[1000000,88500],"value":"\n\\end{prooftree}"},{"id":[1000000,89210],"value":"\n\n\\begin{prooftree}"},{"id":[1000000,89245],"value":"\n\\AxiomC{$k \\notin \\mathrm{dom}(\\mathit{ctx})$}\n\\LeftLabel{\\textsc{Clear-None}}\n\\UnaryInfC{$\\mathit{ctx},\\, \\mathsf{clear}(\\mathit{deps}, k) \\evalto \\mathi"},{"id":[1000000,89404],"value":"t{ctx},\\, \\{\\}$}"},{"id":[1000000,89400],"span":2},{"id":[1000000,89229],"value":"\n\\end{prooftree}"},{"id":[1000000,78420],"value":"\n\n\\begin{prooftree}\n\\AxiomC{$\\mathsf"},{"id":[1000000,78458],"value":"{regT}(k) \\in \\mathrm"},{"id":[1000000,78481],"value":"{dom}(\\mathit{ctx})$}"},{"id":[1000000,78518],"value":"\n\\AxiomC{$\\mathit{concurrent} = \\{ \\mathit{id}"},{"id":[1000000,78972],"span":1},{"id":[1000000,78564],"span":1},{"id":[1000000,78565],"value":" \\maps"},{"id":[1000000,78575],"value":"to v"},{"id":[1000000,78579],"span":2},{"id":[1000000,78581],"value":" \\mid\n    (\\mathit{id}"},{"id":[1000000,78603],"span":2},{"id":[1000000,78605],"value":" \\mapsto v"},{"id":[1000000,78615],"span":2},{"id":[1000000,78617],"value":") \\in \\mathit{ctx}(\\mathsf{regT}(k))"},{"id":[1000000,78657],"value":"\n    \\,\\wedge\\, \\mathit{id}"},{"id":[1000000,78684],"span":2},{"id":[1000000,78686],"value":" \\notin \\mathit{deps} \\}$}\n\\LeftLabel{\\textsc{Clear-Reg}}\n\\BinaryInfC{$"},{"id":[1000000,78759],"value":"\\mathit{ctx},\\, \\mathsf{"},{"id":[1000000,89422],"value":"clear"},{"id":[1000000,78783],"span":2},{"id":[1000000,78785],"value":"}("},{"id":[1000000,78787],"span":13},{"id":[1000000,78800],"value":"\\mathit{deps},"},{"id":[1000000,89440],"value":" \\mathsf{regT}(k)) \\evalto"},{"id":[1000000,78814],"span":59},{"id":[1000000,78875],"span":10},{"id":[1000000,78885],"value":"\n    \\math"},{"id":[1000000,78899],"value":"it{ctx}["},{"id":[1000000,78915],"value":"\\,"},{"id":[1000000,78971],"value":" "},{"id":[1000000,78917],"value":"\\mathsf{regT}(k) \\,\\mapsto"},{"id":[1000000,78945],"value":"\\, \\mathit{concurrent} \\,]"},{"id":[1000000,89535],"value":",\\, \\math"},{"id":[1000000,89550],"value":"rm{dom}(\\mathit{concurrent})"},{"id":[1000000,89544],"span":3},{"id":[1000000,78943],"span":1},{"id":[1000000,78895],"span":2},{"id":[1000000,78873],"span":1},{"id":[1000000,78757],"value":"$}"},{"id":[1000000,78653],"span":2},{"id":[1000000,78571],"span":2},{"id":[1000000,78502],"value":"\n\\end{prooftree}"},{"id":[1000000,89588],"value":"\n\n\\begin{prooftree}"},{"id":[1000000,89623],"value":"\n\\AxiomC{$\\mathsf{mapT}(k) \\in \\mathrm{dom}(\\mathit{ctx})$}"},{"id":[1000000,89721],"value":"\n\\AxiomC{$\\mathit{ctx}"},{"id":[1000000,89747],"value":"(\\mathsf{mapT}(k))"},{"id":[1000000,89767],"value":",\\, \\mathsf{clearMap}(\\mathit{deps}, \\{\\}) \\evalto"},{"id":[1000000,89823],"value":"\n   "},{"id":[1000000,89817],"value":" \\math"},{"id":[1000000,89827],"value":"it{cleared},\\, \\mathit{pres}$}"},{"id":[1000000,89857],"span":6},{"id":[1000000,89765],"span":1},{"id":[1000000,89743],"span":2},{"id":[1000000,89682],"value":"\n\\LeftLabel{"},{"id":[1000000,89715],"value":"$"},{"id":[1000000,89694],"value":"\\textsc{Clear-Map}"},{"id":[1000000,89716],"value":"_1$"},{"id":[1000000,89712],"value":"}"},{"id":[1000000,89869],"value":"\n\\BinaryInfC{$\\mathit{ctx},\\, \\mathsf{clear"},{"id":[1000000,89914],"value":"}(\\mathit{deps}, \\mathsf{mapT}(k)) \\evalto\n    \\mathit{ctx} [\\, \\mathsf{mapT}(k) \\,\\mapsto\\, \\mathit{cleared} \\,],\\, \\mathit{pres}$}"},{"id":[1000000,89912],"span":1},{"id":[1000000,89713],"span":2},{"id":[1000000,89607],"value":"\n\\end{prooftree}"},{"id":[1000000,90046],"value":"\n\n\\begin{prooftree}"},{"id":[1000000,90085],"value":"\n\\AxiomC{$"},{"id":[1000000,90608],"value":"\\begin{matrix}"},{"id":[1000000,90623],"value":"\n   "},{"id":[1000000,90622],"value":" "},{"id":[1000000,90095],"value":"k \\in \\mathrm{keys}(\\mathit{ctx}) \\"},{"id":[1000000,90628],"value":"\\\n    "},{"id":[1000000,90130],"span":1},{"id":[1000000,90131],"value":"\\wedge\\, k \\notin \\mathit{done}"},{"id":[1000000,90634],"value":" \\end{matrix}"},{"id":[1000000,90162],"value":"$}\n\\AxiomC{$"},{"id":[1000000,90647],"value":"\\begin{matrix}\n    "},{"id":[1000000,90174],"value":"\\mathit{ctx},\\, \\mathsf{clearElem}(\\mathit{deps}, k)"},{"id":[1000000,90668],"value":" \\\\\n   "},{"id":[1000000,90666],"span":1},{"id":[1000000,90226],"value":" \\evalto \\mathit{ctx}', \\mathit{pres}_1"},{"id":[1000000,90675],"value":" \\end{matrix}"},{"id":[1000000,90265],"value":"$}\n\\AxiomC{$"},{"id":[1000000,90688],"value":"\\begin{matrix}\n    "},{"id":[1000000,90707],"span":1},{"id":[1000000,90277],"value":"\\mathit{ctx}'"},{"id":[1000000,90296],"value":",\\, \\mathsf{clearMap}"},{"id":[1000000,90319],"value":"(\\mathit{deps}, \\mathit{done} \\cup \\{k\\})"},{"id":[1000000,90709],"value":" \\\\"},{"id":[1000000,90360],"value":"\n    \\evalto \\mathit{ctx}'',\\, \\mathit{pres}_2"},{"id":[1000000,90712],"value":" \\end{matrix}"},{"id":[1000000,90406],"value":"$}\n\\LeftLabel{$\\textsc{Clear-Map}_2$}\n\\TrinaryInfC{$\\mathit{ctx},\\, \\mathsf{clearMap}(\\mathit{deps}, \\mathit{done})"},{"id":[1000000,90521],"span":8},{"id":[1000000,90529],"value":"\n    "},{"id":[1000000,90539],"value":"\\evalto "},{"id":[1000000,90534],"value":"\\math"},{"id":[1000000,90555],"value":"it{ctx}'',\\, \\mathit{pres}_1 "},{"id":[1000000,91443],"value":"\\,"},{"id":[1000000,90584],"value":"\\cup"},{"id":[1000000,91445],"value":"\\,"},{"id":[1000000,90588],"value":" \\mathit{pres"},{"id":[1000000,90603],"value":"}_2$}"},{"id":[1000000,90601],"span":1},{"id":[1000000,90317],"span":1},{"id":[1000000,90290],"span":3},{"id":[1000000,90065],"value":"\n\\"},{"id":[1000000,90071],"value":"end{prooftree}"},{"id":[1000000,90725],"value":"\n\n\\begin{prooftree}"},{"id":[1000000,90760],"value":"\n\\AxiomC{$\\mathit{done} = \\mathrm{keys}(\\mathit{ctx})$}\n\\LeftLabel{$\\textsc{Clear-Map}_3$}\n\\UnaryInfC{$\\mathit{ctx},\\, \\mathsf{clearMap}(\\mathit{deps}, \\mathit{done})"},{"id":[1000000,90966],"value":" "},{"id":[1000000,90926],"span":5},{"id":[1000000,90931],"value":"\\evalto \\mathit{ctx},"},{"id":[1000000,90959],"value":"\\,"},{"id":[1000000,90952],"value":" \\{\\}$}"},{"id":[1000000,90744],"value":"\n\\end{prooftree}"},{"id":[1000000,90067],"span":2},{"id":[1000000,78973],"value":"\n\n\\begin{prooftree}\n\\AxiomC{$\\mathsf{listT}(k) \\in \\mathrm{dom}(\\mathit{ctx})$}\n\\AxiomC{$\\mathit{ctx}(\\mathsf{listT}(k)),\\, \\mathsf{"},{"id":[1000000,91086],"value":"clearList"},{"id":[1000000,79105],"span":2},{"id":[1000000,79107],"value":"}("},{"id":[1000000,79109],"span":13},{"id":[1000000,79122],"value":"\\math"},{"id":[1000000,79129],"value":"it{deps},"},{"id":[1000000,91108],"value":" \\mathsf{head})"},{"id":[1000000,79138],"value":"\n    "},{"id":[1000000,79143],"span":67},{"id":[1000000,79212],"span":4},{"id":[1000000,79216],"value":"\\evalto \\mathit{cleared}"},{"id":[1000000,91194],"value":",\\, \\mathit{pres}"},{"id":[1000000,79240],"value":"$}\n\\LeftLabel{"},{"id":[1000000,91214],"value":"$"},{"id":[1000000,79254],"value":"\\textsc{Clear-List}"},{"id":[1000000,91211],"value":"_1$"},{"id":[1000000,79273],"value":"}\n\\BinaryInfC{$\\mathit{ctx},\\, \\mathsf{"},{"id":[1000000,90969],"value":"clear"},{"id":[1000000,79312],"span":2},{"id":[1000000,79314],"value":"}("},{"id":[1000000,79316],"span":13},{"id":[1000000,79329],"value":"\\mathit{deps},"},{"id":[1000000,90987],"value":" \\mathsf{listT}(k)) \\evalto"},{"id":[1000000,79343],"span":70},{"id":[1000000,79413],"value":"\n    \\mathit{ctx}[\\, \\mathsf{listT}(k) \\,\\mapsto\\, \\mathit{cleared} \\,]"},{"id":[1000000,91215],"value":",\\, \\mathit{pres}"},{"id":[1000000,79484],"value":"$}\n\\end{prooftree}\n\n\\begin{prooftree"},{"id":[1000000,79522],"value":"}\n\\AxiomC{$"},{"id":[1000000,91447],"value":"\\begin{matrix}\n    "},{"id":[1000000,79543],"value":"k \\not= \\mathsf{tail}"},{"id":[1000000,91466],"value":" \\"},{"id":[1000000,91481],"value":","},{"id":[1000000,91468],"span":5},{"id":[1000000,80142],"span":3},{"id":[1000000,80145],"value":"\\wedge\\"},{"id":[1000000,91483],"value":"\\"},{"id":[1000000,80152],"span":2},{"id":[1000000,79564],"span":2},{"id":[1000000,79634],"span":31},{"id":[1000000,79566],"value":"\n"},{"id":[1000000,91515],"value":"    "},{"id":[1000000,79567],"span":9},{"id":[1000000,79576],"value":"\\mathit{ctx}(\\mathsf{next}(k)) = \\mathit{next}"},{"id":[1000000,91543],"value":" "},{"id":[1000000,91519],"span":5},{"id":[1000000,91524],"value":"\\end{matrix}"},{"id":[1000000,91536],"span":1},{"id":[1000000,79622],"value":"$}\n\\AxiomC{$"},{"id":[1000000,91544],"value":"\\begin{matrix}\n    "},{"id":[1000000,79665],"value":"\\mathit{ctx},\\, \\mathsf{"},{"id":[1000000,91565],"value":"clear"},{"id":[1000000,91572],"value":"Elem"},{"id":[1000000,91570],"span":1},{"id":[1000000,79689],"span":2},{"id":[1000000,79691],"value":"}("},{"id":[1000000,79693],"span":13},{"id":[1000000,79706],"value":"\\mathit{deps},"},{"id":[1000000,91589],"value":" k) \\\\"},{"id":[1000000,79720],"value":"\n    "},{"id":[1000000,79725],"span":34},{"id":[1000000,79987],"span":13},{"id":[1000000,79759],"span":21},{"id":[1000000,79782],"span":4},{"id":[1000000,79786],"value":"\\evalto \\mathit{ctx}'"},{"id":[1000000,91666],"value":", \\mathit{pres}_1 "},{"id":[1000000,91686],"value":"\\end{matrix}"},{"id":[1000000,91684],"span":1},{"id":[1000000,79807],"value":"$}"},{"id":[1000000,91698],"value":"\n\\AxiomC{$\\begin{matrix}\n    \\"},{"id":[1000000,91732],"value":"mathit{ctx}',\\, \\mathsf{clearList}(\\mathit{deps}, \\mathit{next}) \\\\\n    \\evalto \\mathit{ctx}'', \\mathit{pres}_2 \\end{matrix}$}"},{"id":[1000000,91728],"span":2},{"id":[1000000,79809],"value":"\n\\LeftLabel{"},{"id":[1000000,79834],"value":"$"},{"id":[1000000,79821],"value":"\\textsc{C"},{"id":[1000000,79835],"value":"lear-"},{"id":[1000000,91239],"value":"List"},{"id":[1000000,79840],"span":5},{"id":[1000000,79845],"value":"}_"},{"id":[1000000,91233],"value":"2"},{"id":[1000000,79847],"span":1},{"id":[1000000,79848],"value":"$}\n\\"},{"id":[1000000,80127],"value":"Tri"},{"id":[1000000,79852],"span":6},{"id":[1000000,79858],"value":"naryInfC{$\\mathit{ctx},\\, \\mathsf{"},{"id":[1000000,91245],"value":"clearList"},{"id":[1000000,79892],"span":2},{"id":[1000000,79894],"value":"}("},{"id":[1000000,79896],"span":13},{"id":[1000000,79909],"value":"\\mathit{deps},"},{"id":[1000000,91267],"value":" k) \\evalto"},{"id":[1000000,79923],"span":28},{"id":[1000000,79953],"span":33},{"id":[1000000,80000],"span":10},{"id":[1000000,80012],"value":"\n    \\mathit{ctx}'"},{"id":[1000000,91400],"value":"',"},{"id":[1000000,91858],"value":"\\,"},{"id":[1000000,91402],"value":" \\mathit{pres}_1 \\,\\cup\\, \\mathit{pres}_2"},{"id":[1000000,80030],"span":9},{"id":[1000000,80040],"span":12},{"id":[1000000,80072],"span":31},{"id":[1000000,80103],"value":"$}\n\\end{prooftree}"},{"id":[1000000,80154],"value":"\n\n"},{"id":[1000000,80156],"span":119},{"id":[1000000,80277],"span":31},{"id":[1000000,80310],"span":323},{"id":[1000000,80637],"span":11},{"id":[1000000,80650],"span":22},{"id":[1000000,80674],"span":12},{"id":[1000000,80686],"value":"\\begin{prooftree}"},{"id":[1000000,80719],"value":"\n\\AxiomC{$k = \\math"},{"id":[1000000,80742],"value":"sf{tail}$}\n\\LeftLabel{$\\textsc{Clear-"},{"id":[1000000,92383],"value":"List"},{"id":[1000000,80779],"span":5},{"id":[1000000,80784],"value":"}_3$}\n\\UnaryInfC{$\\mathit{ctx},\\, \\mathsf{"},{"id":[1000000,92389],"value":"clearList"},{"id":[1000000,80826],"span":2},{"id":[1000000,80828],"value":"}("},{"id":[1000000,80830],"span":13},{"id":[1000000,80843],"value":"\\mathit{deps},"},{"id":[1000000,92411],"value":" k) \\evalto \\mathit{ctx},\\, \\{\\}$}"},{"id":[1000000,80857],"span":86},{"id":[1000000,80943],"value":"\n\\end{prooftree}"},{"id":[1000000,80738],"span":2},{"id":[1000000,80703],"span":16},{"id":[1000000,80672],"span":1},{"id":[1000000,80648],"span":1},{"id":[1000000,80633],"span":2},{"id":[1000000,80308],"span":1},{"id":[1000000,80275],"span":1},{"id":[1000000,80052],"span":7},{"id":[1000000,80063],"span":1},{"id":[1000000,80059],"span":2},{"id":[1000000,80010],"span":1},{"id":[1000000,79951],"span":1},{"id":[1000000,79830],"span":2},{"id":[1000000,79780],"span":1},{"id":[1000000,79533],"span":5},{"id":[1000000,79520],"span":1},{"id":[1000000,79210],"span":1},{"id":[1000000,79127],"span":1},{"id":[1000000,78479],"span":1},{"id":[1000000,78456],"span":1},{"id":[1000000,35211],"span":2},{"id":[1000000,27009],"span":1},{"id":[1000000,26862],"span":15},{"id":[1000000,26806],"span":1},{"id":[1000000,26759],"span":1},{"id":[1000000,26567],"span":6},{"id":[1000000,26390],"value":"\n\\capt"},{"id":[1000000,26398],"value":"ion{Rules for "},{"id":[1000000,154903],"value":"applying "},{"id":[1000000,92531],"value":"delet"},{"id":[1000000,154912],"value":"ion operations to "},{"id":[1000000,154951],"value":"update the"},{"id":[1000000,154961],"span":1},{"id":[1000000,154930],"span":7},{"id":[1000000,154937],"value":" state"},{"id":[1000000,154963],"value":" of a replica"},{"id":[1000000,154943],"value":"."},{"id":[1000000,92536],"span":8},{"id":[1000000,84916],"span":8},{"id":[1000000,92544],"span":6},{"id":[1000000,84924],"value":"}\\l"},{"id":[1000000,75038],"span":50},{"id":[1000000,26412],"span":25},{"id":[1000000,75088],"span":2},{"id":[1000000,75090],"value":"abel{fig:"},{"id":[1000000,84936],"value":"clear"},{"id":[1000000,75099],"span":9},{"id":[1000000,75108],"value":"-rules}"},{"id":[1000000,26437],"span":22},{"id":[1000000,26396],"span":1},{"id":[1000000,26376],"value":"\n\\end{"},{"id":[1000000,84709],"span":8},{"id":[1000000,26382],"value":"figure"},{"id":[1000000,85086],"value":"*"},{"id":[1000000,84862],"span":1},{"id":[1000000,26388],"span":1},{"id":[1000000,26389],"value":"}"},{"id":[1000000,3225],"value":"\n"},{"id":[1000000,62572],"value":"\n"},{"id":[1000000,99766],"value":"Assignment and deletion operations require that prior state (the value being overwritten or deleted) is cleared"},{"id":[1000000,99879],"value":", while also ensuring that concurre"},{"id":[1000000,99916],"value":"nt modifications are not lost"},{"id":[1000000,155358],"value":", as illustrated in Figure~\\ref{fig:map-remove}"},{"id":[1000000,99945],"value":". The rules to handle this clearing process are given in Figure~\\ref{fig:clear-rules}. Intuitively, the effect of clearing something is to reset it to its empty state by undoing any operations that causally pre"},{"id":[1000000,100157],"value":"cede the current operation, while leaving "},{"id":[1000000,100224],"value":"the effect of "},{"id":[1000000,100199],"value":"any concurrent operations"},{"id":[1000000,100238],"value":" untouched.\n\n"},{"id":[1000000,100399],"value":"A "},{"id":[1000000,100251],"span":39},{"id":[1000000,100290],"value":"\\textsf{delete}"},{"id":[1000000,100309],"value":" operation"},{"id":[1000000,100319],"span":1},{"id":[1000000,100320],"value":" "},{"id":[1000000,100321],"span":7},{"id":[1000000,100328],"value":"can be used to delete either "},{"id":[1000000,100402],"value":"an element from an ordered list or a key from a map, depending on what the cursor refers to. The \\textsc{Delete} rule shows how this operation is evaluated"},{"id":[1000000,100557],"span":1},{"id":[1000000,100558],"value":" by delegating to \\text"},{"id":[1000000,100945],"value":"sc"},{"id":[1000000,100581],"span":2},{"id":[1000000,100583],"value":"{"},{"id":[1000000,100949],"value":"C"},{"id":[1000000,100584],"span":1},{"id":[1000000,100585],"value":"lear"},{"id":[1000000,100950],"value":"-"},{"id":[1000000,100589],"value":"Elem}."},{"id":[1000000,100951],"value":" In turn,"},{"id":[1000000,100595],"value":" \\textsc{Clear-Elem} uses \\textsc{Clear-Any} to "},{"id":[1000000,100671],"value":"clear out any data with a given key"},{"id":[1000000,100708],"value":", regardless of whether it is of type \\textsf{mapT}, \\textsf{listT} or \\textsf{regT}, and also updates the presence set to include any nested operation IDs, but exclude any operations in $\\"},{"id":[1000000,100915],"value":"math"},{"id":[1000000,100897],"span":4},{"id":[1000000,100901],"value":"it{deps}$."},{"id":[1000000,100706],"span":1},{"id":[1000000,100643],"span":14},{"id":[1000000,100155],"span":1},{"id":[1000000,99914],"span":1},{"id":[1000000,99877],"span":1},{"id":[1000000,77801],"span":39},{"id":[1000000,77976],"span":8},{"id":[1000000,78088],"span":55},{"id":[1000000,77984],"span":24},{"id":[1000000,77856],"span":83},{"id":[1000000,78063],"span":1},{"id":[1000000,77939],"span":27},{"id":[1000000,78058],"span":5},{"id":[1000000,77967],"span":9},{"id":[1000000,77966],"span":1},{"id":[1000000,78143],"span":42},{"id":[1000000,78189],"span":11},{"id":[1000000,80975],"span":7},{"id":[1000000,80984],"span":91},{"id":[1000000,80982],"span":1},{"id":[1000000,78185],"span":2},{"id":[1000000,78008],"span":49},{"id":[1000000,78200],"span":7},{"id":[1000000,78219],"span":10},{"id":[1000000,78207],"span":10},{"id":[1000000,78230],"span":72},{"id":[1000000,78304],"span":9},{"id":[1000000,78302],"span":1},{"id":[1000000,78217],"span":1},{"id":[1000000,77840],"span":16},{"id":[1000000,62573],"value":"\n"},{"id":[1000000,100960],"value":"\n"},{"id":[1000000,100962],"value":"The premises of \\textsc{Clear-Any} are satisfied by $\\textsc{Clear-Map}_1$, $\\textsc{Clear-List}_1$ and \\textsc{Clear-Reg} if the respective key appears in $\\mathit{ctx}$, or by \\textsc{Clear-None} (which does nothing) if the key is absent.\n\n"},{"id":[1000000,101232],"value":"As defined by the \\textsc{Assign} rule, a register maintains a mapping from operation IDs to values."},{"id":[1000000,101231],"value":" "},{"id":[1000000,101204],"value":"\\textsc{Clear-Reg} "},{"id":[1000000,101332],"value":"updates a register by "},{"id":[1000000,101223],"value":"remov"},{"id":[1000000,101357],"value":"ing all operation IDs that appear in $\\"},{"id":[1000000,101555],"value":"math"},{"id":[1000000,101396],"span":4},{"id":[1000000,101400],"value":"it{deps}$"},{"id":[1000000,101409],"span":1},{"id":[1000000,101410],"value":" "},{"id":[1000000,101504],"value":"("},{"id":[1000000,101411],"value":"i.e."},{"id":[1000000,258505],"value":","},{"id":[1000000,101415],"value":" which "},{"id":[1000000,101422],"span":4},{"id":[1000000,101426],"value":"causally p"},{"id":[1000000,101440],"value":"recede the clearing operation"},{"id":[1000000,101505],"value":")"},{"id":[1000000,101469],"value":", but retaining all operation IDs "},{"id":[1000000,101506],"value":"that do not appear in $\\"},{"id":[1000000,101538],"value":"mathit{deps}$"},{"id":[1000000,101559],"value":" (from assignment operations that are concurrent with the clearing operation).\n\nClearing maps and lists takes a similar approach: each element of the map or list is recursively cleared using "},{"id":[1000000,101752],"value":"\\textsf{clearElem}, and presence sets are updated to exclude $\\mathit{deps}$. Thus, any list elements or map entries whose modifications causally precede the clearing operation will end up with empty presence sets, and thus be considered deleted. Any map or list elements containing operations that are concurrent with the clearing operation "},{"id":[1000000,102133],"value":"are"},{"id":[1000000,102094],"span":4},{"id":[1000000,102098],"value":" preserve"},{"id":[1000000,102127],"value":"d."},{"id":[1000000,142235],"value":"\n"},{"id":[1000000,155421],"value":"\n\\subsection{Convergence}\\label{sec:convergence}\n\n"},{"id":[1000000,155506],"value":"As outlined in Section~\\ref{sec:intro-replication}, we require that all replicas automatically converge towards the same state"},{"id":[1000000,155640],"value":" -- a key requirement of a CRDT"},{"id":[1000000,155632],"value":". "},{"id":[1000000,155671],"value":"We now formalize this notion, and show that the rules in Figures~\\ref{fig:expr-rules} to"},{"id":[1000000,155761],"value":"~\\ref{fig:clear-rules} satisfy this requirement."},{"id":[1000000,155963],"value":"\n\n\\begin{definition}"},{"id":[1000000,168064],"value":"[valid execution]"},{"id":[1000000,172425],"value":"\\label{def:valid-exec}"},{"id":[1000000,156000],"value":"\nA \\emph{valid execution} is a "},{"id":[1000000,156035],"value":"set of operations generated by a set of replicas $\\{p_1, \\dots, p_k\\}"},{"id":[1000000,225420],"value":"$"},{"id":[1000000,156104],"span":22},{"id":[1000000,156126],"value":", ea"},{"id":[1000000,156132],"value":"ch reducing a sequence of commands $\\langle \\mathit{cmd}_1 \\mathbin{;} \\dots \\mathbin{;"},{"id":[1000000,156221],"value":"} \\mathit{cmd}_n \\rangle$"},{"id":[1000000,156247],"value":" without getting stuck"},{"id":[1000000,156246],"value":"."},{"id":[1000000,156219],"span":1},{"id":[1000000,156130],"span":1},{"id":[1000000,156031],"span":2},{"id":[1000000,155983],"value":"\n\\end{definition}"},{"id":[1000000,156269],"value":"\n\n"},{"id":[1000000,156311],"value":"A reduction gets stuck if "},{"id":[1000000,158361],"value":"there is no application of rules in which "},{"id":[1000000,156379],"value":"a"},{"id":[1000000,158403],"value":"ll"},{"id":[1000000,156380],"value":" premise"},{"id":[1000000,158405],"value":"s"},{"id":[1000000,156388],"value":" "},{"id":[1000000,158448],"value":"are "},{"id":[1000000,156389],"span":42},{"id":[1000000,156431],"value":"satisfied. For example, the "},{"id":[1000000,156466],"value":"$"},{"id":[1000000,156459],"value":"\\textsc"},{"id":[1000000,156467],"value":"{"},{"id":[1000000,257980],"value":"Idx"},{"id":[1000000,156468],"span":4},{"id":[1000000,156472],"value":"}_{"},{"id":[1000000,156475],"span":2},{"id":[1000000,156477],"value":"3"},{"id":[1000000,258021],"value":",4"},{"id":[1000000,156478],"value":"}$ rules in Figure~\\ref{fig:expr-rules} get stuck if "},{"id":[1000000,257990],"value":"$"},{"id":[1000000,258000],"value":"\\"},{"id":[1000000,258015],"value":"math"},{"id":[1000000,258009],"span":3},{"id":[1000000,258001],"span":4},{"id":[1000000,156531],"span":5},{"id":[1000000,156536],"value":"sf{"},{"id":[1000000,257987],"value":"idx"},{"id":[1000000,156539],"span":4},{"id":[1000000,156543],"value":"}"},{"id":[1000000,257991],"value":"(n)$"},{"id":[1000000,156544],"value":" tries to iterate past the end of a list"},{"id":[1000000,258113],"value":", which would happen if"},{"id":[1000000,258030],"span":8},{"id":[1000000,258038],"value":" $n$ is greater than the number of non-deleted elements in the list"},{"id":[1000000,156724],"value":"; i"},{"id":[1000000,156584],"span":1},{"id":[1000000,156663],"span":3},{"id":[1000000,156666],"value":"n a real implementation this would be a runtime error."},{"id":[1000000,156727],"span":1},{"id":[1000000,156585],"value":" By constraining "},{"id":[1000000,156608],"value":"valid executions to those that do not get stuck, we ens"},{"id":[1000000,156729],"value":"ure that operations only refer to list elements that actually exist."},{"id":[1000000,157219],"value":"\n\nNote that it is valid for an execution to never perform any network communication, either because it never "},{"id":[1000000,157340],"value":"invokes the \\textsf{yield} command, or because the nondeterministic execution of \\textsf{yield} never applies the \\textsc{Recv} rule. "},{"id":[1000000,157538],"value":"W"},{"id":[1000000,157474],"span":7},{"id":[1000000,157495],"value":"e "},{"id":[1000000,157548],"value":"need only a replica's local state to determine"},{"id":[1000000,157497],"span":9},{"id":[1000000,157506],"value":" whether reducti"},{"id":[1000000,157528],"value":"on "},{"id":[1000000,157594],"value":"gets stuck."},{"id":[1000000,157522],"span":3},{"id":[1000000,157481],"span":7},{"id":[1000000,157328],"span":6},{"id":[1000000,157217],"span":1},{"id":[1000000,156797],"value":"\n\n\\begin{definition}"},{"id":[1000000,168055],"value":"[history]"},{"id":[1000000,172406],"value":"\\label{def:history}"},{"id":[1000000,156817],"value":"\nA \\emph{history} "},{"id":[1000000,156852],"value":"is "},{"id":[1000000,156875],"value":"a"},{"id":[1000000,156855],"span":3},{"id":[1000000,156858],"value":" sequence of o"},{"id":[1000000,156876],"value":"perations in the order it was applied at one particular replica $p$"},{"id":[1000000,156944],"span":1},{"id":[1000000,156945],"value":" by application of the rules \\textsc{Apply-Local} and \\textsc{Apply-Remote}"},{"id":[1000000,156943],"value":"."},{"id":[1000000,156835],"value":"\n\\end{definition}"},{"id":[1000000,157020],"value":"\n\n"},{"id":[1000000,158011],"value":"Since the evaluation rules sequenti"},{"id":[1000000,158048],"value":"ally apply one operation at a time"},{"id":[1000000,160252],"value":" at a given replica"},{"id":[1000000,158082],"value":", the order is well-defined. "},{"id":[1000000,158046],"span":1},{"id":[1000000,157024],"value":"Even if two replicas"},{"id":[1000000,157079],"value":" $p$ and $q$"},{"id":[1000000,157044],"value":" applied the same set of operations"},{"id":[1000000,157091],"value":", i.e."},{"id":[1000000,157214],"value":" if"},{"id":[1000000,157097],"value":" $A_p(\\mathsf{ops}) = A_q(\\mathsf{ops})$, they may have applied "},{"id":[1000000,157200],"value":"any concurrent"},{"id":[1000000,157161],"span":3},{"id":[1000000,157164],"value":" operations in a different order."},{"id":[1000000,157771],"value":" "},{"id":[1000000,157772],"span":4},{"id":[1000000,157784],"span":93},{"id":[1000000,157776],"span":4},{"id":[1000000,157676],"span":1},{"id":[1000000,157677],"value":"Due to the premise $\\mathit{op."},{"id":[1000000,157712],"value":"deps} \\subseteq A_p(\\mathsf{ops})$ in \\textsc{Apply-Remote}"},{"id":[1000000,157948],"value":", "},{"id":[1000000,157999],"span":4},{"id":[1000000,158003],"value":"histor"},{"id":[1000000,160277],"value":"ies"},{"id":[1000000,158009],"span":1},{"id":[1000000,157950],"span":9},{"id":[1000000,157959],"value":" "},{"id":[1000000,160273],"value":"are"},{"id":[1000000,157960],"span":2},{"id":[1000000,157962],"value":" consistent with causality"},{"id":[1000000,158453],"value":":"},{"id":[1000000,157988],"value":" "},{"id":[1000000,157989],"span":1},{"id":[1000000,158263],"value":"if an"},{"id":[1000000,158209],"span":5},{"id":[1000000,158214],"value":" operatio"},{"id":[1000000,158268],"value":"n has causal dependencies, it appears at some point after those dependencies in the history"},{"id":[1000000,158359],"span":1},{"id":[1000000,158360],"value":"."},{"id":[1000000,159480],"value":"\n\n\\begin{definition}"},{"id":[1000000,168039],"value":"[document state]"},{"id":[1000000,172385],"value":"\\label{def:doc-state}"},{"id":[1000000,159517],"value":"\nThe \\"},{"id":[1000000,159525],"value":"emph{document state} of a replica $p$ is the subtree of $A_p$ containing the document"},{"id":[1000000,159612],"value":": that is, $A_p(\\mathsf{mapT}(\\mathsf{doc})"},{"id":[1000000,160249],"value":")"},{"id":[1000000,159655],"value":"$ or $A_p(\\mathsf{listT}(\\mathsf{doc}"},{"id":[1000000,160250],"value":")"},{"id":[1000000,159692],"value":")$ or $A_p(\\mathsf{regT}(\\mathsf{doc}"},{"id":[1000000,160251],"value":")"},{"id":[1000000,159729],"value":")$, wh"},{"id":[1000000,159737],"value":"ichever is defined."},{"id":[1000000,159735],"span":1},{"id":[1000000,159610],"span":1},{"id":[1000000,159523],"span":1},{"id":[1000000,159500],"value":"\n\\end{definition}"},{"id":[1000000,159756],"value":"\n\n"},{"id":[1000000,159983],"span":32},{"id":[1000000,159978],"value":"$A_p$"},{"id":[1000000,160015],"value":" contains"},{"id":[1000000,159758],"span":31},{"id":[1000000,159789],"value":" variables defined with \\"},{"id":[1000000,159822],"value":"textsf{let}, "},{"id":[1000000,160034],"value":"which"},{"id":[1000000,159835],"span":10},{"id":[1000000,159845],"value":" are local to one replica, and not part of the"},{"id":[1000000,159917],"value":" replicated"},{"id":[1000000,159891],"value":" state"},{"id":[1000000,159897],"span":19},{"id":[1000000,159916],"value":"."},{"id":[1000000,160039],"value":" T"},{"id":[1000000,160073],"value":"he definition of document state excludes these variables."},{"id":[1000000,159814],"span":4},{"id":[1000000,158455],"value":"\n\n\\begin{"},{"id":[1000000,158464],"span":2},{"id":[1000000,160152],"span":2},{"id":[1000000,160154],"value":"convergence"},{"id":[1000000,160206],"value":"-thm"},{"id":[1000000,158466],"span":5},{"id":[1000000,160143],"span":2},{"id":[1000000,158471],"span":1},{"id":[1000000,158472],"value":"}"},{"id":[1000000,158488],"value":"\nFor any two replicas $p$ and $q$ that participated in a valid execution, if $A_p(\\mathsf{ops}) = "},{"id":[1000000,158588],"value":"A_q(\\mathsf{ops})$, then $p$ and $q$ have the same document state."},{"id":[1000000,158586],"span":1},{"id":[1000000,158473],"value":"\n\\end{"},{"id":[1000000,158479],"span":2},{"id":[1000000,160181],"span":2},{"id":[1000000,160183],"value":"convergence-thm"},{"id":[1000000,158481],"span":5},{"id":[1000000,160132],"span":11},{"id":[1000000,158486],"span":1},{"id":[1000000,158487],"value":"}"},{"id":[1000000,158654],"value":"\n\nThis theorem is proved in the appendix. It formalizes the safety property of convergence: if two replicas have processed the same set of operations, possibly in a different order, then they are in the same state. I"},{"id":[1000000,158951],"value":"n combination"},{"id":[1000000,158870],"span":21},{"id":[1000000,158891],"value":" with a liveness property, namely that "},{"id":[1000000,158964],"value":"every replica eventually processes all operations, we obtain the desired notion of convergence: all replicas eventually end up in the same state.\n\nThe liveness property depends on assumptions of replicas invoking \\"},{"id":[1000000,159182],"value":"textsf{yield} sufficiently often, and all nondeterministic rules for "},{"id":[1000000,159257],"value":"\\textsf{yield} being chosen fairly. We will not formalize the liveness property in this paper, but assert that it "},{"id":[1000000,159456],"span":8},{"id":[1000000,159371],"value":"can"},{"id":[1000000,159472],"value":" usually"},{"id":[1000000,159374],"value":" be provided in practice, as network interruptions are usually of finite duration."},{"id":[1000000,159251],"span":3},{"id":[1000000,159178],"span":2},{"id":[1000000,158223],"span":9},{"id":[1000000,157708],"span":2},{"id":[1000000,157605],"span":71},{"id":[1000000,157022],"span":1},{"id":[1000000,156602],"span":3},{"id":[1000000,156337],"span":4},{"id":[1000000,156347],"span":14},{"id":[1000000,156341],"span":3},{"id":[1000000,156271],"span":20},{"id":[1000000,155759],"span":1},{"id":[1000000,155634],"span":3},{"id":[1000000,142236],"value":"\n\n\\section{Conclusion"},{"id":[1000000,162176],"value":"s"},{"id":[1000000,158232],"value":" and "},{"id":[1000000,252363],"value":"F"},{"id":[1000000,158237],"span":1},{"id":[1000000,158238],"value":"urther "},{"id":[1000000,252365],"value":"W"},{"id":[1000000,158245],"span":1},{"id":[1000000,158246],"value":"ork"},{"id":[1000000,142257],"value":"}\n"},{"id":[1000000,238397],"span":11},{"id":[1000000,142259],"value":"\n"},{"id":[1000000,160300],"value":"In this paper we demonstrated how to compose "},{"id":[1000000,160347],"value":"CRDTs for ordered lists, maps and registers into a compound CRDT with a JSON data model. It supports arbitrarily nested lists and maps, and it "},{"id":[1000000,160492],"value":"allows replicas to make arbitrary changes to the data without"},{"id":[1000000,160589],"value":" "},{"id":[1000000,162608],"value":"waiting for"},{"id":[1000000,160590],"span":3},{"id":[1000000,160611],"span":2},{"id":[1000000,160593],"span":1},{"id":[1000000,160608],"span":1},{"id":[1000000,160607],"span":1},{"id":[1000000,160604],"span":3},{"id":[1000000,160594],"span":5},{"id":[1000000,160553],"span":1},{"id":[1000000,160573],"span":3},{"id":[1000000,160576],"value":" network "},{"id":[1000000,160554],"value":"communicati"},{"id":[1000000,160587],"value":"on"},{"id":[1000000,160619],"value":". Replicas asynchronously "},{"id":[1000000,160705],"value":"send"},{"id":[1000000,160645],"span":11},{"id":[1000000,160656],"value":" "},{"id":[1000000,160685],"value":"mutations"},{"id":[1000000,160709],"value":" to other replicas"},{"id":[1000000,160663],"span":5},{"id":[1000000,160668],"value":" in the form"},{"id":[1000000,160727],"value":" of operations. Concurrent operations are commutative, which ensures that replicas converge towards the same state without requiring"},{"id":[1000000,160859],"span":4},{"id":[1000000,160863],"value":" application-specific con"},{"id":[1000000,160892],"value":"flict resolution logic.\n\nThis work focused on the formal semantics of the JSON CRDT, represented as a mathematical model. We "},{"id":[1000000,258508],"value":"are also working on a practical implementation of the algorithm, and will report on its performance characteristics in follow-on work."},{"id":[1000000,258506],"value":"\n\n"},{"id":[1000000,161017],"span":99},{"id":[1000000,161153],"span":14},{"id":[1000000,161116],"span":21},{"id":[1000000,161167],"span":102},{"id":[1000000,161501],"span":16},{"id":[1000000,161269],"span":38},{"id":[1000000,161517],"span":1},{"id":[1000000,224794],"span":8},{"id":[1000000,224862],"span":60},{"id":[1000000,224924],"span":37},{"id":[1000000,224922],"span":1},{"id":[1000000,224802],"span":1},{"id":[1000000,224805],"span":28},{"id":[1000000,224803],"span":1},{"id":[1000000,161518],"span":156},{"id":[1000000,161685],"span":10},{"id":[1000000,161679],"span":3},{"id":[1000000,161674],"span":5},{"id":[1000000,161695],"span":37},{"id":[1000000,224961],"span":1},{"id":[1000000,161307],"span":2},{"id":[1000000,161793],"value":"Our principle of not losing input due to "},{"id":[1000000,161836],"value":"concurrent modifications appears "},{"id":[1000000,259195],"value":"at first glance to be "},{"id":[1000000,161869],"value":"reasonable, but as illustrated in "},{"id":[1000000,180964],"span":2},{"id":[1000000,161903],"value":"Figure~\\ref{fig:todo-item}, "},{"id":[1000000,161933],"value":"it leads to "},{"id":[1000000,161967],"value":"merged document states that may be surprising to application programmers who are more familiar with sequential programs."},{"id":[1000000,161957],"span":5},{"id":[1000000,161834],"span":1},{"id":[1000000,161778],"span":14},{"id":[1000000,161792],"value":" "},{"id":[1000000,161309],"value":"Further work will be needed to"},{"id":[1000000,180701],"value":" understand the expectations of application programmers"},{"id":[1000000,259217],"value":","},{"id":[1000000,180756],"value":" and to design data structures that are minimal"},{"id":[1000000,180807],"value":"ly surprising under concurrent modification"},{"id":[1000000,180803],"span":2},{"id":[1000000,161339],"span":114},{"id":[1000000,161453],"value":"."},{"id":[1000000,224962],"value":" It "},{"id":[1000000,225154],"value":"may t"},{"id":[1000000,225161],"value":"urn out"},{"id":[1000000,225159],"span":1},{"id":[1000000,224966],"span":11},{"id":[1000000,224977],"value":" that a schema language "},{"id":[1000000,225023],"value":"will "},{"id":[1000000,225172],"value":"be "},{"id":[1000000,225256],"value":"required "},{"id":[1000000,225299],"value":"to support more"},{"id":[1000000,225265],"span":8},{"id":[1000000,225273],"value":" "},{"id":[1000000,225175],"span":6},{"id":[1000000,225183],"span":13},{"id":[1000000,225181],"span":1},{"id":[1000000,225112],"span":11},{"id":[1000000,225196],"span":5},{"id":[1000000,225215],"span":5},{"id":[1000000,225201],"span":7},{"id":[1000000,225123],"span":1},{"id":[1000000,225124],"value":"comple"},{"id":[1000000,225138],"value":"x"},{"id":[1000000,225278],"value":" applications"},{"id":[1000000,225139],"span":3},{"id":[1000000,225142],"value":"."},{"id":[1000000,225743],"value":" A schema language could also support semantic annotations, such as indicating that a number should be treated as a counter rather than a register."},{"id":[1000000,225130],"span":4},{"id":[1000000,225028],"span":12},{"id":[1000000,225050],"span":3},{"id":[1000000,225061],"span":18},{"id":[1000000,225053],"span":4},{"id":[1000000,225040],"span":2},{"id":[1000000,225044],"span":2},{"id":[1000000,225042],"span":1},{"id":[1000000,225001],"span":11},{"id":[1000000,162175],"value":"\n"},{"id":[1000000,161495],"span":1},{"id":[1000000,161732],"span":46},{"id":[1000000,161454],"span":41},{"id":[1000000,160657],"span":3},{"id":[1000000,160565],"span":8},{"id":[1000000,160490],"span":1},{"id":[1000000,160345],"span":1},{"id":[1000000,142260],"span":16},{"id":[1000000,142276],"value":"\n"},{"id":[1000000,162177],"value":"T"},{"id":[1000000,162228],"value":"he CRDT defined in this paper supports insertion, deletion and assignment operations. In addition to these, it would be useful to support a \\emph{move} operation (to change the order of elements in an ordered list, or to move a subtree from one position in a document to another) and an \\emph{undo} operation."},{"id":[1000000,178260],"value":" Moreover, garbage collection (tombstone removal) is required in order to prevent unbounded growth of the data"},{"id":[1000000,259734],"value":" "},{"id":[1000000,178370],"value":"structure."},{"id":[1000000,162537],"value":" We plan to address these missing features in future work."},{"id":[1000000,162178],"span":15},{"id":[1000000,162201],"span":6},{"id":[1000000,162193],"span":4},{"id":[1000000,142277],"value":"\n\n\\section*{Acknowledgements}\n\nThis research was supported by a grant from The Boeing Company."},{"id":[1000000,180360],"value":" Thank you to "},{"id":[1000000,180425],"value":"Dominic Orchard"},{"id":[1000000,231261],"value":","},{"id":[1000000,180440],"span":4},{"id":[1000000,180444],"value":" "},{"id":[1000000,180374],"value":"Diana Vasile"},{"id":[1000000,231262],"value":", and the anonymous reviewers"},{"id":[1000000,180386],"value":" for comments "},{"id":[1000000,231304],"value":"that improved"},{"id":[1000000,180400],"span":13},{"id":[1000000,180413],"value":" this paper."},{"id":[1000000,142371],"value":"\n"},{"id":[1000000,142415],"value":"\n\\bibliographystyle{IEEEtran}\n\\bibliography{references}{}"},{"id":[1000000,229092],"span":1},{"id":[1000000,259218],"value":"\n\\vfill"},{"id":[1000000,259226],"value":"\n"},{"id":[1000000,229093],"value":"\n\\begin{IEEEbiography}"},{"id":[1000000,229233],"value":"[{\\includegraphics["},{"id":[1000000,229266],"value":"width=1in"},{"id":[1000000,229252],"value":"]{mk428.jpg}}]"},{"id":[1000000,229115],"value":"{Martin Kleppmann}\n"},{"id":[1000000,229550],"value":"is a Research Associate "},{"id":[1000000,229578],"value":"in the Computer Laboratory at the University of Cambridge. "},{"id":[1000000,229693],"value":"H"},{"id":[1000000,229663],"span":5},{"id":[1000000,229668],"value":"is current research "},{"id":[1000000,229694],"value":"project, TRVE Data,"},{"id":[1000000,239393],"value":" is"},{"id":[1000000,229713],"span":3},{"id":[1000000,229716],"value":" work"},{"id":[1000000,239397],"value":"ing"},{"id":[1000000,229802],"span":1},{"id":[1000000,229721],"span":3},{"id":[1000000,229724],"value":" towards better security and privacy in "},{"id":[1000000,229782],"span":14},{"id":[1000000,229764],"value":"cloud applications"},{"id":[1000000,229803],"value":" by"},{"id":[1000000,229880],"span":13},{"id":[1000000,229806],"value":" applying end-to-end encryption "},{"id":[1000000,229852],"value":"to collaboratively editable "},{"id":[1000000,229906],"value":"application data. H"},{"id":[1000000,229951],"value":"is book \\emph{Designing Data-Intensive Applications} was published by O'Reilly Media in 20"},{"id":[1000000,230047],"value":"1"},{"id":[1000000,230041],"span":1},{"id":[1000000,230042],"value":"7"},{"id":[1000000,230045],"value":"."},{"id":[1000000,230048],"value":" Previously"},{"id":[1000000,230061],"value":", "},{"id":[1000000,230065],"value":"he work"},{"id":[1000000,230074],"value":"ed as a software engineer and entrepreneur at several internet companies"},{"id":[1000000,239400],"value":", including Rapportive and LinkedIn"},{"id":[1000000,230146],"value":"."},{"id":[1000000,230072],"span":1},{"id":[1000000,230063],"span":1},{"id":[1000000,230059],"span":1},{"id":[1000000,230043],"span":1},{"id":[1000000,229925],"span":13},{"id":[1000000,229661],"span":1},{"id":[1000000,229637],"span":12},{"id":[1000000,229574],"span":2},{"id":[1000000,229134],"span":4},{"id":[1000000,229138],"value":"\n\\end{IEEEbiography}\n\n\\begin{IEEEbiography}"},{"id":[1000000,229275],"value":"["},{"id":[1000000,229277],"value":"{"},{"id":[1000000,229279],"value":"\\includegraphics[width=1in]{arb33.jpg"},{"id":[1000000,229318],"value":"}"},{"id":[1000000,229316],"span":1},{"id":[1000000,229278],"value":"}"},{"id":[1000000,229276],"value":"]"},{"id":[1000000,229181],"value":"{Alastair R."},{"id":[1000000,229195],"span":1},{"id":[1000000,229196],"value":" Beresford}"},{"id":[1000000,229208],"value":"\n"},{"id":[1000000,229323],"value":"is a "},{"id":[1000000,229332],"value":"Senior Lecturer in the Computer Laboratory at the University of Cambridge."},{"id":[1000000,229406],"span":55},{"id":[1000000,238941],"span":3},{"id":[1000000,238948],"span":3},{"id":[1000000,238944],"span":2},{"id":[1000000,238823],"span":60},{"id":[1000000,238885],"span":15},{"id":[1000000,238906],"span":35},{"id":[1000000,238900],"span":3},{"id":[1000000,238883],"span":1},{"id":[1000000,229461],"span":70},{"id":[1000000,229531],"value":" "},{"id":[1000000,238473],"value":"His"},{"id":[1000000,238476],"span":8},{"id":[1000000,238484],"value":" research "},{"id":[1000000,238554],"value":"work exp"},{"id":[1000000,238568],"value":"lores the security and privacy of large-scale distributed systems, with "},{"id":[1000000,238642],"value":"a particular focus on "},{"id":[1000000,238672],"value":"net"},{"id":[1000000,238683],"value":"worked mo"},{"id":[1000000,238696],"value":"bile devices such as smartphones"},{"id":[1000000,238730],"value":", tablets and la"},{"id":[1000000,238748],"value":"ptops."},{"id":[1000000,239131],"value":" He looks at th"},{"id":[1000000,239202],"value":"e security and privacy of the devices themselves, as well as the se"},{"id":[1000000,239275],"value":"curity and pr"},{"id":[1000000,239292],"value":"ivacy problems induced by the interaction between mobile devices and clou"},{"id":[1000000,239367],"value":"d-based Internet services."},{"id":[1000000,239365],"span":1},{"id":[1000000,239288],"span":2},{"id":[1000000,239269],"span":3},{"id":[1000000,239146],"span":28},{"id":[1000000,238746],"span":1},{"id":[1000000,238728],"span":1},{"id":[1000000,238692],"span":2},{"id":[1000000,238675],"span":4},{"id":[1000000,238664],"span":4},{"id":[1000000,238640],"span":1},{"id":[1000000,238562],"span":3},{"id":[1000000,238500],"span":8},{"id":[1000000,238510],"span":1},{"id":[1000000,238525],"span":2},{"id":[1000000,238539],"span":2},{"id":[1000000,238527],"span":6},{"id":[1000000,238511],"span":7},{"id":[1000000,238508],"span":1},{"id":[1000000,238494],"span":3},{"id":[1000000,238437],"span":18},{"id":[1000000,238419],"span":2},{"id":[1000000,229532],"span":14},{"id":[1000000,229328],"span":2},{"id":[1000000,229229],"span":4},{"id":[1000000,229228],"value":"\n"},{"id":[1000000,229209],"value":"\\end{IEEEbiography}"},{"id":[1000000,229193],"span":1},{"id":[1000000,102107],"span":10},{"id":[1000000,101750],"span":1},{"id":[1000000,101530],"span":4},{"id":[1000000,101228],"span":3},{"id":[1000000,100961],"value":"\n"},{"id":[1000000,230147],"value":"\n"},{"id":[1000000,230148],"span":7},{"id":[1000000,62557],"span":1},{"id":[1000000,62558],"value":"\\if"},{"id":[1000000,209376],"value":"includeappendix"},{"id":[1000000,62561],"span":10},{"id":[1000000,162628],"value":"\n\\clearpage"},{"id":[1000000,62571],"span":1},{"id":[1000000,142372],"span":11},{"id":[1000000,142383],"value":"\n\\"},{"id":[1000000,144682],"value":"appendix["},{"id":[1000000,142385],"span":8},{"id":[1000000,142393],"value":"Proof of "},{"id":[1000000,252367],"value":"C"},{"id":[1000000,142402],"span":1},{"id":[1000000,142403],"value":"onvergence"},{"id":[1000000,144673],"value":"]"},{"id":[1000000,144703],"value":"\\label{sec:proof}"},{"id":[1000000,142413],"span":1},{"id":[1000000,142414],"value":"\n"},{"id":[1000000,162639],"value":"\n"},{"id":[1000000,172030],"value":"\\begin{theorem}\\label{thm:convergence}\nFor any two replicas $p$ and $q$ that participated in a valid execution, if $A_p(\\mathsf{ops}) = A_q(\\mathsf{ops})$, then $p"},{"id":[1000000,172195],"value":"$ and $q$ have the same document state.\n\\"},{"id":[1000000,172238],"value":"end{theorem}\n\n\\begin{proof}"},{"id":[1000000,172277],"value":"\nConsider the histor"},{"id":[1000000,172301],"value":"ies $H_p$ and $H_q$ at $p$ and $q$ respectively"},{"id":[1000000,172350],"value":" (see Definition~\\ref{def:history})"},{"id":[1000000,172348],"value":"."},{"id":[1000000,172493],"value":" The "},{"id":[1000000,172498],"span":5},{"id":[1000000,172503],"value":"rules "},{"id":[1000000,172509],"span":78},{"id":[1000000,172589],"span":7},{"id":[1000000,172587],"span":1},{"id":[1000000,172349],"span":1},{"id":[1000000,172447],"value":"\\textsc{Apply-Local} and \\textsc{Apply-Remote}"},{"id":[1000000,172596],"span":10},{"id":[1000000,172606],"value":" maintain the "},{"id":[1000000,172699],"value":"in"},{"id":[1000000,172620],"value":"variant that "},{"id":[1000000,172708],"value":"an"},{"id":[1000000,172639],"span":7},{"id":[1000000,172646],"value":" operation "},{"id":[1000000,172742],"value":"is added to $A_p(\\mathsf{ops})"},{"id":[1000000,172774],"value":"$ or $A_q(\\mathsf{ops})$ if"},{"id":[1000000,172803],"value":" and only if it was applied to the document state"},{"id":[1000000,173857],"value":" at $p$ or $q$"},{"id":[1000000,172852],"value":"."},{"id":[1000000,172944],"value":" Thus, "},{"id":[1000000,172951],"span":3},{"id":[1000000,172954],"value":"$A_p"},{"id":[1000000,172962],"value":"(\\mathsf{ops}) = A_q(\\mathsf{ops})$ "},{"id":[1000000,173099],"value":"if"},{"id":[1000000,173121],"value":"f"},{"id":[1000000,173101],"span":10},{"id":[1000000,172998],"span":4},{"id":[1000000,173002],"value":" $H_p$ and $H_q$ contain the same set of operations"},{"id":[1000000,173053],"span":5},{"id":[1000000,173058],"value":" "},{"id":[1000000,173127],"value":"("},{"id":[1000000,173059],"value":"potentially "},{"id":[1000000,173877],"value":"ordered"},{"id":[1000000,173873],"span":2},{"id":[1000000,173071],"span":2},{"id":[1000000,173073],"value":" "},{"id":[1000000,173074],"span":2},{"id":[1000000,173076],"value":"different"},{"id":[1000000,173891],"value":"ly"},{"id":[1000000,173085],"span":6},{"id":[1000000,173131],"span":1},{"id":[1000000,173128],"value":")"},{"id":[1000000,173091],"value":"."},{"id":[1000000,173132],"value":"\n"},{"id":[1000000,173298],"value":"\nThe history"},{"id":[1000000,181285],"value":" $H_p$"},{"id":[1000000,173310],"value":" "},{"id":[1000000,173321],"value":"at replica $p$ is a sequence of"},{"id":[1000000,181281],"value":" $n$"},{"id":[1000000,173352],"value":" operations"},{"id":[1000000,181291],"value":":"},{"id":[1000000,173363],"value":" $H_p = "},{"id":[1000000,173893],"value":"\\langle "},{"id":[1000000,173371],"value":"o_1"},{"id":[1000000,173909],"value":","},{"id":[1000000,173374],"value":" \\dots"},{"id":[1000000,173910],"value":","},{"id":[1000000,173380],"value":" o_n"},{"id":[1000000,173901],"value":" \\rangle"},{"id":[1000000,173384],"value":"$, and the document state at $p$ is derived from $H_p$ by starting in the emp"},{"id":[1000000,173463],"value":"ty state and apply"},{"id":[1000000,173483],"value":"ing the operations in order. Like"},{"id":[1000000,173518],"value":"wise, the document state at $q$ is derived from $H_q$, which is a permutation of $H_p$."},{"id":[1000000,173674],"value":" Both histories must be consistent with causality, i.e. for all "},{"id":[1000000,173740],"value":"$i$ with $1 \\"},{"id":[1000000,173755],"value":"le i \\le n$, "},{"id":[1000000,173933],"value":"we require "},{"id":[1000000,173768],"value":"$"},{"id":[1000000,173783],"value":"o_i.\\mathit{deps} \\subseteq "},{"id":[1000000,173849],"value":"\\"},{"id":[1000000,173811],"value":"{"},{"id":[1000000,173812],"span":1},{"id":[1000000,173813],"value":"o_j.\\mathit{id} \\mid 1 \\"},{"id":[1000000,173841],"value":"le j < i"},{"id":[1000000,173850],"span":1},{"id":[1000000,173851],"value":"\\}"},{"id":[1000000,173855],"value":"$."},{"id":[1000000,178041],"value":" The causality invariant is maintained by the \\textsc{Apply-*} rules."},{"id":[1000000,173944],"value":"\n\nWe can prove the theorem by induction over "},{"id":[1000000,174007],"value":"the length of history $n$.\n\n\\emph{Base case:} A"},{"id":[1000000,174068],"value":"n empty history with $n=0$ describes the empty document state. The empty document is always the same, and so any two replicas that have not executed any operations"},{"id":[1000000,174237],"value":" are by definition in the same state.\n\n\\emph{Induction step:} Given histories $H_p$ and $H_q$ of length $n$, such that $H_p = \\langle o_1, \\dots, o_n \\rangle$ and $H_q"},{"id":[1000000,174406],"value":"$ is a permutation of $H_"},{"id":[1000000,174433],"value":"p$, and such that applying $H_p$ results in the same document state as applying $H"},{"id":[1000000,174519],"value":"_q$, we can construct new histories"},{"id":[1000000,174684],"value":" $H_p'$ and $H_q'$"},{"id":[1000000,174554],"value":" of length $n+1$ by inserting a new operation $o_{n+1}$ "},{"id":[1000000,174624],"value":"at any causally ready position in"},{"id":[1000000,174683],"value":" "},{"id":[1000000,174657],"span":8},{"id":[1000000,174665],"value":"$H_p$ or $"},{"id":[1000000,174702],"value":"H_q$ respectively. We must then show that for all the histories $H_p'$ and $H_q'$ constructed this way, applying the "},{"id":[1000000,174886],"value":"sequence of "},{"id":[1000000,174819],"value":"operations in order results in the same "},{"id":[1000000,174871],"value":"document state."},{"id":[1000000,174898],"value":"\n\nIn order to prove the induction step, we examine the insertion of $o_{n+1}$ into $H_p$ and $H_q$. Each history can be split into a prefix, which is the minimal subsequence $\\langle o_1, \\dots, o_j \\rangle$ such that $o_{n+1}.\\mathit{deps} \\subseteq \\{o_1.\\mathit{id}, \\dots, o_j.\\mathit{id}\\}$, and a "},{"id":[1000000,175496],"value":"suf"},{"id":[1000000,175201],"span":3},{"id":[1000000,175204],"value":"fix, which is the remaining "},{"id":[1000000,175499],"value":"sub"},{"id":[1000000,175232],"value":"sequence $\\langle o_{j+1}, \\dots, o_n \\rangle$."},{"id":[1000000,181292],"value":" The prefix contains all "},{"id":[1000000,181326],"value":"operations that "},{"id":[1000000,181317],"value":"causally "},{"id":[1000000,181342],"value":"precede $o_{n+1}$, and possib"},{"id":[1000000,181373],"value":"ly some operations "},{"id":[1000000,181394],"value":"that are concurrent with $o_{n+1}$; the suffix contains only operations that are concurrent with $o_{n+1}$."},{"id":[1000000,181392],"span":1},{"id":[1000000,181371],"span":1},{"id":[1000000,175279],"value":" The earliest position where $o_{n+1}$ can be inserted into the history is between the prefix and the suffix; the latest position is at the end of the suffix; or it could be inserted at any point within the suffix."},{"id":[1000000,175502],"value":"\n\nWe"},{"id":[1000000,181501],"value":" need to"},{"id":[1000000,175506],"value":" show that the effect on the document state is the same, regardless of the position at which $o_{n+1}$ is inserted, and regardless of whether it is inserted in"},{"id":[1000000,175667],"value":"to $H_p"},{"id":[1000000,175678],"value":"$ or $H"},{"id":[1000000,175687],"value":"_q$. We do this"},{"id":[1000000,212551],"value":" in Lemma~\\ref{lem:op-commute}"},{"id":[1000000,175702],"value":" by showing that $o_{n+1}$ is commutative with respect to all operations in the suffix, i.e. with respect to a"},{"id":[1000000,181513],"value":"ny"},{"id":[1000000,175812],"span":2},{"id":[1000000,181509],"span":1},{"id":[1000000,175814],"value":" operations that are concurrent to $"},{"id":[1000000,175854],"value":"o_{n+1}$"},{"id":[1000000,212832],"value":"."},{"id":[1000000,212535],"span":16},{"id":[1000000,175862],"span":55},{"id":[1000000,175921],"span":78},{"id":[1000000,204390],"span":7},{"id":[1000000,175999],"span":53},{"id":[1000000,176054],"span":51},{"id":[1000000,175917],"span":2},{"id":[1000000,175850],"span":2},{"id":[1000000,175685],"span":1},{"id":[1000000,175674],"span":2},{"id":[1000000,175665],"span":1},{"id":[1000000,174859],"span":6},{"id":[1000000,174610],"span":7},{"id":[1000000,174515],"span":2},{"id":[1000000,174431],"span":1},{"id":[1000000,174404],"span":1},{"id":[1000000,174231],"span":3},{"id":[1000000,174054],"span":7},{"id":[1000000,173989],"span":9},{"id":[1000000,173837],"span":2},{"id":[1000000,173769],"span":7},{"id":[1000000,173753],"span":1},{"id":[1000000,173738],"span":1},{"id":[1000000,173516],"span":1},{"id":[1000000,173481],"span":1},{"id":[1000000,173461],"span":1},{"id":[1000000,173311],"span":5},{"id":[1000000,173133],"span":1},{"id":[1000000,173170],"span":8},{"id":[1000000,173182],"span":17},{"id":[1000000,173205],"span":15},{"id":[1000000,173228],"span":5},{"id":[1000000,173269],"span":29},{"id":[1000000,173233],"span":18},{"id":[1000000,173220],"span":4},{"id":[1000000,173178],"span":2},{"id":[1000000,173134],"span":18},{"id":[1000000,172958],"span":2},{"id":[1000000,172801],"span":1},{"id":[1000000,172772],"span":1},{"id":[1000000,172657],"span":32},{"id":[1000000,172633],"span":3},{"id":[1000000,172297],"span":2},{"id":[1000000,172265],"value":"\n\\end{proof}"},{"id":[1000000,178110],"value":"\n\nBefore we can prove the commutativity of "},{"id":[1000000,212867],"value":"operations"},{"id":[1000000,178153],"span":34},{"id":[1000000,178187],"value":", we must first"},{"id":[1000000,178233],"value":" define some more terms and"},{"id":[1000000,178202],"value":" prove some preliminary lemmas."},{"id":[1000000,172236],"span":1},{"id":[1000000,172193],"span":1},{"id":[1000000,162641],"span":61},{"id":[1000000,162706],"span":30},{"id":[1000000,163081],"span":89},{"id":[1000000,163172],"span":12},{"id":[1000000,163194],"span":5},{"id":[1000000,163184],"span":10},{"id":[1000000,163170],"span":1},{"id":[1000000,163043],"value":"\n\n\\begin{definition}"},{"id":[1000000,168014],"value":"["},{"id":[1000000,181994],"value":"appearing"},{"id":[1000000,181933],"span":9},{"id":[1000000,181942],"value":" after"},{"id":[1000000,168015],"span":12},{"id":[1000000,181532],"span":11},{"id":[1000000,168027],"span":11},{"id":[1000000,168038],"value":"]"},{"id":[1000000,163080],"value":"\n"},{"id":[1000000,181779],"value":"In the ordered list $\\mathit{ctx}$, "},{"id":[1000000,181816],"value":"l"},{"id":[1000000,163199],"span":1},{"id":[1000000,163200],"value":"i"},{"id":[1000000,163203],"value":"st elemen"},{"id":[1000000,163218],"value":"t $k_"},{"id":[1000000,181544],"value":"j"},{"id":[1000000,163223],"span":1},{"id":[1000000,163224],"value":"$"},{"id":[1000000,163273],"value":" \\emph{"},{"id":[1000000,181978],"value":"appears"},{"id":[1000000,181956],"span":6},{"id":[1000000,181962],"value":" after"},{"id":[1000000,181548],"span":3},{"id":[1000000,163280],"span":5},{"id":[1000000,181652],"span":1},{"id":[1000000,163285],"span":3},{"id":[1000000,163288],"value":"} list element $k_"},{"id":[1000000,181552],"value":"1"},{"id":[1000000,181516],"span":1},{"id":[1000000,163333],"span":1},{"id":[1000000,163306],"span":1},{"id":[1000000,163307],"value":"$"},{"id":[1000000,163308],"span":3},{"id":[1000000,163559],"span":17},{"id":[1000000,163311],"span":1},{"id":[1000000,163314],"span":14},{"id":[1000000,163328],"value":" if "},{"id":[1000000,163334],"value":"there exist"},{"id":[1000000,181864],"value":"s a (possibly empty) sequence of list elements"},{"id":[1000000,181852],"span":6},{"id":[1000000,163345],"value":" $k_2, \\dots, k_{"},{"id":[1000000,181518],"value":"j"},{"id":[1000000,163362],"span":1},{"id":[1000000,163363],"value":"-1}$ such that"},{"id":[1000000,163467],"value":" for all $i$ with $1 \\le i "},{"id":[1000000,182233],"value":"<"},{"id":[1000000,182223],"span":3},{"id":[1000000,163494],"span":1},{"id":[1000000,163495],"value":" "},{"id":[1000000,181520],"value":"j"},{"id":[1000000,182226],"span":2},{"id":[1000000,163496],"span":1},{"id":[1000000,163497],"value":"$,"},{"id":[1000000,173911],"span":11},{"id":[1000000,163377],"value":" $"},{"id":[1000000,163459],"span":8},{"id":[1000000,163379],"value":"\\mathit{ctx}(\\mathsf{next}(k_"},{"id":[1000000,163508],"value":"i"},{"id":[1000000,163408],"span":1},{"id":[1000000,163409],"value":")) = k_"},{"id":[1000000,163510],"value":"{i+1}$."},{"id":[1000000,183397],"value":" Moreover,"},{"id":[1000000,183547],"value":" we say"},{"id":[1000000,183407],"value":" $"},{"id":[1000000,183411],"value":"k_j$ appears \\emph{"},{"id":[1000000,183448],"span":6},{"id":[1000000,183430],"value":"immediately after}"},{"id":[1000000,183460],"value":" $k_1$ if that sequence is empty, i.e."},{"id":[1000000,183544],"value":" if"},{"id":[1000000,183498],"value":" $\\mathit{ctx}(\\mathsf{next}"},{"id":[1000000,183528],"value":"(k_1))"},{"id":[1000000,183536],"value":" = k_j$."},{"id":[1000000,183534],"span":1},{"id":[1000000,183526],"span":1},{"id":[1000000,183409],"span":1},{"id":[1000000,163416],"span":43},{"id":[1000000,163312],"span":1},{"id":[1000000,163212],"span":3},{"id":[1000000,163201],"span":1},{"id":[1000000,163063],"value":"\n\\end{definition}"},{"id":[1000000,163576],"value":"\n\nThe "},{"id":[1000000,164080],"value":"defini"},{"id":[1000000,164090],"value":"tion"},{"id":[1000000,164086],"span":2},{"id":[1000000,163582],"span":6},{"id":[1000000,163588],"value":" of \\emph{"},{"id":[1000000,182009],"value":"appearing after"},{"id":[1000000,181556],"span":4},{"id":[1000000,163598],"span":5},{"id":[1000000,181653],"span":1},{"id":[1000000,163603],"span":4},{"id":[1000000,163607],"value":"} corresponds to the order in which the \\textsc{"},{"id":[1000000,258027],"value":"Idx"},{"id":[1000000,163655],"span":4},{"id":[1000000,163659],"value":"} rules iterate over the list."},{"id":[1000000,162702],"span":2},{"id":[1000000,162640],"value":"\n"},{"id":[1000000,162736],"value":"\n"},{"id":[1000000,162738],"value":"\\begin{lemma}"},{"id":[1000000,164350],"value":"\\label{lem:list-"},{"id":[1000000,182053],"value":"after"},{"id":[1000000,181662],"span":8},{"id":[1000000,164383],"span":8},{"id":[1000000,164372],"span":5},{"id":[1000000,164377],"value":"}"},{"id":[1000000,164366],"span":3},{"id":[1000000,162763],"value":"\n"},{"id":[1000000,162786],"value":"If $"},{"id":[1000000,163236],"value":"k"},{"id":[1000000,162790],"span":11},{"id":[1000000,162801],"value":"_"},{"id":[1000000,181562],"value":"2"},{"id":[1000000,162802],"span":1},{"id":[1000000,162803],"value":"$ "},{"id":[1000000,182032],"value":"appears after"},{"id":[1000000,181566],"span":3},{"id":[1000000,162931],"span":5},{"id":[1000000,181671],"span":1},{"id":[1000000,162936],"span":3},{"id":[1000000,162805],"span":14},{"id":[1000000,162819],"value":" $"},{"id":[1000000,163248],"value":"k"},{"id":[1000000,162821],"span":11},{"id":[1000000,162832],"value":"_"},{"id":[1000000,181570],"value":"1"},{"id":[1000000,162833],"span":1},{"id":[1000000,162834],"value":"$ in an ordered list, and the list is mutated according to the "},{"id":[1000000,162899],"value":"evaluation rules, "},{"id":[1000000,162939],"value":"$"},{"id":[1000000,163272],"value":"k"},{"id":[1000000,162940],"span":11},{"id":[1000000,162951],"value":"_"},{"id":[1000000,181572],"value":"2"},{"id":[1000000,162952],"span":1},{"id":[1000000,162953],"value":"$ also "},{"id":[1000000,182079],"value":"appears after"},{"id":[1000000,181576],"span":3},{"id":[1000000,162960],"span":4},{"id":[1000000,181672],"span":1},{"id":[1000000,162964],"span":4},{"id":[1000000,162968],"value":" $"},{"id":[1000000,163260],"value":"k"},{"id":[1000000,162970],"span":11},{"id":[1000000,162981],"value":"_"},{"id":[1000000,181580],"value":"1"},{"id":[1000000,162982],"span":1},{"id":[1000000,162983],"value":"$ in all "},{"id":[1000000,181684],"value":"later"},{"id":[1000000,163012],"span":10},{"id":[1000000,163022],"value":" "},{"id":[1000000,163027],"value":"document states."},{"id":[1000000,163023],"span":2},{"id":[1000000,162992],"span":10},{"id":[1000000,162897],"span":1},{"id":[1000000,162764],"span":11},{"id":[1000000,162751],"value":"\n\\end{lemma}"},{"id":[1000000,164864],"value":"\n"},{"id":[1000000,163689],"value":"\n\\begin{proof}"},{"id":[1000000,163715],"value":"\nThe only rule that modifies the \\textsf{next} "},{"id":[1000000,164288],"value":"pointers"},{"id":[1000000,163762],"span":7},{"id":[1000000,163769],"value":" in the context is $\\"},{"id":[1000000,163804],"value":"textsc{Insert}_1$, and it "},{"id":[1000000,163848],"value":"inserts a "},{"id":[1000000,163860],"value":"new list element between "},{"id":[1000000,163887],"value":"two ex"},{"id":[1000000,163895],"value":"isting list elements (possibly \\"},{"id":[1000000,163952],"value":"text"},{"id":[1000000,163927],"span":4},{"id":[1000000,163931],"value":"sf{head} and/or \\"},{"id":[1000000,163956],"value":"textsf{tail}). This modification preserves the "},{"id":[1000000,182102],"value":"appears-after"},{"id":[1000000,181591],"span":10},{"id":[1000000,164003],"span":10},{"id":[1000000,164013],"value":" relat"},{"id":[1000000,164027],"value":"ionship between any two existing list elements."},{"id":[1000000,164094],"value":" Since no other rule affects the list order, "},{"id":[1000000,182125],"value":"appears-after"},{"id":[1000000,181611],"span":10},{"id":[1000000,164139],"span":10},{"id":[1000000,164149],"value":" is always preserved."},{"id":[1000000,164019],"span":4},{"id":[1000000,163893],"span":1},{"id":[1000000,163885],"span":1},{"id":[1000000,163858],"span":1},{"id":[1000000,163830],"span":9},{"id":[1000000,163790],"span":7},{"id":[1000000,163703],"value":"\n\\end{proof}"},{"id":[1000000,164170],"value":"\n\nNote that deletion of a"},{"id":[1000000,164197],"value":"n element from a list does not remove it from the sequence of \\textsf{next} pointers"},{"id":[1000000,164296],"value":", but only clears its presence set $\\mathsf{pres}(k)$."},{"id":[1000000,165178],"span":88},{"id":[1000000,165268],"span":16},{"id":[1000000,165266],"span":1},{"id":[1000000,164391],"value":"\n\n\\begin{"},{"id":[1000000,164402],"value":"lemma}"},{"id":[1000000,166160],"value":"\\label{lem:insert-between}"},{"id":[1000000,164420],"value":"\nIf one replica inserts a list element $k"},{"id":[1000000,164463],"value":"_\\mathit{new}$ between $k_1$ "},{"id":[1000000,164500],"value":"and $k_2$, i.e. if "},{"id":[1000000,168811],"span":2},{"id":[1000000,168815],"span":13},{"id":[1000000,168828],"value":"$k_\\mathit{new}"},{"id":[1000000,169621],"value":"$"},{"id":[1000000,181621],"value":" "},{"id":[1000000,182146],"value":"appears after"},{"id":[1000000,181622],"span":8},{"id":[1000000,181630],"value":" $k_1$"},{"id":[1000000,168843],"value":" in the list and"},{"id":[1000000,181689],"value":" $k_2$ "},{"id":[1000000,182167],"value":"appears after"},{"id":[1000000,181696],"span":8},{"id":[1000000,168859],"value":" $k_\\mathit{new}$ "},{"id":[1000000,168877],"span":15},{"id":[1000000,168892],"value":"in the list "},{"id":[1000000,168813],"span":1},{"id":[1000000,164519],"span":14},{"id":[1000000,164537],"span":22},{"id":[1000000,164591],"span":72},{"id":[1000000,164663],"value":"on the source replica after applying \\textsc{Apply-Local}, then "},{"id":[1000000,164727],"span":15},{"id":[1000000,164742],"value":"$k_\\mathit{new}$"},{"id":[1000000,181734],"value":" "},{"id":[1000000,182188],"value":"appears after"},{"id":[1000000,181735],"span":8},{"id":[1000000,181743],"value":" $k_1$"},{"id":[1000000,164758],"value":" and"},{"id":[1000000,181749],"value":" $k_2$ "},{"id":[1000000,182209],"value":"appears after"},{"id":[1000000,181756],"span":8},{"id":[1000000,164762],"value":" $k_\\mathit{new}$ "},{"id":[1000000,164780],"span":15},{"id":[1000000,164795],"value":"on every other replica where that operation is applied."},{"id":[1000000,164559],"span":16},{"id":[1000000,164533],"span":2},{"id":[1000000,164492],"span":4},{"id":[1000000,164461],"span":1},{"id":[1000000,164408],"value":"\n\\end{lemma}"},{"id":[1000000,165172],"span":3},{"id":[1000000,164850],"value":"\n"},{"id":[1000000,164865],"value":"\n"},{"id":[1000000,164851],"value":"\\begin{proof}"},{"id":[1000000,165580],"value":"\nThe rules for generating list operations ensure that $k_1$ is either \\textsf{head} or an operation identifier, and $k_2$ is either \\texts"},{"id":[1000000,165720],"value":"f{tail} or an operation identifier."},{"id":[1000000,165756],"value":"\n\n"},{"id":[1000000,165718],"span":1},{"id":[1000000,164882],"span":1},{"id":[1000000,164883],"value":"When the insertion operation is generated using the \\textsc{Make-Op} rule, its operation identifier "},{"id":[1000000,165005],"value":"is given a counter value "},{"id":[1000000,165032],"value":"$\\mathit{ctr}$ that is greater than the counter of any existing operation ID in $"},{"id":[1000000,165115],"value":"A"},{"id":[1000000,165118],"value":"_p(\\mathsf{ops})$. If $k_2$ is an operation identifier"},{"id":[1000000,165284],"value":", we must have $k_2 \\"},{"id":[1000000,165309],"value":"in A_p(\\mathsf{ops})$, since both \\textsc{Apply"},{"id":[1000000,165358],"value":"-Local} and \\textsc{Apply"},{"id":[1000000,165385],"value":"-Remote} add operation IDs to $A"},{"id":[1000000,165419],"value":"_p(\\mathsf{ops})$ when applying an insertion"},{"id":[1000000,165465],"value":"."},{"id":[1000000,165512],"value":" "},{"id":[1000000,165825],"value":"Thus"},{"id":[1000000,165831],"value":", either $k_2 < k_\\mathit{new}$ under the ordering relation $<$ for Lamport timestamps, or $k_2 = \\mathsf{tail}$.\n\nWhen the insertion operation is applied on "},{"id":[1000000,166100],"value":"an"},{"id":[1000000,165989],"value":"other replica"},{"id":[1000000,166002],"span":1},{"id":[1000000,166005],"value":" using \\textsc{Apply-Remote} and $\\textsc{Insert}_{1,2}$, "},{"id":[1000000,166071],"value":"$k_"},{"id":[1000000,182339],"value":"2"},{"id":[1000000,166074],"span":1},{"id":[1000000,166075],"value":"$ "},{"id":[1000000,182348],"value":"appears after"},{"id":[1000000,166077],"span":8},{"id":[1000000,166085],"value":" $k_"},{"id":[1000000,182362],"value":"1"},{"id":[1000000,166089],"span":1},{"id":[1000000,166090],"value":"$ on that "},{"id":[1000000,166103],"value":"replica (by Lemma~\\ref{lem:list-"},{"id":[1000000,182066],"value":"after"},{"id":[1000000,166135],"span":8},{"id":[1000000,166143],"value":"} and causality)."},{"id":[1000000,166186],"value":" "},{"id":[1000000,166191],"value":"The cursor of the operation is $\\mathsf{cursor}(\\langle\\dots\\rangle, k_1)$"},{"id":[1000000,166603],"value":", so the rules start iterating the list at $k_1$"},{"id":[1000000,182400],"value":","},{"id":[1000000,166651],"value":" and "},{"id":[1000000,182401],"value":"therefore"},{"id":[1000000,166656],"span":12},{"id":[1000000,166668],"value":" $k_\\mathit{new}$ "},{"id":[1000000,182410],"value":"is inserted "},{"id":[1000000,166686],"value":"at "},{"id":[1000000,182370],"value":"s"},{"id":[1000000,182373],"value":"ome"},{"id":[1000000,182371],"span":1},{"id":[1000000,166689],"span":1},{"id":[1000000,166690],"value":" position "},{"id":[1000000,182389],"value":"after"},{"id":[1000000,166700],"span":13},{"id":[1000000,166713],"value":" $k_1$"},{"id":[1000000,166265],"value":"."},{"id":[1000000,166719],"value":"\n\n"},{"id":[1000000,166266],"span":1},{"id":[1000000,166267],"value":"If other concurrent insertions occurred between $k_1$ and $k_2$, their operation ID may be greater than or less than $k_\\mathit{new}$, and thus either $\\"},{"id":[1000000,166428],"value":"textsc{Insert}_1$ or "},{"id":[1000000,166451],"value":"$\\"},{"id":[1000000,166910],"value":"text"},{"id":[1000000,166902],"span":4},{"id":[1000000,166453],"span":4},{"id":[1000000,166457],"value":"sc{Insert}_2$ may apply. In particular, $\\textsc{Insert}_2$ skips over any list elements whose Lamport timestamp is greater than $k_\\mathit{new}$."},{"id":[1000000,166722],"value":" However, we know that $k_2 < k_\\mathit{new} \\vee k_2 = \\mathsf{tail}$, and so $\\"},{"id":[1000000,166918],"value":"text"},{"id":[1000000,166894],"span":4},{"id":[1000000,166803],"span":4},{"id":[1000000,166807],"value":"sc{Insert}_1$ will apply with $\\mathit{next}=k_2$ at the latest. The $\\"},{"id":[1000000,166926],"value":"textsc{Insert}_{1,2}$ rules thus never iterate past $k_2$, and thus"},{"id":[1000000,166993],"span":14},{"id":[1000000,167007],"value":" $k_\\mathit{new}$ "},{"id":[1000000,182436],"value":"is never inserted "},{"id":[1000000,167025],"value":"at a "},{"id":[1000000,167032],"value":"list position t"},{"id":[1000000,182466],"value":"hat appears after"},{"id":[1000000,167047],"span":12},{"id":[1000000,167059],"value":" $k_2$."},{"id":[1000000,167030],"span":1},{"id":[1000000,166886],"span":4},{"id":[1000000,166878],"span":4},{"id":[1000000,166449],"span":1},{"id":[1000000,166420],"span":4},{"id":[1000000,166189],"span":1},{"id":[1000000,166187],"span":1},{"id":[1000000,166063],"span":4},{"id":[1000000,166003],"span":1},{"id":[1000000,165829],"span":1},{"id":[1000000,165513],"span":67},{"id":[1000000,165466],"span":1},{"id":[1000000,165477],"span":17},{"id":[1000000,165467],"span":5},{"id":[1000000,165463],"span":1},{"id":[1000000,165417],"span":1},{"id":[1000000,165383],"span":1},{"id":[1000000,165356],"span":1},{"id":[1000000,165305],"span":2},{"id":[1000000,165116],"span":1},{"id":[1000000,165113],"span":1},{"id":[1000000,165030],"span":1},{"id":[1000000,164983],"span":11},{"id":[1000000,164866],"value":"\n\\end"},{"id":[1000000,164875],"value":"{"},{"id":[1000000,164877],"value":"proof"},{"id":[1000000,164876],"value":"}"},{"id":[1000000,183554],"value":"\n\n\\"},{"id":[1000000,183559],"value":"begin{definition}[comm"},{"id":[1000000,183585],"value":"on ancestor]\\label{def:common-ancestor}"},{"id":[1000000,183641],"value":"\nIn a history $H$, the \\emph{common ancestor} of two"},{"id":[1000000,184739],"value":" concurrent"},{"id":[1000000,183693],"value":" operations $o_"},{"id":[1000000,184040],"value":"r"},{"id":[1000000,184034],"span":1},{"id":[1000000,184022],"span":1},{"id":[1000000,183708],"span":1},{"id":[1000000,183709],"value":"$ and $o_"},{"id":[1000000,184038],"value":"s"},{"id":[1000000,184036],"span":1},{"id":[1000000,184024],"span":1},{"id":[1000000,183718],"span":1},{"id":[1000000,183719],"value":"$"},{"id":[1000000,183722],"value":" is the "},{"id":[1000000,183754],"value":"latest "},{"id":[1000000,183752],"span":1},{"id":[1000000,183732],"value":"document state that "},{"id":[1000000,183761],"value":"causally precedes both $o_"},{"id":[1000000,184026],"value":"r"},{"id":[1000000,183787],"span":1},{"id":[1000000,183788],"value":"$ and $o_"},{"id":[1000000,184028],"value":"s"},{"id":[1000000,183797],"span":1},{"id":[1000000,183798],"value":"$."},{"id":[1000000,183730],"span":1},{"id":[1000000,183720],"span":1},{"id":[1000000,183624],"value":"\n\\end{definition}"},{"id":[1000000,183581],"span":2},{"id":[1000000,183557],"span":1},{"id":[1000000,182556],"value":"\n"},{"id":[1000000,183800],"value":"\n"},{"id":[1000000,183802],"value":"The common ancestor"},{"id":[1000000,184000],"value":" of $"},{"id":[1000000,184007],"value":"o_"},{"id":[1000000,184032],"value":"r"},{"id":[1000000,184009],"span":1},{"id":[1000000,184010],"value":"$ and $o_"},{"id":[1000000,184030],"value":"s"},{"id":[1000000,184019],"span":1},{"id":[1000000,184020],"value":"$"},{"id":[1000000,184005],"span":1},{"id":[1000000,183821],"value":" can be defined more formally as the document state resulting from applying a "},{"id":[1000000,183935],"value":"sequence of"},{"id":[1000000,183899],"span":9},{"id":[1000000,183908],"value":" operations"},{"id":[1000000,184041],"value":" $\\"},{"id":[1000000,184046],"value":"langle o_1, \\dots, o_j \\rangle$"},{"id":[1000000,184044],"span":1},{"id":[1000000,183953],"span":1},{"id":[1000000,183954],"value":" "},{"id":[1000000,184084],"value":"that is"},{"id":[1000000,183955],"span":6},{"id":[1000000,183961],"value":" the shortest prefix of"},{"id":[1000000,183919],"span":1},{"id":[1000000,183948],"span":2},{"id":[1000000,183920],"span":2},{"id":[1000000,183922],"value":" $H$"},{"id":[1000000,183984],"value":" that satisfies "},{"id":[1000000,184091],"value":"$(o_r.\\mathit{deps} \\"},{"id":[1000000,184736],"value":"cap"},{"id":[1000000,184112],"span":3},{"id":[1000000,184115],"value":" o_s"},{"id":[1000000,184729],"value":"."},{"id":[1000000,184119],"value":"\\"},{"id":[1000000,184120],"span":1},{"id":[1000000,184121],"value":"mathit{deps}) \\subseteq \\{o_1.\\mathit{id}, \\dots, o_j.\\mathit{id}\\}$."},{"id":[1000000,183801],"value":"\n"},{"id":[1000000,184750],"value":"\n"},{"id":[1000000,184752],"value":"\\begin{definition}[insertion interval"},{"id":[1000000,184791],"value":"]\\label{def:insert-interval}\n"},{"id":[1000000,184839],"value":"Given two"},{"id":[1000000,185037],"value":" concurrent"},{"id":[1000000,184848],"value":" "},{"id":[1000000,184861],"value":"operations $o_r$ and $o_s$ that insert into the same list, the \\emph{insertion interval} of "},{"id":[1000000,184957],"value":"$o_r$ is the pair of keys $(k_r^\\math"},{"id":[1000000,185034],"value":"rm"},{"id":[1000000,184994],"span":2},{"id":[1000000,184996],"value":"{before}, k_r"},{"id":[1000000,185011],"value":"^\\math"},{"id":[1000000,185030],"value":"rm"},{"id":[1000000,185017],"span":2},{"id":[1000000,185019],"value":"{after})$"},{"id":[1000000,185036],"value":" "},{"id":[1000000,185048],"value":"such that"},{"id":[1000000,185083],"value":" $o_r.\\mathit{id}$ appears after"},{"id":[1000000,185057],"value":" $k_r"},{"id":[1000000,185064],"value":"^\\math"},{"id":[1000000,185072],"value":"rm{before}$"},{"id":[1000000,185115],"value":" when $o_r$ has been applied, $k_r"},{"id":[1000000,185151],"value":"^\\mathrm{after}$ appears after $"},{"id":[1000000,185187],"value":"o_r.\\mathit{id}$ "},{"id":[1000000,185206],"value":"when $o_r$ has been applied, and $k_r^\\mathrm{after}"},{"id":[1000000,185308],"value":"$"},{"id":[1000000,185258],"value":" appears immediately after $k_r"},{"id":[1000000,185291],"value":"^\\mathrm{before}$"},{"id":[1000000,185309],"value":" in the common ancestor of $o_r$ and $o_s$. The insertion interval of $o_s$ is the pair of keys $(k_s^\\mathrm{before}, k_s^\\mathrm{after})$ defined "},{"id":[1000000,185461],"value":"similarly."},{"id":[1000000,185457],"span":2},{"id":[1000000,185289],"span":1},{"id":[1000000,185204],"span":1},{"id":[1000000,185183],"span":2},{"id":[1000000,185149],"span":1},{"id":[1000000,185070],"span":1},{"id":[1000000,185062],"span":1},{"id":[1000000,185009],"span":1},{"id":[1000000,184953],"span":2},{"id":[1000000,184849],"span":6},{"id":[1000000,184837],"span":1},{"id":[1000000,184836],"value":"\n"},{"id":[1000000,184820],"value":"\\end{definition}"},{"id":[1000000,184789],"span":1},{"id":[1000000,184751],"value":"\n"},{"id":[1000000,185471],"value":"\n"},{"id":[1000000,185473],"value":"I"},{"id":[1000000,185478],"value":"t may be the case that $"},{"id":[1000000,185504],"value":"k_r^\\mathrm{before}$ or $k_s^\\"},{"id":[1000000,185538],"value":"mathrm{before}$ is "},{"id":[1000000,185563],"value":"\\textsf{head}"},{"id":[1000000,185578],"value":", and that $k_r^\\mathrm{after}$ or $"},{"id":[1000000,185618],"value":"k_s^\\mathrm{after}$ is "},{"id":[1000000,185643],"value":"\\textsf{tail}."},{"id":[1000000,189587],"value":"\n\n\\begin{lemma}\\label{lem:insert-conflict}\n"},{"id":[1000000,189673],"value":"For any two concurrent insertion operations $o_r, o_s$ "},{"id":[1000000,189729],"value":"i"},{"id":[1000000,189642],"span":1},{"id":[1000000,189643],"value":"n a"},{"id":[1000000,189646],"span":1},{"id":[1000000,189647],"value":" "},{"id":[1000000,189742],"value":"h"},{"id":[1000000,189648],"span":11},{"id":[1000000,189659],"value":"istory $H$, "},{"id":[1000000,189743],"value":"if "},{"id":[1000000,189746],"span":37},{"id":[1000000,189783],"value":"$o_r.\\mathit{cur} = o_s.\\mathit{cur}$"},{"id":[1000000,189820],"span":1},{"id":[1000000,189821],"value":", then the order "},{"id":[1000000,190025],"value":"at"},{"id":[1000000,189838],"span":2},{"id":[1000000,189840],"value":" which the insert"},{"id":[1000000,190031],"value":"ed elements"},{"id":[1000000,189857],"span":4},{"id":[1000000,189861],"value":" "},{"id":[1000000,189870],"value":"appear in the list"},{"id":[1000000,190471],"value":" after applyin"},{"id":[1000000,190489],"value":"g $H$"},{"id":[1000000,190485],"span":2},{"id":[1000000,189888],"value":" is"},{"id":[1000000,190042],"value":" deterministic and"},{"id":[1000000,189891],"value":" independent of the order "},{"id":[1000000,190529],"value":"of $o_r$ and $o_s$ in $H$"},{"id":[1000000,189917],"span":35},{"id":[1000000,189952],"value":"."},{"id":[1000000,189862],"span":4},{"id":[1000000,189671],"span":1},{"id":[1000000,189641],"value":"\n"},{"id":[1000000,189630],"value":"\\end{lemma}"},{"id":[1000000,189953],"value":"\n\n\\begin{proof}"},{"id":[1000000,190060],"value":"\nWithout loss of generality, assume that $o_r.\\mathit{id} < o_s.\\mathit{id}$ according to the ordering relation on Lamport timestamps. (If the operation ID of $o_r$ is great"},{"id":[1000000,190235],"value":"er than that of $o_s$, the two operations can be swapped in this proof.) We now distinguish "},{"id":[1000000,190329],"value":"the two possible order"},{"id":[1000000,190361],"value":"s of applying the operations:\n\n\\begin{enumerate}"},{"id":[1000000,190428],"value":"\n\\item $o_r$ is applied before $o_s$ in $H$"},{"id":[1000000,190554],"value":". Thus, at the time when $o_s$ is applied, $o_r$ has already been applied. When applying $o_s$, since $o_r$ has a lesser operation ID, the "},{"id":[1000000,190695],"value":"rule $\\textsc{Insert}_1$ applies with $\\mathit{next} = o_r.\\mathit{id}$ at the latest, so the insertion position of $o_s$ must appear before $o_r$. It is not possible for "},{"id":[1000000,190872],"value":"$\\"},{"id":[1000000,190882],"value":"textsc{"},{"id":[1000000,190874],"span":4},{"id":[1000000,190866],"value":"Insert"},{"id":[1000000,190889],"value":"}_2$ to skip past "},{"id":[1000000,190909],"value":"$o_r$.\n\n\\item $o_s$ is applied before $o_r$ in $H$. Thus, at the time when $o_r$ is applied, $o_s$ has already been applied. "},{"id":[1000000,191042],"value":"When applying $o_r$, the rule $\\textsc{Insert"},{"id":[1000000,191089],"value":"}_2$ applies with $\\mathit{next} = o_s.\\mathit{id}$"},{"id":[1000000,191142],"value":", so the rule skips "},{"id":[1000000,191181],"value":"past"},{"id":[1000000,191162],"span":4},{"id":[1000000,191166],"value":" $o_s$ and "},{"id":[1000000,191185],"value":"inserts $o_r$ at a position after $o_s$. Moreover, any list elements"},{"id":[1000000,191287],"value":" that appear"},{"id":[1000000,191253],"value":" between $o_s.\\mathit{cur}$ and $o"},{"id":[1000000,191299],"value":"_s$ at the time of inserting $o_r$ must have a Lamport timestamp greater tha"},{"id":[1000000,191379],"value":"n $o_s.\\mathit{id}$, "},{"id":[1000000,191416],"value":"so $"},{"id":[1000000,191422],"value":"\\textsc{Insert}_2$ also skips over those list elements when inserting $o_r$. Thus, the insertion position of $o_r$ must be after $o_s$."},{"id":[1000000,191420],"span":1},{"id":[1000000,191400],"span":8},{"id":[1000000,191375],"span":2},{"id":[1000000,191140],"span":1},{"id":[1000000,191087],"span":1},{"id":[1000000,191034],"span":4},{"id":[1000000,190907],"span":1},{"id":[1000000,190693],"span":1},{"id":[1000000,190351],"span":5},{"id":[1000000,190327],"span":1},{"id":[1000000,190233],"span":1},{"id":[1000000,189968],"value":"\n"},{"id":[1000000,190413],"value":"\\end{enumerate}"},{"id":[1000000,189969],"span":4},{"id":[1000000,189973],"value":"\n"},{"id":[1000000,191558],"value":"\n"},{"id":[1000000,191669],"value":"Thus,"},{"id":[1000000,191559],"span":14},{"id":[1000000,191573],"value":" the insertion position of $o_r$ appears after the insertion position of $o_s$"},{"id":[1000000,191674],"value":", regardless of the order in which the two operations are applied. "},{"id":[1000000,191743],"value":"The ordering depends only on the operation IDs, and since these IDs are fixed at the t"},{"id":[1000000,191833],"value":"ime the operations are generated, the list order is determined by the IDs."},{"id":[1000000,191829],"span":2},{"id":[1000000,191741],"span":1},{"id":[1000000,191651],"span":2},{"id":[1000000,191557],"value":"\n"},{"id":[1000000,189974],"value":"\\end{proof}"},{"id":[1000000,185657],"span":1},{"id":[1000000,185864],"span":11},{"id":[1000000,185660],"span":94},{"id":[1000000,185756],"span":95},{"id":[1000000,185754],"span":1},{"id":[1000000,185658],"span":1},{"id":[1000000,185641],"span":1},{"id":[1000000,185614],"span":2},{"id":[1000000,185576],"span":1},{"id":[1000000,185559],"span":2},{"id":[1000000,185557],"span":1},{"id":[1000000,185534],"span":2},{"id":[1000000,185502],"span":1},{"id":[1000000,185474],"span":2},{"id":[1000000,185472],"value":"\n"},{"id":[1000000,182557],"value":"\n\\begin{lemma}\\label{lem:insert"},{"id":[1000000,184732],"value":"-"},{"id":[1000000,182588],"span":1},{"id":[1000000,182589],"value":"reorder}\n"},{"id":[1000000,182642],"value":"In an operation history"},{"id":[1000000,186063],"value":" $H$"},{"id":[1000000,182665],"value":", "},{"id":[1000000,182668],"value":"a"},{"id":[1000000,182610],"span":1},{"id":[1000000,182611],"value":"n insertion operation "},{"id":[1000000,182776],"value":"is commutative"},{"id":[1000000,182633],"span":9},{"id":[1000000,182669],"span":7},{"id":[1000000,182676],"value":" with respect to concurrent insertion operations to the same list"},{"id":[1000000,182809],"value":"."},{"id":[1000000,182741],"span":19},{"id":[1000000,182609],"value":"\n"},{"id":[1000000,182598],"value":"\\end{lemma}"},{"id":[1000000,182810],"value":"\n\n\\begin{proof}"},{"id":[1000000,186067],"value":"\nGiven any two concurrent insertion operations"},{"id":[1000000,186150],"value":" $o_r, "},{"id":[1000000,186157],"span":1},{"id":[1000000,186158],"value":"o_s$"},{"id":[1000000,186113],"value":" in $H$, we must show that the docume"},{"id":[1000000,186162],"value":"nt state does not depend on the order in which $o_r$ and $o_s$ are applied."},{"id":[1000000,186238],"value":"\n\nEither $o_r$ and $o_s$ "},{"id":[1000000,186273],"value":"have the same insertion interval as "},{"id":[1000000,186311],"value":"defined in Definition~\\ref{def:insert-interval}, or they have different insertion intervals. If the insertion intervals are different, then by Lemma~\\ref{lem:insert-between} the operations cannot affect each other, and so they have the same effect regardless of their order. "},{"id":[1000000,186612],"value":"So we need "},{"id":[1000000,186623],"span":3},{"id":[1000000,186626],"value":"only analyze the case in which they have the same insertion interval $(k^\\mathrm{before}, k"},{"id":[1000000,186721],"value":"^\\mathrm{after})$."},{"id":[1000000,186717],"span":2},{"id":[1000000,186610],"span":1},{"id":[1000000,186586],"span":12},{"id":[1000000,186309],"span":1},{"id":[1000000,186263],"span":5},{"id":[1000000,186237],"value":"\n"},{"id":[1000000,187708],"value":"\n"},{"id":[1000000,192897],"value":"If $o_r.\\mathit{cur} = o_s.\\mathit{cur}$, then by Lemma~\\ref{lem:insert-conflict}, "},{"id":[1000000,192980],"span":30},{"id":[1000000,193076],"span":6},{"id":[1000000,193082],"value":"the operation with the greater operation ID appears first in the list"},{"id":[1000000,193187],"value":", regardless of the order in which the operation"},{"id":[1000000,193237],"value":"s are applied"},{"id":[1000000,193235],"span":1},{"id":[1000000,193010],"value":". If $o_r.\\mathit{cur} \\not= o_s.\\mathit{cur}$, "},{"id":[1000000,193250],"value":"then one or both of the cursors must refer to a list element that appears between $k^\\mathrm{before}$ and $k^\\mathrm{after}$, and that "},{"id":[1000000,193411],"value":"did not yet exist in the common ancestor (Definition~\\ref{def:common-ancestor}).\n\n"},{"id":[1000000,193499],"value":"Take "},{"id":[1000000,193512],"value":"a cursor that differs from $k^\\mathrm{before}$"},{"id":[1000000,193566],"value":": the list element it refers to was "},{"id":[1000000,193602],"span":7},{"id":[1000000,193609],"value":"inserted by a"},{"id":[1000000,193762],"value":" prior"},{"id":[1000000,193622],"span":1},{"id":[1000000,193623],"value":" operation"},{"id":[1000000,193705],"value":", whose cursor in turn refers to another prior operation"},{"id":[1000000,193775],"value":", and so on"},{"id":[1000000,193633],"span":35},{"id":[1000000,193668],"value":". "},{"id":[1000000,193786],"value":"Following this chain"},{"id":[1000000,193901],"value":" of cursors"},{"id":[1000000,193861],"value":" for a finite number of steps"},{"id":[1000000,193806],"value":" "},{"id":[1000000,193807],"span":11},{"id":[1000000,193818],"value":"leads to an operation"},{"id":[1000000,194025],"value":" $o_\\mathrm{first}$"},{"id":[1000000,193839],"value":" whose cursor refers t"},{"id":[1000000,193912],"value":"o $k"},{"id":[1000000,193918],"value":"^\\mathrm{before}$"},{"id":[1000000,193949],"span":1},{"id":[1000000,193950],"value":" "},{"id":[1000000,194045],"value":"("},{"id":[1000000,193951],"value":"since an insertion operation always inserts at a position after the cursor"},{"id":[1000000,194046],"value":")"},{"id":[1000000,193947],"span":1},{"id":[1000000,193935],"value":"."},{"id":[1000000,194110],"value":"\n\n"},{"id":[1000000,193936],"span":1},{"id":[1000000,193937],"value":"Note that "},{"id":[1000000,194047],"value":"all of the operations in this chain are causally dependent on "},{"id":[1000000,194112],"value":"$o_\\mathrm{first}$, and so they must have a"},{"id":[1000000,194167],"value":" Lamport timestamp greater than $o_\\mathrm{first}$. Thus, we can apply the same argument as in Lemma~\\ref{lem:insert-conflict}"},{"id":[1000000,194295],"value":": if $\\textsc{Insert}_2$ skips over the list element inserted by $o_\\mathrm{first}$, it will also skip over all of the list elements that are causally dependent on "},{"id":[1000000,194477],"value":"it; if $\\textsc{Insert}_1$ inserts a new element before $o_\\mathrm{first}$, it is also inserted before the chain of operations that is based on it."},{"id":[1000000,194463],"span":7},{"id":[1000000,194459],"span":2},{"id":[1000000,194293],"span":1},{"id":[1000000,194155],"span":6},{"id":[1000000,193916],"span":1},{"id":[1000000,193562],"span":2},{"id":[1000000,193558],"span":2},{"id":[1000000,193504],"span":4},{"id":[1000000,193385],"span":13},{"id":[1000000,193058],"span":9},{"id":[1000000,192883],"span":7},{"id":[1000000,187710],"span":28},{"id":[1000000,187747],"span":1},{"id":[1000000,187738],"span":9},{"id":[1000000,187749],"span":50},{"id":[1000000,187805],"span":51},{"id":[1000000,187864],"span":26},{"id":[1000000,188426],"span":2},{"id":[1000000,187890],"span":4},{"id":[1000000,188420],"span":1},{"id":[1000000,187894],"span":8},{"id":[1000000,188437],"span":4},{"id":[1000000,188449],"span":7},{"id":[1000000,188441],"span":4},{"id":[1000000,187902],"span":19},{"id":[1000000,188432],"span":2},{"id":[1000000,187921],"span":25},{"id":[1000000,187950],"span":36},{"id":[1000000,187946],"span":2},{"id":[1000000,187856],"span":4},{"id":[1000000,187799],"span":3},{"id":[1000000,187709],"span":1},{"id":[1000000,182838],"span":1},{"id":[1000000,187272],"span":45},{"id":[1000000,187321],"span":46},{"id":[1000000,187377],"span":34},{"id":[1000000,187425],"span":52},{"id":[1000000,187481],"span":104},{"id":[1000000,187589],"span":88},{"id":[1000000,187699],"span":7},{"id":[1000000,187987],"span":37},{"id":[1000000,188456],"span":7},{"id":[1000000,188853],"span":12},{"id":[1000000,188463],"span":37},{"id":[1000000,188546],"span":11},{"id":[1000000,188500],"span":5},{"id":[1000000,188511],"span":1},{"id":[1000000,188557],"span":51},{"id":[1000000,188778],"span":1},{"id":[1000000,188608],"span":24},{"id":[1000000,188877],"span":1},{"id":[1000000,189121],"span":21},{"id":[1000000,189143],"span":1},{"id":[1000000,188878],"span":50},{"id":[1000000,188930],"span":78},{"id":[1000000,189060],"span":61},{"id":[1000000,189145],"span":1},{"id":[1000000,189008],"span":2},{"id":[1000000,189147],"span":1},{"id":[1000000,189010],"span":25},{"id":[1000000,189037],"span":17},{"id":[1000000,189056],"span":4},{"id":[1000000,189148],"span":14},{"id":[1000000,189164],"span":2},{"id":[1000000,189162],"span":1},{"id":[1000000,189054],"span":1},{"id":[1000000,189035],"span":1},{"id":[1000000,188928],"span":1},{"id":[1000000,188512],"span":17},{"id":[1000000,188505],"span":3},{"id":[1000000,188024],"span":44},{"id":[1000000,188632],"span":7},{"id":[1000000,188865],"span":12},{"id":[1000000,188639],"span":1},{"id":[1000000,188644],"span":5},{"id":[1000000,188651],"span":105},{"id":[1000000,188758],"span":18},{"id":[1000000,188756],"span":1},{"id":[1000000,188649],"span":1},{"id":[1000000,188640],"span":2},{"id":[1000000,187706],"span":1},{"id":[1000000,187677],"span":13},{"id":[1000000,187696],"span":3},{"id":[1000000,189166],"value":"\n\n"},{"id":[1000000,194625],"value":"Therefore, the order of $o_r"},{"id":[1000000,194655],"value":"$ and $o_s$ in the final list "},{"id":[1000000,194784],"value":"is determined by"},{"id":[1000000,194685],"span":10},{"id":[1000000,194695],"value":" the Lamport timestamp"},{"id":[1000000,194771],"value":"s"},{"id":[1000000,194717],"value":" of the first "},{"id":[1000000,194761],"value":"insertion"},{"id":[1000000,194772],"value":"s "},{"id":[1000000,194800],"value":"into the insertion interval after the"},{"id":[1000000,194853],"value":"ir"},{"id":[1000000,194837],"value":" common ancestor"},{"id":[1000000,194856],"value":", in the chain"},{"id":[1000000,194897],"value":"s"},{"id":[1000000,194870],"value":" of cursor re"},{"id":[1000000,194885],"value":"ferences of "},{"id":[1000000,194898],"value":"the two operations."},{"id":[1000000,194883],"span":1},{"id":[1000000,194770],"span":1},{"id":[1000000,194731],"span":15},{"id":[1000000,194653],"span":1},{"id":[1000000,194624],"value":" "},{"id":[1000000,189168],"span":92},{"id":[1000000,189318],"span":2},{"id":[1000000,189320],"value":"Since the argument"},{"id":[1000000,193493],"value":" above"},{"id":[1000000,189338],"value":" applies to all pairs of concurrent operations $o_r,"},{"id":[1000000,189398],"value":" o_s$ in $H$, we deduce that the final order of elements in the list depends only on the operation IDs but not the order of application,"},{"id":[1000000,189390],"span":4},{"id":[1000000,189266],"span":1},{"id":[1000000,189267],"value":" which shows that "},{"id":[1000000,189549],"value":"concurrent insertions to the same list"},{"id":[1000000,189285],"span":15},{"id":[1000000,189300],"value":" are commutative."},{"id":[1000000,189260],"span":3},{"id":[1000000,187690],"span":3},{"id":[1000000,187585],"span":2},{"id":[1000000,187477],"span":2},{"id":[1000000,187411],"span":7},{"id":[1000000,187367],"span":5},{"id":[1000000,187319],"span":1},{"id":[1000000,187317],"span":1},{"id":[1000000,182840],"span":34},{"id":[1000000,182886],"span":153},{"id":[1000000,183264],"span":2},{"id":[1000000,183039],"span":29},{"id":[1000000,183070],"span":78},{"id":[1000000,183393],"span":4},{"id":[1000000,183148],"span":116},{"id":[1000000,183267],"span":29},{"id":[1000000,183304],"span":3},{"id":[1000000,183296],"span":8},{"id":[1000000,183307],"span":33},{"id":[1000000,183348],"span":45},{"id":[1000000,183340],"span":4},{"id":[1000000,183068],"span":1},{"id":[1000000,182874],"span":6},{"id":[1000000,182839],"value":"\n"},{"id":[1000000,182825],"span":1},{"id":[1000000,182826],"value":"\\end{proof}"},{"id":[1000000,182483],"span":3},{"id":[1000000,182523],"span":11},{"id":[1000000,182486],"span":10},{"id":[1000000,182506],"span":17},{"id":[1000000,182534],"span":22},{"id":[1000000,182496],"span":5},{"id":[1000000,167587],"value":"\n\n"},{"id":[1000000,167589],"span":18},{"id":[1000000,167993],"span":14},{"id":[1000000,168011],"span":3},{"id":[1000000,168007],"span":2},{"id":[1000000,167607],"span":15},{"id":[1000000,167624],"span":12},{"id":[1000000,167653],"span":102},{"id":[1000000,168160],"span":7},{"id":[1000000,167755],"span":119},{"id":[1000000,168200],"span":20},{"id":[1000000,168225],"span":38},{"id":[1000000,167874],"span":23},{"id":[1000000,168175],"span":7},{"id":[1000000,167897],"span":70},{"id":[1000000,168281],"span":9},{"id":[1000000,168198],"span":1},{"id":[1000000,167967],"span":26},{"id":[1000000,168290],"span":92},{"id":[1000000,167636],"span":17},{"id":[1000000,167622],"span":1},{"id":[1000000,167340],"span":42},{"id":[1000000,167399],"span":45},{"id":[1000000,167382],"span":17},{"id":[1000000,167066],"span":42},{"id":[1000000,167120],"span":57},{"id":[1000000,167119],"span":1},{"id":[1000000,167108],"span":11},{"id":[1000000,167177],"span":15},{"id":[1000000,167204],"span":50},{"id":[1000000,167293],"span":8},{"id":[1000000,167254],"span":30},{"id":[1000000,168137],"span":15},{"id":[1000000,168382],"span":9},{"id":[1000000,168395],"span":2},{"id":[1000000,168399],"span":14},{"id":[1000000,168397],"span":1},{"id":[1000000,168391],"span":2},{"id":[1000000,167585],"span":2},{"id":[1000000,168081],"span":8},{"id":[1000000,168413],"span":9},{"id":[1000000,168424],"span":7},{"id":[1000000,168422],"span":1},{"id":[1000000,168089],"span":1},{"id":[1000000,168431],"span":10},{"id":[1000000,168443],"span":16},{"id":[1000000,168441],"span":1},{"id":[1000000,168090],"span":20},{"id":[1000000,168459],"span":21},{"id":[1000000,168110],"span":26},{"id":[1000000,168481],"span":16},{"id":[1000000,168503],"span":43},{"id":[1000000,168550],"span":30},{"id":[1000000,168582],"span":145},{"id":[1000000,168729],"span":82},{"id":[1000000,169012],"span":44},{"id":[1000000,169058],"span":41},{"id":[1000000,169107],"span":44},{"id":[1000000,169155],"span":66},{"id":[1000000,169251],"span":1},{"id":[1000000,169221],"span":1},{"id":[1000000,169226],"span":24},{"id":[1000000,169252],"span":369},{"id":[1000000,171615],"span":123},{"id":[1000000,171743],"span":7},{"id":[1000000,171738],"span":5},{"id":[1000000,171750],"span":67},{"id":[1000000,169224],"span":1},{"id":[1000000,169222],"span":1},{"id":[1000000,169151],"span":2},{"id":[1000000,169099],"span":4},{"id":[1000000,169056],"span":1},{"id":[1000000,168727],"span":1},{"id":[1000000,168580],"span":1},{"id":[1000000,168546],"span":2},{"id":[1000000,168497],"span":3},{"id":[1000000,168136],"span":1},{"id":[1000000,167301],"span":18},{"id":[1000000,167321],"span":19},{"id":[1000000,167319],"span":1},{"id":[1000000,167192],"span":12},{"id":[1000000,164871],"span":2},{"id":[1000000,164400],"span":1},{"id":[1000000,164195],"span":1},{"id":[1000000,162737],"span":1},{"id":[1000000,176105],"span":1},{"id":[1000000,176106],"value":"\\begin{"},{"id":[1000000,176117],"value":"lemma}\\label{lem:delete-commute}\n"},{"id":[1000000,204452],"value":"In a"},{"id":[1000000,204456],"span":11},{"id":[1000000,204467],"value":" history $H$, "},{"id":[1000000,204483],"value":"a "},{"id":[1000000,204482],"value":"d"},{"id":[1000000,176166],"span":1},{"id":[1000000,176167],"value":"eletion"},{"id":[1000000,204485],"value":" operation"},{"id":[1000000,176174],"value":" is commutative with respect to"},{"id":[1000000,176205],"span":6},{"id":[1000000,176211],"value":" concurrent operations.\n\\end{lemma}"},{"id":[1000000,203366],"value":"\n\n\\begin{proof}"},{"id":[1000000,204405],"value":"\nGiven a deletion operation $o_"},{"id":[1000000,204440],"span":5},{"id":[1000000,204549],"span":2},{"id":[1000000,204445],"span":3},{"id":[1000000,204448],"value":"d"},{"id":[1000000,204449],"span":3},{"id":[1000000,204436],"span":1},{"id":[1000000,204437],"value":"$ "},{"id":[1000000,204506],"value":"and any other concurrent operation $o_c$"},{"id":[1000000,204599],"value":", we must show that the document state after applying both operations does not depend on the order in which $o_d$ and $o_c$ were applied."},{"id":[1000000,204546],"value":"\n"},{"id":[1000000,203393],"value":"\nThe rules in Figure~\\ref{fig:clear"},{"id":[1000000,203430],"value":"-ru"},{"id":[1000000,203439],"value":"les} define how a deletion operation"},{"id":[1000000,203608],"value":" $o_"},{"id":[1000000,203612],"span":8},{"id":[1000000,203620],"value":"d"},{"id":[1000000,203621],"span":3},{"id":[1000000,203624],"value":"$"},{"id":[1000000,203475],"value":" is applied: starting at the cursor "},{"id":[1000000,203557],"value":"in the operation, they recursively descend the "},{"id":[1000000,203672],"value":"sub"},{"id":[1000000,203604],"value":"tree"},{"id":[1000000,203625],"value":", removing $o_"},{"id":[1000000,203639],"span":8},{"id":[1000000,203647],"value":"d"},{"id":[1000000,203648],"span":3},{"id":[1000000,203651],"value":".\\mathit{deps}$ from"},{"id":[1000000,203683],"value":" the presence set $\\mathsf{pres}(k)$ at"},{"id":[1000000,203671],"value":" "},{"id":[1000000,203675],"value":"all bran"},{"id":[1000000,203722],"value":"ch nodes in the subtree"},{"id":[1000000,203808],"value":", and updating all registers to remove any values written by operations in $o_"},{"id":[1000000,203886],"span":5},{"id":[1000000,204553],"span":2},{"id":[1000000,203891],"span":3},{"id":[1000000,203894],"value":"d"},{"id":[1000000,203895],"span":3},{"id":[1000000,203898],"value":".\\mathit{deps}$."},{"id":[1000000,204738],"value":"\n\n"},{"id":[1000000,204740],"span":95},{"id":[1000000,204835],"value":"If $o_c$ is an assignment or insertion operation, the \\textsc{Assign}"},{"id":[1000000,204938],"value":" rule adds $o_c.\\mathit{id}$ to "},{"id":[1000000,204976],"value":"the "},{"id":[1000000,204994],"value":"mapping from operation ID to value for a register, and the \\textsc{Descend}, \\textsc{Assign},"},{"id":[1000000,204980],"span":7},{"id":[1000000,204970],"span":3},{"id":[1000000,204904],"span":1},{"id":[1000000,204905],"value":" \\textsc{Empty-Map} and \\textsc{"},{"id":[1000000,205087],"value":"Empty-List} rules add $o_c.\\mathit{id}$ to the presence sets $\\mathsf{pres}(k)$ along the path through the document tree described b"},{"id":[1000000,205223],"value":"y the cursor."},{"id":[1000000,205483],"value":"\n\nIf"},{"id":[1000000,205530],"value":" $o_d.\\mathit{cur}$ is not a prefix of"},{"id":[1000000,205528],"span":1},{"id":[1000000,205487],"value":" $o_c"},{"id":[1000000,205495],"value":".\\mathit{cur}"},{"id":[1000000,205492],"value":"$"},{"id":[1000000,205590],"value":", the "},{"id":[1000000,205598],"value":"operations affect disjoint subtrees of the document, and so they are trivially commutative."},{"id":[1000000,206168],"value":" Any state changes by \\textsc{Descend} and $\\textsc{Add-ID}_1$ along the "},{"id":[1000000,206245],"value":"shared part of the cursor path are applied using the set union operator $\\cup$, which is commutative.\n\n"},{"id":[1000000,206388],"value":"Now consider"},{"id":[1000000,206241],"span":2},{"id":[1000000,205689],"span":27},{"id":[1000000,205718],"span":13},{"id":[1000000,205731],"value":" the case where $o_d.\\mathit{cur}"},{"id":[1000000,205772],"value":"$ is a prefix of $o_c.\\mathit{cur}$."},{"id":[1000000,206402],"value":" "},{"id":[1000000,205764],"span":4},{"id":[1000000,205716],"span":1},{"id":[1000000,205596],"span":1},{"id":[1000000,205493],"span":2},{"id":[1000000,205508],"span":20},{"id":[1000000,205236],"span":2},{"id":[1000000,205238],"value":"Since $o_c$ is concurrent with $o_d$, we know that $o_c.\\mathit{id} \\notin o_d.\\mathit{deps}$."},{"id":[1000000,205427],"value":" Th"},{"id":[1000000,206092],"value":"erefore"},{"id":[1000000,205430],"span":2},{"id":[1000000,205432],"value":", if $o_c$ is applied before $o_d$ in "},{"id":[1000000,205472],"value":"the history"},{"id":[1000000,205808],"value":", the \\textsc{Clear-*} rules "},{"id":[1000000,205857],"value":"evaluating $o_d$ wi"},{"id":[1000000,205994],"value":"ll"},{"id":[1000000,205876],"span":2},{"id":[1000000,205878],"value":" leave any occurrences of $o_c.\\mathit{id}$ "},{"id":[1000000,205928],"value":"in the document state "},{"id":[1000000,205922],"value":"undist"},{"id":[1000000,205950],"value":"urbed"},{"id":[1000000,206099],"value":", while removing any occurrences of operations in $o_d.\\mathit{deps}$"},{"id":[1000000,205955],"value":"."},{"id":[1000000,206406],"value":"\n\nIf $o_"},{"id":[1000000,206442],"value":"d"},{"id":[1000000,206414],"span":1},{"id":[1000000,206415],"value":"$ is applied "},{"id":[1000000,206448],"value":"before"},{"id":[1000000,206428],"span":5},{"id":[1000000,206433],"value":" $o_"},{"id":[1000000,206455],"value":"c"},{"id":[1000000,206437],"span":1},{"id":[1000000,206438],"value":"$, "},{"id":[1000000,206456],"value":"the effect on presence sets and registers is the same as if they had been "},{"id":[1000000,206544],"value":"applied in the reverse orde"},{"id":[1000000,206599],"value":"r. Moreover"},{"id":[1000000,206612],"value":", $o_c$ "},{"id":[1000000,206668],"value":"applies in the same wa"},{"id":[1000000,206692],"value":"y as if $o_d$ had not been applied previously, because "},{"id":[1000000,206775],"value":"applying a deletion only modifies presence sets and registers, "},{"id":[1000000,207043],"value":"without"},{"id":[1000000,206838],"span":12},{"id":[1000000,206850],"value":" actually remov"},{"id":[1000000,207051],"value":"ing"},{"id":[1000000,206865],"span":5},{"id":[1000000,206870],"value":" map keys or list "},{"id":[1000000,206898],"value":"elements"},{"id":[1000000,206907],"value":", and because the rules for applying an operation are not conditional on the previous content of presence sets and registers"},{"id":[1000000,206906],"value":"."},{"id":[1000000,206888],"span":5},{"id":[1000000,206763],"span":6},{"id":[1000000,206759],"span":2},{"id":[1000000,206747],"span":6},{"id":[1000000,206690],"span":1},{"id":[1000000,206620],"span":24},{"id":[1000000,206610],"span":1},{"id":[1000000,206571],"span":14},{"id":[1000000,206530],"span":7},{"id":[1000000,206404],"value":"\n\n"},{"id":[1000000,207058],"value":"Thus, "},{"id":[1000000,207065],"value":"t"},{"id":[1000000,205956],"span":2},{"id":[1000000,205958],"value":"he effect of "},{"id":[1000000,205983],"value":"applying "},{"id":[1000000,205996],"value":"$o_c$ before $o_d$ is"},{"id":[1000000,206017],"span":5},{"id":[1000000,206022],"value":" the same as applying $o_d$ before $o_c$, so the operations commute."},{"id":[1000000,205971],"span":6},{"id":[1000000,205837],"span":10},{"id":[1000000,205470],"span":1},{"id":[1000000,205219],"span":2},{"id":[1000000,204736],"span":1},{"id":[1000000,203511],"span":23},{"id":[1000000,203433],"span":3},{"id":[1000000,203428],"span":1},{"id":[1000000,203381],"value":"\n\\end{proof}"},{"id":[1000000,176246],"value":"\n\n\\begin{lemma}\\label{lem:assign-commute}\n"},{"id":[1000000,209391],"value":"In a history $H$, an "},{"id":[1000000,209413],"value":"a"},{"id":[1000000,176288],"span":1},{"id":[1000000,176289],"value":"ssignment"},{"id":[1000000,209414],"value":" operation"},{"id":[1000000,176298],"value":" is commutative with respect to "},{"id":[1000000,176330],"span":6},{"id":[1000000,176336],"value":"concurrent operations."},{"id":[1000000,176150],"span":8},{"id":[1000000,176113],"span":2},{"id":[1000000,3226],"value":"\n"},{"id":[1000000,176370],"value":"\\end{lemma}"},{"id":[1000000,209424],"value":"\n\n\\begin{proof}"},{"id":[1000000,209451],"value":"\nGiven an assignment $o_a$ and any other concurrent operation $o_c$, we must show that the document state after applying both operations does not depend on the order in which "},{"id":[1000000,209628],"value":"$o_a$ and $o_c$ were applied.\n\nThe rules \\textsc{Assign}, \\textsc{Empty-Map} and \\textsc{Empty-List} define how an assignment operation $o_a$ is applied, depending on the value being assigned. All three rules first clear any causally prior state from the cursor at which the assignment is occurring; by Lemma~\\ref{lem:delete-commute}, this clearing operation is commutative with concurrent operations, and leaves updates by concurrent operations untouched."},{"id":[1000000,209626],"span":1},{"id":[1000000,209439],"value":"\n"},{"id":[1000000,210085],"value":"\n"},{"id":[1000000,210124],"value":"The rules also add $o_a.\\mathit{id}$ to the presence set identified by the cursor, and \\textsc{Descend} adds $o_a.\\mathit{id}$ to the presence sets "},{"id":[1000000,210276],"value":"on the path from the root of the document tree described by the cursor. These state changes are applied using the set union operator $\\cup$, which is commutative.\n\nFinally"},{"id":[1000000,210449],"value":", in the case where"},{"id":[1000000,210539],"value":" value assigned by $o_a$"},{"id":[1000000,210468],"value":" "},{"id":[1000000,210469],"span":19},{"id":[1000000,210488],"value":"is a primitive and the \\textsc{Assign} rule applies"},{"id":[1000000,210582],"value":", the mapping from operation ID to value is added to the register"},{"id":[1000000,210721],"value":" by the expression"},{"id":[1000000,210661],"span":1},{"id":[1000000,210662],"value":" "},{"id":[1000000,210665],"value":"$\\mathit{child}[\\,\\mathit{id} \\mapsto \\mathit{val}\\,]$."},{"id":[1000000,210940],"span":1},{"id":[1000000,210739],"value":" "},{"id":[1000000,210740],"span":102},{"id":[1000000,211633],"span":1},{"id":[1000000,210842],"span":11},{"id":[1000000,211634],"span":1},{"id":[1000000,210853],"span":42},{"id":[1000000,211001],"span":4},{"id":[1000000,210895],"span":29},{"id":[1000000,210926],"span":13},{"id":[1000000,210942],"span":53},{"id":[1000000,211005],"span":6},{"id":[1000000,210939],"span":1},{"id":[1000000,211011],"span":2},{"id":[1000000,211013],"value":"If"},{"id":[1000000,211105],"value":" $o_c$ is not an assignment operation or if"},{"id":[1000000,211015],"value":" $o_a.\\mathit{cursor} \\not= o_c.\\mathit{cursor}$, the "},{"id":[1000000,211085],"value":"operations "},{"id":[1000000,211157],"value":"are independent and thus trivially commutative."},{"id":[1000000,212324],"value":"\n\n"},{"id":[1000000,211204],"span":1},{"id":[1000000,211205],"value":"If $o_a$ and $o_c$ are assignments to the same cursor, we use the "},{"id":[1000000,211644],"value":"commutativity of "},{"id":[1000000,211661],"span":5},{"id":[1000000,211668],"span":7},{"id":[1000000,211675],"value":"updates to a partial function:"},{"id":[1000000,211666],"span":1},{"id":[1000000,211271],"span":9},{"id":[1000000,211280],"value":" "},{"id":[1000000,211365],"value":"$\\mathit{child}[\\,\\mathit{id}_1 \\mapsto \\mathit{val"},{"id":[1000000,211418],"value":"}_1\\,]"},{"id":[1000000,211528],"value":"\\,"},{"id":[1000000,211424],"value":"["},{"id":[1000000,211427],"value":"\\,\\mathit{id}_2 \\mapsto \\mathit{val}_2\\,] = \\mathit{child}[\\,\\mathit{id}_2 \\mapsto \\mathit{val}_2\\,]"},{"id":[1000000,211530],"value":"\\,"},{"id":[1000000,211527],"value":"["},{"id":[1000000,211532],"value":"\\,\\mathit{id}_1 \\mapsto \\mathit{val}_1"},{"id":[1000000,211572],"value":"\\,]$ provided that $\\mathit{id}_1 \\not= \\mathit{"},{"id":[1000000,211626],"value":"id}_2$."},{"id":[1000000,211914],"value":" Since operation IDs (Lamport timestamps) are unique, two concurrent assignments add two different keys to the mapping"},{"id":[1000000,212033],"value":", and their order is immaterial"},{"id":[1000000,212032],"value":"."},{"id":[1000000,211705],"value":"\n\nThus, "},{"id":[1000000,211729],"value":"all parts of the process of applying $o_"},{"id":[1000000,211771],"value":"a$ have the same effect"},{"id":[1000000,211858],"value":" on the document state"},{"id":[1000000,211794],"value":", regardless of whether $o_c$ "},{"id":[1000000,211883],"value":"is"},{"id":[1000000,211824],"span":3},{"id":[1000000,211827],"value":" applied before or after $o_a$"},{"id":[1000000,211885],"value":", so the op"},{"id":[1000000,211898],"value":"erations commute"},{"id":[1000000,211896],"span":1},{"id":[1000000,211857],"value":"."},{"id":[1000000,211769],"span":1},{"id":[1000000,211713],"span":8},{"id":[1000000,211620],"span":3},{"id":[1000000,211570],"span":1},{"id":[1000000,211425],"span":1},{"id":[1000000,211416],"span":1},{"id":[1000000,211281],"span":42},{"id":[1000000,211096],"span":9},{"id":[1000000,211069],"span":8},{"id":[1000000,210924],"span":1},{"id":[1000000,210663],"span":1},{"id":[1000000,210647],"span":7},{"id":[1000000,210447],"span":1},{"id":[1000000,210272],"span":2},{"id":[1000000,210084],"value":"\n"},{"id":[1000000,209440],"value":"\\end{proof}"},{"id":[1000000,212338],"value":"\n\n\\begin{lemma}\\label{lem:op-commute}"},{"id":[1000000,212877],"value":"\n"},{"id":[1000000,212915],"value":"Given an operation histor"},{"id":[1000000,212946],"value":"y $H=\\langle o_1, \\dots, o_n \\rangle$"},{"id":[1000000,213001],"value":" from a valid execution"},{"id":[1000000,212983],"value":", a new operation "},{"id":[1000000,213024],"value":"$o_{n+1}$ from that execution can be inserted at any point in $H$"},{"id":[1000000,213151],"value":" after $o"},{"id":[1000000,213162],"value":"_{n+1}.\\mathit{deps}$ have been applied. "},{"id":[1000000,213246],"value":"For "},{"id":[1000000,213251],"value":"a"},{"id":[1000000,213205],"span":1},{"id":[1000000,213206],"value":"ll"},{"id":[1000000,213230],"value":" histories "},{"id":[1000000,213315],"value":"$H'$ "},{"id":[1000000,213241],"value":"that "},{"id":[1000000,213252],"value":"can be constructed this way, the document state resulting from "},{"id":[1000000,213320],"value":"applying the operations in $H'$ in order is the same, and independent of the ordering of any concurrent operations in $H$."},{"id":[1000000,213208],"span":11},{"id":[1000000,213203],"span":1},{"id":[1000000,213160],"span":1},{"id":[1000000,213089],"span":31},{"id":[1000000,212940],"span":3},{"id":[1000000,212914],"value":"\n"},{"id":[1000000,212878],"value":"\\end{lemma}\n\n\\begin{proof}"},{"id":[1000000,213535],"value":"\n$H$ can be split into a prefix and a suffix, as described in the proof of Theorem~\\ref{thm:convergence}."},{"id":[1000000,213706],"value":" The suffix contains only operations that are concurrent with $o_{n+1}$"},{"id":[1000000,213781],"value":", and w"},{"id":[1000000,213777],"span":1},{"id":[1000000,213640],"span":2},{"id":[1000000,213642],"value":"e allow $o_{n+1}$ to be inserted at any point after the prefix"},{"id":[1000000,213790],"value":". "},{"id":[1000000,213704],"span":2},{"id":[1000000,213442],"span":1},{"id":[1000000,213444],"value":"We"},{"id":[1000000,213793],"value":" then"},{"id":[1000000,213446],"value":" prove the lemma case-by-case, depending on the t"},{"id":[1000000,213505],"value":"ype of mutation in $o_{n+1}$. "},{"id":[1000000,213495],"span":5},{"id":[1000000,213443],"value":"\n"},{"id":[1000000,213798],"value":"\n"},{"id":[1000000,213800],"value":"If $o_"},{"id":[1000000,213810],"value":"{n+1}$ is a deletion, by Lemma~\\ref{lem:delete-commute} it is co"},{"id":[1000000,213916],"value":"mmutative with all operations in the suffix, and so $"},{"id":[1000000,213971],"value":"o_{n+1}$ can be inserted at any point within, before, or after the suffix without changing its"},{"id":[1000000,214067],"value":" effect on the final document state. Similarly, if $o_{n+1}$ is an assignment, by Lemma~\\ref{lem:assign-commute} it is commutative with all operations in the suffix.\n\nIf $o_"},{"id":[1000000,214242],"value":"{n+1}$ is an insertion, let $o_c$ be any operation in the suffix, and consider the cases "},{"id":[1000000,214341],"value":"of $o_{n+1}$ being inserted before and after $o_c$ in the history. If $o_c$ is a deletion or assignment, it is commutative with $o_{n+1}$ by Lemma~\\ref{lem:"},{"id":[1000000,214503],"value":"delete-commute} or Lemma~\\ref{lem:assign-commute} respectively."},{"id":[1000000,214767],"value":" If $o_c$ is an insertion into the same list as $o_{n+"},{"id":[1000000,214823],"value":"1}$, then by Lemma~\\ref{lem:insert-reorder} the operations are commutative."},{"id":[1000000,214821],"span":1},{"id":[1000000,214566],"value":" If $o_c$ is an insertion into a different list in the document"},{"id":[1000000,214765],"span":1},{"id":[1000000,214757],"span":4},{"id":[1000000,214629],"value":", its effect is independent from $o_{n+1}$ and so the two operations can be applied in any order."},{"id":[1000000,214726],"span":31},{"id":[1000000,214497],"span":3},{"id":[1000000,214331],"span":5},{"id":[1000000,214240],"span":1},{"id":[1000000,214065],"span":1},{"id":[1000000,213969],"span":1},{"id":[1000000,213874],"span":21},{"id":[1000000,213806],"span":2},{"id":[1000000,213799],"value":"\n"},{"id":[1000000,212387],"value":"\n"},{"id":[1000000,215074],"value":"Thus,"},{"id":[1000000,215089],"value":" $o_{n+"},{"id":[1000000,215100],"value":"1}$ is commutative with respect to any concurrent operation in $H$"},{"id":[1000000,215316],"value":". "},{"id":[1000000,215319],"value":"T"},{"id":[1000000,215166],"span":7},{"id":[1000000,215173],"value":"herefore"},{"id":[1000000,215320],"value":","},{"id":[1000000,215181],"value":" "},{"id":[1000000,215309],"value":"$"},{"id":[1000000,215321],"value":"o_{n+1}$ can be inserted"},{"id":[1000000,215400],"value":" into $H$"},{"id":[1000000,215345],"value":" at any point after "},{"id":[1000000,215367],"value":"its causal dependencies, and the "},{"id":[1000000,215409],"value":"effect on the final document state is independent of the position at which the operation is inserted."},{"id":[1000000,215365],"span":1},{"id":[1000000,215096],"span":2},{"id":[1000000,215079],"span":5},{"id":[1000000,212388],"span":81},{"id":[1000000,212471],"span":64},{"id":[1000000,212469],"span":1},{"id":[1000000,212375],"value":"\n\\end{"},{"id":[1000000,212909],"value":"proof"},{"id":[1000000,212381],"span":5},{"id":[1000000,212386],"value":"}"},{"id":[1000000,215182],"value":"\n\nThis completes the induction step in the proof of Theorem~\\ref{thm:convergence}, and thus proves convergence of our datatype."},{"id":[1000000,209286],"value":"\n"},{"id":[1000000,176381],"span":1},{"id":[1000000,3235],"span":33},{"id":[1000000,3272],"span":56},{"id":[1000000,3470],"span":1},{"id":[1000000,3328],"span":21},{"id":[1000000,3661],"span":7},{"id":[1000000,3828],"span":5},{"id":[1000000,3668],"span":11},{"id":[1000000,3639],"span":2},{"id":[1000000,3656],"span":1},{"id":[1000000,3349],"span":12},{"id":[1000000,3365],"span":2},{"id":[1000000,3382],"span":2},{"id":[1000000,3478],"span":1},{"id":[1000000,3384],"span":8},{"id":[1000000,3964],"span":1},{"id":[1000000,3392],"span":47},{"id":[1000000,3441],"span":22},{"id":[1000000,3479],"span":1},{"id":[1000000,3962],"span":1},{"id":[1000000,3480],"span":2},{"id":[1000000,3969],"span":1},{"id":[1000000,3965],"span":1},{"id":[1000000,3968],"span":1},{"id":[1000000,3482],"span":14},{"id":[1000000,3508],"span":1},{"id":[1000000,3955],"span":6},{"id":[1000000,3535],"span":53},{"id":[1000000,3509],"span":2},{"id":[1000000,3805],"span":2},{"id":[1000000,3808],"span":5},{"id":[1000000,3511],"span":3},{"id":[1000000,3961],"span":1},{"id":[1000000,3514],"span":4},{"id":[1000000,7541],"span":5},{"id":[1000000,3518],"span":8},{"id":[1000000,3855],"span":1},{"id":[1000000,3526],"span":5},{"id":[1000000,3846],"span":1},{"id":[1000000,3849],"span":1},{"id":[1000000,3847],"span":1},{"id":[1000000,3588],"span":37},{"id":[1000000,3856],"span":1},{"id":[1000000,3938],"span":2},{"id":[1000000,3857],"span":6},{"id":[1000000,3940],"span":2},{"id":[1000000,3863],"span":1},{"id":[1000000,3872],"span":15},{"id":[1000000,3864],"span":4},{"id":[1000000,3701],"span":4},{"id":[1000000,3949],"span":6},{"id":[1000000,3705],"span":2},{"id":[1000000,3798],"span":2},{"id":[1000000,3707],"span":12},{"id":[1000000,3721],"span":29},{"id":[1000000,3966],"span":2},{"id":[1000000,3750],"span":27},{"id":[1000000,3796],"span":2},{"id":[1000000,3795],"span":1},{"id":[1000000,3777],"span":1},{"id":[1000000,3814],"span":6},{"id":[1000000,3778],"span":3},{"id":[1000000,3948],"span":1},{"id":[1000000,3781],"span":4},{"id":[1000000,7536],"span":5},{"id":[1000000,3785],"span":8},{"id":[1000000,3854],"span":1},{"id":[1000000,3793],"span":2},{"id":[1000000,3852],"span":2},{"id":[1000000,3887],"span":29},{"id":[1000000,3942],"span":2},{"id":[1000000,3916],"span":6},{"id":[1000000,3944],"span":1},{"id":[1000000,3947],"span":1},{"id":[1000000,3945],"span":1},{"id":[1000000,3922],"span":16},{"id":[1000000,3719],"span":1},{"id":[1000000,3496],"span":12},{"id":[1000000,3684],"span":6},{"id":[1000000,3841],"span":5},{"id":[1000000,3690],"span":10},{"id":[1000000,7378],"span":70},{"id":[1000000,8189],"span":14},{"id":[1000000,7448],"span":32},{"id":[1000000,7484],"span":14},{"id":[1000000,16496],"span":29},{"id":[1000000,7498],"span":27},{"id":[1000000,7527],"span":9},{"id":[1000000,7525],"span":1},{"id":[1000000,7480],"span":2},{"id":[1000000,3970],"span":2},{"id":[1000000,4201],"span":1},{"id":[1000000,3972],"span":34},{"id":[1000000,4008],"span":77},{"id":[1000000,4101],"span":56},{"id":[1000000,4167],"span":11},{"id":[1000000,4202],"span":57},{"id":[1000000,4265],"span":164},{"id":[1000000,4431],"span":16},{"id":[1000000,4477],"span":13},{"id":[1000000,4447],"span":30},{"id":[1000000,4490],"span":49},{"id":[1000000,4576],"span":1},{"id":[1000000,4539],"span":19},{"id":[1000000,4589],"span":30},{"id":[1000000,4627],"span":35},{"id":[1000000,10684],"span":3},{"id":[1000000,4662],"span":14},{"id":[1000000,4678],"span":1},{"id":[1000000,4692],"span":1},{"id":[1000000,4679],"span":12},{"id":[1000000,4693],"span":3},{"id":[1000000,4818],"span":4},{"id":[1000000,4696],"span":1},{"id":[1000000,4823],"span":1},{"id":[1000000,4697],"span":1},{"id":[1000000,4715],"span":36},{"id":[1000000,4780],"span":1},{"id":[1000000,4751],"span":2},{"id":[1000000,4804],"span":4},{"id":[1000000,4753],"span":9},{"id":[1000000,4800],"span":1},{"id":[1000000,4762],"span":1},{"id":[1000000,4801],"span":2},{"id":[1000000,4763],"span":16},{"id":[1000000,4781],"span":19},{"id":[1000000,4676],"span":1},{"id":[1000000,4619],"span":4},{"id":[1000000,4558],"span":12},{"id":[1000000,4429],"span":1},{"id":[1000000,4259],"span":3},{"id":[1000000,4157],"span":5},{"id":[1000000,4085],"span":8},{"id":[1000000,4006],"span":1},{"id":[1000000,3700],"span":1},{"id":[1000000,4698],"span":1},{"id":[1000000,4813],"span":3},{"id":[1000000,4699],"span":11},{"id":[1000000,4712],"span":2},{"id":[1000000,8219],"span":65},{"id":[1000000,8286],"span":94},{"id":[1000000,8393],"span":8},{"id":[1000000,8403],"span":10},{"id":[1000000,8453],"span":1},{"id":[1000000,8413],"span":3},{"id":[1000000,8420],"span":9},{"id":[1000000,8862],"span":1},{"id":[1000000,8429],"span":24},{"id":[1000000,8454],"span":11},{"id":[1000000,8863],"span":1},{"id":[1000000,8465],"span":15},{"id":[1000000,8482],"span":21},{"id":[1000000,8517],"span":8},{"id":[1000000,8533],"span":24},{"id":[1000000,8864],"span":1},{"id":[1000000,8557],"span":10},{"id":[1000000,8836],"span":1},{"id":[1000000,8845],"span":1},{"id":[1000000,8567],"span":16},{"id":[1000000,8585],"span":29},{"id":[1000000,8616],"span":28},{"id":[1000000,8675],"span":30},{"id":[1000000,8644],"span":10},{"id":[1000000,8865],"span":1},{"id":[1000000,8654],"span":10},{"id":[1000000,8843],"span":2},{"id":[1000000,8664],"span":11},{"id":[1000000,8718],"span":59},{"id":[1000000,8779],"span":1},{"id":[1000000,8852],"span":2},{"id":[1000000,8780],"span":2},{"id":[1000000,8851],"span":1},{"id":[1000000,8782],"span":16},{"id":[1000000,8800],"span":30},{"id":[1000000,8798],"span":1},{"id":[1000000,8777],"span":1},{"id":[1000000,8614],"span":1},{"id":[1000000,8583],"span":1},{"id":[1000000,8525],"span":4},{"id":[1000000,8503],"span":5},{"id":[1000000,8510],"span":7},{"id":[1000000,8508],"span":1},{"id":[1000000,8480],"span":1},{"id":[1000000,8416],"span":2},{"id":[1000000,8401],"span":1},{"id":[1000000,8380],"span":13},{"id":[1000000,8866],"span":157},{"id":[1000000,9506],"span":4},{"id":[1000000,9023],"span":34},{"id":[1000000,9059],"span":2},{"id":[1000000,9065],"span":53},{"id":[1000000,10616],"span":3},{"id":[1000000,9118],"span":9},{"id":[1000000,10599],"span":4},{"id":[1000000,9127],"span":26},{"id":[1000000,10620],"span":37},{"id":[1000000,9153],"span":3},{"id":[1000000,9189],"span":4},{"id":[1000000,9197],"span":1},{"id":[1000000,9193],"span":2},{"id":[1000000,9156],"span":17},{"id":[1000000,9198],"span":1},{"id":[1000000,9204],"span":32},{"id":[1000000,9173],"span":1},{"id":[1000000,9201],"span":3},{"id":[1000000,9174],"span":15},{"id":[1000000,11046],"span":14},{"id":[1000000,11062],"span":2},{"id":[1000000,11060],"span":1},{"id":[1000000,10788],"span":1},{"id":[1000000,9300],"span":117},{"id":[1000000,10792],"span":14},{"id":[1000000,9417],"span":11},{"id":[1000000,9442],"span":3},{"id":[1000000,10807],"span":1},{"id":[1000000,9445],"span":21},{"id":[1000000,10836],"span":4},{"id":[1000000,9466],"span":1},{"id":[1000000,10822],"span":4},{"id":[1000000,9467],"span":39},{"id":[1000000,9510],"span":8},{"id":[1000000,10833],"span":1},{"id":[1000000,10840],"span":27},{"id":[1000000,9518],"span":4},{"id":[1000000,10871],"span":4},{"id":[1000000,9522],"span":9},{"id":[1000000,10903],"span":1},{"id":[1000000,9531],"span":29},{"id":[1000000,10904],"span":10},{"id":[1000000,9560],"span":27},{"id":[1000000,10658],"span":7},{"id":[1000000,10680],"span":1},{"id":[1000000,11043],"span":3},{"id":[1000000,10665],"span":15},{"id":[1000000,10681],"span":3},{"id":[1000000,10687],"span":91},{"id":[1000000,10914],"span":1},{"id":[1000000,10778],"span":3},{"id":[1000000,9587],"span":3},{"id":[1000000,9631],"span":35},{"id":[1000000,9672],"span":79},{"id":[1000000,9666],"span":3},{"id":[1000000,9594],"span":37},{"id":[1000000,9751],"span":30},{"id":[1000000,9787],"span":8},{"id":[1000000,9805],"span":6},{"id":[1000000,9795],"span":10},{"id":[1000000,9811],"span":230},{"id":[1000000,10221],"span":2},{"id":[1000000,10227],"span":3},{"id":[1000000,10223],"span":2},{"id":[1000000,10041],"span":18},{"id":[1000000,10061],"span":15},{"id":[1000000,10386],"span":14},{"id":[1000000,10076],"span":64},{"id":[1000000,10142],"span":5},{"id":[1000000,10149],"span":72},{"id":[1000000,10235],"span":9},{"id":[1000000,10288],"span":98},{"id":[1000000,10400],"span":19},{"id":[1000000,10437],"span":39},{"id":[1000000,10536],"span":4},{"id":[1000000,10518],"span":9},{"id":[1000000,10476],"span":41},{"id":[1000000,10541],"span":58},{"id":[1000000,11064],"span":79},{"id":[1000000,11145],"span":30},{"id":[1000000,11209],"span":1},{"id":[1000000,12278],"span":16},{"id":[1000000,12304],"span":17},{"id":[1000000,12322],"span":1},{"id":[1000000,12294],"span":10},{"id":[1000000,11210],"span":1},{"id":[1000000,11175],"span":33},{"id":[1000000,11211],"span":37},{"id":[1000000,11280],"span":89},{"id":[1000000,12483],"span":5},{"id":[1000000,11369],"span":4},{"id":[1000000,11387],"span":118},{"id":[1000000,11529],"span":4},{"id":[1000000,11505],"span":24},{"id":[1000000,11534],"span":3},{"id":[1000000,11539],"span":7},{"id":[1000000,11550],"span":115},{"id":[1000000,11675],"span":88},{"id":[1000000,11850],"span":11},{"id":[1000000,11869],"span":40},{"id":[1000000,11861],"span":4},{"id":[1000000,11763],"span":16},{"id":[1000000,11781],"span":24},{"id":[1000000,11945],"span":8},{"id":[1000000,11805],"span":18},{"id":[1000000,11831],"span":14},{"id":[1000000,11847],"span":2},{"id":[1000000,11966],"span":1},{"id":[1000000,11849],"span":1},{"id":[1000000,11969],"span":20},{"id":[1000000,11953],"span":13},{"id":[1000000,11989],"span":13},{"id":[1000000,12163],"span":113},{"id":[1000000,12002],"span":1},{"id":[1000000,12276],"span":2},{"id":[1000000,12488],"span":37},{"id":[1000000,12527],"span":247},{"id":[1000000,12776],"span":70},{"id":[1000000,13023],"span":148},{"id":[1000000,13022],"span":1},{"id":[1000000,13172],"span":1},{"id":[1000000,12846],"span":85},{"id":[1000000,12933],"span":16},{"id":[1000000,12980],"span":41},{"id":[1000000,12949],"span":11},{"id":[1000000,13173],"span":93},{"id":[1000000,13021],"span":1},{"id":[1000000,13266],"span":11},{"id":[1000000,13301],"span":22},{"id":[1000000,13333],"span":37},{"id":[1000000,13440],"span":3},{"id":[1000000,13370],"span":25},{"id":[1000000,13450],"span":6},{"id":[1000000,13395],"span":12},{"id":[1000000,13421],"span":1},{"id":[1000000,13407],"span":14},{"id":[1000000,13422],"span":17},{"id":[1000000,13456],"span":21},{"id":[1000000,13479],"span":92},{"id":[1000000,13573],"span":10},{"id":[1000000,13585],"span":94},{"id":[1000000,13687],"span":49},{"id":[1000000,13758],"span":8},{"id":[1000000,13865],"span":2},{"id":[1000000,13766],"span":49},{"id":[1000000,13867],"span":12},{"id":[1000000,13815],"span":40},{"id":[1000000,13880],"span":220},{"id":[1000000,14102],"span":57},{"id":[1000000,14346],"span":118},{"id":[1000000,14344],"span":2},{"id":[1000000,14250],"span":21},{"id":[1000000,14159],"span":56},{"id":[1000000,14298],"span":45},{"id":[1000000,14465],"span":3},{"id":[1000000,15226],"span":27},{"id":[1000000,15255],"span":27},{"id":[1000000,15253],"span":1},{"id":[1000000,14468],"span":4},{"id":[1000000,14829],"span":1},{"id":[1000000,14472],"span":19},{"id":[1000000,15323],"span":3},{"id":[1000000,14491],"span":55},{"id":[1000000,14836],"span":6},{"id":[1000000,14546],"span":7},{"id":[1000000,14555],"span":28},{"id":[1000000,14850],"span":33},{"id":[1000000,15339],"span":3},{"id":[1000000,14883],"span":34},{"id":[1000000,14919],"span":19},{"id":[1000000,14917],"span":1},{"id":[1000000,14583],"span":1},{"id":[1000000,14939],"span":2},{"id":[1000000,14704],"span":88},{"id":[1000000,14994],"span":1},{"id":[1000000,14792],"span":1},{"id":[1000000,14941],"span":1},{"id":[1000000,14793],"span":1},{"id":[1000000,14942],"span":51},{"id":[1000000,14794],"span":13},{"id":[1000000,15087],"span":3},{"id":[1000000,14807],"span":3},{"id":[1000000,15090],"span":13},{"id":[1000000,15085],"span":1},{"id":[1000000,14810],"span":2},{"id":[1000000,15103],"span":1},{"id":[1000000,15106],"span":6},{"id":[1000000,15104],"span":1},{"id":[1000000,14812],"span":14},{"id":[1000000,15112],"span":53},{"id":[1000000,15356],"span":1},{"id":[1000000,15165],"span":1},{"id":[1000000,15354],"span":1},{"id":[1000000,15166],"span":5},{"id":[1000000,15177],"span":49},{"id":[1000000,15342],"span":1},{"id":[1000000,15357],"span":19},{"id":[1000000,15692],"span":15},{"id":[1000000,15376],"span":9},{"id":[1000000,15771],"span":1},{"id":[1000000,15385],"span":1},{"id":[1000000,15797],"span":2},{"id":[1000000,15778],"span":1},{"id":[1000000,15386],"span":1},{"id":[1000000,15794],"span":2},{"id":[1000000,15387],"span":1},{"id":[1000000,15412],"span":2},{"id":[1000000,15388],"span":24},{"id":[1000000,15414],"span":4},{"id":[1000000,15585],"span":5},{"id":[1000000,15614],"span":2},{"id":[1000000,15590],"span":8},{"id":[1000000,15418],"span":16},{"id":[1000000,15440],"span":2},{"id":[1000000,15434],"span":6},{"id":[1000000,15442],"span":19},{"id":[1000000,15599],"span":13},{"id":[1000000,15461],"span":5},{"id":[1000000,15527],"span":1},{"id":[1000000,15712],"span":2},{"id":[1000000,15528],"span":2},{"id":[1000000,15466],"span":1},{"id":[1000000,15714],"span":6},{"id":[1000000,15467],"span":17},{"id":[1000000,15720],"span":1},{"id":[1000000,15788],"span":5},{"id":[1000000,15721],"span":5},{"id":[1000000,15547],"span":1},{"id":[1000000,15775],"span":1},{"id":[1000000,15779],"span":1},{"id":[1000000,15776],"span":1},{"id":[1000000,15548],"span":1},{"id":[1000000,15484],"span":3},{"id":[1000000,15523],"span":4},{"id":[1000000,15487],"span":3},{"id":[1000000,15552],"span":2},{"id":[1000000,15490],"span":16},{"id":[1000000,15772],"span":1},{"id":[1000000,15506],"span":5},{"id":[1000000,15568],"span":5},{"id":[1000000,15618],"span":2},{"id":[1000000,15578],"span":2},{"id":[1000000,15573],"span":3},{"id":[1000000,15511],"span":1},{"id":[1000000,15580],"span":4},{"id":[1000000,15512],"span":2},{"id":[1000000,15555],"span":13},{"id":[1000000,15514],"span":2},{"id":[1000000,15733],"span":4},{"id":[1000000,15785],"span":1},{"id":[1000000,15773],"span":2},{"id":[1000000,15516],"span":3},{"id":[1000000,15621],"span":35},{"id":[1000000,15738],"span":11},{"id":[1000000,15656],"span":3},{"id":[1000000,15749],"span":6},{"id":[1000000,15659],"span":26},{"id":[1000000,15687],"span":5},{"id":[1000000,15757],"span":13},{"id":[1000000,15685],"span":1},{"id":[1000000,15519],"span":1},{"id":[1000000,15171],"span":3},{"id":[1000000,14826],"span":2},{"id":[1000000,14995],"span":44},{"id":[1000000,14553],"span":1},{"id":[1000000,14343],"span":1},{"id":[1000000,14215],"span":17},{"id":[1000000,14100],"span":1},{"id":[1000000,13855],"span":1},{"id":[1000000,13736],"span":11},{"id":[1000000,13679],"span":4},{"id":[1000000,13583],"span":1},{"id":[1000000,13571],"span":1},{"id":[1000000,13477],"span":1},{"id":[1000000,13323],"span":5},{"id":[1000000,13277],"span":12},{"id":[1000000,12960],"span":10},{"id":[1000000,12931],"span":1},{"id":[1000000,12774],"span":1},{"id":[1000000,12525],"span":1},{"id":[1000000,12003],"span":107},{"id":[1000000,12129],"span":5},{"id":[1000000,12110],"span":18},{"id":[1000000,12134],"span":29},{"id":[1000000,11845],"span":1},{"id":[1000000,11823],"span":4},{"id":[1000000,11779],"span":1},{"id":[1000000,11665],"span":5},{"id":[1000000,11546],"span":2},{"id":[1000000,11537],"span":1},{"id":[1000000,11373],"span":7},{"id":[1000000,11248],"span":16},{"id":[1000000,11143],"span":1},{"id":[1000000,10517],"span":1},{"id":[1000000,10419],"span":9},{"id":[1000000,10244],"span":22},{"id":[1000000,10147],"span":1},{"id":[1000000,10140],"span":1},{"id":[1000000,10059],"span":1},{"id":[1000000,9781],"span":3},{"id":[1000000,9592],"span":1},{"id":[1000000,9590],"span":1},{"id":[1000000,9428],"span":7},{"id":[1000000,9284],"span":8},{"id":[1000000,9268],"span":8},{"id":[1000000,9061],"span":2},{"id":[1000000,9057],"span":1},{"id":[1000000,8284],"span":1},{"id":[1000000,4714],"span":1},{"id":[1000000,15799],"span":1},{"id":[1000000,15801],"span":25},{"id":[1000000,15828],"span":47},{"id":[1000000,15890],"span":189},{"id":[1000000,16094],"span":4},{"id":[1000000,16079],"span":13},{"id":[1000000,16098],"span":1},{"id":[1000000,16092],"span":2},{"id":[1000000,16099],"span":59},{"id":[1000000,17543],"span":5},{"id":[1000000,17552],"span":1},{"id":[1000000,17548],"span":4},{"id":[1000000,17553],"span":26},{"id":[1000000,16158],"span":5},{"id":[1000000,16165],"span":1},{"id":[1000000,16247],"span":1},{"id":[1000000,16166],"span":20},{"id":[1000000,16188],"span":20},{"id":[1000000,16255],"span":9},{"id":[1000000,16266],"span":60},{"id":[1000000,16328],"span":44},{"id":[1000000,16374],"span":32},{"id":[1000000,16408],"span":35},{"id":[1000000,16595],"span":16},{"id":[1000000,16693],"span":3},{"id":[1000000,16611],"span":37},{"id":[1000000,16674],"span":8},{"id":[1000000,16696],"span":40},{"id":[1000000,17540],"span":1},{"id":[1000000,16736],"span":55},{"id":[1000000,16648],"span":13},{"id":[1000000,16579],"span":4},{"id":[1000000,16791],"span":48},{"id":[1000000,16583],"span":11},{"id":[1000000,16839],"span":33},{"id":[1000000,16874],"span":28},{"id":[1000000,16872],"span":1},{"id":[1000000,16578],"span":1},{"id":[1000000,16443],"span":53},{"id":[1000000,16406],"span":1},{"id":[1000000,16372],"span":1},{"id":[1000000,16326],"span":1},{"id":[1000000,16264],"span":1},{"id":[1000000,16186],"span":1},{"id":[1000000,16163],"span":1},{"id":[1000000,15826],"span":1},{"id":[1000000,15800],"span":1},{"id":[1000000,16904],"span":1},{"id":[1000000,16906],"span":121},{"id":[1000000,17029],"span":44},{"id":[1000000,17094],"span":14},{"id":[1000000,17073],"span":21},{"id":[1000000,17108],"span":22},{"id":[1000000,17539],"span":1},{"id":[1000000,17130],"span":29},{"id":[1000000,17169],"span":7},{"id":[1000000,17178],"span":3},{"id":[1000000,17189],"span":12},{"id":[1000000,17211],"span":5},{"id":[1000000,17387],"span":36},{"id":[1000000,17441],"span":56},{"id":[1000000,17423],"span":9},{"id":[1000000,17216],"span":12},{"id":[1000000,17284],"span":15},{"id":[1000000,17228],"span":56},{"id":[1000000,17299],"span":88},{"id":[1000000,17541],"span":2},{"id":[1000000,17579],"span":27},{"id":[1000000,17608],"span":2},{"id":[1000000,17644],"span":6},{"id":[1000000,17654],"span":8},{"id":[1000000,17666],"span":1},{"id":[1000000,17669],"span":11},{"id":[1000000,17682],"span":1},{"id":[1000000,17685],"span":3},{"id":[1000000,17698],"span":37},{"id":[1000000,17741],"span":96},{"id":[1000000,17847],"span":50},{"id":[1000000,17932],"span":14},{"id":[1000000,17897],"span":35},{"id":[1000000,17946],"span":1},{"id":[1000000,18496],"span":12},{"id":[1000000,17947],"span":13},{"id":[1000000,17962],"span":13},{"id":[1000000,18508],"span":15},{"id":[1000000,17975],"span":267},{"id":[1000000,18492],"span":1},{"id":[1000000,18242],"span":16},{"id":[1000000,18264],"span":1},{"id":[1000000,18258],"span":5},{"id":[1000000,18265],"span":5},{"id":[1000000,18296],"span":68},{"id":[1000000,18376],"span":115},{"id":[1000000,18538],"span":4},{"id":[1000000,18562],"span":7},{"id":[1000000,18571],"span":61},{"id":[1000000,18634],"span":85},{"id":[1000000,20197],"span":146},{"id":[1000000,20345],"span":26},{"id":[1000000,20373],"span":73},{"id":[1000000,20779],"span":29},{"id":[1000000,20446],"span":1},{"id":[1000000,20825],"span":26},{"id":[1000000,20447],"span":24},{"id":[1000000,20860],"span":12},{"id":[1000000,20471],"span":13},{"id":[1000000,20875],"span":5},{"id":[1000000,20484],"span":25},{"id":[1000000,20517],"span":1},{"id":[1000000,20522],"span":24},{"id":[1000000,20885],"span":25},{"id":[1000000,20546],"span":50},{"id":[1000000,20606],"span":35},{"id":[1000000,21014],"span":40},{"id":[1000000,21284],"span":52},{"id":[1000000,21360],"span":22},{"id":[1000000,21336],"span":1},{"id":[1000000,21390],"span":3},{"id":[1000000,21337],"span":23},{"id":[1000000,21417],"span":252},{"id":[1000000,21727],"span":14},{"id":[1000000,21752],"span":1},{"id":[1000000,21741],"span":10},{"id":[1000000,21993],"span":15},{"id":[1000000,21751],"span":1},{"id":[1000000,21753],"span":12},{"id":[1000000,22008],"span":19},{"id":[1000000,21765],"span":23},{"id":[1000000,22494],"span":59},{"id":[1000000,21788],"span":1},{"id":[1000000,21791],"span":8},{"id":[1000000,21803],"span":6},{"id":[1000000,21815],"span":58},{"id":[1000000,21877],"span":35},{"id":[1000000,22181],"span":10},{"id":[1000000,21912],"span":47},{"id":[1000000,21961],"span":7},{"id":[1000000,21976],"span":17},{"id":[1000000,22027],"span":28},{"id":[1000000,22069],"span":1},{"id":[1000000,22068],"span":1},{"id":[1000000,22055],"span":13},{"id":[1000000,22070],"span":52},{"id":[1000000,22124],"span":22},{"id":[1000000,22560],"span":11},{"id":[1000000,22146],"span":8},{"id":[1000000,22599],"span":19},{"id":[1000000,22154],"span":13},{"id":[1000000,22618],"span":6},{"id":[1000000,22167],"span":4},{"id":[1000000,22122],"span":1},{"id":[1000000,21968],"span":4},{"id":[1000000,21959],"span":1},{"id":[1000000,21873],"span":2},{"id":[1000000,21809],"span":3},{"id":[1000000,21799],"span":2},{"id":[1000000,21789],"span":1},{"id":[1000000,21669],"span":29},{"id":[1000000,21405],"span":6},{"id":[1000000,21393],"span":6},{"id":[1000000,20641],"span":31},{"id":[1000000,20713],"span":23},{"id":[1000000,20672],"span":24},{"id":[1000000,20736],"span":43},{"id":[1000000,20596],"span":5},{"id":[1000000,20518],"span":2},{"id":[1000000,20509],"span":4},{"id":[1000000,20371],"span":1},{"id":[1000000,20343],"span":1},{"id":[1000000,20195],"span":1},{"id":[1000000,171817],"span":3},{"id":[1000000,20196],"span":1},{"id":[1000000,18719],"span":36},{"id":[1000000,18761],"span":92},{"id":[1000000,18931],"span":19},{"id":[1000000,18853],"span":14},{"id":[1000000,18875],"span":43},{"id":[1000000,18950],"span":81},{"id":[1000000,22197],"span":113},{"id":[1000000,22312],"span":39},{"id":[1000000,22980],"span":5},{"id":[1000000,23254],"span":8},{"id":[1000000,22985],"span":2},{"id":[1000000,23008],"span":1},{"id":[1000000,22987],"span":2},{"id":[1000000,22991],"span":16},{"id":[1000000,23009],"span":43},{"id":[1000000,23056],"span":47},{"id":[1000000,23196],"span":4},{"id":[1000000,23204],"span":2},{"id":[1000000,23213],"span":2},{"id":[1000000,23206],"span":7},{"id":[1000000,23215],"span":6},{"id":[1000000,23200],"span":2},{"id":[1000000,23103],"span":2},{"id":[1000000,23264],"span":7},{"id":[1000000,23105],"span":37},{"id":[1000000,23221],"span":6},{"id":[1000000,23142],"span":54},{"id":[1000000,23271],"span":16},{"id":[1000000,23323],"span":7},{"id":[1000000,23287],"span":8},{"id":[1000000,23311],"span":4},{"id":[1000000,23330],"span":3},{"id":[1000000,23315],"span":1},{"id":[1000000,23295],"span":16},{"id":[1000000,23335],"span":101},{"id":[1000000,23559],"span":28},{"id":[1000000,23588],"span":25},{"id":[1000000,23587],"span":1},{"id":[1000000,23436],"span":87},{"id":[1000000,23527],"span":5},{"id":[1000000,23630],"span":62},{"id":[1000000,23532],"span":2},{"id":[1000000,23618],"span":3},{"id":[1000000,23534],"span":14},{"id":[1000000,24011],"span":6},{"id":[1000000,23548],"span":1},{"id":[1000000,23613],"span":1},{"id":[1000000,23621],"span":9},{"id":[1000000,23702],"span":8},{"id":[1000000,24017],"span":1},{"id":[1000000,23710],"span":46},{"id":[1000000,23758],"span":4},{"id":[1000000,24024],"span":4},{"id":[1000000,23762],"span":32},{"id":[1000000,24028],"span":1},{"id":[1000000,23794],"span":1},{"id":[1000000,23797],"span":23},{"id":[1000000,24034],"span":3},{"id":[1000000,23820],"span":55},{"id":[1000000,24039],"span":1},{"id":[1000000,23875],"span":36},{"id":[1000000,24045],"span":3},{"id":[1000000,23911],"span":24},{"id":[1000000,24732],"span":1},{"id":[1000000,24739],"span":128},{"id":[1000000,24875],"span":33},{"id":[1000000,24909],"span":2},{"id":[1000000,24867],"span":4},{"id":[1000000,24733],"span":3},{"id":[1000000,23935],"span":70},{"id":[1000000,24401],"span":51},{"id":[1000000,24491],"span":2},{"id":[1000000,24483],"span":4},{"id":[1000000,24452],"span":29},{"id":[1000000,24493],"span":1},{"id":[1000000,24005],"span":4},{"id":[1000000,24494],"span":21},{"id":[1000000,24009],"span":1},{"id":[1000000,24058],"span":5},{"id":[1000000,24516],"span":23},{"id":[1000000,24543],"span":26},{"id":[1000000,24541],"span":1},{"id":[1000000,24539],"span":1},{"id":[1000000,24063],"span":9},{"id":[1000000,24585],"span":11},{"id":[1000000,24072],"span":53},{"id":[1000000,24135],"span":4},{"id":[1000000,24141],"span":101},{"id":[1000000,24256],"span":118},{"id":[1000000,24376],"span":15},{"id":[1000000,24393],"span":8},{"id":[1000000,24911],"span":45},{"id":[1000000,24966],"span":21},{"id":[1000000,24956],"span":10},{"id":[1000000,24987],"span":2},{"id":[1000000,24997],"span":6},{"id":[1000000,24989],"span":8},{"id":[1000000,25003],"span":32},{"id":[1000000,25051],"span":35},{"id":[1000000,25096],"span":43},{"id":[1000000,25141],"span":75},{"id":[1000000,25218],"span":23},{"id":[1000000,25216],"span":1},{"id":[1000000,25139],"span":1},{"id":[1000000,25086],"span":5},{"id":[1000000,25035],"span":8},{"id":[1000000,24391],"span":1},{"id":[1000000,24374],"span":1},{"id":[1000000,24242],"span":7},{"id":[1000000,24139],"span":1},{"id":[1000000,24125],"span":5},{"id":[1000000,24048],"span":5},{"id":[1000000,23795],"span":1},{"id":[1000000,23756],"span":1},{"id":[1000000,23549],"span":10},{"id":[1000000,23523],"span":2},{"id":[1000000,23333],"span":1},{"id":[1000000,23052],"span":2},{"id":[1000000,22989],"span":1},{"id":[1000000,22310],"span":1},{"id":[1000000,22195],"span":2},{"id":[1000000,26178],"span":179},{"id":[1000000,22630],"span":5},{"id":[1000000,22640],"span":11},{"id":[1000000,22635],"span":3},{"id":[1000000,22651],"span":5},{"id":[1000000,22694],"span":1},{"id":[1000000,22656],"span":11},{"id":[1000000,22671],"span":1},{"id":[1000000,22667],"span":4},{"id":[1000000,22672],"span":20},{"id":[1000000,22693],"span":1},{"id":[1000000,22692],"span":1},{"id":[1000000,22638],"span":1},{"id":[1000000,22695],"span":96},{"id":[1000000,22793],"span":3},{"id":[1000000,22800],"span":31},{"id":[1000000,22887],"span":10},{"id":[1000000,22831],"span":50},{"id":[1000000,22897],"span":52},{"id":[1000000,22966],"span":14},{"id":[1000000,22949],"span":13},{"id":[1000000,22964],"span":2},{"id":[1000000,22962],"span":1},{"id":[1000000,22796],"span":2},{"id":[1000000,22791],"span":1},{"id":[1000000,19031],"span":14},{"id":[1000000,19047],"span":39},{"id":[1000000,19088],"span":25},{"id":[1000000,19115],"span":103},{"id":[1000000,19220],"span":10},{"id":[1000000,19232],"span":30},{"id":[1000000,19353],"span":9},{"id":[1000000,19262],"span":17},{"id":[1000000,19288],"span":9},{"id":[1000000,19279],"span":6},{"id":[1000000,19297],"span":2},{"id":[1000000,19285],"span":3},{"id":[1000000,19299],"span":43},{"id":[1000000,19362],"span":76},{"id":[1000000,19602],"span":6},{"id":[1000000,19610],"span":11},{"id":[1000000,19630],"span":9},{"id":[1000000,19608],"span":1},{"id":[1000000,19438],"span":115},{"id":[1000000,19555],"span":47},{"id":[1000000,19677],"span":1},{"id":[1000000,19720],"span":48},{"id":[1000000,19769],"span":57},{"id":[1000000,19768],"span":1},{"id":[1000000,19826],"span":7},{"id":[1000000,19835],"span":3},{"id":[1000000,19854],"span":8},{"id":[1000000,19838],"span":16},{"id":[1000000,19862],"span":155},{"id":[1000000,20019],"span":65},{"id":[1000000,20088],"span":107},{"id":[1000000,20084],"span":2},{"id":[1000000,20017],"span":1},{"id":[1000000,19833],"span":1},{"id":[1000000,19678],"span":16},{"id":[1000000,19696],"span":4},{"id":[1000000,19694],"span":1},{"id":[1000000,19553],"span":1},{"id":[1000000,19230],"span":1},{"id":[1000000,19218],"span":1},{"id":[1000000,19113],"span":1},{"id":[1000000,19086],"span":1},{"id":[1000000,19045],"span":1},{"id":[1000000,18867],"span":4},{"id":[1000000,18755],"span":3},{"id":[1000000,18632],"span":1},{"id":[1000000,18569],"span":1},{"id":[1000000,18556],"span":3},{"id":[1000000,18542],"span":7},{"id":[1000000,18364],"span":6},{"id":[1000000,18270],"span":13},{"id":[1000000,17960],"span":1},{"id":[1000000,17837],"span":5},{"id":[1000000,17735],"span":3},{"id":[1000000,17683],"span":1},{"id":[1000000,17680],"span":1},{"id":[1000000,17667],"span":1},{"id":[1000000,17662],"span":2},{"id":[1000000,17650],"span":2},{"id":[1000000,17610],"span":7},{"id":[1000000,17621],"span":8},{"id":[1000000,17617],"span":2},{"id":[1000000,17606],"span":1},{"id":[1000000,17201],"span":5},{"id":[1000000,17181],"span":4},{"id":[1000000,17176],"span":1},{"id":[1000000,17159],"span":5},{"id":[1000000,17027],"span":1},{"id":[1000000,16905],"span":1},{"id":[1000000,62574],"value":"\n\\fi %"},{"id":[1000000,209298],"value":" include"},{"id":[1000000,209308],"value":"appendix"},{"id":[1000000,209306],"span":1},{"id":[1000000,62580],"span":11},{"id":[1000000,116472],"value":"\n"},{"id":[1000000,116473],"span":18},{"id":[1000000,116493],"span":6},{"id":[1000000,118867],"span":40},{"id":[1000000,121327],"span":22},{"id":[1000000,118907],"span":1},{"id":[1000000,116499],"span":21},{"id":[1000000,116522],"span":193},{"id":[1000000,116842],"span":1},{"id":[1000000,116837],"span":5},{"id":[1000000,116843],"span":14},{"id":[1000000,116715],"span":108},{"id":[1000000,116857],"span":109},{"id":[1000000,116969],"span":12},{"id":[1000000,116967],"span":1},{"id":[1000000,116966],"span":1},{"id":[1000000,116968],"span":1},{"id":[1000000,116981],"span":135},{"id":[1000000,117312],"span":14},{"id":[1000000,117116],"span":20},{"id":[1000000,117138],"span":174},{"id":[1000000,117326],"span":57},{"id":[1000000,119247],"span":22},{"id":[1000000,117546],"span":75},{"id":[1000000,117383],"span":7},{"id":[1000000,117642],"span":9},{"id":[1000000,117390],"span":20},{"id":[1000000,117454],"span":7},{"id":[1000000,117410],"span":32},{"id":[1000000,117461],"span":64},{"id":[1000000,117651],"span":33},{"id":[1000000,117686],"span":26},{"id":[1000000,117735],"span":13},{"id":[1000000,117712],"span":23},{"id":[1000000,117748],"span":2},{"id":[1000000,117762],"span":24},{"id":[1000000,118170],"span":2},{"id":[1000000,118675],"span":68},{"id":[1000000,118745],"span":72},{"id":[1000000,118825],"span":42},{"id":[1000000,118817],"span":4},{"id":[1000000,118743],"span":1},{"id":[1000000,118674],"span":1},{"id":[1000000,117786],"span":1},{"id":[1000000,117800],"span":12},{"id":[1000000,117814],"span":16},{"id":[1000000,117812],"span":1},{"id":[1000000,117787],"span":5},{"id":[1000000,117833],"span":1},{"id":[1000000,117792],"span":7},{"id":[1000000,117834],"span":90},{"id":[1000000,118128],"span":41},{"id":[1000000,117924],"span":84},{"id":[1000000,118021],"span":7},{"id":[1000000,118008],"span":13},{"id":[1000000,118028],"span":96},{"id":[1000000,118176],"span":121},{"id":[1000000,118351],"span":1},{"id":[1000000,118408],"span":155},{"id":[1000000,118666],"span":6},{"id":[1000000,118673],"span":1},{"id":[1000000,118563],"span":3},{"id":[1000000,118601],"span":4},{"id":[1000000,118606],"span":1},{"id":[1000000,118566],"span":34},{"id":[1000000,118608],"span":55},{"id":[1000000,119026],"span":149},{"id":[1000000,119215],"span":21},{"id":[1000000,119280],"span":119},{"id":[1000000,119403],"span":6},{"id":[1000000,119399],"span":2},{"id":[1000000,119236],"span":11},{"id":[1000000,119175],"span":12},{"id":[1000000,119193],"span":5},{"id":[1000000,119187],"span":3},{"id":[1000000,118908],"span":20},{"id":[1000000,121302],"span":25},{"id":[1000000,119409],"span":23},{"id":[1000000,119434],"span":40},{"id":[1000000,119516],"span":7},{"id":[1000000,120099],"span":15},{"id":[1000000,119523],"span":83},{"id":[1000000,120114],"span":19},{"id":[1000000,122044],"span":13},{"id":[1000000,120133],"span":1},{"id":[1000000,119606],"span":81},{"id":[1000000,119689],"span":38},{"id":[1000000,119739],"span":133},{"id":[1000000,119882],"span":17},{"id":[1000000,119872],"span":10},{"id":[1000000,119899],"span":34},{"id":[1000000,119940],"span":11},{"id":[1000000,119933],"span":7},{"id":[1000000,119963],"span":18},{"id":[1000000,119962],"span":1},{"id":[1000000,119981],"span":63},{"id":[1000000,122057],"span":22},{"id":[1000000,120044],"span":55},{"id":[1000000,122220],"span":13},{"id":[1000000,122271],"span":185},{"id":[1000000,122460],"span":51},{"id":[1000000,122513],"span":49},{"id":[1000000,123582],"span":2},{"id":[1000000,122562],"span":1},{"id":[1000000,123586],"span":64},{"id":[1000000,123652],"span":22},{"id":[1000000,123650],"span":1},{"id":[1000000,122511],"span":1},{"id":[1000000,122456],"span":2},{"id":[1000000,122233],"span":19},{"id":[1000000,122079],"span":37},{"id":[1000000,122563],"span":5},{"id":[1000000,122116],"span":1},{"id":[1000000,122135],"span":21},{"id":[1000000,122573],"span":9},{"id":[1000000,122156],"span":10},{"id":[1000000,122168],"span":52},{"id":[1000000,123679],"span":1},{"id":[1000000,123734],"span":104},{"id":[1000000,123899],"span":5},{"id":[1000000,123838],"span":3},{"id":[1000000,123849],"span":25},{"id":[1000000,123904],"span":10},{"id":[1000000,123874],"span":6},{"id":[1000000,123884],"span":3},{"id":[1000000,123891],"span":6},{"id":[1000000,123887],"span":2},{"id":[1000000,123880],"span":2},{"id":[1000000,123841],"span":4},{"id":[1000000,123680],"span":9},{"id":[1000000,122166],"span":1},{"id":[1000000,122133],"span":1},{"id":[1000000,122117],"span":8},{"id":[1000000,119727],"span":6},{"id":[1000000,119687],"span":1},{"id":[1000000,119474],"span":21},{"id":[1000000,119432],"span":1},{"id":[1000000,118600],"span":1},{"id":[1000000,118352],"span":28},{"id":[1000000,118297],"span":27},{"id":[1000000,118124],"span":4},{"id":[1000000,117750],"span":6},{"id":[1000000,117684],"span":1},{"id":[1000000,117525],"span":21},{"id":[1000000,117136],"span":1},{"id":[1000000,116520],"span":1},{"id":[1000000,116491],"span":1},{"id":[1000000,62591],"span":1},{"id":[1000000,122582],"span":1},{"id":[1000000,122584],"span":95},{"id":[1000000,122689],"span":22},{"id":[1000000,122773],"span":1},{"id":[1000000,123492],"span":4},{"id":[1000000,123242],"span":18},{"id":[1000000,123232],"span":2},{"id":[1000000,122774],"span":57},{"id":[1000000,123260],"span":1},{"id":[1000000,123265],"span":1},{"id":[1000000,123381],"span":20},{"id":[1000000,123266],"span":7},{"id":[1000000,123401],"span":7},{"id":[1000000,122831],"span":19},{"id":[1000000,123408],"span":2},{"id":[1000000,122850],"span":20},{"id":[1000000,123517],"span":65},{"id":[1000000,123478],"span":1},{"id":[1000000,123273],"span":17},{"id":[1000000,123292],"span":52},{"id":[1000000,123290],"span":1},{"id":[1000000,122870],"span":2},{"id":[1000000,123481],"span":1},{"id":[1000000,123346],"span":1},{"id":[1000000,122872],"span":22},{"id":[1000000,123356],"span":25},{"id":[1000000,122894],"span":10},{"id":[1000000,122711],"span":62},{"id":[1000000,122904],"span":2},{"id":[1000000,122952],"span":9},{"id":[1000000,122965],"span":56},{"id":[1000000,123157],"span":9},{"id":[1000000,123170],"span":1},{"id":[1000000,123166],"span":2},{"id":[1000000,123021],"span":23},{"id":[1000000,122961],"span":2},{"id":[1000000,122906],"span":36},{"id":[1000000,123044],"span":27},{"id":[1000000,123181],"span":4},{"id":[1000000,123071],"span":22},{"id":[1000000,123144],"span":13},{"id":[1000000,123185],"span":7},{"id":[1000000,123093],"span":42},{"id":[1000000,122679],"span":5},{"id":[1000000,122583],"span":1},{"id":[1000000,120134],"span":1},{"id":[1000000,120136],"span":29},{"id":[1000000,121277],"span":25},{"id":[1000000,120165],"span":102},{"id":[1000000,120268],"span":36},{"id":[1000000,120314],"span":2},{"id":[1000000,120418],"span":13},{"id":[1000000,120432],"span":1},{"id":[1000000,120316],"span":14},{"id":[1000000,120336],"span":23},{"id":[1000000,120383],"span":8},{"id":[1000000,120363],"span":8},{"id":[1000000,120403],"span":2},{"id":[1000000,120477],"span":83},{"id":[1000000,120588],"span":7},{"id":[1000000,120560],"span":2},{"id":[1000000,120587],"span":1},{"id":[1000000,120562],"span":10},{"id":[1000000,120654],"span":1},{"id":[1000000,120572],"span":4},{"id":[1000000,120655],"span":30},{"id":[1000000,120576],"span":1},{"id":[1000000,120604],"span":50},{"id":[1000000,120718],"span":1},{"id":[1000000,120727],"span":113},{"id":[1000000,121846],"span":47},{"id":[1000000,121903],"span":48},{"id":[1000000,121999],"span":14},{"id":[1000000,121951],"span":42},{"id":[1000000,121895],"span":4},{"id":[1000000,121893],"span":1},{"id":[1000000,120840],"span":84},{"id":[1000000,121040],"span":6},{"id":[1000000,120924],"span":102},{"id":[1000000,121158],"span":55},{"id":[1000000,121215],"span":45},{"id":[1000000,121264],"span":13},{"id":[1000000,121260],"span":2},{"id":[1000000,121213],"span":1},{"id":[1000000,121026],"span":1},{"id":[1000000,121051],"span":107},{"id":[1000000,121349],"span":24},{"id":[1000000,121378],"span":134},{"id":[1000000,121653],"span":26},{"id":[1000000,122029],"span":2},{"id":[1000000,121679],"span":15},{"id":[1000000,122020],"span":1},{"id":[1000000,121694],"span":10},{"id":[1000000,122014],"span":3},{"id":[1000000,121704],"span":18},{"id":[1000000,122032],"span":8},{"id":[1000000,121722],"span":2},{"id":[1000000,121740],"span":6},{"id":[1000000,121724],"span":11},{"id":[1000000,121763],"span":11},{"id":[1000000,122041],"span":3},{"id":[1000000,121774],"span":59},{"id":[1000000,121835],"span":11},{"id":[1000000,121833],"span":1},{"id":[1000000,121512],"span":1},{"id":[1000000,121515],"span":51},{"id":[1000000,121757],"span":6},{"id":[1000000,121566],"span":11},{"id":[1000000,121650],"span":3},{"id":[1000000,121577],"span":35},{"id":[1000000,121746],"span":3},{"id":[1000000,121612],"span":38},{"id":[1000000,121513],"span":1},{"id":[1000000,121029],"span":2},{"id":[1000000,121037],"span":3},{"id":[1000000,121031],"span":3},{"id":[1000000,121027],"span":1},{"id":[1000000,120719],"span":4},{"id":[1000000,120577],"span":9},{"id":[1000000,120467],"span":5},{"id":[1000000,120405],"span":13},{"id":[1000000,120371],"span":12},{"id":[1000000,120361],"span":1},{"id":[1000000,120359],"span":1},{"id":[1000000,120330],"span":3},{"id":[1000000,120304],"span":5},{"id":[1000000,120135],"span":1},{"id":[1000000,126726],"span":30},{"id":[1000000,126758],"span":66},{"id":[1000000,126756],"span":1},{"id":[1000000,126722],"span":3},{"id":[1000000,14290],"span":4},{"id":[1000000,4710],"span":1},{"id":[1000000,3658],"span":1},{"id":[1000000,3439],"span":1},{"id":[1000000,3367],"span":1},{"id":[1000000,3653],"span":2},{"id":[1000000,3368],"span":11},{"id":[1000000,3381],"span":1},{"id":[1000000,3379],"span":1},{"id":[1000000,3361],"span":2},{"id":[1000000,3268],"span":2},{"id":[1000000,3227],"span":4},{"id":[1000000,3143],"span":1},{"id":[1000000,3061],"span":2},{"id":[1000000,2926],"span":1},{"id":[1000000,2868],"span":1},{"id":[1000000,495],"span":35},{"id":[1000000,123938],"span":8},{"id":[1000000,530],"span":38},{"id":[1000000,479],"span":1},{"id":[1000000,480],"value":"\\end{document}\n"},{"id":[1000000,445],"span":3},{"id":[1000000,377],"span":5},{"id":[1000000,254],"span":1},{"id":[1000000,249],"span":2},{"id":[1000000,229],"span":1},{"id":[1000000,62],"span":1}]}}}