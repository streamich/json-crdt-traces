[[1000000,88615],[4,[-1,88614],[[[-1,178],"Author: Vadim @streamich Dalecky"],[[-1,105],"\n"],[[-1,52],"Permalink: https://jsonjoy.com/specs/json-crdt-patch\n"],[[-1,104],"Permalink: https://jsonjoy.com/specs/json-crdt-patch"],[[-1,146],"\n\n---\n\n# JSON CRDT Patch (working draft)\n"],[[-1,211],18],[[-1,193],"eamich Dalecky"],[[-1,212],"\n"],[[-1,216],"\n---"],[[-1,218],"\n\n"],[[-1,86086],1],[[-1,86084],472],[[-1,86085],1],[[-1,86559],472],[[-1,86560],1],[[-1,87260],472],[[-1,87865],1],[[-1,87266],5],[[-1,87337],4],[[-1,87864],15],[[-1,87272],5],[[-1,87342],4],[[-1,87849],21],[[-1,87278],5],[[-1,87347],4],[[-1,87828],49],[[-1,87284],5],[[-1,87352],4],[[-1,87779],57],[[-1,87290],5],[[-1,87357],4],[[-1,87722],49],[[-1,87296],5],[[-1,87362],4],[[-1,87673],49],[[-1,87302],5],[[-1,87367],4],[[-1,87624],51],[[-1,87308],5],[[-1,87372],4],[[-1,87573],61],[[-1,87314],5],[[-1,87377],4],[[-1,87512],58],[[-1,87320],5],[[-1,87382],4],[[-1,87454],21],[[-1,87326],5],[[-1,87387],4],[[-1,87433],21],[[-1,87332],5],[[-1,87392],4],[[-1,87412],19],[[-1,87866],1],[[-1,88612],3],[[-1,88607],40],[[-1,88555],20],[[-1,88516],1],[[-1,88535],19],[[-1,88515],19],[[-1,88495],6],[[-1,88483],14],[[-1,88368],18],[[-1,88346],8],[[-1,88350],3],[[-1,88469],2],[[-1,88463],53],[[-1,88371],3],[[-1,88410],31],[[-1,88338],17],[[-1,88319],17],[[-1,88298],10],[[-1,88286],34],[[-1,85274],2],[[-1,88252],8],[[-1,88142],10],[[-1,88151],8],[[-1,88244],13],[[-1,88132],3],[[-1,88127],5],[[-1,88129],1],[[-1,88171],8],[[-1,88231],2],[[-1,88154],1],[[-1,88162],8],[[-1,88229],6],[[-1,88213],17],[[-1,88194],16],[[-1,88174],2],[[-1,88178],2],[[-1,88196],1],[[-1,88223],7],[[-1,88288],1],[[-1,88302],4],[[-1,86785],2],[[-1,85608],6],[[-1,85276],2],[[-1,85602],1],[[-1,85278],2],[[-1,85601],26],[[-1,85280],2],[[-1,85575],34],[[-1,85282],2],[[-1,85541],26],[[-1,85284],2],[[-1,85515],26],[[-1,85286],2],[[-1,85489],28],[[-1,85288],2],[[-1,85461],38],[[-1,85290],2],[[-1,85423],34],[[-1,78982],17],[[-1,57833],5],[[-1,57826],4],[[-1,57820],7],[[-1,57809],8],[[-1,57799],4],[[-1,57793],1],[[-1,57791],32],[[-1,57792],1],[[-1,57795],1],[[-1,57801],1],[[-1,57822],1],[[-1,57828],1],[[-1,67495],2],[[-1,67487],10],[[-1,67471],43],[[-1,67129],1],[[-1,67477],3],[[-1,67425],38],[[-1,67130],1],[[-1,67387],29],[[-1,67131],1],[[-1,67358],1],[[-1,67308],70],[[-1,67132],1],[[-1,67238],5],[[-1,67231],47],[[-1,67182],32],[[-1,67145],13],[[-1,67150],4],[[-1,67184],1],[[-1,67233],1],[[-1,67357],18],[[-1,67335],2],[[-1,67320],11],[[-1,67333],9],[[-1,67339],2],[[-1,67427],1],[[-1,67474],3],[[-1,67491],2],[[-1,67493],1],[[-1,85389],1],[[-1,84977],1],[[-1,84966],20],[[-1,84976],9],[[-1,85292],2],[[-1,85388],1],[[-1,85004],1],[[-1,85003],"# JSON CRDT Patch"],[[-1,234]," ("],[[-1,231],"working draft"],[[-1,232],")"],[[-1,85006],"\n"],[[-1,85051],"\nPatch protocol specification for JSON CRDT."],[[-1,75534]," JSON CRDT Patch is an atomic unit o"],[[-1,75496],"f\n"],[[-1,75340],"change for JSON CRDT data structures. A patch is applied as a whole, "],[[-1,75264],"either all\noperations in the patch are applied, or none of them."],[[-1,74869],"\n\n"],[[-1,75198],1],[[-1,75271],6],[[-1,75487],37],[[-1,75364],23],[[-1,75367],2],[[-1,75411],1],[[-1,75406],"Each patch "],[[-1,75196],"consists of one"],[[-1,74866]," "],[[-1,75181],1],[[-1,75180],"or more operations. Each operation is a change to"],[[-1,74864],"\n"],[[-1,75131],1],[[-1,75130],"a single CRDT object. The"],[[-1,74862]," "],[[-1,75105],1],[[-1,75104],"operations are applied in the order they appear in"],[[-1,74860],"\n"],[[-1,75054],1],[[-1,75053],"the patch."],[[-1,58854],"\n"],[[-1,58189],"\n~~~jj.note"],[[-1,237],2],[[-1,58178],"\n#### Relation to JSON Patch\n\nJSON CRDT Patch is similar to [JSON Patch](https://datatracker.ietf.org/doc/html/rfc6902), in the sense that\nboth are patch protocols for JSON document changes. However, JSON Patch is designed for regular JSON documents,\nwhile JSON CRDT Patch specifies a patch specification for JSON CRDT data structures.\n~~~"],[[-1,57839],1],[[-1,58853],12],[[-1,58837],2],[[-1,58204],1],[[-1,58835],14],[[-1,57836],3],[[-1,58821],42],[[-1,58728],1],[[-1,58779],10],[[-1,58727],2],[[-1,58724],45],[[-1,58678],1],[[-1,58725],1],[[-1,58769],2],[[-1,58676],18],[[-1,58514],88],[[-1,58411],8],[[-1,58426],15],[[-1,58403],1],[[-1,58283],40],[[-1,58202],13],[[-1,58243],39],[[-1,58402],22],[[-1,58295],10],[[-1,58380],85],[[-1,58658],34],[[-1,58553],38],[[-1,58624],70],[[-1,58767],39],[[-1,58841],4],[[-1,75043],172],[[-1,75395],27],[[-1,75365],1],[[-1,75410],3],[[-1,75450],38],[[-1,75494],6],[[-1,75498],1],[[-1,84946],1],[[-1,84910],"\n"],[[-1,57810],"\n"],[[-1,84945],"\n## Data Types"],[[-1,84912],"\n"],[[-1,84909],"\nJSON CRDT Patch supports operations on "],[[-1,84864],"CRDT data types described in JSON CRDT "],[[-1,84823],"specification."],[[-1,84472],"\n"],[[-1,84466],"The following data types are supported:"],[[-1,84471],4],[[-1,84474],1],[[-1,84773],1],[[-1,84809],8],[[-1,84801],"\n"],[[-1,84680],"\n"],[[-1,84679],3],[[-1,84671],3],[[-1,84667],20],[[-1,84645],27],[[-1,84617],3],[[-1,84618],1],[[-1,84614],3],[[-1,84609],25],[[-1,84567],5],[[-1,84558],1],[[-1,84553],8],[[-1,84532],23],[[-1,84507],5],[[-1,84500],25],[[-1,84502],1],[[-1,84509],1],[[-1,84545],3],[[-1,84541],3],[[-1,84537],4],[[-1,84542],1],[[-1,84557],2],[[-1,84560],1],[[-1,84562],1],[[-1,84584],12],[[-1,84611],1],[[-1,84647],1],[[-1,84675],2],[[-1,84676],1],[[-1,84800],1],[[-1,84799],"- `con"],[[-1,84793],2],[[-1,84791],"` -"],[[-1,73290],"--"],[[-1,84788]," "],[[-1,84768],"a constant value"],[[-1,83915],"."],[[-1,78833],"\n- `val` "],[[-1,73287],"---"],[[-1,78824],1],[[-1,78823]," a LWW-Register."],[[-1,78858],"\n- `obj` "],[[-1,73283],"---"],[[-1,78849],1],[[-1,78848]," a LWW-Object."],[[-1,78883],"\n- `vec` "],[[-1,73279],"---"],[[-1,78874],1],[[-1,78873]," a LWW-Vector."],[[-1,78909],"\n- `str` "],[[-1,73275],"---"],[[-1,78900],1],[[-1,78899]," an RGA-String."],[[-1,78940],"\n- `bin` "],[[-1,73271],"---"],[[-1,78931],1],[[-1,78930]," an RGA-Binary blob."],[[-1,78965],"\n- `arr` "],[[-1,73267],"---"],[[-1,78956],1],[[-1,78955]," an RGA-Array."],[[-1,74845],"\n"],[[-1,74719],"\n"],[[-1,74844],"\n### The `con` Constant\n\nThe `con` data type is a constant value, which does not accept any operations and cannot be changed."],[[-1,74718],"\nThe constant value is set at the time of "],[[-1,74667],"creation of the `con` data type and "],[[-1,74153],"never changes"],[[-1,74138]," "],[[-1,74135],"after that."],[[-1,74137],1],[[-1,74140],1],[[-1,74156],2],[[-1,74631],18],[[-1,74613],"\nThe "],[[-1,74577],"only way"],[[-1,74563]," "],[[-1,74559],"to change the value of the `con` data type is to delete it "],[[-1,74479],"from a parent container,\nsuch as "],[[-1,74124],"an "],[[-1,74446],"object or"],[[-1,74121]," an"],[[-1,74437]," array, "],[[-1,74500],"and create a new one."],[[-1,74429],"\n\n"],[[-1,74405],"The value of a `con` data type is a JSON value. The value can be any JSON value, including\n`null`, `true`, `false`, numbers, strings, arrays,"],[[-1,74264],4],[[-1,74260]," objects"],[[-1,74250],","],[[-1,74247]," "],[[-1,74243],"binary blobs"],[[-1,74231],2],[[-1,74223],24],[[-1,74199],","],[[-1,74113]," "],[[-1,74198],1],[[-1,74179],4],[[-1,74175],"`undefined` value"],[[-1,74108],",\nand logical clock timestamps."],[[-1,73431],"\n\nThe only "],[[-1,73417],"operation supported by the `con` data type is `new_con`, which creates a new `con` "],[[-1,73324],"object\nwith "],[[-1,73291],"a"],[[-1,73312],3],[[-1,73309]," specified value."],[[-1,73334],5],[[-1,73420],2],[[-1,74158],1],[[-1,74197],5],[[-1,74191],9],[[-1,74181],1],[[-1,74192],1],[[-1,74229],3],[[-1,74246],2],[[-1,74252],1],[[-1,74427],16],[[-1,74410],3],[[-1,74411],1],[[-1,74407],1],[[-1,74562],2],[[-1,74569],3],[[-1,74608],25],[[-1,74676],8],[[-1,84752],17],[[-1,84731],26],[[-1,84698],18],[[-1,84427],"\n"],[[-1,84067],"\n"],[[-1,84426],"\n#"],[[-1,84420],"## "],[[-1,74077],"T"],[[-1,74070],"he "],[[-1,74076],3],[[-1,84417],"`"],[[-1,84415],"val"],[[-1,84416],"`"],[[-1,84412]," LWW-Register\n\n"],[[-1,84231],"The `val` data type is a LWW-Register (Last-Write-Wins Register), which stores a single value.\n"],[[-1,84031],"The value is a reference to another CRDT data type. Often it is a reference to "],[[-1,74067],2],[[-1,83952],"`con` "],[[-1,74063],"object"],[[-1,83946],9],[[-1,83937],"."],[[-1,83609],"\n\nThe `val` data type supports the following operations:\n\n"],[[-1,83537],"- `new_val` - creates a new `val` data type.\n"],[[-1,83313],"- `ins_val` - updates the value of the `val` data type. The update succeeds only if the ID of the\n  new value is greater than the ID of the current value."],[[-1,83408],94],[[-1,83492],3],[[-1,83443],7],[[-1,83489],7],[[-1,83421],12],[[-1,83435],12],[[-1,83482],38],[[-1,83551],3],[[-1,83547],7],[[-1,83539],1],[[-1,83548],1],[[-1,83787],"\n\nThe `"],[[-1,83779],"val"],[[-1,83775],"` data "],[[-1,83758],"type cannot be deleted, to delete "],[[-1,83720],"it, it must be removed from the container type,\nsuch "],[[-1,83664],"as `obj`, `vec`, "],[[-1,83647],7],[[-1,83640],"`arr`"],[[-1,83630],", or another `"],[[-1,83615],"val"],[[-1,83611],"`."],[[-1,74057],"\n\n\n### "],[[-1,74046],"The `obj` LWW-Object\n\nThe `obj` data type is a LWW-"],[[-1,72765],"Object"],[[-1,72767],1],[[-1,73995],6],[[-1,73989]," (Last-Write-Wins Object), which stores a set of key-value pairs.\nEach key-value pair is a "],[[-1,73895],"distinct "],[[-1,73823],"LWW-Register "],[[-1,73886],"CRDT object. The keys are strings, the values are"],[[-1,73809],"\n"],[[-1,73806],"references to other CRDT "],[[-1,73718],"objects"],[[-1,73781],10],[[-1,73771],"."],[[-1,73710],"\n\nThe `obj` data type supports the following operations:\n\n- `new_obj` - creates a new `obj` data type."],[[-1,73604],"\n- `ins_obj` - inserts or updates "],[[-1,73570],2],[[-1,73568],"key-value pair"],[[-1,73263],"s"],[[-1,73554]," in "],[[-1,73261],"an"],[[-1,73550],3],[[-1,73547]," `obj` "],[[-1,73257],"object"],[[-1,73540],9],[[-1,73531],"."],[[-1,73250]," Each key"],[[-1,73239],"-va"],[[-1,73226],"lue pa"],[[-1,73216],"ir is a\n"],[[-1,73206],"  separate LWW-Register. "],[[-1,73177],"The update succeeds only if the ID of the new value is greater than"],[[-1,73102],"\n"],[[-1,73097],"  the ID of the current value."],[[-1,72759],4],[[-1,72742],28],[[-1,72633],8],[[-1,72714],64],[[-1,72751],8],[[-1,72755],2],[[-1,73067],"\n"],[[-1,73066],2],[[-1,73064],"\n"],[[-1,73059],"To delete a "],[[-1,73045],"key-value pair from an `obj` object, the key "],[[-1,72916],"must be set to `"],[[-1,72899],"con"],[[-1,72900],"`"],[[-1,72896]," object with\n`undefined` value.\n"],[[-1,72831],"\n"],[[-1,72864],"\n"],[[-1,72855],"### The `vec` LWW-Vector"],[[-1,72830],"\n\n"],[[-1,72611],"The `vec` LWW-Vector data type is similar to `obj` LWW-Object"],[[-1,72453],". Just like the"],[[-1,72437]," "],[[-1,72550],2],[[-1,72484],11],[[-1,72473],"`"],[[-1,72471],"obj"],[[-1,72467],"` data type"],[[-1,72436],",\n"],[[-1,72415],"the `vec` store a set of key-value pairs. However, "],[[-1,72304],"the keys in `vec` are integers, "],[[-1,72255],"which start\n"],[[-1,72238],"from zero and increment by one for each new key-value pair"],[[-1,72174],". The "],[[-1,72153],"maxi"],[[-1,72124],"mum"],[[-1,72149],2],[[-1,72147]," key value is limited"],[[-1,72121],"\nto 2"],[[-1,72112],"55"],[[-1,72108],", "],[[-1,72101],"minimum key value is zero.\n\n"],[[-1,72071],"The `vec` data type supports the following operations:\n\n- `new_vec` - creates a new `vec` data type.\n- `ins_vec` - inserts or updates key-value pairs in a `vec` object. Each key-value pair is a\n  separate LWW-Register. The update succeeds only if the ID of the new value is greater than\n  the ID of the current value.\n"],[[-1,71753],2],[[-1,71751],"\n"],[[-1,71634],"Usually, the `"],[[-1,71525],"vec` data type is used to store "],[[-1,71430],"fixed-length arrays"],[[-1,71374],", i.e. "],[[-1,71364],"tuples. "],[[-1,71343],"Hence, usually\n"],[[-1,71275],"the elements of a `vec` object are never deleted. However, it is possible to delete elements\nfrom a `vec` object by setting the value of the element to `con` object with `undefined` value.\n\n\n### The `"],[[-1,71074],"str"],[[-1,71075],"`"],[[-1,71071]," RGA-String\n\nThe `str` data type is a RGA-String (Replicated Growable Array String), which "],[[-1,70955],"represents a"],[[-1,70941],"\n"],[[-1,70082],"UTF-16 string."],[[-1,70004]," The `"],[[-1,69997],"str"],[[-1,69998],"`"],[[-1,69994]," data type represents an ordered list of UTF-16 code "],[[-1,69932],"points."],[[-1,69941],7],[[-1,70068]," A unit"],[[-1,69924],"\n"],[[-1,69917],"of insertion and deletion is a single UTF-16 code point."],[[-1,70061],38],[[-1,69919],1],[[-1,70023],19],[[-1,70943],1],[[-1,70980],9],[[-1,70964],7],[[-1,70971],7],[[-1,70091],8],[[-1,70938],"\n\nThe `str` data type supports the following operations:\n\n- `new_str` - creates a new `str` data type.\n- `ins_str` - inserts a "],[[-1,70615],"sub-"],[[-1,70811],"string into a `str` object. The string is inserted at a specified\n  position in the `str` object"],[[-1,70609]," according to "],[[-1,70590],"the RGA algorithm.\n"],[[-1,70568],"- `del"],[[-1,70562],4],[[-1,70558],"` - deletes a sub-string from a `str` object."],[[-1,70467],"\n"],[[-1,70427],"\n"],[[-1,70466],"\n"],[[-1,70451],"### The `bin` RGA-Binary"],[[-1,70426],"\n\nThe `bin` data type is a RGA-Binary (Replicated Growable Array Binary), which represents a"],[[-1,70330],"n\n"],[[-1,70247],"ordered list of octets. The `bin` data type is similar to the `str` data type, except that\na unit "],[[-1,70146],"of insertion and deletion is an octet, not a character."],[[-1,69861],"\n\nThe `bin` data type supports the following operations:\n\n- `new_bin` - creates a new `bin` data type.\n- `ins_bin` - inserts a "],[[-1,69599],"chunk of binary data"],[[-1,69734],10],[[-1,69724]," into a `bin` object. The "],[[-1,69578],"chunk"],[[-1,69698],6],[[-1,69692]," is inserted at a specified\n  position in the `bin` object according to the RGA algorithm."],[[-1,69573],"\n"],[[-1,69569],"- `del` - deletes a chunk of binary data from a `bin` object.\n\n\n"],[[-1,69496],"### The `arr` RGA-Array\n\nThe `arr` data type is a RGA-Array (Replicated Growable Array), which represents an ordered list\nof CRDT objects. The `arr` data type is similar to the `str` and `bin` data types, except that\na unit of insertion and deletion is a "],[[-1,69198],"reference "],[[-1,69186],"to another "],[[-1,69188],1],[[-1,69200],1],[[-1,69241],"CRDT object, not a character or an octet."],[[-1,69175],"\n\nThe `arr` data type supports the following operations:\n\n- `new_arr` - creates a new `arr` data type.\n"],[[-1,68771],61],[[-1,69072],"- `ins_arr` - inserts "],[[-1,68887],"one or m"],[[-1,68875],"ore elements "],[[-1,68879],2],[[-1,69050],35],[[-1,69015],"into an `arr` object"],[[-1,68855]," "],[[-1,68852],"following"],[[-1,68858],1],[[-1,68859],1],[[-1,68861],1],[[-1,68995],86],[[-1,68909]," the RGA algorithm."],[[-1,68710],"\n- `del` - deletes "],[[-1,68691],12],[[-1,68679],"elements from an `arr` object."],[[-1,68854],1],[[-1,68834],60],[[-1,68774],"\n\n"],[[-1,68524],"The `"],[[-1,68518],"arr"],[[-1,68519],"`"],[[-1,68515]," "],[[-1,68510],"elements are "],[[-1,68490],"immutable. To update an element, it must be deleted and a new element\nmust be inserted in its place. Alternatively, the element can point to a mutable `"],[[-1,68337],"val"],[[-1,68338],"`"],[[-1,68334]," object,\n"],[[-1,68318],"which can be updated in-place."],[[-1,68325],6],[[-1,68495],4],[[-1,68497],1],[[-1,68514],2],[[-1,68619],93],[[-1,68644],24],[[-1,68837],2],[[-1,68841],2],[[-1,69505],8],[[-1,69572],2],[[-1,70149],2],[[-1,70328],16],[[-1,70308],8],[[-1,70292],5],[[-1,70286],3],[[-1,70287],1],[[-1,70283],30],[[-1,70252],3],[[-1,70253],1],[[-1,70249],1],[[-1,70300],6],[[-1,70310],1],[[-1,70312],1],[[-1,70334],2],[[-1,70465],9],[[-1,70455],3],[[-1,70456],1],[[-1,70513],39],[[-1,70470],1],[[-1,70571],2],[[-1,70595],4],[[-1,70715],100],[[-1,70940],1],[[-1,71328],19],[[-1,71308],3],[[-1,71304],28],[[-1,71309],1],[[-1,71356],11],[[-1,71367],2],[[-1,71411],27],[[-1,71438],6],[[-1,71493],44],[[-1,71620],76],[[-1,71638],3],[[-1,71746],107],[[-1,71750],2],[[-1,72073],1],[[-1,72106],4],[[-1,72110],1],[[-1,72116],2],[[-1,72168],10],[[-1,72178],2],[[-1,72180],1],[[-1,72243],4],[[-1,72272],14],[[-1,72316],11],[[-1,72364],47],[[-1,72434],5],[[-1,72428],3],[[-1,72429],1],[[-1,72425],9],[[-1,72456],1],[[-1,72472],1],[[-1,72548],32],[[-1,72828],5],[[-1,72822],3],[[-1,72818],1],[[-1,72785],11],[[-1,72817],8],[[-1,72807],18],[[-1,72788],3],[[-1,72789],1],[[-1,72774],4],[[-1,72621],9],[[-1,72770],2],[[-1,72809],1],[[-1,72823],1],[[-1,72863],7],[[-1,73000],42],[[-1,73047],1],[[-1,73063],2],[[-1,73101],2],[[-1,73110],7],[[-1,73099],1],[[-1,73181],3],[[-1,73208],1],[[-1,73220],2],[[-1,73228],1],[[-1,73236],4],[[-1,73241],1],[[-1,73530],99],[[-1,73608],2],[[-1,73770],50],[[-1,73837],14],[[-1,73808],1],[[-1,73898],2],[[-1,74050],3],[[-1,83616],1],[[-1,83635],1],[[-1,83667],2],[[-1,83724],3],[[-1,83768],5],[[-1,83780],1],[[-1,83914],7],[[-1,74859],4],[[-1,83907],1],[[-1,83905],3],[[-1,83901],10],[[-1,74855],3],[[-1,83891],1],[[-1,83830],41],[[-1,83788],1],[[-1,83890],60],[[-1,78806],"\n"],[[-1,78784],"\n"],[[-1,78805],"\n## Operation "],[[-1,78789],"Types"],[[-1,78783],"\n\nJSON CRDT Patch classifies all patch operations into four broad types:\n\n"],[[-1,78704],"- `new` - creates a new CRDT "],[[-1,78627],"obj"],[[-1,78622],"e"],[[-1,78620],"c"],[[-1,78621],"t"],[[-1,78624],1],[[-1,78675],9],[[-1,78666],".\n- `ins` - updates a CRDT "],[[-1,78617],"obj"],[[-1,78612],"ect"],[[-1,78614],1],[[-1,78639],9],[[-1,78630],"."],[[-1,78609],"\n"],[[-1,78546],"- `del` - deletes a contents of a CRDT object.\n- `nop` - "],[[-1,78476],"*noop*"],[[-1,78489],2],[[-1,78487]," operation"],[[-1,78467],", operation which does nothing."],[[-1,68288],"\n"],[[-1,68253],"\n"],[[-1,68287],"\n"],[[-1,68252],"### "],[[-1,68286],"T"],[[-1,68276],"he `"],[[-1,68271],"new"],[[-1,68272],"`"],[[-1,68268]," Operation Type"],[[-1,68285],5],[[-1,78436],"\n\nThe "],[[-1,78424],"`"],[[-1,78422],"new"],[[-1,78423],"`"],[[-1,78419]," "],[[-1,78415],"operation"],[[-1,78324],"s"],[[-1,78406]," create"],[[-1,78399],1],[[-1,78398]," "],[[-1,78397],2],[[-1,78395],"new CRDT object"],[[-1,78319],"s. Usu"],[[-1,78299],"a"],[[-1,78296],"lly, they have "],[[-1,78277],"no other "],[[-1,78264],"payload"],[[-1,78231],"."],[[-1,68231],"\n\n"],[[-1,68210],"The exception are `con` and `val` objects. The `con` and `val` objects are created with a\npayload, which is the initial value of the object."],[[-1,68025]," The `"],[[-1,68018],"con"],[[-1,68014],"` objects are immutable, but the `"],[[-1,67979],"val"],[[-1,67980],"`"],[[-1,67976],"\n\n\n### "],[[-1,67966],"The `ins` Operation Type"],[[-1,67969],2],[[-1,68019],1],[[-1,68070],43],[[-1,68248],7],[[-1,68239],7],[[-1,68229],6],[[-1,68222],3],[[-1,68216],1],[[-1,68214],3],[[-1,68215],1],[[-1,68218],1],[[-1,68223],1],[[-1,68241],1],[[-1,78230],"\n\nT"],[[-1,78090],"h"],[[-1,78092],1],[[-1,78227],1],[[-1,78226],"e `"],[[-1,78222],"ins"],[[-1,78218],"` operations update existing CRDT objects. The payload and semantics of "],[[-1,78142],"the update depend\non the type of the CRDT object."],[[-1,78089]," "],[[-1,78084],"All `"],[[-1,78078],"ins"],[[-1,78074],"` operations reference "],[[-1,78047],"the ID of the CRDT object they\nupdate."],[[-1,60383],"\n"],[[-1,60347],"\n"],[[-1,60382],"\n"],[[-1,60375],"### The `del` Operation Type"],[[-1,60379],3],[[-1,60381],1],[[-1,78009],"\n\n"],[[-1,77825],"The `del` operations delete contents of existing list CRDT objects. All `del` operations reference\nthe ID of the CRDT object they delete contents from."],[[-1,77673]," "],[[-1,77671],"T"],[[-1,77664],"he "],[[-1,77670],3],[[-1,77994],49],[[-1,77899],5],[[-1,77945],13],[[-1,77850],6],[[-1,77843],3],[[-1,77839],13],[[-1,77844],1],[[-1,77851],1],[[-1,77892],5],[[-1,77887],"`"],[[-1,77885],"del"],[[-1,77882],1],[[-1,77886],"`"],[[-1,77880]," operations"],[[-1,77660]," are uniform --- they\n"],[[-1,77621],"have the same payload and semantics for all list CRDT objects."],[[-1,60346],"\n\n"],[[-1,60342],"\n"],[[-1,60339],"### The `nop` Operation Type"],[[-1,60341],1],[[-1,60344],1],[[-1,77429],"\n\n"],[[-1,77421],"~~~jj.aside\n"],[[-1,77405],"JSON CRDT Patch "],[[-1,77385],"encodings do not store IDs for each operation. Instead, only the starting ID of"],[[-1,77304],"\nthe patch is stored. All subs"],[[-1,77266],"equent IDs are calculated "],[[-1,77238],"by incrementing the previous ID by "],[[-1,77197],"the"],[[-1,77192],"\n"],[[-1,77115],"number of clock cycles the operation takes. The `nop` operation allows to skip clock cycles."],[[-1,77191],16],[[-1,77171],33],[[-1,77137],3],[[-1,77138],1],[[-1,77134],18],[[-1,77175],3],[[-1,77194],1],[[-1,77203],4],[[-1,77240],1],[[-1,77274],4],[[-1,77306],1],[[-1,77389],2],[[-1,77409],"\n~~~"],[[-1,77427],1],[[-1,77424],1],[[-1,77426],1],[[-1,77559],"\n\nThe `nop` operations do nothing. They are used to "],[[-1,77473],"skip over logical clock cycles in the patch."],[[-1,77023],"\n\n\n## Operations"],[[-1,45898],"\n\n"],[[-1,45739],"Each JSON CRDT Patch consists of one or more operations."],[[-1,45682]," "],[[-1,45761],21],[[-1,45763],2],[[-1,45850],"An operation is an immutable unit of"],[[-1,45680],"\n"],[[-1,45814],1],[[-1,45813],"change. Each operation has a unique ID, which is a"],[[-1,45679]," logical timestamp. Operations might\nalso have a reference to some CRDT object and/or a payload."],[[-1,45896],45],[[-1,77007],"\n\n"],[[-1,77003],"In total"],[[-1,76980],", JSON CRDT Patch defines"],[[-1,76995]," 1"],[[-1,57758],"5"],[[-1,76993],1],[[-1,76992]," operations"],[[-1,76952],", they are:\n\n"],[[-1,76854],"- `new_con` --- creates a new `con` object.\n"],[[-1,76800],"- `new_val` --- creates a new `val` object.\n"],[[-1,76746],"- `new_obj` --- creates a new `obj` object.\n"],[[-1,76692],"- `new_vec` --- creates a new `vec` object.\n"],[[-1,76638],"- `new_str` --- creates a new `str` object.\n"],[[-1,76584],"- `new_bi"],[[-1,76539],"n"],[[-1,76575],1],[[-1,76574],"` --- creates a new `bin` object.\n"],[[-1,76526],"- `new_arr` --- creates a new `arr` object.\n"],[[-1,76446],"- `ins_val` --- updates value of "],[[-1,75535],"a"],[[-1,76413],3],[[-1,76410]," `val` object.\n- `ins_obj` --- "],[[-1,76215],"inserts or "],[[-1,76379],"updates "],[[-1,76342],"key-value pairs of "],[[-1,75538],"an"],[[-1,76323],3],[[-1,76320]," `obj` object.\n- `ins_vec` --- "],[[-1,76241],"inserts"],[[-1,76203]," "],[[-1,76199],"or updates elements of "],[[-1,75540],"a"],[[-1,76176],3],[[-1,76173]," `vec` object.\n"],[[-1,76076],"- `ins_str` --- inserts "],[[-1,75900],"text "],[[-1,76052],"contents into "],[[-1,75542],"a"],[[-1,76038],3],[[-1,76035]," `str` object.\n- `ins_bin` --- inserts "],[[-1,75895],"binary "],[[-1,75996],"contents into "],[[-1,75546],"a"],[[-1,75545],1],[[-1,75982],3],[[-1,75979]," `bin` object.\n- `ins_arr` --- inserts "],[[-1,75908],"elements"],[[-1,75940],8],[[-1,75932]," into"],[[-1,75551]," an"],[[-1,75927],4],[[-1,75923]," `arr` object"],[[-1,75552],1],[[-1,75910],"."],[[-1,75888],"\n- `del` --- deletes contents "],[[-1,75564],"from list"],[[-1,75858],11],[[-1,75847]," CRDT object"],[[-1,75555],"s"],[[-1,75835],".\n- `nop` --- does nothing."],[[-1,76158],24],[[-1,76091],14],[[-1,76134],42],[[-1,76202],2],[[-1,76234],19],[[-1,76244],2],[[-1,76289],44],[[-1,76344],1],[[-1,76371],26],[[-1,76909],3],[[-1,76477],7],[[-1,76906],4],[[-1,76535],3],[[-1,76587],3],[[-1,76645],3],[[-1,76699],3],[[-1,76753],3],[[-1,76807],3],[[-1,76902],9],[[-1,76468],21],[[-1,76893],15],[[-1,76529],2],[[-1,76479],1],[[-1,76527],1],[[-1,76482],1],[[-1,76593],3],[[-1,76641],3],[[-1,76695],3],[[-1,76749],3],[[-1,76803],3],[[-1,76878],5],[[-1,76860],6],[[-1,76873],10],[[-1,76863],"\n"],[[-1,76917],2],[[-1,76939],1],[[-1,76929],4],[[-1,76921],3],[[-1,76925],2],[[-1,76936],4],[[-1,76915],5],[[-1,76932],1],[[-1,76938],1],[[-1,76981],1],[[-1,76955],1],[[-1,77005],1],[[-1,77507],33],[[-1,77638],15],[[-1,77869],17],[[-1,77932],33],[[-1,78007],5],[[-1,78001],3],[[-1,77997],2],[[-1,78002],1],[[-1,78051],3],[[-1,78079],1],[[-1,78088],3],[[-1,78146],3],[[-1,78223],1],[[-1,78257],13],[[-1,78268],3],[[-1,78281],2],[[-1,78298],1],[[-1,78311],6],[[-1,78313],1],[[-1,78380],54],[[-1,78418],2],[[-1,78430],3],[[-1,78477],1],[[-1,78608],20],[[-1,78556],9],[[-1,78564],6],[[-1,78573],8],[[-1,78588],12],[[-1,78709],4],[[-1,78791],1],[[-1,82659],"\n"],[[-1,75808],"Depending on the encoding used, "],[[-1,75774],"a "],[[-1,75768],"mnemonic or an opcode is used to identify each"],[[-1,75710],"\n"],[[-1,75722],1],[[-1,75721],"operation."],[[-1,75709]," Below table lists all m"],[[-1,75681],"nemonics"],[[-1,67844],":"],[[-1,67846],1],[[-1,75673],1],[[-1,75685],2],[[-1,75772],3],[[-1,75776],1],[[-1,81330],14],[[-1,81316],"\n\n```\n"],[[-1,79867],"+===================================="],[[-1,78992],"========"],[[-1,67511],"================"],[[-1,78984],1],[[-1,79830],"=======+"],[[-1,81310],45],[[-1,81265],"\n| Mnemonics                            "],[[-1,79000],"        "],[[-1,81225]," "],[[-1,67527],"                "],[[-1,81224],"    |\n"],[[-1,79913],"+===================================="],[[-1,79008],"======="],[[-1,67543],"================"],[[-1,79001],"="],[[-1,79876],"=======+"],[[-1,81218],45],[[-1,81173],"\n|           | new  "],[[-1,67659],"    "],[[-1,81153],"   | ins    "],[[-1,67619],"    "],[[-1,81141]," | del"],[[-1,79182],"    "],[[-1,67583],"    "],[[-1,81135]," | nop"],[[-1,79178],"    "],[[-1,67547],"    "],[[-1,81129]," |\n+-----------+-------"],[[-1,67655],"----"],[[-1,81106],"--+----"],[[-1,67651],"----"],[[-1,81099],"-----+---"],[[-1,79174],"----"],[[-1,79170],1],[[-1,81090],"-"],[[-1,67587],"----"],[[-1,81089],"-+--"],[[-1,79168],"----"],[[-1,81085],"-"],[[-1,67551],"----"],[[-1,81084],"--+\n| con       | new_con "],[[-1,67663],"    "],[[-1,81058],"|         "],[[-1,67623],"    "],[[-1,81048],"|    "],[[-1,79164],"    "],[[-1,67591],"    "],[[-1,81043]," |   "],[[-1,79143],"   "],[[-1,67555],"    "],[[-1,79140]," "],[[-1,81038],"  |\n| val       | new_val"],[[-1,67667],"    "],[[-1,81013]," | ins_val "],[[-1,67627],"    "],[[-1,81002],"|"],[[-1,79138],"         "],[[-1,67595],"    "],[[-1,79129],"|  "],[[-1,67560],"    "],[[-1,79126],"       |"],[[-1,79159],16],[[-1,81001],12],[[-1,80989],"\n| obj       | new_obj "],[[-1,67671],"    "],[[-1,80966],"| ins_obj "],[[-1,67631],"    "],[[-1,80956],"|"],[[-1,79117],"        "],[[-1,67599],"    "],[[-1,79109]," |     "],[[-1,67556]," "],[[-1,79102],"   "],[[-1,67563],"   "],[[-1,79099]," |"],[[-1,80955],12],[[-1,80943],"\n| vec       | new_vec "],[[-1,67675],"    "],[[-1,80920],"| ins_vec "],[[-1,67635],"    "],[[-1,80910],"|"],[[-1,79096],"       "],[[-1,67603],"    "],[[-1,79089],"  |        "],[[-1,67567],"    "],[[-1,79078]," |"],[[-1,80909],12],[[-1,80897],"\n| str       | new_str "],[[-1,67680],"    "],[[-1,80874],"| ins_str "],[[-1,67639],"    "],[[-1,80864],"| del"],[[-1,79076],"    "],[[-1,80859]," "],[[-1,67607],"    "],[[-1,80858],"|   "],[[-1,79072],"    "],[[-1,80854]," "],[[-1,67571],"    "],[[-1,80853]," |\n| bin       | new_bin"],[[-1,67683],"   "],[[-1,80829]," "],[[-1,67676]," "],[[-1,80828],"| ins_bin "],[[-1,67643],"    "],[[-1,80818],"|"],[[-1,79067]," del    "],[[-1,67611],"    "],[[-1,79059]," |        "],[[-1,67575],"    "],[[-1,79049]," |"],[[-1,80817],12],[[-1,80805],"\n| arr       | new_arr"],[[-1,67689],"    "],[[-1,67685],1],[[-1,80783]," | ins_arr"],[[-1,67647],"    "],[[-1,80773]," |"],[[-1,79046]," del "],[[-1,67615],"    "],[[-1,79041],"    |      "],[[-1,67579],"  "],[[-1,67576]," "],[[-1,67577]," "],[[-1,79030],"   |"],[[-1,80771],12],[[-1,80759],"\n"],[[-1,67840],"| ø         |             |             |             | "],[[-1,67700],"nop        "],[[-1,67784],11],[[-1,67773]," |\n+-----------+-------------+-------------+-------------+-------------+"],[[-1,80758],34],[[-1,79026],4],[[-1,80724],9],[[-1,79022],4],[[-1,80715],40],[[-1,79018],5],[[-1,80675],5],[[-1,79012],4],[[-1,80670],3],[[-1,80667],"\n```\n"],[[-1,75666],"\n"],[[-1,75668],"In"],[[-1,75665]," "],[[-1,75662],"binary encoding, each operation is identified by a 5-bit opcode."],[[-1,75566],"\n"],[[-1,75598],1],[[-1,75597],"Below table lists all opcodes"],[[-1,67941],", the op"],[[-1,67931],"codes are represented in binary and\n"],[[-1,67879],"decimal values in parentheses"],[[-1,67842],":"],[[-1,67848],1],[[-1,67850],1],[[-1,67895],15],[[-1,67933],1],[[-1,75568],1],[[-1,75664],1],[[-1,80662],5],[[-1,79993],7],[[-1,80657],9],[[-1,80648],"\n\n```\n+==========="],[[-1,79969],"="],[[-1,80630],1],[[-1,80629],"========="],[[-1,79967],"="],[[-1,80620],1],[[-1,80619],"=="],[[-1,79787],"="],[[-1,80617],"=="],[[-1,79800],"==="],[[-1,80615],"====="],[[-1,79638],"===="],[[-1,79965],"="],[[-1,80610],1],[[-1,80609],"="],[[-1,79198],"================"],[[-1,80608],"===="],[[-1,79963],"="],[[-1,80604],1],[[-1,80603],"=====+\n| "],[[-1,79977],"Opcodes"],[[-1,80594],9],[[-1,80585],"                "],[[-1,79788]," "],[[-1,80569],"     "],[[-1,79797],"   "],[[-1,80564],"        "],[[-1,79642]," "],[[-1,79214],"                "],[[-1,79641],"   "],[[-1,80556]," "],[[-1,79962],"  "],[[-1,80555],"   |\n"],[[-1,79959],"+======================="],[[-1,79789],"="],[[-1,79803],"==="],[[-1,79935],"=========="],[[-1,79646],"=="],[[-1,79456],"===="],[[-1,79644],"=="],[[-1,79925],"===="],[[-1,79226],"============"],[[-1,79921],"======+"],[[-1,80550],45],[[-1,80505],"\n|           | new   "],[[-1,79811],"   "],[[-1,80484]," "],[[-1,79790]," "],[[-1,80483]," | ins   "],[[-1,79650],"    "],[[-1,80474],"  | del"],[[-1,79526],"    "],[[-1,79460],"    "],[[-1,80467]," | nop "],[[-1,79234],"        "],[[-1,80460],"|\n+-----------+--------"],[[-1,79808],"---"],[[-1,79791],"-"],[[-1,79793],1],[[-1,79805],1],[[-1,80437],"-+---"],[[-1,79654],"----"],[[-1,80432],"------+--"],[[-1,79472],"--------"],[[-1,79464],2],[[-1,80423],"---+---"],[[-1,79242],"--------"],[[-1,80416],"--+\n| con       | "],[[-1,79821],"00_000 (0)"],[[-1,79794]," "],[[-1,80398],7],[[-1,80391]," |    "],[[-1,79659],"  "],[[-1,80385],"    "],[[-1,79656],"  "],[[-1,80381]," |   "],[[-1,79482],"       "],[[-1,79475],1],[[-1,79474]," "],[[-1,80376],"  |"],[[-1,79256],"             |"],[[-1,80373],6],[[-1,80367],"\n| val       | "],[[-1,79785],"00_00"],[[-1,79693],"1"],[[-1,79780],1],[[-1,79779]," ("],[[-1,79705],"1"],[[-1,79777],1],[[-1,79776],") "],[[-1,80352],7],[[-1,80345]," | "],[[-1,79675],"0"],[[-1,79664],"1"],[[-1,79674],1],[[-1,79673],"_00"],[[-1,79662],"1"],[[-1,79670],1],[[-1,79669]," ("],[[-1,79660],"9"],[[-1,79667],1],[[-1,79666],")"],[[-1,79657]," "],[[-1,80342],7],[[-1,80335]," |   "],[[-1,79490],"        "],[[-1,80330],"  |"],[[-1,79271],"             |"],[[-1,80327],6],[[-1,80321],"\n| obj       | "],[[-1,79773],"00_0"],[[-1,79691],"1"],[[-1,79769],1],[[-1,79768],"0 ("],[[-1,79703],"2"],[[-1,79765],1],[[-1,79764],") "],[[-1,80306],7],[[-1,80299]," | "],[[-1,79633],"01_0"],[[-1,79550],"10"],[[-1,79629],2],[[-1,79627]," ("],[[-1,79621],"10"],[[-1,79625],1],[[-1,79624],")"],[[-1,79623],1],[[-1,80296],7],[[-1,80289]," |     "],[[-1,79498],"        "],[[-1,80282],"|"],[[-1,79286],"             |"],[[-1,80281],6],[[-1,80275],"\n| vec       | "],[[-1,79761],"00_0"],[[-1,79688],"11"],[[-1,79757],2],[[-1,79755]," ("],[[-1,79701],"3"],[[-1,79753],1],[[-1,79752],") "],[[-1,80260],7],[[-1,80253]," | "],[[-1,79617],"01_0"],[[-1,79546],"11"],[[-1,79613],2],[[-1,79611]," (1"],[[-1,79559],"1"],[[-1,79608],1],[[-1,79607],")"],[[-1,80250],7],[[-1,80243]," |  "],[[-1,79506],"        "],[[-1,80239],"   |"],[[-1,79301],"             |"],[[-1,80235],6],[[-1,80229],"\n| str       | "],[[-1,79749],"00_"],[[-1,79685],"1"],[[-1,79746],1],[[-1,79745],"00 ("],[[-1,79699],"4"],[[-1,79741],1],[[-1,79740],") "],[[-1,80214],7],[[-1,80207]," | "],[[-1,79605],"01_"],[[-1,79541],"100"],[[-1,79602],3],[[-1,79599]," (1"],[[-1,79557],"2"],[[-1,79596],1],[[-1,79595],")"],[[-1,80204],7],[[-1,80197]," | "],[[-1,79379],"10_000"],[[-1,79519],6],[[-1,79513]," (1"],[[-1,79507],"6"],[[-1,79510],1],[[-1,79509],")"],[[-1,80194],3],[[-1,80191]," |"],[[-1,79316],"             |"],[[-1,80189],6],[[-1,80183],"\n| bin       | "],[[-1,79737],"00_"],[[-1,79683],"1"],[[-1,79734],1],[[-1,79733],"0"],[[-1,79681],"1"],[[-1,79732],1],[[-1,79731]," ("],[[-1,79697],"5"],[[-1,79729],1],[[-1,79728],") "],[[-1,80168],7],[[-1,80161]," | "],[[-1,79593],"01_"],[[-1,79535],"101"],[[-1,79590],3],[[-1,79587]," (1"],[[-1,79555],"3"],[[-1,79584],1],[[-1,79583],")"],[[-1,80158],7],[[-1,80151]," | "],[[-1,79372],"10_000"],[[-1,79451],6],[[-1,79445]," (16) |"],[[-1,79331],"             |"],[[-1,79438],6],[[-1,80148],11],[[-1,80137],"\n| arr       | "],[[-1,79725],"00_"],[[-1,79678],"11"],[[-1,79722],2],[[-1,79720],"0 ("],[[-1,79695],"6"],[[-1,79717],1],[[-1,79716],") "],[[-1,80122],7],[[-1,80115]," | "],[[-1,79581],"01_"],[[-1,79529],"110"],[[-1,79578],3],[[-1,79575]," (1"],[[-1,79553],"4"],[[-1,79572],1],[[-1,79571],")"],[[-1,80112],7],[[-1,80105]," | "],[[-1,79365],"10_000"],[[-1,79431],6],[[-1,79425]," (16) |  "],[[-1,79350],"        "],[[-1,79342],1],[[-1,79416],"   |"],[[-1,80102],11],[[-1,80091],"\n| ø         |    "],[[-1,79714],"    "],[[-1,80073],"     |     "],[[-1,79570],"    "],[[-1,80062],"    |  "],[[-1,79412],"        "],[[-1,80055],"   | "],[[-1,79358],"10_00"],[[-1,79351],"1"],[[-1,79353],1],[[-1,79393],6],[[-1,79387]," (1"],[[-1,79381],"7"],[[-1,79384],1],[[-1,79383],")"],[[-1,80050],3],[[-1,80047]," |\n+-----------+-------"],[[-1,79710],"----"],[[-1,80024],"--+------"],[[-1,79566],"----"],[[-1,79562],1],[[-1,80015],"---+--"],[[-1,79404],"--------"],[[-1,79396],1],[[-1,80009],"---+---"],[[-1,79340],"--------"],[[-1,80002],"--+\n```\n"],[[-1,67000],"\n"],[[-1,67125],"\n"],[[-1,67121],"### The `new_con` Operation\n\nThe `new_con` operation creates a new `con` object."],[[-1,66999]," The operation has an ID,\nwhich is implicitly computed from the position in the patch. The operation\nconsumes on"],[[-1,66864],"e"],[[-1,66887]," "],[[-1,66884],"logical clock cycle."],[[-1,66863],"\n\n"],[[-1,66841],"The payload of the `new_con` operation is the "],[[-1,66795],8],[[-1,66787],"value of the `con`"],[[-1,66768]," object, which\ncan be one of the following "],[[-1,66443],"three"],[[-1,66725],3],[[-1,66722]," options:\n\n1. "],[[-1,66568],"Any JSON "],[[-1,66708],7],[[-1,66695],"value, "],[[-1,66556],"including"],[[-1,66688],35],[[-1,66653],": `null`,"],[[-1,66535]," booleans, numbers, strings, arrays,\n"],[[-1,66496],"   objects,"],[[-1,66463]," and binary blobs"],[[-1,66445],"."],[[-1,66438],"\n"],[[-1,66414],"2. An `undefined` value, which indicates that the `con` object is empty.\n3. A logical clock value, which is a 2-"],[[-1,66298],"tuple for integers."],[[-1,60305],"\n\n~~~jj.note\n"],[[-1,60207],"JSON CRDT supports binary data. When binary data is used inside a `con` object,\n"],[[-1,60065],"care needs to be taken to ensure that the "],[[-1,60011],"patch is encoded in a way that\nsupports binary data."],[[-1,59901],"\n\nWhen `"],[[-1,59892],"binary"],[[-1,59893],"`"],[[-1,59886]," encoding is used, it will "],[[-1,59852],"automatically"],[[-1,59798]," encode the binary data\ncorrectly"],[[-1,59761],". When `"],[[-1,59752],"compact"],[[-1,59744],"` "],[[-1,59738],"or `"],[[-1,45582],"verbose"],[[-1,59734],4],[[-1,59730],"` encoding is used, "],[[-1,59680],"one needs to use a JSON\nencoding format that "],[[-1,59620],"supports binary data, such as "],[[-1,59567],"CBOR or "],[[-1,59551],"MessagePack."],[[-1,59539],3],[[-1,59559],7],[[-1,59569],1],[[-1,59590],17],[[-1,59635],6],[[-1,59623],2],[[-1,59629],3],[[-1,59710],24],[[-1,59740],1],[[-1,59742],1],[[-1,59753],1],[[-1,59765],2],[[-1,59839],23],[[-1,59859],6],[[-1,59959],57],[[-1,60017],5],[[-1,60023],3],[[-1,60071],4],[[-1,60127],24],[[-1,60097],23],[[-1,60103],3],[[-1,60282],67],[[-1,60214],3],[[-1,60210],2],[[-1,60215],1],[[-1,60292],"\n"],[[-1,60285],"~~~"],[[-1,60291],1],[[-1,60288],1],[[-1,60290],1],[[-1,66302],2],[[-1,66433],7],[[-1,66425],9],[[-1,66426],1],[[-1,66416],1],[[-1,66437],3],[[-1,66485],2],[[-1,66482],6],[[-1,66466],3],[[-1,66476],1],[[-1,66469],1],[[-1,66471],1],[[-1,66475],2],[[-1,66483],1],[[-1,66498],1],[[-1,66545],2],[[-1,66542],4],[[-1,66543],1],[[-1,66644],11],[[-1,66546],1],[[-1,66633],41],[[-1,66590],3],[[-1,66586],9],[[-1,66587],1],[[-1,66577],4],[[-1,66592],1],[[-1,66701],5],[[-1,66861],19],[[-1,66886],1],[[-1,67041],40],[[-1,67124],2],[[-1,82633],1],[[-1,82658],1],[[-1,82655],3],[[-1,82642],9],[[-1,82652],9],[[-1,82657],1],[[-1,83906],1],[[-1,83936],16],[[-1,82632],1],[[-1,81986],1],[[-1,81983],2],[[-1,81978],1],[[-1,81976],644],[[-1,81977],1],[[-1,81981],3],[[-1,81985],1],[[-1,82631],644],[[-1,84136],10],[[-1,84108],41],[[-1,84066],29],[[-1,84036],3],[[-1,84037],1],[[-1,84033],1],[[-1,84126],9],[[-1,84299],64],[[-1,84233],1],[[-1,84235],1],[[-1,84385],37],[[-1,84308],2],[[-1,84305],5],[[-1,84306],1],[[-1,84348],32],[[-1,84397],5],[[-1,84391],3],[[-1,84387],1],[[-1,84392],1],[[-1,84424],2],[[-1,84705],6],[[-1,84735],3],[[-1,84787],14],[[-1,84825],1],[[-1,84869],4],[[-1,84911],1],[[-1,84931],2],[[-1,84927],13],[[-1,82811],3],[[-1,82804],10],[[-1,82790],32],[[-1,82753],68],[[-1,82675],16],[[-1,82685],2],[[-1,82681],5],[[-1,82683],1],[[-1,82758],4],[[-1,82794],2],[[-1,82808],2],[[-1,84914],"\n"],[[-1,59533],"\n"],[[-1,59529],"~~~jj.note\n"],[[-1,59513],"The `"],[[-1,59507],"undefined"],[[-1,59508],"`"],[[-1,59498]," and logical clock values "],[[-1,59467],"can only appear at the root of the\n"],[[-1,59359],"`con` object. They cannot appear inside nested `con` objects. As a result,\n"],[[-1,59266],"all JSON CRDT Patch encoding"],[[-1,59139],"s"],[[-1,59238]," supports those values "],[[-1,59211],"without"],[[-1,59137]," placing any\n"],[[-1,59114],"addition restrictions on the "],[[-1,59068],"`compact` and `"],[[-1,45574],"verbose"],[[-1,59037],4],[[-1,59033],"`"],[[-1,59030]," "],[[-1,59032],1],[[-1,59045],2],[[-1,59041],3],[[-1,59043],1],[[-1,59053],4],[[-1,59076],1],[[-1,59073],4],[[-1,59075],1],[[-1,59085],"encoding"],[[-1,59028]," serialization."],[[-1,59077],1],[[-1,59124],9],[[-1,59204],13],[[-1,59188],12],[[-1,59172],6],[[-1,59161],22],[[-1,59166],4],[[-1,59176],2],[[-1,59191],2],[[-1,59215],3],[[-1,59284],15],[[-1,59425],65],[[-1,59432],1],[[-1,59430],3],[[-1,59431],1],[[-1,59427],1],[[-1,59472],4],[[-1,59518],"\n~~~\n"],[[-1,59532],2],[[-1,84913],"\n"],[[-1,66279],"\n"],[[-1,66269],"### The `new_val` Operation\n\nThe `new_val` operation creates a new `val` object. The operation has an ID,\nwhich is implicitly computed from the position in the patch. The operation\nconsumes one logical clock cycle.\n\nThe payload of the `new_val` operation is the value of the `val` object, which\nis an ID ("],[[-1,65963],"logical timestamp"],[[-1,65945],") of another JSON "],[[-1,65925],"CRDT object.\n"],[[-1,65873],"\n"],[[-1,65689],"\n### The `new_obj` Operation\n\nThe `new_obj` creates a new `obj` object. The operation has an ID, which is\nimplicitly computed from the position in the patch. The operation consumes one\nlogical clock cycle.\n"],[[-1,65466],"\n\n### The `new_vec` Operation\n\nThe `new_vec` creates a new `vec` object. The operation has an ID, which is\nimplicitly computed from the position in the patch. The operation consumes one\nlogical clock cycle.\n"],[[-1,65233],"\n\n### The `new_str` Operation\n\nThe `new_str` creates a new `str` object. The operation has an ID, which is\nimplicitly computed from the position in the patch. The operation consumes one\nlogical clock cycle.\n"],[[-1,65010],"\n\n### The `new_bin` Operation\n\nThe `new_bin` creates a new `bin` object. The operation has an ID, which is\nimplicitly computed from the position in the patch."],[[-1,64215],"\n\n"],[[-1,64852],1],[[-1,64851],"The operation consumes one"],[[-1,64212]," "],[[-1,64825],1],[[-1,64824],"logical clock cycle.\n"],[[-1,64787],"\n\n### The `new_arr` Operation\n\nThe `new_arr` creates a new `arr` object. The operation has an ID, which is\nimplicitly computed from the position in the patch"],[[-1,64221],".\n\n"],[[-1,64630],2],[[-1,64628],"The operation consumes one"],[[-1,64217]," "],[[-1,64602],1],[[-1,64601],"logical clock cycle.\n"],[[-1,65483],"\n"],[[-1,65912],"\n"],[[-1,65902],"### The `"],[[-1,64578],"ins_val"],[[-1,65893],4],[[-1,64800],3],[[-1,65023],3],[[-1,65256],3],[[-1,65479],3],[[-1,65889],3],[[-1,65886],"` Operation\n\n"],[[-1,64550],"The `ins_val` operation updates the value of a `val` object. The operation has\nan ID, which is implicitly computed from the position in the patch."],[[-1,64404],1],[[-1,64397],66],[[-1,62605],"\n\nThe `ins_"],[[-1,62400],"val"],[[-1,62594],3],[[-1,62591],"` operation holds the following payload:\n\n- "],[[-1,61861],"T"],[[-1,61858],"he"],[[-1,61860],1],[[-1,62547],2],[[-1,62545]," ID of a `"],[[-1,62396],"val"],[[-1,62535],3],[[-1,62532],"` object.\n- "],[[-1,62390],"T"],[[-1,62392],1],[[-1,62473],8],[[-1,62405],1],[[-1,62465],26],[[-1,62439],"he new value of the `val` object."],[[-1,62520],45],[[-1,64275],"\n\nThe "],[[-1,64266],"operation consumes one logical clock cycle."],[[-1,64269],2],[[-1,64314],"\n"],[[-1,64276],"\n"],[[-1,64313],"\n"],[[-1,64307],"### The `ins_obj` Operation\n"],[[-1,64163],"\nThe `ins_obj` operation inserts or updates key-value pairs of an `obj` object.\nThe operation has an ID, which is implicitly computed from the position in the\npatch."],[[-1,63998],85],[[-1,62754],"\n\nThe `ins_"],[[-1,62620],"obj"],[[-1,62743],3],[[-1,62740],"` operation holds the following payload:\n\n- "],[[-1,61872],"The"],[[-1,62612],2],[[-1,62610]," "],[[-1,62696],4],[[-1,62692],"ID of a `"],[[-1,62616],"obj"],[[-1,62683],3],[[-1,62680],"` object.\n- "],[[-1,61866],"The"],[[-1,61868],1],[[-1,62668],1],[[-1,62667]," list of elements to be inserted or updated."],[[-1,64277],"\n"],[[-1,64211],"\nThe operation consumes one logical clock cycle."],[[-1,64279],1],[[-1,64312],4],[[-1,64331],14],[[-1,64403],3],[[-1,65872],1],[[-1,65869],3],[[-1,65251],1],[[-1,64570],7],[[-1,65250],4],[[-1,64794],3],[[-1,65017],3],[[-1,65240],3],[[-1,65246],3],[[-1,65866],1],[[-1,65864],4],[[-1,65473],3],[[-1,65860],3],[[-1,65865],1],[[-1,64562],11],[[-1,65857],1],[[-1,65852],15],[[-1,64790],3],[[-1,65013],3],[[-1,65236],3],[[-1,65469],3],[[-1,65837],46],[[-1,65789],100],[[-1,65791],1],[[-1,65856],3],[[-1,65871],1],[[-1,65911],8],[[-1,65927],1],[[-1,65964],1],[[-1,66278],8],[[-1,84929],1],[[-1,85053],"\n"],[[-1,63913],"\n\n"],[[-1,63907],"### The `ins_vec` Operation\n\nThe `ins_vec` operation inserts or updates elements of a `vec` object. The\noperation has an ID, which is implicitly computed from the position in the\npatch."],[[-1,63722],78],[[-1,63024],"\n\nThe `ins_"],[[-1,62851],"vec"],[[-1,63013],3],[[-1,63010],"` operation holds the following payload:\n\n- "],[[-1,61876],"The"],[[-1,62608],2],[[-1,62966],3],[[-1,62963]," ID of "],[[-1,62763],"a"],[[-1,62956],3],[[-1,62953]," `"],[[-1,62767],"vec"],[[-1,62951],3],[[-1,62948],"` object.\n- "],[[-1,61880],"The"],[[-1,62759],1],[[-1,62845],33],[[-1,62812]," list of elements to be inserted"],[[-1,62756],1],[[-1,62780]," or"],[[-1,62757]," "],[[-1,62777],1],[[-1,62776],"updated."],[[-1,62936],82],[[-1,63644],"\n\nThe operation consumes one logical clock cycle.\n\n\n"],[[-1,63583],"### The `ins_str` Operation\n\nThe `ins_str` operation inserts text contents into a `str` object. The\noperation has an ID, which is implicitly computed from the position in the\npatch."],[[-1,63206],"\n\nThe `"],[[-1,63198],"ins_str"],[[-1,63199],"`"],[[-1,63191]," operation "],[[-1,63149],"holds"],[[-1,63180],3],[[-1,63177]," the following payload:\n\n- "],[[-1,63144],"The ID of "],[[-1,62761],"a"],[[-1,63132],3],[[-1,63129]," `str` object.\n"],[[-1,63112],"- The ID of the element "],[[-1,63084],"after which the text is inserted.\n- The text to be inserted."],[[-1,63088],3],[[-1,63114],1],[[-1,63134],1],[[-1,63326],"\n\nThe operation consumes "],[[-1,63276],"the number of "],[[-1,63260],"clock cycles equal to the length of the\ninserted text."],[[-1,63262],1],[[-1,63301],24],[[-1,63328],"\n"],[[-1,62389],"\n\n"],[[-1,62382],"### The `ins_bin` Operation\n\nThe `ins_bin` operation inserts binary contents into a `bin` object. The\noperation has an ID, which is implicitly computed from the position in the\npatch.\n\nThe `ins_bin` operation holds the following payload:\n\n- The ID of a `bin` object.\n- The ID of the element after which the binary contents are inserted.\n- The binary contents to be inserted.\n\nThe operation consumes the number of clock cycles equal to the length of"],[[-1,61926]," "],[[-1,61923],"octets\n"],[[-1,61913],"in the inserted binary contents."],[[-1,61856],"\n\n\n### The `ins_arr` Operation\n\nThe `ins_arr` operation inserts elements into an `arr` object. The operation\nhas an ID, which is implicitly computed from the position in the patch.\n\nThe `ins_arr` operation holds the following payload:\n\n- The ID of an `arr` object."],[[-1,61552],"\n"],[[-1,61466],"- The ID of the element after which the new elements are inserted."],[[-1,61551],39],[[-1,61481],14],[[-1,61512],30],[[-1,61592],"\n- The list of elements to be inserted.\n"],[[-1,61400],"\n"],[[-1,61364],"The operation consumes the number of clock cycles equal to the number of\ninserted elements.\n\n\n### The `del"],[[-1,61258],4],[[-1,61254],"` Operation"],[[-1,61239],"\n\nThe `del` operation deletes"],[[-1,61164]," contents from RGA ordered list objects, such as\n`str`, `bin`, and `arr`. The operation has an ID, which is implicitly computed\nfrom the position in the patch.\n\nThe `del` operation holds the following payload:\n\n- The ID of an RGA ordered list object.\n- A list of "],[[-1,60877],"one or more "],[[-1,60901],"ID ranges to be deleted."],[[-1,60865],"\n\n"],[[-1,60859],"The operation consumes one logical clock cycle.\n\n\n"],[[-1,60804],"### The `"],[[-1,60780],"nop"],[[-1,60795],3],[[-1,60792],"` Operation"],[[-1,60777],"\n\nThe `nop` operation is a no-op operation"],[[-1,60700],", it does nothing"],[[-1,60735],". The operation has an ID,"],[[-1,60466],"\n"],[[-1,60709],1],[[-1,60708],"which is"],[[-1,60464]," "],[[-1,60683],1],[[-1,60682],"implicitly computed from the position in the patch.\n\n"],[[-1,60551],"The payload of the `nop` operation is the number of logical clock cycles to\nadvance."],[[-1,60463]," Hence, the operation "],[[-1,60437],"consumes the specified number of logical clock\ncycles."],[[-1,57757],"\n"],[[-1,57721],"\n"],[[-1,57756],"\n"],[[-1,57751],"##"],[[-1,57745]," Summary of "],[[-1,57731],"Operations"],[[-1,57720],"\n"],[[-1,48779],"\nBelow table "],[[-1,48761],"summarizes the operations defined in the JSON CRDT Patch."],[[-1,48766],3],[[-1,57719],"\n"],[[-1,53354],"\n"],[[-1,48703],"~~~jj.wide\n```\n+======================================================================================================================+\n| Operations                                                                                                           |\n|-----------------------------+----------------------+-------------+---------------------------------------------------+\n|                             | Naming               | Opcode      | Contents                                          |\n|                             +-----+-----+----------+-------+-----+-----+-----------------------------+---------------+\n|                             | Op  | Obj | Mnemonic | Bin   | Dec | Obj | Payload                     | Span          |\n|                             +-----+-----+----------+-------+-----+-----+-----------------------------+---------------+\n| 1   Create new Const        | new | con | new_con  | 00000 | 0   | No  | Value                       | 1             |\n| 2   Create new LWW-Register | new | val | new_val  | 00001 | 1   | No  | Value                       | 1             |\n| 3   Create new LWW-Object   | new | obj | new_obj  | 00010 | 2   | No  | No                          | 1             |\n| 4   Create new LWW-Vector   | new | vec | new_vec  | 00011 | 3   | No  | No                          | 1             |\n| 5   Create new RGA-String   | new | str | new_str  | 00100 | 4   | No  | No                          | 1             |\n| 6   Create new RGA-Binary   | new | bin | new_bin  | 00101 | 5   | No  | No                          | 1             |\n| 7   Create new RGA-Array    | new | arr | new_arr  | 00110 | 6   | No  | No                          | 1             |\n| 8   Update LWW-Register     | ins | val | ins_val  | 01001 | 9   | Yes | New value ID                | 1             |\n| 9   Update LWW-Object       | ins | obj | ins_obj  | 01010 | 10  | Yes | List of [string, ID] tuples | 1             |\n| 10  Update LWW-Vector       | ins | vec | ins_vec  | 01011 | 11  | Yes | List of [number, ID] tuples | 1             |\n| 11  Insert into RGA-String  | ins | str | ins_str  | 01100 | 12  | Yes | After ID, string to insert  | String length |\n| 12  Insert into RGA-Binary  | ins | bin | ins_bin  | 01101 | 13  | Yes | After ID, blob to insert    | Binary length |\n| 13  Insert into RGA-Array   | ins | arr | ins_arr  | 01110 | 14  | Yes | After ID, list of IDs       | List length   |\n| 14  Delete from RGA         | del | del | del      | 10000 | 16  | Yes | List of spans               | 1             |\n| 15  No-op                   | nop | nop | nop      | 10001 | 17  | No  | Length                      | 1+            |\n+----------------------------------------------------------------------------------------------------------------------+\n```\n~~~"],[[-1,51569],2790],[[-1,53353],1],[[-1,53350],5],[[-1,53352],1],[[-1,57718],1],[[-1,53888],1],[[-1,51718],128],[[-1,51571],1],[[-1,51573],1],[[-1,51590],16],[[-1,51735],16],[[-1,53887],1],[[-1,52037],128],[[-1,51901],1],[[-1,51909],4],[[-1,53886],185],[[-1,53113],115],[[-1,52042],3],[[-1,52998],45],[[-1,53701],161],[[-1,52217],1],[[-1,51768],30],[[-1,52216],130],[[-1,53540],13],[[-1,52772],1],[[-1,53527],17],[[-1,52796],1],[[-1,53510],9],[[-1,52794],1],[[-1,53501],12],[[-1,52792],1],[[-1,53489],11],[[-1,52790],1],[[-1,53478],10],[[-1,52788],1],[[-1,53468],9],[[-1,52786],1],[[-1,53459],10],[[-1,52784],1],[[-1,53449],11],[[-1,52782],1],[[-1,53438],5],[[-1,52780],1],[[-1,53433],9],[[-1,52778],1],[[-1,53424],10],[[-1,52776],1],[[-1,53414],30],[[-1,52774],1],[[-1,53384],18],[[-1,57717],189],[[-1,53364],2],[[-1,53341],1],[[-1,53362],6],[[-1,53286],26],[[-1,53356],1],[[-1,53340],5],[[-1,53329],3],[[-1,53335],3],[[-1,53355],1],[[-1,57528],26],[[-1,53326],6],[[-1,57502],12],[[-1,53320],8],[[-1,53311],25],[[-1,52235],17],[[-1,57490],121],[[-1,52770],1],[[-1,57369],1],[[-1,53259],38],[[-1,57368],56],[[-1,52512],3],[[-1,52516],1],[[-1,57312],10],[[-1,52509],1],[[-1,57302],13],[[-1,52526],1],[[-1,52507],1],[[-1,52525],6],[[-1,52536],5],[[-1,57289],14],[[-1,52401],20],[[-1,57275],12],[[-1,52380],11],[[-1,57263],70],[[-1,53175],19],[[-1,57193],174],[[-1,52749],9],[[-1,57019],11],[[-1,53213],26],[[-1,57008],64],[[-1,52589],3],[[-1,56944],15],[[-1,52489],1],[[-1,56929],34],[[-1,52421],20],[[-1,56895],48],[[-1,52367],131],[[-1,56847],13],[[-1,53214],1],[[-1,56834],46],[[-1,52813],1],[[-1,56788],13],[[-1,52769],1],[[-1,56775],9],[[-1,52729],1],[[-1,56766],152],[[-1,52812],1],[[-1,56614],13],[[-1,52768],1],[[-1,56601],1],[[-1,52718],1],[[-1,56600],160],[[-1,52811],1],[[-1,56440],13],[[-1,52767],1],[[-1,56427],161],[[-1,52810],1],[[-1,56266],13],[[-1,52766],1],[[-1,56253],161],[[-1,52809],1],[[-1,56092],13],[[-1,52765],1],[[-1,56079],161],[[-1,52808],1],[[-1,55918],13],[[-1,52764],1],[[-1,55905],161],[[-1,52807],1],[[-1,55744],13],[[-1,52763],1],[[-1,55731],161],[[-1,52806],1],[[-1,55570],13],[[-1,52762],1],[[-1,55557],161],[[-1,52805],1],[[-1,55396],13],[[-1,52761],1],[[-1,55383],161],[[-1,52804],1],[[-1,55222],13],[[-1,52760],1],[[-1,55209],107],[[-1,52940],1],[[-1,55102],54],[[-1,52803],1],[[-1,55048],13],[[-1,52759],1],[[-1,55035],161],[[-1,52802],1],[[-1,54874],13],[[-1,52758],1],[[-1,54861],161],[[-1,52801],1],[[-1,54700],13],[[-1,52757],1],[[-1,54687],161],[[-1,52800],1],[[-1,54526],13],[[-1,52756],1],[[-1,54513],161],[[-1,52799],1],[[-1,54352],13],[[-1,52755],1],[[-1,54339],161],[[-1,52798],1],[[-1,54178],13],[[-1,52754],1],[[-1,54165],1],[[-1,52598],1],[[-1,54164],101],[[-1,51899],131],[[-1,54063],62],[[-1,52752],2],[[-1,54001],10],[[-1,52540],1],[[-1,53991],102],[[-1,53344],3],[[-1,53889],"\n"],[[-1,57733],1],[[-1,57749],2],[[-1,57755],2],[[-1,60441],3],[[-1,60616],35],[[-1,60569],17],[[-1,60581],9],[[-1,60629],12],[[-1,60809],4],[[-1,60863],3],[[-1,61210],45],[[-1,61399],34],[[-1,61916],2],[[-1,61925],1],[[-1,61934],4],[[-1,62387],4],[[-1,63327],"\n"],[[-1,63402],72],[[-1,63592],8],[[-1,63911],3],[[-1,64580],1],[[-1,85055],1],[[-1,85073],"\n## Serialization"],[[-1,59010],"\n\n"],[[-1,59006],"The JSON CRDT Patch can be serialized into different formats. The following\nformats are supported:\n\n"],[[-1,45544],"- `verbose` - a verbose human-readable JSON"],[[-1,45466],8],[[-1,45452],3],[[-1,45458],3],[[-1,45501]," encoding.\n"],[[-1,58906],"- `"],[[-1,45489],"compact"],[[-1,45566],7],[[-1,58903],4],[[-1,58899],"`"],[[-1,58881]," - "],[[-1,45481],"a JSON"],[[-1,45433]," encoding which "],[[-1,45415],"f"],[[-1,45412],"ollows Compact JSON "],[[-1,45385],"encoding scheme.\n- `binary` - a "],[[-1,45337],"custom desi"],[[-1,45324],"gned minimal "],[[-1,45326],1],[[-1,45353],"binary encoding."],[[-1,45392],6],[[-1,45414],1],[[-1,45417],1],[[-1,45449],11],[[-1,45475],9],[[-1,58878],24],[[-1,58898],16],[[-1,45546],"\n\n"],[[-1,59008],1],[[-1,85075],1],[[-1,85094],"\n"],[[-1,45307],"### The `verbose` Encoding"],[[-1,44933],"\n\n"],[[-1,44688],"~~~jj."],[[-1,44674],"aside\n"],[[-1,44587],"The resulting patch does not have to be encoded as "],[[-1,44486],"JSON, other JSON-like\n"],[[-1,44377],"serializers---such as CBOR or MessagePack---can be used as well."],[[-1,44452],11],[[-1,44411],1],[[-1,44408],30],[[-1,44410],1],[[-1,44441],22],[[-1,44464],11],[[-1,44536],25],[[-1,44649],4],[[-1,44639],36],[[-1,44599],11],[[-1,44603],2],[[-1,44645],5],[[-1,44668],"\n"],[[-1,44652],"~~~"],[[-1,44667],1],[[-1,44664],2],[[-1,44658],1],[[-1,44662],3],[[-1,44666],1],[[-1,44682],4],[[-1,44690],"\n\n"],[[-1,44880],"The `verbose` encoding format specifies how JSON CRDT Patch is serialized "],[[-1,44801],"into\n"],[[-1,44280],"a human-readable JSON-like objects. The patch is represented as a JSON "],[[-1,44203],"object\nwith the following fields:\n\n"],[[-1,44161],"- `id` - the ID of the patch. The ID ("],[[-1,44122],"logical timestamp"],[[-1,44123],")"],[[-1,44105]," of the first operation of the patch."],[[-1,43936]," `"],[[-1,43933],"id"],[[-1,43934],"`"],[[-1,43931]," is\n"],[[-1,43847],"  encoded as an array 2-tuple, where first element is the session ID and the second element is the\n"],[[-1,43745],"  logical "],[[-1,43723],"time sequence number."],[[-1,43735],10],[[-1,43748],2],[[-1,43927],14],[[-1,43911],63],[[-1,43913],1],[[-1,43941],3],[[-1,44021],"\n"],[[-1,43988],"- `meta` - optional, the metadata of the patch."],[[-1,43702]," This can be any valid JSON object "],[[-1,43663],"specified by the\n  application."],[[-1,43667],3],[[-1,44020],3],[[-1,44016],4],[[-1,44017],1],[[-1,44012],3],[[-1,43999],10],[[-1,44009],9],[[-1,44068],"\n"],[[-1,43621],"- `ops` - the list of operations in the patch. The list is encoded as an array of JSON objects, where\n"],[[-1,43452],"  each object represents an operation. The ID of each operation is implicitly compute"],[[-1,43342],"d by adding the"],[[-1,43325],"\n"],[[-1,43262],"  logical time span of the previous operation to the ID of the previous operation. The first operation\n"],[[-1,43156],"  of the patch has an ID equal to the ID of the patch.\n"],[[-1,43093],"\nThe following example shows a patch with two operations:\n\n`"],[[-1,43031],"``"],[[-1,43026],"js"],[[-1,30568],"on"],[[-1,43024],"\n"],[[-1,43022],"{"],[[-1,43020],"\n  "],[[-1,30566],"\""],[[-1,43011],"id"],[[-1,30565],"\""],[[-1,43009],": ["],[[-1,42888],"123"],[[-1,43006],1],[[-1,43005],", "],[[-1,42884],"456"],[[-1,43003],1],[[-1,43002],"],\n"],[[-1,42996],"  "],[[-1,30564],"\""],[[-1,42994],"meta"],[[-1,30563],"\""],[[-1,42990],": { \"author\": \"John Doe\" },\n  "],[[-1,30562],"\""],[[-1,42960],"ops"],[[-1,30561],"\""],[[-1,42957],": "],[[-1,42951],"["],[[-1,42946],"\n    "],[[-1,42938],"{"],[[-1,42936]," "],[[-1,30560],"\""],[[-1,42935],"op"],[[-1,30559],"\""],[[-1,42933],": "],[[-1,30557],"\""],[[-1,42931],1],[[-1,42930],"new_"],[[-1,42924],"obj"],[[-1,30555],"\""],[[-1,42921],1],[[-1,42918]," "],[[-1,42920],1],[[-1,42926],1],[[-1,42937],"}"],[[-1,42917],",\n    {"],[[-1,42909]," "],[[-1,30554],"\""],[[-1,42908],"op"],[[-1,30553],"\""],[[-1,42906],": "],[[-1,30551],"\""],[[-1,42900],1],[[-1,42899],"new_str"],[[-1,30549],"\""],[[-1,42892],1],[[-1,42891]," "],[[-1,42904],3],[[-1,42910],"}"],[[-1,42890],","],[[-1,42941],"\n  "],[[-1,42948],"],"],[[-1,42950],1],[[-1,42955],1],[[-1,42953],1],[[-1,42954],1],[[-1,42999],2],[[-1,43016],4],[[-1,43017],"\n"],[[-1,43021],"}"],[[-1,43023],"\n"],[[-1,43029],"```"],[[-1,42881],"\n\n"],[[-1,42850],"Patch operations are encoded as JSON objects"],[[-1,42773],". Each operation "],[[-1,42752],"has an `op` field, which "],[[-1,42724],"is a string\n"],[[-1,42705],"equal to the operation mnemonic. "],[[-1,42605],"Operations, which "],[[-1,42577],"reference other objects, have an `obj` field,\n"],[[-1,42389],"which is and ID of the referenced object. Operations, which have payload, have a `value` field,\nwhich is the payload of the operation. "],[[-1,42240],"There maybe be "],[[-1,42219],"other fields, which are specific to the\noperation"],[[-1,42168],", "],[[-1,42162],"see the operation definitions for details.\n\nID ("],[[-1,42113],"logical timestamps"],[[-1,42094],") can be encoded in one of "],[[-1,40475],"t"],[[-1,40466],"he fol"],[[-1,40458],"lowing ways"],[[-1,40460],1],[[-1,40474],4],[[-1,42067],8],[[-1,42059],":\n\n"],[[-1,42053],"- As an array 2-tuple, where first element is the session ID and the second element is the logical\n  time sequence number.\n"],[[-1,41921],"- If the session ID is equal to the session ID of the patch, then the ID can be encoded as a single\n  number, which is the logical time sequence number"],[[-1,41768]," difference "],[[-1,41748],"between the ID and the ID of the\n"],[[-1,41712],"  patch."],[[-1,40447],1],[[-1,40443],36],[[-1,40406],1],[[-1,40404],33],[[-1,40407],1],[[-1,40446],2],[[-1,41715],2],[[-1,41756],7],[[-1,41770],1],[[-1,41927],5],[[-1,41930],2],[[-1,42056],2],[[-1,42114],1],[[-1,42166],3],[[-1,42170],1],[[-1,42225],5],[[-1,42252],10],[[-1,42254],1],[[-1,42531],13],[[-1,42515],47],[[-1,42418],22],[[-1,42395],5],[[-1,42396],1],[[-1,42468],39],[[-1,42518],2],[[-1,42587],9],[[-1,42672],66],[[-1,42712],6],[[-1,42727],2],[[-1,42756],3],[[-1,42806],27],[[-1,42868],17],[[-1,42879],9],[[-1,43033],1],[[-1,43101],5],[[-1,43159],2],[[-1,43324],15],[[-1,43304],41],[[-1,43309],4],[[-1,43327],1],[[-1,43367],13],[[-1,43519],43],[[-1,43474],21],[[-1,43476],1],[[-1,44067],46],[[-1,43632],10],[[-1,44168],3],[[-1,44164],2],[[-1,44165],1],[[-1,44209],5],[[-1,44796],21],[[-1,44721],5],[[-1,44775],1],[[-1,44699],8],[[-1,44313],5],[[-1,44302],21],[[-1,44308],5],[[-1,44716],12],[[-1,44703],1],[[-1,44774],53],[[-1,44806],4],[[-1,44930],5],[[-1,44924],7],[[-1,44925],1],[[-1,44917],36],[[-1,45198],"\n"],[[-1,44691],"\n"],[[-1,45197],"\n#### `new_con` Operation Encoding\n\n"],[[-1,41610],"The `new_con` operation is encoded as a JSON object with the `\"op\"` field equal to `\"new_con\"`"],[[-1,41512],"\nand `"],[[-1,41505],"\"value\""],[[-1,41506],"`"],[[-1,41498]," "],[[-1,41495],"field equal to the value of the constant.\n\n```"],[[-1,41396],"js"],[[-1,41380],"on"],[[-1,41449],4],[[-1,41445],"\n{"],[[-1,41402]," "],[[-1,41378],"\""],[[-1,41443],4],[[-1,41439],"op"],[[-1,41377],"\""],[[-1,41437],1],[[-1,41436],": "],[[-1,41375],"\""],[[-1,41391],1],[[-1,41390],"new_con"],[[-1,41373],"\""],[[-1,41381],1],[[-1,41383],1],[[-1,41434],9],[[-1,41425],","],[[-1,41400]," "],[[-1,41424],3],[[-1,41421],"\"value\": 42"],[[-1,41398]," "],[[-1,41410],1],[[-1,41409],"}\n```"],[[-1,41372],"\n\n"],[[-1,41358],"A constant with `"],[[-1,41340],"undefined"],[[-1,41341],"`"],[[-1,41331]," value "],[[-1,41316],"is encoded "],[[-1,41301],"by "],[[-1,41296],"omitting the `\"value\"` field.\n\n```json\n{ \"op\": \"new_con\" }\n```\n\n"],[[-1,40921],"A logical timestamp is encoded by setting the `\"timestamp\"` field to `true`.\n\n```json\n{ \"op\": \"new_con\", \"timestamp\": true, \"value\": [123, 456] }\n```"],[[-1,40771],"\n"],[[-1,40772],"\n"],[[-1,40768],"If timestamp session ID is "],[[-1,40739],"equal to the session ID of the patch, then the timestamp can be encoded\nas a single number, which is the logical time sequence number difference between the timestamp and\nthe ID of the patch.\n\n```json\n{ \"op\": \"new_con\", \"timestamp\": 456, \"value\": "],[[-1,40480],"0"],[[-1,40492],3],[[-1,40489]," }\n```"],[[-1,40370],"\n"],[[-1,40129],"\n"],[[-1,40369],"\n"],[[-1,40364],"#### `new_val` Operation Encoding\n\nThe `new_val` operation is encoded as a JSON object with the `\"op\"` field equal to `\"new_val\"`\n"],[[-1,40080],"and `\"value\"` field set to the ID (logical timestamp) of the value."],[[-1,39955],"\n\nFor example:"],[[-1,40013],"\n\n```json\n{ \"op\": \"new_val\", \"value\": [123, 456] }\n```\n\nor"],[[-1,40234],14],[[-1,40127],7],[[-1,40114],14],[[-1,40099],17],[[-1,40100],1],[[-1,40082],1],[[-1,40120],3],[[-1,40220],45],[[-1,40175],"\n\n```json\n{ \"op\": \"new_val\", \"value\": 42 }\n```"],[[-1,39941],"\n"],[[-1,39770],"\n"],[[-1,39940],"\n"],[[-1,39933],"#### `new_obj` Operation Encoding\n\nThe `new_obj` operation is encoded as a JSON object with the `\"op\"` field equal to `\"new_obj\"`.\n\n```json\n{ \"op\": \"new_obj\" }\n```"],[[-1,39769],"\n"],[[-1,39594],"\n"],[[-1,39768],"\n"],[[-1,39591],"#"],[[-1,39762],"### `new_"],[[-1,39727],"vec"],[[-1,39753],3],[[-1,39750],"` Operation Encoding"],[[-1,39724],"\n\nThe `new_vec` operation is encoded as a JSON object with the `\"op\"` field equal to `\"new_vec\"`.\n\n```json\n{ \"op\": \"new_vec\" }\n```"],[[-1,39593],"\n"],[[-1,39551],"\n"],[[-1,39592],"\n"],[[-1,39584],"#### `new_str` Operation Encoding"],[[-1,39550],"\n\nThe `new_str` operation is encoded as a JSON object with the `\"op\"` field equal to `\"new_str\"`.\n\n```json\n{ \"op\": \"new_str\" }\n```\n\n\n"],[[-1,39411],"#### `new_bin` Operation Encoding\n\nThe `new_bin` operation is encoded as a JSON object with the `\"op\"` field equal to `\"new_bin\"`.\n\n```json\n{ \"op\": \"new_bin\" }\n```\n\n\n"],[[-1,39239],"#### `new_arr` Operation Encoding\n\nThe `new_arr` operation is encoded as a JSON object with the `\"op\"` field equal to `\"new_arr\"`.\n\n```json\n{ \"op\": \"new_arr\" }\n```\n\n\n"],[[-1,39059],"#### `ins_val` Operation Encoding\n\nThe `ins_val` operation is encoded as a JSON object with the"],[[-1,38621]," following fields:\n"],[[-1,38601],"\n"],[[-1,38595],"- `\"op\"` -"],[[-1,38190],"--"],[[-1,38585]," equal to `\"ins_val\"`.\n- `\"obj\"` "],[[-1,38187],"---"],[[-1,38552],1],[[-1,38551]," the ID of the "],[[-1,38500],"`val` "],[[-1,38536],"object, "],[[-1,38493],"whi"],[[-1,38486],"ch value is updated.\n- `\"value\"` "],[[-1,38183],"---"],[[-1,38453],1],[[-1,38452]," the ID (logical timestamp) of the new value."],[[-1,38406],"\n\nFor e"],[[-1,38391],"xample:"],[[-1,38399],4],[[-1,38490],2],[[-1,38528],28],[[-1,38600],4],[[-1,38602],1],[[-1,38964],95],[[-1,38862],4],[[-1,38869],7],[[-1,38858],14],[[-1,38844],"\n\n```json\n{ \"op\": \"ins_val\","],[[-1,38787]," "],[[-1,38782],"\"obj\": "],[[-1,38773],"["],[[-1,38766],"123, "],[[-1,38757],"0"],[[-1,38761],3],[[-1,38770],"],"],[[-1,38768],1],[[-1,38772],1],[[-1,38775],1],[[-1,38786],3],[[-1,38816]," \"value\": [123, "],[[-1,38755],"1"],[[-1,38800],3],[[-1,38797],"] }\n```"],[[-1,38754],"\n\n\n"],[[-1,36857],"#### `ins_obj` Operation Encoding\n\nThe `ins_obj` operation is encoded as a JSON object with the following fields:\n\n- `\"op\"` --- equal to `\"ins_obj\"`.\n- `\"obj\"` --- the ID of the `obj` object, which value is updated.\n- `\"value\"` --- an array of 2-tuples, where each 2-tuple is a field name and an ID (logical timestamp)\n  of the field value.\n\nAn example where all timestamps are encoded as 2-tuples:\n\n```json\n{\n  \"op\": \"ins_obj\",\n  \"obj\": [123, 0],\n  \"value\": [\n    [\"foo\", [123, 1]],\n    [\"bar\", [123, 2]]\n  ]\n}\n```\n\nSame example, but with timestamps encoded as time differences:\n\n```json\n{\n  \"op\": \"ins_obj\",\n  \"obj\": 1,\n  \"value\": [\n    [\"foo\", 2],\n    [\"bar\", 3]\n  ]\n}\n```"],[[-1,38751],35],[[-1,38380],89],[[-1,38179],3],[[-1,38291],34],[[-1,38175],3],[[-1,38257],57],[[-1,38199],7],[[-1,38200],1],[[-1,38192],1],[[-1,38171],13],[[-1,38155],101],[[-1,37656],11],[[-1,37830],174],[[-1,38054],3],[[-1,37640],5],[[-1,37633],40],[[-1,37584],16],[[-1,37566],1],[[-1,37568],1],[[-1,37593],8],[[-1,37635],1],[[-1,37900],10],[[-1,37880],26],[[-1,37850],20],[[-1,37854],2],[[-1,37882],1],[[-1,37890],6],[[-1,38042],23],[[-1,37930],3],[[-1,38019],17],[[-1,37926],3],[[-1,38002],8],[[-1,37564],1],[[-1,37994],9],[[-1,37922],3],[[-1,37985],11],[[-1,37919],5],[[-1,37974],8],[[-1,37557],2],[[-1,37966],10],[[-1,37913],5],[[-1,37956],9],[[-1,37554],1],[[-1,37947],9],[[-1,37908],5],[[-1,37938],7],[[-1,37645],4],[[-1,37553],"\n\n\n#### `ins_vec` Operation Encoding\n\nThe `ins_vec` operation is encoded as a JSON object with the following fields:\n\n- `\"op\"` --- equal to `\"ins_vec\"`.\n- `\"obj\"` --- the ID of the `vec` object, which value is updated.\n- `\"value\"` --- an array of 2-tuples, where each 2-tuple is a position index and an ID (logical timestamp)\n  of the field value.\n\nAn example where all timestamps are encoded as 2-tuples:\n\n```json\n{\n  \"op\": \"ins_vec\",\n  \"obj\": [123, 0],\n  \"value\": [\n    [0, [123, 1]],\n    [1, [123, 2]]\n    [3, [123, 3]]\n  ]\n}\n```\n\nSame example, but with timestamps encoded as time differences:\n\n```json\n{\n  \"op\": \"ins_obj\",\n  \"obj\": 1,\n  \"value\": [\n    [0, 2],\n    [1, 3]\n    [2, 4]\n  ]\n}\n```"],[[-1,36182],"\n\n\n"],[[-1,36164],"#### `ins_str` Operation Encoding"],[[-1,36179],6],[[-1,36172],7],[[-1,36173],1],[[-1,38051],2],[[-1,38048],3],[[-1,38158],2],[[-1,38191],1],[[-1,38716],34],[[-1,38382],1],[[-1,38682],60],[[-1,38622],"\n"],[[-1,36131],"\nThe `ins_str` operation is encoded as a JSON object with the following fields:\n\n- `\"op\"` --- equal to `\"ins_str\"`.\n- `\"obj\"` --- the ID of the `str` object, which value is updated.\n- `"],[[-1,35945],"\"after\""],[[-1,35946],"`"],[[-1,35938]," --- the "],[[-1,35926],"ID "],[[-1,35923],20],[[-1,35903],"of the character after which the new "],[[-1,35829],"sub-string"],[[-1,35833],2],[[-1,35843],9],[[-1,35866],9],[[-1,35857]," is inserted."],[[-1,35819],"\n  If the sub-string "],[[-1,35796],"is inserted at the beginning of the string, then this field is "],[[-1,35723],"set to "],[[-1,35713],"the ID of\n"],[[-1,35700],"  the `str` object.\n"],[[-1,35677],"- `\"value\"` --- "],[[-1,35599],"a "],[[-1,35595],"sub-string to insert into the `"],[[-1,35563],"str"],[[-1,35564],"`"],[[-1,35560]," object.\n\nFor example:\n\n```json\n{ \"op\": \"ins_str\", \"obj\": [123, 0], \"after\": [123, 1], \"value\": \"foo\" }\n```\n"],[[-1,35446],"\n\n"],[[-1,35438],"#### `ins_bin` Operation Encoding\n\n"],[[-1,35397],"The `ins_bin` operation is encoded as a JSON object with the following fields:\n\n- `\"op\"` --- equal to `\"ins_bin\"`.\n- `\"obj\"` --- the ID of the `bin` object, which value is updated.\n- `\"after\"` --- the ID"],[[-1,35194],20],[[-1,35174]," of the byte after which the new "],[[-1,34997],"octets"],[[-1,34988]," are"],[[-1,34990],1],[[-1,35141],13],[[-1,35128]," inserted.\n  If the sub-string is inserted at the beginning of the "],[[-1,34983],"`"],[[-1,34981],"bin"],[[-1,34977],"` object"],[[-1,34982],1],[[-1,35061],6],[[-1,35055],", then this field is set to the ID of\n  the `bin` object."],[[-1,34963],"\n"],[[-1,34959],"- `\"value\"` --- an array of octets to insert into the `bin` object"],[[-1,34891],", encoded as "],[[-1,34875],"Base64 string.\n\nFor example:\n\n```json\n{ \"op\": \"ins_bin\", \"obj\": [123, 0], \"after\": [123, 1], \"value\": \"Zm9v\" }\n```\n\n"],[[-1,34733],"The following alphabet is used for Base64 encoding:\n\n```\nABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\n`"],[[-1,34608],"``"],[[-1,34602],"\n\n"],[[-1,34597],"The padding character is `=`."],[[-1,34567],"\n\n\n"],[[-1,34554],"#### `ins_arr` Operation Encoding\n\nThe `ins_arr` operation is encoded as a JSON object with the following fields:\n\n- `\"op\"` --- equal to `\"ins_arr\"`.\n- `\"obj\"` --- the ID of the `arr` object, which value is updated.\n- `\"after\"` --- the ID of the element after which the new elements are inserted.\n  If the elements are inserted at the beginning of the `arr` object, then this field is set to the ID of\n  the `arr` object.\n"],[[-1,34129],"- `\"value\"` --- an array of "],[[-1,34017],"IDs to "],[[-1,34008],"be inserted into the `arr` object.\n\nFor example:\n\n```json\n{"],[[-1,33859],"\n  "],[[-1,33949],1],[[-1,33948],"\"op\": \"ins_arr\","],[[-1,33855],"\n  "],[[-1,33932],1],[[-1,33931],"\"obj\": [123, 0],"],[[-1,33851],"\n  "],[[-1,33915],1],[[-1,33914],"\"after\": [123, 1],"],[[-1,33847],"\n  "],[[-1,33896],1],[[-1,33895],"\"value\": ["],[[-1,33844],"\n    "],[[-1,33885],"[123, 2], [123, 3]"],[[-1,33839],"\n  "],[[-1,33836],2],[[-1,33867],"]"],[[-1,33832],"\n"],[[-1,33831],2],[[-1,33866],1],[[-1,33865],"}\n```"],[[-1,34010],1],[[-1,34030],10],[[-1,34101],70],[[-1,34132],2],[[-1,34560],5],[[-1,34564],2],[[-1,34600],2],[[-1,34606],3],[[-1,34610],1],[[-1,34759],7],[[-1,34750],16],[[-1,34752],1],[[-1,34878],2],[[-1,34893],1],[[-1,34962],2],[[-1,35402],4],[[-1,35403],"\n"],[[-1,33828],"\n\n"],[[-1,33820],"#### `del` Operation Encoding\n\n"],[[-1,33778],"The `del` operation is encoded as a JSON object with the following fields:\n\n- `\"op\"` --- equal to `\"del\"`.\n- `\"obj\"` --- the ID of the object "],[[-1,33618],"in which "],[[-1,33605],"content is deleted.\n- `"],[[-1,33581],"\""],[[-1,33578],"what\""],[[-1,33580],1],[[-1,33582],"`"],[[-1,33573]," --- a"],[[-1,33555],"n array for timespans"],[[-1,33510]," which sp"],[[-1,33499],"ecifies RGA ranges to be "],[[-1,33472],"deleted.\n\nFor example:\n\n```json\n{\n  \"op\": \"del\",\n  \"obj\": [123, 0],\n  \"what\": [\n"],[[-1,33326],"    [123, 1, 3],\n"],[[-1,33392],"    "],[[-1,33388],1],[[-1,33387],"[123, "],[[-1,33306],"10"],[[-1,33308],1],[[-1,33381],1],[[-1,33332],", "],[[-1,33303],"1"],[[-1,33302],1],[[-1,33330],1],[[-1,33380],"]"],[[-1,33379],37],[[-1,33342],"\n  ]\n}\n```"],[[-1,33298],"\n"],[[-1,33296],"\n"],[[-1,33036],"A "],[[-1,33032],"*"],[[-1,33033],"t"],[[-1,33174],1],[[-1,33173],"imespan"],[[-1,33031],"*"],[[-1,33166]," "],[[-1,33029],"represents an interval of "],[[-1,33001],"logical timestamps, and "],[[-1,32947],"can be encoded"],[[-1,32899],"\n"],[[-1,32933],1],[[-1,32929],"in one of the following ways:"],[[-1,32932],2],[[-1,32977],23],[[-1,33003],1],[[-1,33165],28],[[-1,33137],"\n"],[[-1,32897],"\n- "],[[-1,32686],"A"],[[-1,32894],1],[[-1,32893],"s a 3-tuple `"],[[-1,32879],"["],[[-1,32877],"sessionId, time, length"],[[-1,32853],"]"],[[-1,32851],"`, where the `"],[[-1,32836],"sessionId"],[[-1,32826],"` and `"],[[-1,32818],"time"],[[-1,32819],"`"],[[-1,32814]," "],[[-1,32803],"represent\n  the "],[[-1,32782],"starting point of the timespan, and `length` represents the length of the timespan.\n"],[[-1,32673],"- When the `sessionId` is the same as the "],[[-1,32548],"session ID of the "],[[-1,32524],"patch, it can be omitted.\n  In this case, the timespan is encoded as a 2-tuple `[time"],[[-1,32428],"Diff"],[[-1,32439],", length]`."],[[-1,32424]," Where the first\n"],[[-1,32382],"  member `timeDiff` is the difference between the starting point of the timespan and the\n"],[[-1,32290],"  time value of the patch ID."],[[-1,32259],"\n"],[[-1,32250],"\n"],[[-1,32194],"\n"],[[-1,32182],"#### `nop` Operation Encoding\n\nThe `nop` operation is encoded as a JSON object with the following fields:\n\n- `\"op\"` --- equal to `\"nop\"`.\n- `"],[[-1,32040],"\"len\""],[[-1,32041],"`"],[[-1,32035]," --- the number of "],[[-1,32013],"logical timestamps that are skipped by this operation."],[[-1,31903]," "],[[-1,31842],"This\n"],[[-1,31808],"  field can be omitted, in which case the value is assumed to be `1`."],[[-1,31837],23],[[-1,31810],1],[[-1,31814],1],[[-1,31897],2],[[-1,31893],3],[[-1,31887],45],[[-1,31890],2],[[-1,31895],1],[[-1,31902],4],[[-1,31905],1],[[-1,31959],"\n\nFor example:\n\n```json\n{ \"op\": \"nop\", \"len\": 10 }\n```"],[[-1,32016],2],[[-1,32193],6],[[-1,32186],3],[[-1,32187],1],[[-1,32249],54],[[-1,32258],5],[[-1,32293],2],[[-1,32407],10],[[-1,32392],8],[[-1,32396],2],[[-1,32397],1],[[-1,32384],1],[[-1,32530],5],[[-1,32555],1],[[-1,32553],2],[[-1,32554],1],[[-1,32631],75],[[-1,32695],2],[[-1,32685],11],[[-1,32693],3],[[-1,32698],2],[[-1,32787],4],[[-1,32813],3],[[-1,32808],1],[[-1,32810],1],[[-1,32837],1],[[-1,32878],1],[[-1,32880],1],[[-1,33136],100],[[-1,33281],106],[[-1,33295],10],[[-1,33283],1],[[-1,33285],1],[[-1,33297],"\n"],[[-1,31738],"\n"],[[-1,33474],1],[[-1,33501],1],[[-1,33534],12],[[-1,33567],9],[[-1,33609],3],[[-1,33636],14],[[-1,33788],5],[[-1,33782],3],[[-1,33783],1],[[-1,33789],1],[[-1,33826],5],[[-1,35444],5],[[-1,35452],3],[[-1,35597],1],[[-1,35661],49],[[-1,35680],2],[[-1,35703],2],[[-1,35716],2],[[-1,35733],8],[[-1,35798],1],[[-1,35929],2],[[-1,39073],6],[[-1,39066],6],[[-1,39067],1],[[-1,39245],5],[[-1,39417],5],[[-1,39590],5],[[-1,39767],4],[[-1,39939],5],[[-1,40368],2],[[-1,40741],1],[[-1,41137],86],[[-1,40990],47],[[-1,40931],1],[[-1,40929],8],[[-1,40930],1],[[-1,40943],8],[[-1,41051],36],[[-1,41009],2],[[-1,40997],6],[[-1,41007],7],[[-1,41015],6],[[-1,41230],34],[[-1,41184],13],[[-1,41170],11],[[-1,41171],1],[[-1,41159],11],[[-1,41147],4],[[-1,41142],1],[[-1,41139],1],[[-1,41141],1],[[-1,41148],1],[[-1,41196],11],[[-1,41232],1],[[-1,41298],1],[[-1,41305],3],[[-1,41324],6],[[-1,41370],1],[[-1,41368],9],[[-1,41369],1],[[-1,41404],1],[[-1,41497],1],[[-1,41516],2],[[-1,41703],4],[[-1,41694],1],[[-1,41692],7],[[-1,41693],1],[[-1,41685],22],[[-1,41660],26],[[-1,41616],1],[[-1,41614],3],[[-1,41615],1],[[-1,41634],17],[[-1,41663],2],[[-1,41699],4],[[-1,41704],1],[[-1,45161],227],[[-1,45280],1],[[-1,45281],1],[[-1,45235],"\n"],[[-1,45271],"### The `compact` Encoding"],[[-1,31737],"\n"],[[-1,29983],"\n"],[[-1,29981],"~~~jj.aside\n"],[[-1,29965],"Patches encoded using the `compact` format can be serialized to a very compact binary form using\nbinary JSON encoders, such as CBOR or MessagePack."],[[-1,29969],"\n~~~"],[[-1,29982],"\n"],[[-1,31736],"\nThe `"],[[-1,31729],"compact"],[[-1,31721],"` encoding "],[[-1,31708],"follows the ["],[[-1,31694],"Compact JSON "],[[-1,31620],"encoding scheme"],[[-1,31631],9],[[-1,31681],6],[[-1,31674],"]("],[[-1,31671],"https://jsonjoy.com/specs/compact-json"],[[-1,31632],")"],[[-1,31605],"\n"],[[-1,31565],"which encodes entities as JSON arrays with a special first element that represents the type of the\nentity. This results in a "],[[-1,31438],"very compact representation of the patch, "],[[-1,31367],"while still being "],[[-1,31334],"JSON and "],[[-1,31349],"human-readable."],[[-1,31325],"\n\nA patch consists of a "],[[-1,31294],"header and a list of operations. The header is a JSON array with the following elements:\n\n- The first element is the ID of "],[[-1,31169],"the patch, encoded as a JSON"],[[-1,31134]," 2-tuple"],[[-1,31141]," array."],[[-1,31126],"\n"],[[-1,30999],"- The second element is an optional metadata object, which can contain any additional application specific\n  information. This field can be omitted.\n"],[[-1,30850],2],[[-1,30848],"\n"],[[-1,30843],"The rest of the e"],[[-1,30824],"lements in the "],[[-1,30805],"patch are operations, encoded "],[[-1,30724],"accord"],[[-1,30710],"ing Compact "],[[-1,30691],"JSON encoding scheme.\n\nBelow is an example of a "],[[-1,30630],"patch "],[[-1,30619],"encoded using the `"],[[-1,30599],"compact"],[[-1,30600],"`"],[[-1,30592]," format:\n\n"],[[-1,30547],"```json"],[[-1,30410],"\n["],[[-1,30407],"\n  "],[[-1,30403],"["],[[-1,30401],"\n    "],[[-1,30393],"["],[[-1,30391],"123, 456"],[[-1,30392],"]"],[[-1,30383],","],[[-1,30326]," // Patch ID"],[[-1,30382],"\n"],[[-1,30373],"    { \"author\": \"John Doe\" },"],[[-1,30314]," // "],[[-1,30294],"Optional"],[[-1,30310],6],[[-1,30304]," metadata"],[[-1,30381],5],[[-1,30375],1],[[-1,30376],1],[[-1,30396],"\n  "],[[-1,30402],"]"],[[-1,30344],",\n  ["],[[-1,30338],"1"],[[-1,30339],"]"],[[-1,30337],","],[[-1,30286]," // "],[[-1,30265],"\""],[[-1,30282],"new_obj"],[[-1,30264],"\""],[[-1,30275]," operation"],[[-1,30336],"\n"],[[-1,30256],"  [4]  // \""],[[-1,30226],"new"],[[-1,30245],3],[[-1,30242],"_str\" operation"],[[-1,30335],3],[[-1,30329],1],[[-1,30331],1],[[-1,30332],1],[[-1,30263],6],[[-1,30404],"\n"],[[-1,30408],"]"],[[-1,30540],126],[[-1,30414],"\n```"],[[-1,29818],"\n\n\n#### `new_con` Operation Encoding\n\nThe `new_con` operation is encoded as a JSON "],[[-1,29037],"array "],[[-1,29001],"with "],[[-1,29031],"the sta"],[[-1,29022],"rting element `"],[[-1,29006],"0"],[[-1,29004],"`."],[[-1,28996],"\n"],[[-1,28931],"The second element is the value of the constant; and the third element is an optional\n"],[[-1,28840],"flag that indicates that the constant is a logical timestamp."],[[-1,28845],4],[[-1,28995],35],[[-1,28956],12],[[-1,28942],10],[[-1,28944],1],[[-1,28960],3],[[-1,29007],1],[[-1,29024],1],[[-1,29735],105],[[-1,29630],"\n\n```json\n"],[[-1,28778],"[0, \"foo\"]\n```"],[[-1,28764],26],[[-1,29620],36],[[-1,29584],"\n\nA constant with `undefined` value is encoded by omitting the `\"value\"` field.\n\n```json\n"],[[-1,28735],"[0]"],[[-1,28732],4],[[-1,29495],19],[[-1,29476],"\n```\n\nA logical timestamp is encoded by setting the `\"timestamp\"` "],[[-1,28724],"flag"],[[-1,29410],5],[[-1,29405]," to `true`.\n\n```json\n"],[[-1,28704],"[0, [123, 456], true]"],[[-1,28683],4],[[-1,28720],1],[[-1,28718],4],[[-1,28713],8],[[-1,28714],1],[[-1,28719],1],[[-1,29384],59],[[-1,29325],"\n```\n\nIf timestamp session ID is equal to the session ID of the patch, then the timestamp can be encoded\nas a single number, which is the logical time sequence number difference between the timestamp and\nthe ID of the patch.\n\n```json\n"],[[-1,28675],"[0, 10, true]"],[[-1,28662],4],[[-1,29091],49],[[-1,29042],"\n```"],[[-1,28656],"\n"],[[-1,28339],"\n"],[[-1,28655],"\n#### `new_val` Operation Encoding\n\nThe `new_val` operation is encoded as a JSON "],[[-1,28335],"array with the starting element `1`."],[[-1,28337],1],[[-1,28574],49],[[-1,28525],"\n"],[[-1,28298],"The second element is the value of the constant."],[[-1,28250],24],[[-1,28524],67],[[-1,28457],"\n"],[[-1,28456],14],[[-1,28442],"\n```json"],[[-1,28223],"\n[1, "],[[-1,28207],"["],[[-1,28205],"123, 456"],[[-1,28206],"]"],[[-1,28218],5],[[-1,28213],"]\n```"],[[-1,28434],45],[[-1,28389],"\n\n"],[[-1,28142],"Or, when relative timestamp is used:\n\n```json\n[1, 10]\n```"],[[-1,28084],"\n\n\n#### `new_obj` Operation Encoding\n\n"],[[-1,27901],"The `new_obj` operation is encoded as a JSON array with a single element `2`.\n\n```json\n[2]\n```"],[[-1,27806],"\n"],[[-1,27763],"\n"],[[-1,27805],1],[[-1,27804],"\n#### `new_"],[[-1,27767],"vec"],[[-1,27793],3],[[-1,27790],"` Operation Encoding"],[[-1,27762],"\n\nThe `new_vec` operation is encoded as a JSON array with a single element `3`.\n\n```json\n[3]\n```\n\n\n#### `new_str` Operation Encoding\n\nThe `new_str` operation is encoded as a JSON array with a single element `4`.\n\n```json\n[4]\n```\n"],[[-1,27499],"\n"],[[-1,27533],"\n#### `new_bin` Operation Encoding"],[[-1,27498],"\n\nThe `new_bin` operation is encoded as a JSON array with a single element `5`.\n\n```json\n[5]\n```\n\n\n#### `new_arr` Operation Encoding\n\nThe `new_arr` operation is encoded as a JSON array with a single element `6`.\n\n```json\n[6]\n```\n\n\n#### `"],[[-1,27237],"ins_val"],[[-1,27261],3],[[-1,27258],"` Operation Encoding"],[[-1,27230],"\n\nThe `ins_val` operation is encoded as a JSON array with the starting element `"],[[-1,27146],"9"],[[-1,27150],1],[[-1,27149],"`"],[[-1,27016],",\nfollowed by "],[[-1,26998],"the ID of the object in which the value is inserted, and the "],[[-1,26931],"ID\nof the new value."],[[-1,26937],5],[[-1,27002],3],[[-1,27148],1],[[-1,28046],45],[[-1,27915],13],[[-1,28001],83],[[-1,28179],36],[[-1,28387],2],[[-1,28385],"\n"],[[-1,27145],"\nFor example:\n\n```json\n"],[[-1,27057],"[9, [123, 0], [123, 1]"],[[-1,27035],10],[[-1,27025],"]"],[[-1,27024],4],[[-1,27061],1],[[-1,27059],1],[[-1,27060],1],[[-1,27122],55],[[-1,27067],"\n```"],[[-1,26911],"\n\n\n#### `ins_obj` Operation Encoding\n\nThe `ins_obj` operation is encoded as a JSON "],[[-1,26226],"array with the starting element `10`,\nfollowed by the ID of the object in which the object is inserted, "],[[-1,26109],"and an array\n"],[[-1,26094],"of 2-tuples, where each 2-tuple is a field name"],[[-1,26017]," string"],[[-1,26047]," and an ID of the "],[[-1,26010],"new "],[[-1,26029],"field value."],[[-1,26096],1],[[-1,26122],10],[[-1,26232],5],[[-1,26828],260],[[-1,26568],"\n\nAn example where all timestamps are encoded as 2-tuples:\n\n```json"],[[-1,26004],"\n[10, [123, 0], ["],[[-1,25945],"\n  "],[[-1,25987],"[\"foo\", [123, 1]],"],[[-1,25941],"\n  "],[[-1,25969],1],[[-1,25968],"[\"bar\", [123, 2]]"],[[-1,25938],"\n"],[[-1,25937],2],[[-1,25951],"]]\n```"],[[-1,26501],"\n"],[[-1,26500],108],[[-1,26392],"\nSame example, but with timestamps encoded as time differences:\n\n```json"],[[-1,25933],"\n[10, "],[[-1,25871],"1"],[[-1,25927],8],[[-1,25919],", [\n  [\"foo\", "],[[-1,25865],"2"],[[-1,25905],8],[[-1,25897],"],\n  [\"bar\", "],[[-1,25863],"3"],[[-1,25884],8],[[-1,25876],"]\n]]"],[[-1,26320],83],[[-1,26237],"\n```"],[[-1,25861],"\n\n\n#### `ins_vec` Operation Encoding\n\n"],[[-1,25163],"The `ins_vec` operation is encoded as a JSON array with the starting element `11`,\nfollowed by the ID of the object in which the vector is inserted, and an array\nof 2-tuples, where each 2-tuple is a position index and an ID of the new field value."],[[-1,25823],44],[[-1,25165],1],[[-1,25779],34],[[-1,25745],"\n"],[[-1,25744],231],[[-1,25513],"\nAn example where all timestamps are encoded as 2-tuples:\n\n```json"],[[-1,24915],"\n[11, [123, 0], [\n  [0, [123, 1]],\n  [1, [123, 2]]\n  [3, [123, 3]]\n]]\n```"],[[-1,25447],118],[[-1,25329],"\n\nSame example, but with timestamps encoded as time differences:\n\n```json"],[[-1,24841],"\n[11, 1, [\n  [0, 2],\n  [1, 3]\n  [3, 4]\n]]\n```"],[[-1,24795],"\n\n\n#### `ins_str` Operation Encoding\n\nThe `ins_str` operation is encoded as a JSON "],[[-1,24205],"array with the starting element `12`,\nfollowed by the ID of the object in which the string is inserted, the ID of the\ncharacter after which the new sub-string is inserted, and the new sub-string."],[[-1,24211],5],[[-1,24712],401],[[-1,24311],"\n\nFor example:\n\n```json"],[[-1,24007],"\n[12, [123, 0], [123, 1], \"foo\"]"],[[-1,23975],4],[[-1,24288],72],[[-1,24216],"\n```"],[[-1,23970],"\n\n\n#### `ins_bin` Operation Encoding\n\nThe `ins_bin` operation is encoded as a JSON "],[[-1,23191],"array with the starting element `13`,\nfollowed by the ID of the object in which the binary object is inserted, the ID of the\nbyte after which the new octets are inserted, and an array of octets to insert into\nthe binary object, encoded as Base64 string."],[[-1,23197],5],[[-1,23887],431],[[-1,23456],"\n\nFor example:\n\n```json"],[[-1,22936],"\n[13, [123, 0], [123, 1], \"Zm9v\"]"],[[-1,22903],4],[[-1,23433],73],[[-1,23360],"\n```\n\nThe following alphabet is used for Base64 encoding:\n\n```\nABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\n```\n\nThe padding character is `=`."],[[-1,22898],"\n\n\n#### `ins_arr` Operation Encoding\n\nThe `ins_arr` operation is encoded as a JSON "],[[-1,22267],"array with the starting element `14`,\nfollowed by the ID of the object in which the array is inserted, the ID of the\nelement after which the new elements are inserted, and an array of IDs to be inserted\ninto the array."],[[-1,22273],5],[[-1,22815],411],[[-1,22404],"\n\nFor example:\n\n```json"],[[-1,22047],"\n[14, [123, 0], [123, 1], ["],[[-1,21996],"\n  "],[[-1,22020],"[123, 2],"],[[-1,21992],"\n  "],[[-1,22011],1],[[-1,22010],"[123, 3]"],[[-1,21989],"\n"],[[-1,21988],2],[[-1,22002],"]]\n```"],[[-1,21984],"\n\n\n#### `del` Operation Encoding\n\nThe `del` operation is encoded as a JSON "],[[-1,20995],"array with the starting element `1"],[[-1,20957],"6"],[[-1,20961],1],[[-1,20960],"`,"],[[-1,20956],"\nfollowed by the ID of the object in which content is deleted, and an array of\ntimespans which specifies RGA ranges to be deleted."],[[-1,21001],5],[[-1,21909],209],[[-1,21700],"\n\nFor example:\n\n```json"],[[-1,20823],"\n[16, [123, 0], [\n  [123, 1, 3],\n  [123, 10, 1]\n]]\n```"],[[-1,21677],92],[[-1,21585],"\n\nA *timespan* represents an interval of logical timestamps, and can be encoded\nin one of the following ways:\n\n- As a 3-tuple `[sessionId, time, length]`, where the `sessionId` and `time` represent\n  the starting point of the timespan, and `length` represents the length of the timespan.\n- When the `sessionId` is the same as the session ID of the patch, it can be omitted.\n  In this case, the timespan is encoded as a 2-tuple `[timeDiff, length]`. Where the first\n  member `timeDiff` is the difference between the starting point of the timespan and the\n  time value of the patch ID."],[[-1,20761],"\n\n\n#### `nop` Operation Encoding\n\nThe `nop` operation is encoded as a JSON "],[[-1,20402],"array with the starting element `17`,\n"],[[-1,20312],"followed by an optional length integer. If the length is omitted, it is assumed\nto be `1`."],[[-1,20364],38],[[-1,20322],9],[[-1,20326],2],[[-1,20408],5],[[-1,20686],33],[[-1,20653],"\n"],[[-1,20652],190],[[-1,20462],"\nFor example:\n\n```json"],[[-1,20221],"\n[17, 10]"],[[-1,20212],22],[[-1,20440],27],[[-1,20413],"\n```"],[[-1,22381],107],[[-1,25256],90],[[-1,27063],1],[[-1,28384],9],[[-1,28195],15],[[-1,28375],36],[[-1,30223],1],[[-1,30220],9],[[-1,30207],35],[[-1,30114],47],[[-1,30065],20],[[-1,30039],9],[[-1,30014],28],[[-1,30030],8],[[-1,30045],1],[[-1,30042],1],[[-1,30044],1],[[-1,30067],1],[[-1,30172],47],[[-1,30211],3],[[-1,30222],1],[[-1,30582],1],[[-1,30579],2],[[-1,30574],6],[[-1,30577],3],[[-1,30581],1],[[-1,30624],4],[[-1,30643],8],[[-1,30696],4],[[-1,30698],1],[[-1,30718],4],[[-1,30775],43],[[-1,30809],3],[[-1,30826],1],[[-1,30847],2],[[-1,31125],3],[[-1,31118],14],[[-1,31098],19],[[-1,31070],15],[[-1,31053],2],[[-1,31049],24],[[-1,31021],21],[[-1,31025],2],[[-1,31051],1],[[-1,31055],1],[[-1,31079],8],[[-1,31104],3],[[-1,31122],2],[[-1,31171],1],[[-1,31301],6],[[-1,31373],5],[[-1,31396],19],[[-1,31440],1],[[-1,31604],38],[[-1,31672],1],[[-1,31695],1],[[-1,31710],1],[[-1,31730],1],[[-1,45237],1],[[-1,45236],"\n"],[[-1,20187],"\n"],[[-1,45245],"\n"],[[-1,85093],"### "],[[-1,45311],"The "],[[-1,45556],"`"],[[-1,45243],"binary"],[[-1,45278],7],[[-1,45554],7],[[-1,45555],"`"],[[-1,83156],2],[[-1,83150],4],[[-1,83154],2],[[-1,83158],1],[[-1,85089],4],[[-1,85085]," Encoding"],[[-1,45547],"\n"],[[-1,20186],"\nThe `"],[[-1,20179],"binary"],[[-1,20180],"`"],[[-1,20173]," JSON CRDT Patch encoding"],[[-1,19988]," is not human"],[[-1,19973],"-readable, but"],[[-1,19975],1],[[-1,20148]," is the most space"],[[-1,19958],"\n"],[[-1,20130],1],[[-1,20129],"efficient and "],[[-1,20111],"performant"],[[-1,19955]," patch encoding"],[[-1,20101],9],[[-1,20092],"."],[[-1,19939],"\n\nNumeric values "],[[-1,19873],"follow"],[[-1,19922],17],[[-1,19905]," big-"],[[-1,19893],"endian encoding."],[[-1,19867],2],[[-1,19823],1],[[-1,19812],46],[[-1,19763],14],[[-1,19719],8],[[-1,19707],39],[[-1,16442],"\n"],[[-1,16130],"\n"],[[-1,16441],"\n"],[[-1,15988],"##"],[[-1,16440],"## Message encoding\n\nNotation in diagrams:\n\n```\nOne byte:\n+--------+\n|        |\n+--------+\n\nZero or more repeating bytes:\n+........+\n|        |\n+........+"],[[-1,327],"\n\nZero or one byte which ends a repeating byte sequence:\n+········+\n|        |\n+········+"],[[-1,16286],89],[[-1,16197],"\n\nVariable number of bytes:\n+========+\n|        |\n+========+\n```"],[[-1,16129],"\n"],[[-1,15989],"\n"],[[-1,16128],"\n#### P"],[[-1,16119],"atch "],[[-1,16108],"Structure\n\nThe patch consists of the following elements:\n\n- The patch ID.\n- The patch metadata.\n- The patch operations."],[[-1,16114],3],[[-1,16121],1],[[-1,19668],"\n"],[[-1,19640],"\n"],[[-1,19667],"\n#"],[[-1,15938],"#"],[[-1,15940],1],[[-1,19665],"### P"],[[-1,19656],"atch ID "],[[-1,15941],"E"],[[-1,19648],1],[[-1,19647],"ncoding"],[[-1,19639],"\n\nThe patch ID is encoded d"],[[-1,19606],"ifferently depending on whether the "],[[-1,19568],"patch is using "],[[-1,19545],"logica"],[[-1,19537],"l clock\nor server clock.\n\n"],[[-1,19504],"##"],[[-1,15937],"#"],[[-1,19502],"### Logical Clock\n\nWhen logical clock "],[[-1,19460],"is used, the patch ID is encoded as follows:\n\n- "],[[-1,19393],"First, session ID is encoded as "],[[-1,19354],"`"],[[-1,19352],"b1vu56"],[[-1,19353],"`"],[[-1,19346],", with flag set to `"],[[-1,19325],"0"],[[-1,19323],"`"],[[-1,19320],".\n"],[[-1,19225],"- Then, the timestamp is encoded as a `vu57` integer.\n\n`"],[[-1,19167],"``"],[[-1,19162],"\n"],[[-1,18989]," "],[[-1,18986],1],[[-1,19160],"b1vu56"],[[-1,19041],"("],[[-1,19037],"0, sessionId"],[[-1,19039],1],[[-1,19040],")"],[[-1,19024],"\n"],[[-1,18990]," "],[[-1,18987],1],[[-1,18997],"|"],[[-1,19023],"  "],[[-1,19021],1],[[-1,19020],"      "],[[-1,19154],1],[[-1,19153],"vu57"],[[-1,19014],"("],[[-1,19012],"time"],[[-1,19013],")"],[[-1,18995],"\n"],[[-1,18991]," "],[[-1,18988],1],[[-1,18994],"|"],[[-1,19008],1],[[-1,19007],"  "],[[-1,19005],1],[[-1,19004],"      |"],[[-1,19145],"\n"],[[-1,19144],5],[[-1,19139],"+"],[[-1,18977],"========"],[[-1,18968],"+========+"],[[-1,19138],1],[[-1,18982],1],[[-1,18984],1],[[-1,19137],8],[[-1,19077],10],[[-1,19129],"\n"],[[-1,19128],5],[[-1,19123],"|"],[[-1,19078]," "],[[-1,19085],"b1vu56 "],[[-1,19122],8],[[-1,19114],"|"],[[-1,19055],"  "],[[-1,19048],"vu57  |"],[[-1,19053],4],[[-1,19113],"\n"],[[-1,18957],"+========+========+"],[[-1,19112],15],[[-1,19067],10],[[-1,19149],"\n```"],[[-1,18938],"\n"],[[-1,18607],"\n\n"],[[-1,18937],"###"],[[-1,15936],"#"],[[-1,18934],"## "],[[-1,18604],"Server "],[[-1,18931],8],[[-1,18923],"Clock\n\nWhen "],[[-1,18596],"sever "],[[-1,18911],8],[[-1,18903],"clock is used, the patch ID is encoded as "],[[-1,18588],"`"],[[-1,18586],"b1vu56"],[[-1,18579],"` with "],[[-1,18568],"the flag set to `1`"],[[-1,18547],"."],[[-1,18549],1],[[-1,18572],3],[[-1,18587],1],[[-1,18861],129],[[-1,18732],"\n\n```\n b1vu56("],[[-1,18539],"1"],[[-1,18718],1],[[-1,18717],", "],[[-1,18544],"time"],[[-1,18715],9],[[-1,18706],")"],[[-1,18705],21],[[-1,18684],"\n |"],[[-1,18681],9],[[-1,18672],"\n+========+"],[[-1,18661],9],[[-1,18652],"\n| b1vu56 |"],[[-1,18641],9],[[-1,18632],"\n+========+"],[[-1,18621],9],[[-1,18612],"\n```"],[[-1,15749],"\n"],[[-1,15719],"\n"],[[-1,15748],"\n##### Operation "],[[-1,15727],"Encoding"],[[-1,15718],"\n\n"],[[-1,15705],"Operations are encoded as follows:\n\n- First"],[[-1,15539],","],[[-1,15662]," the total numb"],[[-1,15645],"er "],[[-1,15639],"of operations is encoded as a `vu57` integer.\n- Then, each ope"],[[-1,15575],"ration is encoded one after another."],[[-1,14786],"\n\n"],[[-1,14688],"Each operation start with *operation"],[[-1,14652],1],[[-1,14651]," header"],[[-1,14608],"*"],[[-1,14644],", which is one ore more bytes. The "],[[-1,14607],"operation\nheader encodes the op"],[[-1,14564],"eration op"],[[-1,14548],"code, and the "],[[-1,14527],"length of the operation payload. "],[[-1,14279],"When "],[[-1,14272],"an"],[[-1,14261],"\noperation payload does not require a length field, its "],[[-1,14172],"bits"],[[-1,14205],6],[[-1,14199]," are simply set "],[[-1,14180],"to `0`."],[[-1,14183],2],[[-1,14270],7],[[-1,14274],1],[[-1,14494],11],[[-1,14469],63],[[-1,14353],"\n"],[[-1,14168],"\n"],[[-1,14033],"When the length is less than or equal to 7, the header is encoded as a single byte. "],[[-1,13943],"The\nfirst 3 bits of the byte encode the length, "],[[-1,13891],"and the remaining 5 bits encode the opcode."],[[-1,13848],87],[[-1,13895],3],[[-1,13949],3],[[-1,14166],1],[[-1,14153],25],[[-1,14126],6],[[-1,14117],16],[[-1,14052],18],[[-1,14101],40],[[-1,14120],2],[[-1,14128],1],[[-1,14165],6],[[-1,14167],"\n"],[[-1,14352],"\n`"],[[-1,14348],"``"],[[-1,14343],"\n"],[[-1,14341],"+"],[[-1,14322],"--------+\n"],[[-1,14299],"|"],[[-1,14289],"lllooooo"],[[-1,14298],8],[[-1,14290],"|"],[[-1,14301],1],[[-1,14312],"\n+--------+"],[[-1,14340],9],[[-1,14342],"\n"],[[-1,14346],"```"],[[-1,13758],"\n\n"],[[-1,13750],"Where `l` is the length, and `o` is the opcode.\n\nWhen the length is greater than 7, the header is encoded as "],[[-1,13614],"two or more bytes"],[[-1,13641],9],[[-1,13632],". The first byte"],[[-1,13522],"\nonly encodes the opcode and all "],[[-1,13485],"length bits `"],[[-1,13471],"l"],[[-1,13469],"` are set to `"],[[-1,13454],"0"],[[-1,13452],"`. The following bytes encode\nthe length as a `vu57` integer."],[[-1,13391],5],[[-1,13455],1],[[-1,13472],1],[[-1,13489],2],[[-1,13597],"\n\n```"],[[-1,13374],21],[[-1,13353],"\n "],[[-1,13319],"         "],[[-1,13351],9],[[-1,13342],"vu57("],[[-1,13305],"length"],[[-1,13337],4],[[-1,13333],")\n "],[[-1,13307]," "],[[-1,13330],1],[[-1,13329],"        |"],[[-1,13592],"\n+--------+"],[[-1,13549],"========+"],[[-1,13581],"\n|"],[[-1,13552],"000"],[[-1,13579],3],[[-1,13576],"ooooo|"],[[-1,13540]," "],[[-1,13380],"length"],[[-1,13383],2],[[-1,13539],6],[[-1,13533]," |"],[[-1,13570],"\n+--------+"],[[-1,13531],"========+"],[[-1,13559],"\n```"],[[-1,13756],5],[[-1,14350],1],[[-1,14406],51],[[-1,14483],13],[[-1,14534],6],[[-1,14554],3],[[-1,14576],6],[[-1,14784],47],[[-1,14735],37],[[-1,14737],1],[[-1,15538],"\n\n\n###### `"],[[-1,15526],"new_con"],[[-1,15527],"`"],[[-1,15519]," Operation Encoding"],[[-1,12285],"\n\n"],[[-1,12257],"There are two case for the `new_con` operation:\n\n- "],[[-1,12115],"When the operation "],[[-1,12087],"payload is a JSON value or `undefined`."],[[-1,12096],7],[[-1,12206],49],[[-1,12157],"\n"],[[-1,12046],"- When the operation payload is a logical timestamp.\n\n"],[[-1,11884],"####### When the payload is a JSON value or `undefined`"],[[-1,11829],2],[[-1,11898],13],[[-1,11900],1],[[-1,11986],85],[[-1,11992],5],[[-1,12156],40],[[-1,12283],19],[[-1,12262],4],[[-1,12264],1],[[-1,15500],"\n\n"],[[-1,13293],"The `new_con` operation "],[[-1,13224],"opcode is encod"],[[-1,13207],"ed as `"],[[-1,13199],"00000"],[[-1,13200],"`"],[[-1,13194]," and "],[[-1,13182],"the length bits are set to"],[[-1,11824]," `"],[[-1,11821],"000"],[[-1,11817],"`.\n"],[[-1,11794],"It is followed by JSON value or `undefined` encoded as CBOR."],[[-1,11734],5],[[-1,11814],12],[[-1,11798],3],[[-1,11802],2],[[-1,11822],1],[[-1,13156],3],[[-1,13023],61],[[-1,13153],26],[[-1,13049],25],[[-1,13127],30],[[-1,13051],1],[[-1,13097],45],[[-1,12962],2],[[-1,12928],60],[[-1,12858],36],[[-1,12820],14],[[-1,12804],6],[[-1,12797],2],[[-1,12794],2],[[-1,12443],"\n"],[[-1,12369],"\n```\n+--------+========+\n|00"],[[-1,12296],"0"],[[-1,12298],1],[[-1,12341],1],[[-1,12340],"00000|  "],[[-1,12291],"CBO"],[[-1,12286],"R"],[[-1,12288],1],[[-1,12332],4],[[-1,12328],"  |\n+--------+========+\n```"],[[-1,11727],"\n\n"],[[-1,11716],"####### When the payload is a logical timestamp\n\nThe `new_con` operation opcode is encoded as `00000` and the length bits are set to `001`.\nIt is followed by the timestamp encoded as `"],[[-1,11518],"id"],[[-1,11532],6],[[-1,11526],"`."],[[-1,11524],5],[[-1,11725],8],[[-1,12300],1],[[-1,12301],"\n"],[[-1,12442],"\n```\n+--------+========+\n|00"],[[-1,12370],"1"],[[-1,12414],1],[[-1,12413],"0000"],[[-1,12372],"0"],[[-1,12409],1],[[-1,12408],"|   id   |\n+--------+========+\n```"],[[-1,12792],"\n"],[[-1,11514],"\n\n###### `new_val` Operation Encoding\n\nThe `new_val` operation opcode is encoded as `00001` and the length bits are set to `000`.\nThe header byte is followed by the value encoded as `id`.\n\n```\n+--------+========+\n|00000001|   id   |\n+--------+========+\n```\n"],[[-1,11105],"\n\n###### `new_obj` Operation Encoding\n\nThe `new_obj` operation is encoded as a single byte, where the opcode bits are set to `00010`\nand the length bits are set to `000`.\n\n```\n+--------+\n|00000010|\n+--------+\n```\n"],[[-1,10876],"\n\n###### `new_vec` Operation Encoding\n\nThe `new_vec` operation is encoded as a single byte, where the opcode bits are set to `00011`\nand the length bits are set to `000`.\n\n```\n+--------+\n|00000011|\n+--------+\n```\n"],[[-1,10631],"\n\n###### `new_str` Operation Encoding\n\nThe `new_str` operation is encoded as a single byte, where the opcode bits are set to `00100`\nand the length bits are set to `000`.\n\n```\n+--------+\n|00000100|\n+--------+\n```\n"],[[-1,10398],"\n\n###### `new_bin` Operation Encoding\n\nThe `new_bin` operation is encoded as a single byte, where the opcode bits are set to `00101`\nand the length bits are set to `000`.\n\n```\n+--------+\n|00000101|\n+--------+\n```\n"],[[-1,12791],"\n\n"],[[-1,12772],"###### `"],[[-1,10662],"new_"],[[-1,10182],"arr"],[[-1,10415],3],[[-1,10652],3],[[-1,10658],3],[[-1,12764],4],[[-1,10889],3],[[-1,11254],3],[[-1,12760],3],[[-1,12757],"` Operation Encoding\n\nThe `"],[[-1,12729],"new_"],[[-1,10176],"arr"],[[-1,10409],3],[[-1,10646],3],[[-1,10883],3],[[-1,11248],3],[[-1,12725],3],[[-1,12721],"` "],[[-1,12709],"operation"],[[-1,11176]," is encoded as a single byte, where the"],[[-1,12700]," "],[[-1,11243],"opcode "],[[-1,11135],"bits are set to"],[[-1,11236],13],[[-1,11223]," `00"],[[-1,10403],"1"],[[-1,10171],"10"],[[-1,10402],2],[[-1,10642],1],[[-1,10639],2],[[-1,11219],2],[[-1,10879],1],[[-1,11217],1],[[-1,11216],"`"],[[-1,11136],"\n"],[[-1,11215],1],[[-1,11214],"and the length bits are set to `000`."],[[-1,12699],59],[[-1,12638],2],[[-1,12635],3],[[-1,12629],3],[[-1,12606],35],[[-1,12544],9],[[-1,12533],9],[[-1,12523],2],[[-1,12520],2],[[-1,12518],"\n\n```\n+--------+"],[[-1,12502],9],[[-1,12493],"\n|"],[[-1,12446],"000"],[[-1,12491],"00"],[[-1,10634],"1"],[[-1,10633],1],[[-1,10399],"1"],[[-1,10168],"0"],[[-1,10632],1],[[-1,12489],1],[[-1,11107],1],[[-1,10877],1],[[-1,11106],1],[[-1,12488],5],[[-1,12483],"|"],[[-1,12482],9],[[-1,12473],"\n+--------+"],[[-1,12462],9],[[-1,12453],"\n```"],[[-1,10167],"\n\n\n"],[[-1,10147],"###### `ins_val` Operation Encoding\n\nThe `"],[[-1,10019],"in"],[[-1,10013],"s_val"],[[-1,10017],2],[[-1,10105],7],[[-1,10098],"` operation opcode is encoded as `00"],[[-1,9634],"1"],[[-1,10062],1],[[-1,10061],"01` and the length bits are set to `00"],[[-1,9632],"0"],[[-1,9638],1],[[-1,10023],1],[[-1,10022],"`."],[[-1,10008],"\nThe "],[[-1,9996],"header byte is followed by "],[[-1,9924],"two `id` values"],[[-1,9897],", which encode the "],[[-1,9854],"object "],[[-1,9842],"being inserted into\n"],[[-1,9778],"and the value being inserted, respectively.\n\n```\n+--------+========+========+\n|0000"],[[-1,9636],"1"],[[-1,9695],1],[[-1,9694],"001|   id   |   id   |\n+--------+========+========+\n```"],[[-1,9551],"\n"],[[-1,9510],"\n"],[[-1,9550],"\n###### `"],[[-1,9540],"ins_obj"],[[-1,9532],"` Operation Encoding\n\n"],[[-1,9496],"The `ins_obj` operation opcode is encoded as `0"],[[-1,9405],"1"],[[-1,9449],2],[[-1,9447],"01"],[[-1,9403],"0"],[[-1,9445],"` and the length"],[[-1,9401]," encodes the number\n"],[[-1,9378],"of key-value pairs being inserted. It is followed by the object ID, and the key-value pairs.\n\n"],[[-1,9275],"The key-value pairs are encoded as a sequence of "],[[-1,9140],"key-value pairs, where each key is encoded\nas a CBOR "],[[-1,9080],"string, and each value is encoded as an `id`."],[[-1,8777],"\n\nWhen "],[[-1,8768],"length is less than or equal to 7, the "],[[-1,8671],"length "],[[-1,8661],"is encoded"],[[-1,8600]," in the first "],[[-1,8582],"3 bits of the\nheader byte. The remaining 5 bits are set to `01010`"],[[-1,8507],":"],[[-1,8516],6],[[-1,8584],1],[[-1,8586],1],[[-1,8651],1],[[-1,8603],1],[[-1,8650],27],[[-1,8664],2],[[-1,8729],47],[[-1,8770],1],[[-1,9035],"\n\n```\n+--------+========"],[[-1,8227],"="],[[-1,9011],9],[[-1,9002],"+"],[[-1,8832],1],[[-1,8831],"....."],[[-1,8821],"........."],[[-1,8826],"...+"],[[-1,9001],27],[[-1,8974],"\n|"],[[-1,8780],"lll"],[[-1,8972],3],[[-1,8788],"01010"],[[-1,8969],5],[[-1,8964],"|   "],[[-1,8856],"obj"],[[-1,8960],3],[[-1,8957]," "],[[-1,8225]," "],[[-1,8956]," | "],[[-1,8953],9],[[-1,8848],"key-value pairs"],[[-1,8944],6],[[-1,8938]," |"],[[-1,8936],18],[[-1,8918],"\n+--------+======="],[[-1,8226],"="],[[-1,8900],"="],[[-1,8899],9],[[-1,8808],"+.................+"],[[-1,8890],28],[[-1,8862],"\n```"],[[-1,8479],"\n\nWhen length is greate"],[[-1,8450],"r than "],[[-1,8441],"7, the length is encoded as a `vu57` integer:\n\n```\n          vu57(length)\n"],[[-1,6623],"          |        "],[[-1,6568],"obj"],[[-1,6604],3],[[-1,6601]," object ID\n          |        |"],[[-1,8367],11],[[-1,8356],"\n"],[[-1,8344],"+--------+"],[[-1,8165],"======"],[[-1,8159],1],[[-1,8158],"==+=========+"],[[-1,8223],10],[[-1,8213],".................+"],[[-1,8334],27],[[-1,8307],"\n|00001010|"],[[-1,8135],"  vu57 "],[[-1,8128],1],[[-1,8126]," "],[[-1,8127],"|"],[[-1,8296],"   obj "],[[-1,8125]," "],[[-1,8289]," | key-value pairs |\n+--------+"],[[-1,8194],"======"],[[-1,8188],1],[[-1,8187],"==+"],[[-1,8145],"=========+"],[[-1,8184],".................+"],[[-1,8258],27],[[-1,8231],"\n```"],[[-1,8121],"\n\n"],[[-1,8115],"Consider an example when "],[[-1,8086],"two key-value pairs are inserted into an object"],[[-1,8003],":\n\n```\n+--------+"],[[-1,7986],9],[[-1,7977],"=========+"],[[-1,7813],"========+========+========+========+"],[[-1,7967],19],[[-1,7948],"\n|0"],[[-1,7849],"1"],[[-1,7945],1],[[-1,7944],"001010|"],[[-1,7937],9],[[-1,7928],"   obj   |"],[[-1,7758],"  CBOR  |   id   |  CBOR  |   id   |"],[[-1,7918],2],[[-1,7824],4],[[-1,7916],6],[[-1,7820],1],[[-1,7910],6],[[-1,7818],1],[[-1,7904],5],[[-1,7899],"\n+--------+"],[[-1,7888],9],[[-1,7879],"=========+========+======"],[[-1,7854],1],[[-1,7853],"==+"],[[-1,7777],"========+========+"],[[-1,7722],"\n`"],[[-1,7718],"``"],[[-1,7712],"\n\n\n###### `ins_vec` Operation Encoding\n\nThe `ins_vec` operation opcode is encoded as `01011` and the length encodes the number\nof elements "],[[-1,7571],"key-value pairs being inserted. It is followed by the vector ID, and the element"],[[-1,7487],"\n"],[[-1,7484],"key-value pairs.\n\nThe element key-value pairs are encoded as a sequence of key-value pairs, where each key is\n"],[[-1,7318],"encoded as an unsigned 8-bit integer, and each value is encoded as an `id`.\n\nWhen length is less than or equal to 7, the length is encoded in the first 3 bits of the\nheader byte. The remaining 5 bits are set to `01011`:\n\n```\n+--------+=========+.................+\n|lll01011|   "],[[-1,6697],"obj"],[[-1,7041],3],[[-1,7038],"   | element pairs   |\n+--------+=========+.................+\n```\n\nWhen length is greater than 7, the length is encoded as a `vu57` integer:\n\n```\n          vu57(length)\n          |"],[[-1,6688],"        "],[[-1,6678],3],[[-1,6675],"vec"],[[-1,6672],1],[[-1,6671]," object ID"],[[-1,6659],"\n"],[[-1,6646],"          |        |"],[[-1,6658],11],[[-1,6680],1],[[-1,6858],"\n"],[[-1,6846],"+--------+========+=========+.................+\n|00001011|  vu57  |   "],[[-1,6693],"o"],[[-1,6690],"bj"],[[-1,6692],1],[[-1,6776],3],[[-1,6773],"   | element pairs   |\n+--------+========+=========+.................+\n```"],[[-1,6307],"\n\n\n"],[[-1,6297],"###### `ins_str` Operation Encoding\n\nThe `ins_str` operation"],[[-1,5616]," header"],[[-1,6237]," opcode is encoded as `01100` and the length encodes the number\n"],[[-1,6089],"bytes the "],[[-1,6075],"sub-string consumes in U"],[[-1,6049],"TF-8 encoding"],[[-1,6051],1],[[-1,6079],2],[[-1,6173],28],[[-1,6145],"."],[[-1,5618],"\n\n"],[[-1,5609],"The header is followed by "],[[-1,6144],19],[[-1,6125],"the string ID, "],[[-1,5581],"and the ID of character "],[[-1,5549],"after which the sub-string\nis inserted."],[[-1,5339],"\n\n"],[[-1,5290],"Finally, the last component of the operation is the sub-string itself, encoded as a sequence\nof UTF-8 encoded bytes."],[[-1,5174],90],[[-1,5337],9],[[-1,5327],36],[[-1,5510],1],[[-1,5356],13],[[-1,5509],153],[[-1,5557],3],[[-1,5552],2],[[-1,5554],1],[[-1,6110],19],[[-1,6035],66],[[-1,5969],"\n\nWhen length is less than or equal to 7, the length is encoded in the first 3 bits of the\nheader byte. The remaining 5 bits are set to `01100`:\n\n```\n+--------+=========+"],[[-1,5673],"======="],[[-1,5630],"="],[[-1,5666],"=+========+"],[[-1,5731],10],[[-1,5799],18],[[-1,5781],"\n|lll01100|   obj   | "],[[-1,5633]," "],[[-1,5624],"after"],[[-1,5739],1],[[-1,5636],3],[[-1,5738],1],[[-1,5735],3],[[-1,5737],1],[[-1,5759],15],[[-1,5632]," "],[[-1,5744],1],[[-1,5743]," |"],[[-1,5646],"  UTF8  |"],[[-1,5716],"\n+--------+=========+======="],[[-1,5631],"="],[[-1,5688],"=+"],[[-1,5655],"========+"],[[-1,5686],"\n`"],[[-1,5682],"``"],[[-1,5081],"\n\nWhen length is greater than 7, the length is encoded as a `vu57` integer:\n\n```\n          vu57(length)\n          |        str object ID\n          |        |"],[[-1,4720],"         "],[[-1,4708],"character "],[[-1,4660],"ID "],[[-1,4698],"after which"],[[-1,4656]," "],[[-1,4653],"to insert"],[[-1,4655],1],[[-1,4687],27],[[-1,4711],2],[[-1,4762],"\n"],[[-1,4750],"          |        |         |"],[[-1,4761],10],[[-1,4924],"\n"],[[-1,4912],"+--------+========+=========+=========+========+\n|00001100|  vu57  |   obj   |  after  |  UTF8  |\n+--------+========+=========+=========+========+\n```"],[[-1,4923],10],[[-1,5676],"\n"],[[-1,4644],"\n\n"],[[-1,4635],"###### `ins_bin` Operation Encoding"],[[-1,4642],6],[[-1,5675],"\n"],[[-1,5680],3],[[-1,5684],1],[[-1,6091],"\n"],[[-1,4595],"The `ins_bin` operation header opcode is encoded as `01101` and the length encodes the number"],[[-1,4600],4],[[-1,6090],"\n"],[[-1,4496],"bytes being inserted.\n\n"],[[-1,4370],"The header is followed by the ID of the `bin` object being inserted into, and the ID of the\n"],[[-1,4278],16],[[-1,4262],"byte after which"],[[-1,4225]," binary data is inserted.\n\nFinally, the last component of the operation is the binary data itself, encoded as a sequence\nof bytes.\n\nWhen length is less than or equal to 7, the length is encoded in the first 3 bits of the\nheader byte. The remaining 5 bits are set to `01101`:\n\n```\n+--------+=========+=========+========+\n|lll01101|   obj   |  after  |  data  |\n+--------+=========+=========+========+\n```\n\nWhen length is greater than 7, the length is encoded as a `vu57` integer:\n\n```\n          vu57(length)\n          |        bin object ID\n          |        |         byte ID after which to insert\n          |        |         |\n"],[[-1,3584],"+--------+========+=========+=========+========+\n|00001101|  vu57  |   obj   |  after  |  data  |\n+--------+========+=========+=========+========+\n```"],[[-1,3431],"\n\n\n"],[[-1,3413],"###### `ins_arr` Operation Encoding\n\nThe `ins_arr` operation header opcode is encoded as `01110` and the length encodes the number\nof elements being inserted.\n\nThe header is followed by the ID of the `arr` object being inserted into, and the ID of the\nelement after which elements are inserted.\n\nFinally, the last component of the operation is the elements themselves, encoded as a sequence\nof `id`s.\n\nWhen length is less than or equal to 7, the length is encoded in the first 3 bits of the\nheader byte. The remaining 5 bits are set to `01110`:\n\n```\n+--------+=========+=========+"],[[-1,2344],"="],[[-1,2833],"========+\n|lll01110|   obj   |  after  | "],[[-1,2343]," "],[[-1,2792]," "],[[-1,2348],"ids "],[[-1,2791],4],[[-1,2787],"  |\n+--------+=========+=========+=="],[[-1,2342],"="],[[-1,2751],"======+\n```\n\nWhen length is greater than 7, the length is encoded as a `vu57` integer:\n\n```\n          vu57(length)\n          |        arr object ID\n          |        |         element ID after which to insert\n          |        |         |\n"],[[-1,2499],"+--------+========+=========+=========+====="],[[-1,2341],"="],[[-1,2455],"===+\n|00001110|  vu57  |   obj   |  after  |  "],[[-1,2335]," ids "],[[-1,2409],4],[[-1,2405],"  |\n+--------+========+=========+=========+======"],[[-1,2340],"="],[[-1,2356],"==+\n```"],[[-1,2330],"\n\n\n"],[[-1,2308],"###### `del` Operation Encoding\n\nThe `del` operation header opcode is encoded as `"],[[-1,2185],"10000"],[[-1,2226],5],[[-1,2221],"` and the length encodes the number"],[[-1,2180],"\nof "],[[-1,2166],"timespans being deleted.\n\n"],[[-1,1904],"The header is followed by a sequence of timespans. Each timespan is encoded as a pair of\n"],[[-1,1679],"`id` and `vu57` integer. The `id` encodes the start of the timespan, and the `vu57` integer\nencodes the length of the timespan.\n\n"],[[-1,1461],"`"],[[-1,1458],"``"],[[-1,1453],"\n"],[[-1,1451],"+========"],[[-1,1434],"+========+\n"],[[-1,1403],"|   id   |  "],[[-1,1389],"vu57  |"],[[-1,1391],1],[[-1,1423],"\n+========+========+"],[[-1,1442],4],[[-1,1452],"\n"],[[-1,1456],"```"],[[-1,1382],"\n\n"],[[-1,1374],"Below is an example of a `del` operation that deletes "],[[-1,1297],"2 timespans:\n\n```\n+--------+========+========+========+========+\n|"],[[-1,1134],"01010000"],[[-1,1231],8],[[-1,1223],"|   id   |  vu57  |   id   |  vu57  |\n+--------+========+========+========+========+\n```"],[[-1,1299],1],[[-1,1320],12],[[-1,1308],"\n"],[[-1,1081],"\n"],[[-1,1126],"\n"],[[-1,1112],"###### `nop` Operation Encoding"],[[-1,1080],"\n\nThe `nop` operation header opcode is encoded as `10001` and the length encodes the number\nlogical clock "],[[-1,970],"cycles it consumes."],[[-1,939],"\n\nFor example, below encoding "],[[-1,907],"shows a `nop` operation that consumes 2 logical clock cycles:"],[[-1,846],5],[[-1,909],1],[[-1,951],"\n\n`"],[[-1,946],"``"],[[-1,836],"\n+--------+"],[[-1,825],18],[[-1,807],"\n|01010001|"],[[-1,796],18],[[-1,778],"\n+--------+"],[[-1,767],18],[[-1,749],"\n```"],[[-1,941],2],[[-1,944],3],[[-1,948],1],[[-1,974],2],[[-1,1125],8],[[-1,1116],3],[[-1,1117],1],[[-1,1307],"\n"],[[-1,1306],3],[[-1,1378],3],[[-1,1380],1],[[-1,1460],1],[[-1,1550],88],[[-1,1795],24],[[-1,1681],1],[[-1,1771],90],[[-1,1815],1],[[-1,1813],2],[[-1,1810],7],[[-1,1800],4],[[-1,1802],1],[[-1,1803],1],[[-1,1814],1],[[-1,2109],49],[[-1,1935],30],[[-1,2060],124],[[-1,2140],16],[[-1,2122],12],[[-1,2124],1],[[-1,2176],9],[[-1,2327],8],[[-1,2312],3],[[-1,2318],3],[[-1,2319],1],[[-1,2510],10],[[-1,3428],8],[[-1,3419],5],[[-1,3420],1],[[-1,3595],10],[[-1,4246],15],[[-1,4473],39],[[-1,4386],9],[[-1,4376],3],[[-1,4377],1],[[-1,4372],1],[[-1,4434],47],[[-1,4498],1],[[-1,4502],2],[[-1,6304],6],[[-1,6565],247],[[-1,6699],1],[[-1,6857],10],[[-1,7371],12],[[-1,7345],26],[[-1,7359],1],[[-1,7356],1],[[-1,7354],2],[[-1,7355],1],[[-1,7352],1],[[-1,7358],1],[[-1,7374],2],[[-1,7486],1],[[-1,7491],2],[[-1,7573],1],[[-1,7716],3],[[-1,7720],1],[[-1,8039],19],[[-1,8090],3],[[-1,8119],3],[[-1,8355],10],[[-1,8443],1],[[-1,8456],3],[[-1,9087],6],[[-1,9142],1],[[-1,9144],1],[[-1,9226],41],[[-1,9280],4],[[-1,9284],3],[[-1,9381],2],[[-1,9429],23],[[-1,9501],4],[[-1,9509],4],[[-1,9541],1],[[-1,9822],28],[[-1,9780],1],[[-1,9794],1],[[-1,9783],1],[[-1,9793],5],[[-1,9847],4],[[-1,9878],1],[[-1,9876],3],[[-1,9877],1],[[-1,9873],7],[[-1,9909],6],[[-1,9928],3],[[-1,9969],31],[[-1,10003],6],[[-1,10164],8],[[-1,10155],7],[[-1,10156],1],[[-1,12524],1],[[-1,12535],1],[[-1,12571],22],[[-1,12626],19],[[-1,12632],1],[[-1,12636],1],[[-1,12640],1],[[-1,12719],9],[[-1,12730],1],[[-1,12789],8],[[-1,12780],7],[[-1,12781],1],[[-1,12798],1],[[-1,12806],1],[[-1,12822],1],[[-1,12868],5],[[-1,12960],16],[[-1,12942],13],[[-1,12944],1],[[-1,13189],6],[[-1,13209],1],[[-1,13269],40],[[-1,13298],4],[[-1,14789],3],[[-1,15498],708],[[-1,15577],1],[[-1,15642],2],[[-1,15647],1],[[-1,15716],10],[[-1,15731],2],[[-1,15986],"\n"],[[-1,15934],1],[[-1,15985],"\n"],[[-1,15972],"####"],[[-1,15935],"#"],[[-1,15968]," Patch Metadata "],[[-1,15943],"E"],[[-1,15952],1],[[-1,15951],"ncoding"],[[-1,15933],"\n\nThe patch metadata is encoded as a JSON object using CBOR encoding. If the metadata is\nempty, it is encoded as "],[[-1,15774],"a CBOR `"],[[-1,15765],"undefined"],[[-1,15766],"`"],[[-1,15756]," value."],[[-1,15820],2],[[-1,15778],1],[[-1,15818],21],[[-1,15984],11],[[-1,18608],"\n"],[[-1,18525],"\n\n#### Encoding "],[[-1,18507],"Primitives"],[[-1,9631],"\n\n"],[[-1,9618],"##### `id` Encoding\n\nThe `"],[[-1,9591],"id"],[[-1,9588],"` encodes a logical timestamp.\n"],[[-1,9555],"\n"],[[-1,618],"When server clock is used, the `id` is encoded as a `b1vu56`, where the first bit is set\nto `1` to indicate that server clock is used."],[[-1,394]," "],[[-1,391],"The remaining 56 bits encode the server\nclock value."],[[-1,393],1],[[-1,484],"\n\nWhen "],[[-1,338],"logical"],[[-1,477],6],[[-1,471]," clock is used, the `id` is encoded as "],[[-1,330],"..."],[[-1,432],38],[[-1,737],25],[[-1,710],2],[[-1,704],26],[[-1,636],7],[[-1,628],7],[[-1,620],1],[[-1,629],1],[[-1,678],33],[[-1,708],3],[[-1,712],1],[[-1,9554],3],[[-1,9557],1],[[-1,9592],1],[[-1,9629],7],[[-1,9621],2],[[-1,9622],1],[[-1,17439],"\n\n\n"],[[-1,17427],"##### `vu57` Variable Length Unsigned 57-bit Integer"],[[-1,16563],"\n"],[[-1,16562],15],[[-1,16547],"\n- `z` --- variable length unsigned 56 bit integer\n- `?` --- whether the next byte is used for encoding"],[[-1,17375],"\n\n"],[[-1,17373],5],[[-1,17368],"```\n"],[[-1,17364],5],[[-1,17359],"byte 1                                                         byte 8\n"],[[-1,17289],5],[[-1,17284],"+--------+........+........+........+........+........+........+········+\n"],[[-1,17210],5],[[-1,17205],"|?zzzzzzz|?zzzzzzz|?zzzzzzz|?zzzzzzz|?zzzzzzz|?zzzzzzz|?zzzzzzz|zzzzzzzz|\n"],[[-1,17131],5],[[-1,17126],"+--------+........+........+........+........+........+........+········+\n"],[[-1,17052],4],[[-1,17048],"\n"],[[-1,17047],3],[[-1,16581],"           "],[[-1,17044],13],[[-1,17031],"11111    2211111  2222222  3333332  4443333  4444444 55555555\n"],[[-1,16969],5],[[-1,16964],"  7654321  4321098  1098765  8765432  5432109  2109876  9876543 76543210\n"],[[-1,16891],5],[[-1,16886],"    |                        |                    |             |\n"],[[-1,16820],5],[[-1,16815],"    5th bit of z             |                    |             |\n"],[[-1,16749],5],[[-1,16744],"                             28th bit of z        |             57th bit of z\n"],[[-1,16666],5],[[-1,16661],"                                                  39th bit of z\n"],[[-1,16597],5],[[-1,16592],"```"],[[-1,17436],8],[[-1,18497],"\n"],[[-1,18490],"\n"],[[-1,18496],"\n"],[[-1,18484],"##### `b1vu56` "],[[-1,18454],"1-bit Binary "],[[-1,18436],"Flag + 56-bit Variable Length Unsigned Integer"],[[-1,18390],1],[[-1,18389],"\n\n"],[[-1,18387],5],[[-1,18382],"- "],[[-1,17474],"`"],[[-1,18380],"f"],[[-1,17473],"`"],[[-1,17472],1],[[-1,18379]," "],[[-1,17458],"--"],[[-1,18378],"- flag\n"],[[-1,18371],5],[[-1,18366],"- "],[[-1,17471],"`"],[[-1,18364],"z"],[[-1,17470],"`"],[[-1,17469],1],[[-1,18363]," -"],[[-1,17460],"--"],[[-1,18361]," variable length unsigned 56 bit integer\n"],[[-1,18320],5],[[-1,18315],"- "],[[-1,17466],"`"],[[-1,18313],"?"],[[-1,17465],"`"],[[-1,17464],1],[[-1,18312]," -"],[[-1,17462],"--"],[[-1,18310]," whether the next byte is used for encoding\n"],[[-1,18266],4],[[-1,18262],"\n"],[[-1,18261],5],[[-1,18256],"```\n"],[[-1,18252],5],[[-1,18247],"byte 1                                                         byte 8\n"],[[-1,18177],5],[[-1,18172],"+--------+........+........+........+........+........+........+········+\n"],[[-1,18098],5],[[-1,18093],"|f?zzzzzz|?zzzzzzz|?zzzzzzz|?zzzzzzz|?zzzzzzz|?zzzzzzz|?zzzzzzz|zzzzzzzz|\n"],[[-1,18019],5],[[-1,18014],"+--------+........+........+........+........+........+........+········+\n"],[[-1,17940],4],[[-1,17936],"\n"],[[-1,17935],5],[[-1,17930],"           1111     2111111  2222222  3333322  4433333  4444444 55555554\n"],[[-1,17857],5],[[-1,17852],"   654321  3210987  0987654  7654321  4321098  1098765  8765432 65432109\n"],[[-1,17779],5],[[-1,17774],"    |                        |                    |             |\n"],[[-1,17708],5],[[-1,17703],"    5th bit of z             |                    |             |\n"],[[-1,17637],5],[[-1,17632],"                             27th bit of z        |             56th bit of z\n"],[[-1,17554],5],[[-1,17549],"                                                  38th bit of z\n"],[[-1,17485],5],[[-1,17480],"```"],[[-1,17440],"\n"],[[-1,18441],4],[[-1,18460],5],[[-1,18469],8],[[-1,18495],5],[[-1,18489],2],[[-1,18486],1],[[-1,18487],1],[[-1,18509],1],[[-1,19165],3],[[-1,19169],1],[[-1,19318],38],[[-1,19233],1],[[-1,19231],4],[[-1,19232],1],[[-1,19227],1],[[-1,19280],46],[[-1,19322],1],[[-1,19326],1],[[-1,19361],6],[[-1,19412],15],[[-1,19464],2],[[-1,19511],6],[[-1,19539],1],[[-1,19553],7],[[-1,19570],1],[[-1,19610],2],[[-1,19612],1],[[-1,19660],2],[[-1,19711],2],[[-1,19749],29],[[-1,19766],2],[[-1,19822],5],[[-1,19865],36],[[-1,19900],6],[[-1,20091],103],[[-1,20115],3],[[-1,83102],2],[[-1,82850],1],[[-1,83100],4],[[-1,45233],5],[[-1,45224],4],[[-1,45228],2],[[-1,83096],16],[[-1,45210],9],[[-1,45219],7],[[-1,83080],230],[[-1,83146],2],[[-1,82844],22],[[-1,82820],2],[[-1,82822],1],[[-1,83140],5],[[-1,82817],6],[[-1,83135],7],[[-1,83118],7],[[-1,82847],3],[[-1,82821],1],[[-1,83111],3],[[-1,83124],3],[[-1,83128],2],[[-1,83144],2],[[-1,85096],1],[[-1,85118],21],[[-1,85120],1],[[-1,85146],25],[[-1,85148],1],[[-1,85157],8],[[-1,85160],2],[[-1,85179],18],[[-1,85197],17],[[-1,85200],2],[[-1,85205],4],[[-1,85207],1],[[-1,85225],17],[[-1,85227],1],[[-1,85242],14],[[-1,85271],28],[[-1,85308],16],[[-1,85310],2],[[-1,85376],65],[[-1,85379],2],[[-1,85384],4],[[-1,85386],1],[[-1,85387],1],[[-1,86783],222],[[-1,87867],1],[[-1,88321],1],[[-1,88379],1],[[-1,88467],3],[[-1,88489],3],[[-1,88496],1],[[-1,88117],13],[[-1,88102],21],[[-1,88079],24],[[-1,88047],9],[[-1,88004],26],[[-1,88038],15],[[-1,88017],11],[[-1,87978],28],[[-1,87949],12],[[-1,87933],39],[[-1,87892],22],[[-1,87894],1],[[-1,87937],2],[[-1,87950],1],[[-1,88006],2],[[-1,88023],5],[[-1,88055],4],[[-1,88081],1],[[-1,88104],1],[[-1,88567],6],[[-1,88609],1]]]]