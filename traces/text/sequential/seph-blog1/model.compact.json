[[1000000,224512],[4,[-1,224511],[[[-1,8416],5],[[-1,130493],2],[[-1,130489],21],[[-1,130449],20],[[-1,130468],19],[[-1,130429],32],[[-1,130395],30],[[-1,130363],3],[[-1,49181],2],[[-1,49154],9],[[-1,49179],23],[[-1,49145],1],[[-1,130365],1],[[-1,130397],1],[[-1,130491],1],[[-1,130495],2],[[-1,136728],1],[[-1,136721],"# "],[[-1,8469],"5000x faster CRDTs"],[[-1,8342],": "],[[-1,8325],"An "],[[-1,8305],"A"],[[-1,8322],1],[[-1,8321],"dventure in "],[[-1,8307],"O"],[[-1,8309],1],[[-1,8339],1],[[-1,8360],4],[[-1,8351],2],[[-1,8355],2],[[-1,8356],1],[[-1,8451],19],[[-1,8432],"ptimization"],[[-1,8338],11],[[-1,8409],"\n\n<span class="],[[-1,8391],"post-meta>July 31 2021</span>"],[[-1,8395],2],[[-1,8420],4],[[-1,19076],12],[[-1,19102],7],[[-1,19172],13],[[-1,136713],11],[[-1,19060],4],[[-1,136702],1],[[-1,19094],3],[[-1,19125],13],[[-1,19110],8],[[-1,19112],1],[[-1,19156],3],[[-1,19090],1],[[-1,19153],27],[[-1,19087],10],[[-1,19054],16],[[-1,19089],1],[[-1,136701],1],[[-1,19159],1],[[-1,136700],3],[[-1,136686],6],[[-1,131594],29],[[-1,19179],5],[[-1,136680],10],[[-1,131601],5],[[-1,136670],14],[[-1,136652],6],[[-1,131565],7],[[-1,136656],2],[[-1,136697],5],[[-1,136719],5],[[-1,136725],2],[[-1,136727],"\n"],[[-1,98408],5],[[-1,105722],1],[[-1,105580],5],[[-1,105670],5],[[-1,105720],6],[[-1,105652],8],[[-1,105635],1],[[-1,105600],1],[[-1,105597],7],[[-1,105588],4],[[-1,105590],1],[[-1,105599],1],[[-1,105634],4],[[-1,105609],1],[[-1,105605],1],[[-1,105607],1],[[-1,105611],2],[[-1,105615],2],[[-1,105619],3],[[-1,105628],7],[[-1,105630],1],[[-1,105714],3],[[-1,105694],2],[[-1,105711],3],[[-1,105680],2],[[-1,105665],7],[[-1,105678],4],[[-1,105691],7],[[-1,105643],8],[[-1,105684],4],[[-1,98412],4],[[-1,105584],4],[[-1,105674],4],[[-1,105706],11],[[-1,105721],1],[[-1,105655],1],[[-1,136726],"\n"],[[-1,220444],"A few years ago I was really bothered by an academic paper."],[[-1,129137],"\n\n"],[[-1,220385],1],[[-1,220384],"Some "],[[-1,220357],"res"],[[-1,220348],"earchers in France put together a co"],[[-1,220305],1],[[-1,220312],"m"],[[-1,220303],"p"],[[-1,220311],"arison"],[[-1,220302]," showing lots of "],[[-1,219540],"way"],[[-1,219531],"s you could implement"],[[-1,219537],3],[[-1,219551],10],[[-1,220285],5],[[-1,220278],56],[[-1,220222]," "],[[-1,7163],"realtime "],[[-1,7153],"collaborative"],[[-1,220221],10],[[-1,220211]," editing"],[[-1,7140]," (like "],[[-1,7120],"G"],[[-1,7133],1],[[-1,7132],"oogle "],[[-1,7118],"D"],[[-1,7126],1],[[-1,7125],"ocs)"],[[-1,7116],". They implemented lots of algorithms "],[[-1,6928],"- "],[[-1,6932],2],[[-1,7078],1],[[-1,7006],1],[[-1,121262],16],[[-1,219510],7],[[-1,219503],"CRDT"],[[-1,6934],"s"],[[-1,7005],67],[[-1,175107],1],[[-1,219499]," and OT"],[[-1,6926]," algorithms and"],[[-1,7074]," stuff"],[[-1,6910],"."],[[-1,7075],1],[[-1,7068]," "],[[-1,6908],"And"],[[-1,7067],3],[[-1,7064]," they"],[[-1,219492],11],[[-1,121243],1],[[-1,219481],1],[[-1,220203],2],[[-1,121241],1],[[-1,220201],8],[[-1,220193]," benchmark"],[[-1,220181],"ed "],[[-1,7058],"them "],[[-1,175371],"all"],[[-1,7040]," to see how they perform"],[[-1,7052],6],[[-1,175368],4],[[-1,220178],4],[[-1,220173],4],[[-1,220174],"."],[[-1,129167]," "],[[-1,7015],"(Cool!!) "],[[-1,129166],1],[[-1,129149],11],[[-1,129159],5],[[-1,129165],3],[[-1,129171],2],[[-1,219878],1],[[-1,219877],"Some al"],[[-1,219864],"gor"],[[-1,219859],"ithms worked reasonably well"],[[-1,219816],"."],[[-1,219732]," "],[[-1,219400],"But"],[[-1,219731],3],[[-1,219737],4],[[-1,219815],2],[[-1,219831],5],[[-1,219826]," others"],[[-1,219813]," took upwards of "],[[-1,219727],"3 seconds"],[[-1,219796],1],[[-1,219789],1],[[-1,219795],2],[[-1,219791],1],[[-1,219790]," "],[[-1,219788],"to "],[[-1,219747],"process"],[[-1,219395]," simple"],[[-1,219740],1],[[-1,219785],15],[[-1,219770]," "],[[-1,219769],5],[[-1,219764],"paste operation"],[[-1,219388],"s"],[[-1,219718]," from"],[[-1,219713],7],[[-1,219706]," their"],[[-1,219700],11],[[-1,219689]," editing ses"],[[-1,219671],"sions"],[[-1,219677],3],[[-1,219749],"."],[[-1,219382]," "],[[-1,219472],2],[[-1,219480],1],[[-1,219479],"Yikes!"],[[-1,219380],"\n\n"],[[-1,219466],1],[[-1,219666],1],[[-1,219469],1],[[-1,219665],1],[[-1,219664],"Which algorithm was that? "],[[-1,219465],"Well, "],[[-1,175363],"this is awkward but .. "],[[-1,219459],"it was "],[[-1,219451],"m"],[[-1,219636],1],[[-1,219635],"ine. "],[[-1,219449],"I mean,"],[[-1,219630],5],[[-1,219625]," I didn't invent it - but it was the algorithm I was using for Share"],[[-1,219555],"JS"],[[-1,219440],". The algorithm we used for Google Wave"],[[-1,219378],". The algorithm "],[[-1,175340],"which"],[[-1,175335],1],[[-1,175334]," "],[[-1,128896],"- "],[[-1,128906],"hang on -"],[[-1,175333],11],[[-1,175322]," "],[[-1,219362],"I knew for a fact didn't take 3 seconds to process large paste events. "],[[-1,128893],"W"],[[-1,175320],2],[[-1,175316],4],[[-1,175312],"hats going on"],[[-1,175297]," here?"],[[-1,175299],1],[[-1,175318],1],[[-1,219291],5],[[-1,219076],9],[[-1,219286],13],[[-1,219273],"\n\n"],[[-1,128887],"I took a closer look at the paper"],[[-1,128854],30],[[-1,121237],12],[[-1,121223],1],[[-1,121225],1],[[-1,128824],5],[[-1,128819],". In their "],[[-1,107506],"implementation "],[[-1,128808],6],[[-1,128802],"when a user pasted a big chunk of text ("],[[-1,22463],"like"],[[-1,128762],4],[[-1,128758]," 1000 characters), instead of creating 1 operation with 1000 characters, their code split the insert into 1000 "],[[-1,124235],"individual "],[[-1,124247],11],[[-1,128647],"operations. And each of those"],[[-1,124223]," operations"],[[-1,128618],8],[[-1,128610]," needed to be processed separately. "],[[-1,124211],"Do'h"],[[-1,128574],3],[[-1,128571]," - of course it'll be slow if you do that! This isn't a problem with the"],[[-1,22459]," "],[[-1,22425],"o"],[[-1,22427],1],[[-1,22458],1],[[-1,22457],"perational "],[[-1,22429],"t"],[[-1,22431],1],[[-1,22446],1],[[-1,22445],"ransformation"],[[-1,128499]," algorithm. This is just a problem with *"],[[-1,35614],"their"],[[-1,107490],3],[[-1,107485],1],[[-1,107487],1],[[-1,128458],5],[[-1,128453]," particular implementation*."],[[-1,219160],20],[[-1,129134],1],[[-1,129107],38],[[-1,129133],2],[[-1,129069],8],[[-1,129131],24],[[-1,219140],49],[[-1,175290],4],[[-1,219091],15],[[-1,219066],1],[[-1,129045],16],[[-1,129061],13],[[-1,129047],1],[[-1,219065],5],[[-1,218627],16],[[-1,218583],4],[[-1,218578],5],[[-1,218611],6],[[-1,218591],3],[[-1,218533],4],[[-1,218497],23],[[-1,218588],4],[[-1,218599],4],[[-1,218605],3],[[-1,219060],14],[[-1,219042],2],[[-1,219046],3],[[-1,219040],23],[[-1,218189],25],[[-1,219017],9],[[-1,218529],1],[[-1,218473],21],[[-1,218163],7],[[-1,218452],3],[[-1,218528],19],[[-1,219008],1],[[-1,218572],8],[[-1,218560],17],[[-1,218537],3],[[-1,218543],3],[[-1,218564],2],[[-1,219007],25],[[-1,218967],5],[[-1,218982],14],[[-1,218448],5],[[-1,218151],16],[[-1,218134],5],[[-1,218127],11],[[-1,175286],5],[[-1,218116],8],[[-1,175279],16],[[-1,218099],16],[[-1,218081],23],[[-1,218083],1],[[-1,218108],8],[[-1,218129],1],[[-1,218443],19],[[-1,218962],12],[[-1,218897],35],[[-1,218860],4],[[-1,218506],8],[[-1,218856],8],[[-1,218846],1],[[-1,218423],13],[[-1,218409],69],[[-1,218845],7],[[-1,218831],1],[[-1,218828],5],[[-1,218817],20],[[-1,218766],1],[[-1,175261],6],[[-1,175254],1],[[-1,175262],1],[[-1,218765],12],[[-1,218749],43],[[-1,217996],28],[[-1,217964],40],[[-1,217923],1],[[-1,217918],1],[[-1,128995],5],[[-1,129011],15],[[-1,217922],4],[[-1,129027],15],[[-1,217968],2],[[-1,218706],3],[[-1,218753],2],[[-1,218797],1],[[-1,218702],1],[[-1,218796],4],[[-1,218054],24],[[-1,218019],20],[[-1,218030],9],[[-1,218020],1],[[-1,217999],1],[[-1,218788],7],[[-1,218339],29],[[-1,218781],15],[[-1,218701],10],[[-1,218665],8],[[-1,218691],15],[[-1,218672],6],[[-1,218657],12],[[-1,218641],2],[[-1,218308],3],[[-1,218639],5],[[-1,217901],6],[[-1,218634],5],[[-1,217916],14],[[-1,218629],1],[[-1,128990],1],[[-1,128889],"\n"],[[-1,128989],8],[[-1,128975],6],[[-1,128952],1],[[-1,128943],9],[[-1,128951],4],[[-1,128956],2],[[-1,128969],13],[[-1,128934],27],[[-1,128981],5],[[-1,217781],1],[[-1,217780],"\n"],[[-1,35590],"The"],[[-1,35562]," infuriating"],[[-1,35587],9],[[-1,35578]," part was that "],[[-1,35591],"s"],[[-1,35607],1],[[-1,122390],22],[[-1,121221],6],[[-1,121215],"everal"],[[-1,35599],6],[[-1,35606],6],[[-1,122368],4],[[-1,128234],48],[[-1,128186]," people"],[[-1,122363]," sent"],[[-1,121208]," me"],[[-1,122358],7],[[-1,128179],1],[[-1,123830],10],[[-1,123820]," links to"],[[-1,127911],7],[[-1,128178],18],[[-1,127902],3],[[-1,128160],3],[[-1,128157]," the paper and"],[[-1,127898]," (pointedly)"],[[-1,128143]," "],[[-1,122349],"asked"],[[-1,128142],6],[[-1,128136]," me "],[[-1,127885],"what I think about"],[[-1,128132],5],[[-1,128127]," it. "],[[-1,127866],"W"],[[-1,128122],10],[[-1,128112],"ritten up as "],[[-1,123811],"a "],[[-1,128099],"Published Science Paper"],[[-1,123809],","],[[-1,128076],9],[[-1,128067]," "],[[-1,128066],13],[[-1,124207],5],[[-1,124202],"these"],[[-1,124197],1],[[-1,124178],10],[[-1,124165],9],[[-1,124156]," speed"],[[-1,123992]," c"],[[-1,123986],"omparisons"],[[-1,123990],2],[[-1,124150],1],[[-1,124149]," "],[[-1,122342],"seem"],[[-1,121205],"ed"],[[-1,122338]," like"],[[-1,124148],4],[[-1,124168],2],[[-1,124190],11],[[-1,124196],5],[[-1,128053],7],[[-1,128046]," a "],[[-1,120447],"F"],[[-1,122332],1],[[-1,128043],1],[[-1,128042],"act "],[[-1,120435],"About The Universe"],[[-1,120441],5],[[-1,120445],2],[[-1,122330],1],[[-1,128038],3],[[-1,122328],1],[[-1,128035],4],[[-1,122326],1],[[-1,128031],8],[[-1,121203],". And not"],[[-1,128023],12],[[-1,122322]," what they "],[[-1,122303],"really w"],[[-1,122291],"ere -"],[[-1,122295],2],[[-1,122311],4],[[-1,128011]," "],[[-1,128010],3],[[-1,128007],"implementation detail"],[[-1,120416],"s"],[[-1,123806]," "],[[-1,122324],"of"],[[-1,123805],2],[[-1,123976],1],[[-1,127986],1],[[-1,127966],2],[[-1,127964]," some "],[[-1,122286],"java "],[[-1,127958],"code"],[[-1,122281],","],[[-1,127954]," writ"],[[-1,127947],"ten by a"],[[-1,120414]," probably"],[[-1,120404]," overstretched"],[[-1,127937],12],[[-1,127925]," "],[[-1,6904],"grad student"],[[-1,123974],11],[[-1,127924],10],[[-1,120389],". One of a "],[[-1,120358],"whole "],[[-1,121193],2],[[-1,121183],3],[[-1,121178],7],[[-1,121171],"bunch"],[[-1,120376]," of"],[[-1,121166],1],[[-1,121159],4],[[-1,121155]," implementations"],[[-1,22424]," that"],[[-1,121139]," "],[[-1,120372],"they needed to"],[[-1,121138],2],[[-1,121136]," code up"],[[-1,121165],5],[[-1,121180],1],[[-1,121191],7],[[-1,127914],"."],[[-1,127939],1],[[-1,127949],1],[[-1,127975],8],[[-1,127985],7],[[-1,127977],"\n"],[[-1,127913],"\n"],[[-1,124142],"\""],[[-1,127790],"N"],[[-1,127865],4],[[-1,127859],1],[[-1,217894],28],[[-1,217857],14],[[-1,175253],8],[[-1,217843],18],[[-1,217824],1],[[-1,217776],9],[[-1,175244],12],[[-1,217767],4],[[-1,217757],3],[[-1,217763],3],[[-1,217823],40],[[-1,217749],1],[[-1,128425],1],[[-1,128353],9],[[-1,128343],1],[[-1,128359],3],[[-1,128424],64],[[-1,128342],11],[[-1,128316],29],[[-1,128285],2],[[-1,128265],30],[[-1,128283],17],[[-1,128287],1],[[-1,128331],14],[[-1,128360],1],[[-1,217748],6],[[-1,216957],2],[[-1,216955],"o"],[[-1,127789],"oo"],[[-1,216954],"!"],[[-1,127858]," "],[[-1,127848],"The"],[[-1,121104]," peer reviewed"],[[-1,127845]," science isn't "],[[-1,121127],"right"],[[-1,127786],4],[[-1,124140]," everybody"],[[-1,127816],5],[[-1,127811],"! Please believe me!"],[[-1,124141],"\""],[[-1,121120],"."],[[-1,124128],2],[[-1,124126]," "],[[-1,121118],"B"],[[-1,124125],1],[[-1,124124],"ut"],[[-1,124122],2],[[-1,124104],11],[[-1,124085],1],[[-1,124084]," I didn't have a "],[[-1,124055],"published paper justifying my claims."],[[-1,123803]," I had "],[[-1,123790],"working code but"],[[-1,123768]," "],[[-1,123760],"it felt like "],[[-1,123709],"none of the smart "],[[-1,123676],"computer s"],[[-1,123656],"cience"],[[-1,123666],5],[[-1,123691],7],[[-1,123684]," people"],[[-1,123747],7],[[-1,123717],6],[[-1,123711]," "],[[-1,123740],"cared about "],[[-1,123722],"that."],[[-1,123647]," "],[[-1,121117],"Who was I? "],[[-1,123646],"I was nobody."],[[-1,123631],5],[[-1,123622],2],[[-1,123474],26],[[-1,123620],76],[[-1,123534],53],[[-1,123544],9],[[-1,123626],3],[[-1,123633],1],[[-1,123728],5],[[-1,123762],1],[[-1,123767],4],[[-1,123774],3],[[-1,123796],5],[[-1,124018],1],[[-1,123999],1],[[-1,124017],18],[[-1,123998],3],[[-1,124067],11],[[-1,124089],2],[[-1,124093],2],[[-1,124120],15],[[-1,124130],1],[[-1,127830],9],[[-1,127856],7],[[-1,175230],5],[[-1,216953],9],[[-1,175225],1],[[-1,175220],20],[[-1,175224],2],[[-1,217742],1],[[-1,121640],1],[[-1,121637],24],[[-1,121639],1],[[-1,121641],"\n"],[[-1,121105],1],[[-1,121106],1],[[-1,123445],"\n---"],[[-1,123446],"\n"],[[-1,6763],1],[[-1,4574],25],[[-1,3102],1],[[-1,4549],538],[[-1,3911],2],[[-1,3345],6],[[-1,3908],35],[[-1,3257],9],[[-1,3873],53],[[-1,3337],3],[[-1,3820],23],[[-1,3333],19],[[-1,3308],33],[[-1,3314],5],[[-1,3797],11],[[-1,3746],1],[[-1,3786],11],[[-1,3745],3],[[-1,3275],14],[[-1,3775],1],[[-1,3675],11],[[-1,3381],4],[[-1,3664],2],[[-1,3248],1],[[-1,3662],14],[[-1,3247],43],[[-1,3646],4],[[-1,3638],30],[[-1,3600],6],[[-1,3608],8],[[-1,3642],2],[[-1,3648],1],[[-1,3741],18],[[-1,3774],3],[[-1,3764],6],[[-1,3771],7],[[-1,3758],11],[[-1,3723],16],[[-1,3699],23],[[-1,3707],7],[[-1,4011],99],[[-1,5378],11],[[-1,5363],10],[[-1,5352],6],[[-1,5367],2],[[-1,6373],10],[[-1,6128],1],[[-1,5346],1],[[-1,6363],35],[[-1,5345],1],[[-1,6127],68],[[-1,5343],4],[[-1,6059],1],[[-1,6328],2],[[-1,5382],2],[[-1,6326],11],[[-1,5918],8],[[-1,5909],18],[[-1,5729],5],[[-1,5891],6],[[-1,6315],22],[[-1,5325],9],[[-1,5338],8],[[-1,6293],36],[[-1,5329],3],[[-1,6257],40],[[-1,5314],2],[[-1,4971],30],[[-1,4922],7],[[-1,4695],1],[[-1,4915],2],[[-1,4693],1],[[-1,4913],33],[[-1,4941],16],[[-1,5312],3],[[-1,5053],6],[[-1,4978],5],[[-1,5047],5],[[-1,5309],13],[[-1,6180],9],[[-1,5041],11],[[-1,5883],1],[[-1,5296],15],[[-1,5880],7],[[-1,5281],2],[[-1,5589],17],[[-1,5873],3],[[-1,5882],1],[[-1,6171],33],[[-1,5219],3],[[-1,5027],11],[[-1,5216],1],[[-1,5188],4],[[-1,5181],4],[[-1,5184],2],[[-1,5215],27],[[-1,5016],1],[[-1,5011],21],[[-1,5015],2],[[-1,5261],41],[[-1,5275],5],[[-1,5268],1],[[-1,5270],1],[[-1,6138],1],[[-1,4879],17],[[-1,4673],4],[[-1,4689],7],[[-1,4862],8],[[-1,4678],4],[[-1,4681],2],[[-1,4854],17],[[-1,4691],1],[[-1,4837],22],[[-1,4795],7],[[-1,4811],7],[[-1,4802],7],[[-1,4787],44],[[-1,4804],1],[[-1,4815],3],[[-1,5569],1],[[-1,5176],21],[[-1,5153],4],[[-1,4990],10],[[-1,4729],4],[[-1,5149],28],[[-1,4743],5],[[-1,5121],8],[[-1,4737],2],[[-1,5155],1],[[-1,5568],3],[[-1,5563],2],[[-1,5491],9],[[-1,5561],15],[[-1,5092],11],[[-1,4733],4],[[-1,5081],10],[[-1,5067],2],[[-1,5071],3],[[-1,5098],1],[[-1,5475],9],[[-1,5096],1],[[-1,5466],7],[[-1,5094],1],[[-1,5459],5],[[-1,5452],15],[[-1,5435],2],[[-1,5431],1],[[-1,5403],10],[[-1,5112],12],[[-1,5419],15],[[-1,5062],7],[[-1,5392],10],[[-1,5430],11],[[-1,5437],1],[[-1,5454],1],[[-1,5538],4],[[-1,5482],6],[[-1,5534],1],[[-1,5546],6],[[-1,5532],4],[[-1,5498],6],[[-1,5528],9],[[-1,5511],12],[[-1,5519],4],[[-1,5540],2],[[-1,4669],8],[[-1,4629],1],[[-1,4661],7],[[-1,4627],1],[[-1,4654],13],[[-1,4623],1],[[-1,4625],1],[[-1,4641],4],[[-1,4633],3],[[-1,4622],18],[[-1,4584],9],[[-1,4604],20],[[-1,4637],2],[[-1,4725],2],[[-1,4703],6],[[-1,4723],5],[[-1,4709],1],[[-1,4718],6],[[-1,4708],5],[[-1,4712],2],[[-1,5565],1],[[-1,6053],6],[[-1,6003],10],[[-1,6047],13],[[-1,5926],2],[[-1,6034],14],[[-1,5869],27],[[-1,5838],9],[[-1,5609],6],[[-1,5829],1],[[-1,5655],2],[[-1,5828],25],[[-1,5793],15],[[-1,5776],11],[[-1,5778],1],[[-1,5803],5],[[-1,5653],15],[[-1,5603],12],[[-1,5798],5],[[-1,5637],27],[[-1,5723],17],[[-1,5680],9],[[-1,5706],11],[[-1,5671],3],[[-1,5664],8],[[-1,5668],2],[[-1,5695],14],[[-1,5765],29],[[-1,5731],1],[[-1,5736],4],[[-1,5842],3],[[-1,6020],16],[[-1,5964],5],[[-1,5924],6],[[-1,5959],10],[[-1,5947],12],[[-1,5949],1],[[-1,5992],8],[[-1,5935],1],[[-1,5933],1],[[-1,5984],20],[[-1,6137],6],[[-1,6217],34],[[-1,6762],33],[[-1,6725],33],[[-1,6676],15],[[-1,6647],9],[[-1,6616],36],[[-1,6544],13],[[-1,6529],17],[[-1,6410],36],[[-1,3593],1],[[-1,3203],3],[[-1,3352],4],[[-1,3347],1],[[-1,3376],16],[[-1,3172],14],[[-1,3156],20],[[-1,3158],1],[[-1,3360],6],[[-1,3197],7],[[-1,3354],2],[[-1,3592],21],[[-1,3566],7],[[-1,3571],4],[[-1,3133],11],[[-1,3135],1],[[-1,3190],5],[[-1,3177],5],[[-1,3185],4],[[-1,3559],5],[[-1,3540],2],[[-1,3530],15],[[-1,3513],6],[[-1,3515],1],[[-1,3538],1],[[-1,3535],2],[[-1,3537],1],[[-1,3554],13],[[-1,3567],1],[[-1,3499],1],[[-1,3121],17],[[-1,3491],27],[[-1,3464],"\n"],[[-1,1201],"Even talking about this "],[[-1,1175],"stuff "],[[-1,1177],"we"],[[-1,3422],39],[[-1,3463],40],[[-1,3498],6],[[-1,3507],4],[[-1,3594],1],[[-1,6503],1],[[-1,6413],1],[[-1,6502],15],[[-1,6483],5],[[-1,6472],37],[[-1,6430],16],[[-1,6435],4],[[-1,6478],5],[[-1,6487],2],[[-1,6512],6],[[-1,6580],10],[[-1,6565],8],[[-1,6548],3],[[-1,6557],8],[[-1,6570],4],[[-1,6618],1],[[-1,6638],2],[[-1,6632],13],[[-1,6636],2],[[-1,6649],1],[[-1,6661],1],[[-1,6656],3],[[-1,6660],2],[[-1,6692],4],[[-1,6684],7],[[-1,6688],2],[[-1,6729],2],[[-1,217741],1],[[-1,5932],4],[[-1,5927],1],[[-1,123440],1],[[-1,123481],4],[[-1,123476],1],[[-1,217740],20],[[-1,6824],13],[[-1,6892],1],[[-1,217720],5],[[-1,6054],1],[[-1,6891],67],[[-1,6810],12],[[-1,6796],21],[[-1,6773],10],[[-1,6775],1],[[-1,6798],1],[[-1,217715],11],[[-1,217678],24],[[-1,217648],1],[[-1,217645],7],[[-1,217638]," have "],[[-1,217628],"a "],[[-1,216943],"language problem"],[[-1,217626],18],[[-1,217608],". We describe each system as an \"algorithm\""],[[-1,175199],". Jupiter "],[[-1,175177],"is an Algorithm."],[[-1,107476]," RGA is an"],[[-1,175161],1],[[-1,175138],4],[[-1,175160],9],[[-1,175151]," "],[[-1,107465],"A"],[[-1,175132],1],[[-1,175150],1],[[-1,175149],"lgorithm."],[[-1,175189],6],[[-1,217565]," "],[[-1,175139],"B"],[[-1,217564],3],[[-1,217561],"ut really there"],[[-1,22417]," are"],[[-1,217546],2],[[-1,217544]," two "],[[-1,217524],"very separate "],[[-1,122279],"aspects"],[[-1,217509],5],[[-1,217503],":\n\n1. The"],[[-1,22413]," black-box"],[[-1,217494]," "],[[-1,217273],"*"],[[-1,21691],"b"],[[-1,21688],"e"],[[-1,21685],"h"],[[-1,21682],"a"],[[-1,21679],"v"],[[-1,21676],"i"],[[-1,21673],"o"],[[-1,21670],"u"],[[-1,21667],"r"],[[-1,21705],9],[[-1,21751],1],[[-1,21748],1],[[-1,21745],1],[[-1,21742],1],[[-1,21739],1],[[-1,21736],1],[[-1,21733],1],[[-1,21730],1],[[-1,21727],1],[[-1,217493],9],[[-1,217266],"*"],[[-1,217268],1],[[-1,217270],1],[[-1,217272],1],[[-1,217484]," of "],[[-1,22402],"concurrent e"],[[-1,22386],"dits"],[[-1,22390],2],[[-1,217480],4],[[-1,216927],19],[[-1,217476],6],[[-1,217445],". When "],[[-1,22381],"tw"],[[-1,22369],"o clients"],[[-1,22379],5],[[-1,217438],10],[[-1,217428]," edit"],[[-1,22359]," the same region of text at the "],[[-1,22325],"same time,"],[[-1,22327],1],[[-1,217423],21],[[-1,217264],5],[[-1,217251],4],[[-1,217259],4],[[-1,217402],5],[[-1,217357],16],[[-1,217397],1],[[-1,217396]," "],[[-1,217370],"what "],[[-1,217337],"happens?"],[[-1,217329],18],[[-1,217311]," "],[[-1,22313],"Are they merged"],[[-1,22237],", "],[[-1,22231],"and if so in what order"],[[-1,22235],2],[[-1,22262],"? "],[[-1,22274],11],[[-1,22298],2],[[-1,22280],5],[[-1,22296],16],[[-1,22260],1],[[-1,22257],1],[[-1,22256],"What are the rules?"],[[-1,22259],1],[[-1,107463],18],[[-1,107443],39],[[-1,107445],1],[[-1,217310],20],[[-1,217287],14],[[-1,217246],"\n"],[[-1,217239],"2. The"],[[-1,22207]," white-box"],[[-1,217233]," *implementat"],[[-1,217212],"ion*"],[[-1,22197]," of the system"],[[-1,217208],4],[[-1,216907],4],[[-1,217204],10],[[-1,217194],". What"],[[-1,22183]," programming"],[[-1,217188]," langu"],[[-1,217178],"age"],[[-1,217150]," are we using"],[[-1,217175],"? What data structures?"],[[-1,217137]," How well "],[[-1,22128],"optimized is"],[[-1,22098]," the code"],[[-1,22116],17],[[-1,22170],36],[[-1,217127],17],[[-1,217105],22],[[-1,217083],"?"],[[-1,216468],"\n\n"],[[-1,107398],"If "],[[-1,469],"some academic"],[[-1,1168],8],[[-1,1160],"'s"],[[-1,107395],2],[[-1,107393]," "],[[-1,1157],"code"],[[-1,107391],14],[[-1,107377]," runs"],[[-1,107404],5],[[-1,122032],5],[[-1,122025],18],[[-1,122006],1],[[-1,122005]," slow"],[[-1,107372],"ly,"],[[-1,107368]," what "],[[-1,107330],"does that actu"],[[-1,107314],"ally "],[[-1,455],"teach"],[[-1,107309],1],[[-1,107304],3],[[-1,107301]," us"],[[-1,107308],2],[[-1,107316],1],[[-1,107362],7],[[-1,107340],8],[[-1,107355],15],[[-1,121999],15],[[-1,122027],1],[[-1,122269],37],[[-1,122045],12],[[-1,122073],27],[[-1,122092],18],[[-1,122113],19],[[-1,122094],"?"],[[-1,121984]," Maybe it"],[[-1,31178],"'"],[[-1,121975],"s like tests"],[[-1,107296],"."],[[-1,121963],2],[[-1,121961]," "],[[-1,107294],"A"],[[-1,121960],1],[[-1,121959]," passing test suite "],[[-1,22088],"*"],[[-1,121771],"suggests"],[[-1,22087],"*"],[[-1,121763],", but "],[[-1,121873],"can"],[[-1,121697]," never"],[[-1,121088]," "],[[-1,22086],"*"],[[-1,121087],5],[[-1,121870],1],[[-1,121939],8],[[-1,121931],"prove"],[[-1,22085],"*"],[[-1,121926]," "],[[-1,107275],"that "],[[-1,121925],"the"],[[-1,107292],"re are no"],[[-1,107283],5],[[-1,121922],11],[[-1,121911]," bugs."],[[-1,22008],1],[[-1,21850],8],[[-1,21998],36],[[-1,21871],11],[[-1,21950],40],[[-1,21885],7],[[-1,21902],14],[[-1,21910],7],[[-1,21962],11],[[-1,22007],8],[[-1,121868]," "],[[-1,22084],"Likewise "],[[-1,22074],1],[[-1,121867],4],[[-1,121863],"a slow implementation"],[[-1,121757]," "],[[-1,22072],1],[[-1,121756],"suggests"],[[-1,22071],1],[[-1,121748],", but can"],[[-1,121687]," never"],[[-1,121739],1],[[-1,121690],1],[[-1,121738],1],[[-1,121737]," "],[[-1,22070],1],[[-1,121736],"prove"],[[-1,22069],1],[[-1,121731]," "],[[-1,121082],"that "],[[-1,22063],"every implementation"],[[-1,22067],3],[[-1,121077],5],[[-1,121730],10],[[-1,121720]," "],[[-1,22038],"of the system "],[[-1,22042],2],[[-1,121719],"will"],[[-1,121715],7],[[-1,121708]," be slow."],[[-1,21833]," "],[[-1,21817],"If you wait long enough, somebody will find more"],[[-1,21832],6],[[-1,21820],1],[[-1,21826],4],[[-1,21839]," bugs."],[[-1,120352],1],[[-1,22023],6],[[-1,22015],4],[[-1,22017],1],[[-1,120326],21],[[-1,120303],2],[[-1,120299],2],[[-1,35535],18],[[-1,120301],1],[[-1,120305],1],[[-1,120351],24],[[-1,120296],11],[[-1,120285]," And"],[[-1,107270],", maybe,"],[[-1,35550]," someone out "],[[-1,35517],"there "],[[-1,21768],"can design a"],[[-1,35511],12],[[-1,107261],7],[[-1,120281],7],[[-1,120274]," "],[[-1,120217],"faster implementation"],[[-1,120196],1],[[-1,120195],"."],[[-1,120233],15],[[-1,120273],19],[[-1,120237],3],[[-1,120239],1],[[-1,120254],14],[[-1,121842],1],[[-1,121839],1],[[-1,121836],12],[[-1,121814],17],[[-1,121791],18],[[-1,121797],3],[[-1,121824],9],[[-1,121838],1],[[-1,121841],1],[[-1,121905],28],[[-1,122196],16],[[-1,122178],1],[[-1,122171],32],[[-1,122129],3],[[-1,122139],9],[[-1,122123],9],[[-1,122130],1],[[-1,122177],3],[[-1,122180],1],[[-1,122202],3],[[-1,122232],29],[[-1,122271],1],[[-1,216038],3],[[-1,216032],1],[[-1,216034],1],[[-1,216466],5],[[-1,122796],22],[[-1,122770],1],[[-1,122774],2],[[-1,216461],3],[[-1,122806],3],[[-1,123436],9],[[-1,216458],3],[[-1,131530],1],[[-1,122802],2],[[-1,131529],3],[[-1,131522],12],[[-1,123426],1],[[-1,131526],2],[[-1,216455],1],[[-1,131551],21],[[-1,131554],2],[[-1,216454],1],[[-1,216440],1],[[-1,216433],13],[[-1,131510],10],[[-1,216420],7],[[-1,122768],2],[[-1,216413],14],[[-1,123423],9],[[-1,123404],49],[[-1,123329],10],[[-1,123355],21],[[-1,123318],19],[[-1,123297],46],[[-1,123218],9],[[-1,123208],4],[[-1,123246],27],[[-1,123204],29],[[-1,123170],11],[[-1,123175],5],[[-1,123251],4],[[-1,123299],1],[[-1,123334],2],[[-1,123414],7],[[-1,216399],19],[[-1,216029],3],[[-1,216024],20],[[-1,215998],10],[[-1,215970],14],[[-1,215988],1],[[-1,215981],10],[[-1,127781],13],[[-1,127766],3],[[-1,127768],1],[[-1,215987],3],[[-1,216004],3],[[-1,216026],1],[[-1,216044],4],[[-1,216439],3],[[-1,216453],11],[[-1,216959],"\n"],[[-1,215956],"\n"],[[-1,1152],"Years ago I"],[[-1,121070],4],[[-1,175126],10],[[-1,215808],125],[[-1,215666],5],[[-1,215683],1],[[-1,122765],3],[[-1,121066],5],[[-1,215659],9],[[-1,215682]," translat"],[[-1,175112],"ed"],[[-1,215648],3],[[-1,215673],2],[[-1,215670]," "],[[-1,215668],"my"],[[-1,215949],88],[[-1,215859],50],[[-1,215861],1],[[-1,215955],5],[[-1,216958],1],[[-1,216378],16],[[-1,216379],1],[[-1,216853],17],[[-1,216358],1],[[-1,216361],2],[[-1,216717],9],[[-1,216835],5],[[-1,216719]," "],[[-1,122762],"old "],[[-1,216830],1],[[-1,216894],3],[[-1,216891],"text OT"],[[-1,216708]," "],[[-1,215644],"code into"],[[-1,216707],9],[[-1,216884],11],[[-1,216828],2],[[-1,216826]," "],[[-1,216825],30],[[-1,216692],2],[[-1,216356],5],[[-1,216345],8],[[-1,216349],2],[[-1,216690],27],[[-1,216336],2],[[-1,216332],2],[[-1,216334],1],[[-1,216647],29],[[-1,216328],16],[[-1,216618],4],[[-1,216614],"C"],[[-1,215631],","],[[-1,216613],5],[[-1,216608]," Javascript,"],[[-1,216596],4],[[-1,216592]," "],[[-1,216570],10],[[-1,216560],"Go"],[[-1,215628],","],[[-1,216558],4],[[-1,216554]," "],[[-1,216547],"R"],[[-1,216553],1],[[-1,216552],"u"],[[-1,216550],"st"],[[-1,215627]," and Swift"],[[-1,216546],". "],[[-1,120190],"Each implementation has the same"],[[-1,120192],1],[[-1,121055],2],[[-1,121051],13],[[-1,121038]," "],[[-1,21693],"b"],[[-1,21689],"e"],[[-1,21686],"h"],[[-1,21683],"a"],[[-1,21680],"v"],[[-1,21677],"i"],[[-1,21674],"o"],[[-1,21671],"u"],[[-1,21668],"r"],[[-1,21715],9],[[-1,21753],1],[[-1,21749],1],[[-1,21746],1],[[-1,21743],1],[[-1,21740],1],[[-1,21737],1],[[-1,21734],1],[[-1,21731],1],[[-1,21728],1],[[-1,121037],7],[[-1,121028],2],[[-1,121026],", and the "],[[-1,121013],"s"],[[-1,121016],1],[[-1,121030],1],[[-1,121053],1],[[-1,121060],4],[[-1,215616],1],[[-1,215615],"ame "],[[-1,215584],"algorithm"],[[-1,121012],"."],[[-1,215575]," "],[[-1,121010],"B"],[[-1,215574],3],[[-1,215571],"ut"],[[-1,215611],11],[[-1,215599],12],[[-1,216311],27],[[-1,216284]," "],[[-1,215568],"t"],[[-1,216283],1],[[-1,216282],"he performance "],[[-1,122757],"is"],[[-1,216267],14],[[-1,216253]," not"],[[-1,215566]," even close"],[[-1,216249],". In jav"],[[-1,216239],"ascript"],[[-1,216232],12],[[-1,216220]," my transform function "],[[-1,121008],"ran"],[[-1,122753],4],[[-1,122749]," "],[[-1,216197],"ab"],[[-1,216189],"out 100"],[[-1,215551]," 000"],[[-1,215553],1],[[-1,216180],4],[[-1,216176]," times per second. Not bad! But "],[[-1,214933],19],[[-1,214910],13],[[-1,214891],6],[[-1,214897],3],[[-1,214914],2],[[-1,216144],"the same"],[[-1,214878]," function in"],[[-1,216136],1],[[-1,216130],11],[[-1,216119]," C"],[[-1,214884],5],[[-1,216117],1],[[-1,216088],5],[[-1,216083]," "],[[-1,175104],"does"],[[-1,214847],4],[[-1,214852],4],[[-1,214936],1],[[-1,214860],5],[[-1,214864],2],[[-1,214935],2],[[-1,216078],3],[[-1,216075]," "],[[-1,216081],2],[[-1,216116],17],[[-1,216099],"20M"],[[-1,214842]," "],[[-1,214829],"iterations"],[[-1,214841],11],[[-1,216074],6],[[-1,216067]," per "],[[-1,216096],1],[[-1,216095],"second."],[[-1,215547]," That"],[[-1,105725],"'"],[[-1,215542],"s"],[[-1,216062]," 200x faster. Wow"],[[-1,215540],"!"],[[-1,131429],"\n"],[[-1,122747],1],[[-1,122533],142],[[-1,122665],44],[[-1,122736],40],[[-1,122620],1],[[-1,122617],2],[[-1,122619],1],[[-1,122696],3],[[-1,122614],5],[[-1,122693],5],[[-1,122608],4],[[-1,122688],21],[[-1,122603],69],[[-1,122667],1],[[-1,122746],9],[[-1,122748],1],[[-1,131428],"\n"],[[-1,123158],"W"],[[-1,131500],6],[[-1,131494],"ere the academics "],[[-1,107253],"testing"],[[-1,131476],5],[[-1,131471]," "],[[-1,1140],"a"],[[-1,131470],3],[[-1,131467]," slow version or th"],[[-1,131446],"e fast "],[[-1,131437],"version"],[[-1,127757]," of this code"],[[-1,131427],"? "],[[-1,120157],"M"],[[-1,121679],8],[[-1,121004],4],[[-1,121671],11],[[-1,121660],"aybe"],[[-1,120156],", without noticing,"],[[-1,121656]," "],[[-1,131405],4],[[-1,131401],"they"],[[-1,121654]," had"],[[-1,131397],5],[[-1,131392]," fast versions of some algorithms and slow versions of "],[[-1,131329],"others"],[[-1,131323],7],[[-1,121000],2],[[-1,120992],17],[[-1,120998],3],[[-1,131316],7],[[-1,121649],5],[[-1,131309],4],[[-1,121644],2],[[-1,131305],17],[[-1,120973],"."],[[-1,131288],1],[[-1,131287]," "],[[-1,120971],"I"],[[-1,131237],17],[[-1,131220],"t"],[[-1,31177],"'"],[[-1,131219],"s"],[[-1,131252],3],[[-1,131265],12],[[-1,131286],3],[[-1,131283]," imp"],[[-1,131273],"ossible"],[[-1,131249]," to tell"],[[-1,120970]," from"],[[-1,120965],13],[[-1,120952]," th"],[[-1,120943],"e paper"],[[-1,120949],3],[[-1,131239],"!"],[[-1,120135],38],[[-1,123156],"\n"],[[-1,120136],"\n"],[[-1,123155],1],[[-1,122933],10],[[-1,122913],12],[[-1,122923],9],[[-1,122950],16],[[-1,123154],19],[[-1,122900],4],[[-1,123135],2],[[-1,122895],1],[[-1,122877],10],[[-1,122893],1],[[-1,123133],37],[[-1,122889],2],[[-1,122865],7],[[-1,122887],10],[[-1,122856],5],[[-1,123096],23],[[-1,122851],1],[[-1,123073],92],[[-1,122848],13],[[-1,122814],7],[[-1,122835],20],[[-1,122981],29],[[-1,131241],1],[[-1,131279],3],[[-1,131337],4],[[-1,131409],2],[[-1,131414],4],[[-1,131425],10],[[-1,131439],1],[[-1,131448],1],[[-1,214819],1],[[-1,215538],1],[[-1,215537],"\n"],[[-1,7177],"#"],[[-1,120935],"# Making CRDTs fast"],[[-1,3099],"\n\n"],[[-1,3097],926],[[-1,215534],4],[[-1,215522],1],[[-1,215515],3],[[-1,123839],5],[[-1,123845],3],[[-1,123858],12],[[-1,215512],9],[[-1,175036],9],[[-1,215503],2],[[-1,215501],"So as "],[[-1,215481],1],[[-1,215495],"you may "],[[-1,215485],"know"],[[-1,215480],2],[[-1,174686],46],[[-1,215478],1],[[-1,215477],", I've been "],[[-1,215451],"getting interested in CRDT"],[[-1,215423],"s lately."],[[-1,1230]," "],[[-1,1796],1],[[-1,1795],"For the uninitiated, CRDTs [(Conflict-Free Replicated Data types)](https://en.wikipedia.org/wiki/Conflict-free_replicated_data_type) are fancy programming tools which let multiple users edit the same data at the same time. They let you work locally with no lag. (You don't even have to be online). And when you do sync up with other users & devices, everything just magically syncs up and becomes eventually consistent. The best part of CRDTs is that they can do all that without even needing a centralized computer in the cloud to monitor and control everything."],[[-1,1798],"\n"],[[-1,2040],"\n"],[[-1,897],"I want Google Docs without google. I want my apps to seamlessly share data between all my devices, without me needing to rely on some [flakey startup](https://ourincrediblejourney.tumblr.com/)'s servers to still be around in another decade. I think they're the [future of collaborative editing](https://josephg.com/blog/crdts-are-the-future/). And maybe the future of all software - but I'm not ready to talk about that yet."],[[-1,1138],240],[[-1,2039],240],[[-1,2042],1],[[-1,2161],118],[[-1,2163],1],[[-1,2165],1],[[-1,2167],1],[[-1,2170],3],[[-1,175100],21],[[-1,127741],1],[[-1,175079],31],[[-1,127740],62],[[-1,120916],14],[[-1,127678],1],[[-1,127656],59],[[-1,127677],15],[[-1,127660],3],[[-1,127662],1],[[-1,175048],1],[[-1,1222],1],[[-1,1208],1],[[-1,1209],"\n"],[[-1,1221],"\nBut "],[[-1,1215],"m"],[[-1,215414],2],[[-1,215412],"ost "],[[-1,215406],"CRDTs "],[[-1,127590],"you read about in academic papers "],[[-1,127597],6],[[-1,215400],"are "],[[-1,214816],"crazy"],[[-1,215396],5],[[-1,215391]," slow"],[[-1,1213],". "],[[-1,1210],"A"],[[-1,121610],3],[[-1,215386],5],[[-1,175047],1],[[-1,107243],1],[[-1,107242]," "],[[-1,175046],4],[[-1,123960],2],[[-1,123958],"decade"],[[-1,107241]," "],[[-1,107228],"ago"],[[-1,107240],6],[[-1,120900]," I"],[[-1,107225]," decided to"],[[-1,120873]," stop"],[[-1,120866],3],[[-1,120863]," reading "],[[-1,120844],"academic "],[[-1,120854],"papers and"],[[-1,120868],1],[[-1,120898]," "],[[-1,120889],"dismissed them"],[[-1,120089],". I"],[[-1,120875],1],[[-1,120874]," "],[[-1,120897],"assumed"],[[-1,175042],5],[[-1,215381],2],[[-1,123952],3],[[-1,123948],5],[[-1,215379],8],[[-1,215351],5],[[-1,123941],3],[[-1,215346],7],[[-1,214810]," "],[[-1,120085],"CRDTs had"],[[-1,214809],9],[[-1,215339],1],[[-1,215334],3],[[-1,215331]," some inherent problem"],[[-1,120833],". A GUID "],[[-1,120822],"for every character? "],[[-1,119993],"N"],[[-1,105723],"o"],[[-1,119992],1],[[-1,119991],"ught but"],[[-1,119983],1],[[-1,120075],4],[[-1,120071]," "],[[-1,120069],"m"],[[-1,120801],1],[[-1,120800],"adness"],[[-1,120068]," comes from those "],[[-1,119980],"strange lands"],[[-1,120042],5],[[-1,120050],7],[[-1,120794],"!"],[[-1,120824],1],[[-1,215295],6],[[-1,123937],55],[[-1,123880],6],[[-1,123882],1],[[-1,215289],15],[[-1,215268],8],[[-1,214799]," "],[[-1,204869],"But"],[[-1,123874]," - and"],[[-1,204866]," this is"],[[-1,214151],3],[[-1,214148]," a"],[[-1,214171],5],[[-1,214164],1],[[-1,214163],"wkward"],[[-1,123868]," to admit"],[[-1,214155]," -"],[[-1,214166],1],[[-1,214798],5],[[-1,215260],9],[[-1,215244],31],[[-1,215213]," "],[[-1,107211],"I think "],[[-1,175027],8],[[-1,215212],"I"],[[-1,214792],"'ve been"],[[-1,215211],4],[[-1,215207]," making the same mistake"],[[-1,215183],1],[[-1,215182]," "],[[-1,175017],"as "],[[-1,215181],3],[[-1,215178],"those researchers"],[[-1,131217],"."],[[-1,204857],1],[[-1,215161],1],[[-1,215160]," I was "],[[-1,215143],"reading papers"],[[-1,120037]," "],[[-1,120034],"which described"],[[-1,120036],1],[[-1,215129],7],[[-1,215118],7],[[-1,215111]," "],[[-1,215106],"the *"],[[-1,21695],"b"],[[-1,21690],"e"],[[-1,21687],"h"],[[-1,21684],"a"],[[-1,21681],"v"],[[-1,21678],"i"],[[-1,21675],"o"],[[-1,21672],"u"],[[-1,21669],"r"],[[-1,21725],9],[[-1,21755],1],[[-1,21750],1],[[-1,21747],1],[[-1,21744],1],[[-1,21741],1],[[-1,21738],1],[[-1,21735],1],[[-1,21732],1],[[-1,21729],1],[[-1,215101],9],[[-1,215092],"*"],[[-1,214146]," of different "],[[-1,120001],"systems"],[[-1,214132],10],[[-1,120014],". And I"],[[-1,215091],4],[[-1,215087]," ass"],[[-1,215081],"um"],[[-1,120004],"ed"],[[-1,215079],3],[[-1,215076]," "],[[-1,213906],"that meant "],[[-1,214782],"we knew"],[[-1,120789]," how "],[[-1,120770],"the best way to "],[[-1,120784],13],[[-1,214775],1],[[-1,214121],15],[[-1,175013],25],[[-1,214106],4],[[-1,214097],12],[[-1,214085],"*"],[[-1,120752],"implement"],[[-1,214084],15],[[-1,214069],"*"],[[-1,174987]," "],[[-1,174986],3],[[-1,174983],"those"],[[-1,174931]," systems"],[[-1,174978],8],[[-1,214068],10],[[-1,214058],"."],[[-1,214102],3],[[-1,214758],39],[[-1,214770],11],[[-1,214774],3],[[-1,215075],68],[[-1,214719],34],[[-1,214683],1],[[-1,214682]," "],[[-1,121603],"And "],[[-1,121598],"w"],[[-1,174922],1],[[-1,174921],"ow, I was"],[[-1,174938],6],[[-1,174969],10],[[-1,174953],12],[[-1,174957],4],[[-1,214681],4],[[-1,214675],18],[[-1,214657]," super wrong."],[[-1,214056],1],[[-1,214020],9],[[-1,214049],23],[[-1,214010],28],[[-1,213959],1],[[-1,213953],1],[[-1,213958],5],[[-1,213982],23],[[-1,213952],7],[[-1,213931],12],[[-1,213933],1],[[-1,213945],7],[[-1,213914],7],[[-1,213938],5],[[-1,214026],5],[[-1,214055],5],[[-1,214640],"\n"],[[-1,1205],3],[[-1,214639],"\nHow wrong?"],[[-1,204856]," "],[[-1,174909],"Well"],[[-1,204855],11],[[-1,204844],"."],[[-1,214624]," "],[[-1,204842],"Running"],[[-1,214614],6],[[-1,214608]," [this editing trace"],[[-1,214584],"]("],[[-1,174862],"https://github.com/automerge/automerge-perf/"],[[-1,214582],"), "],[[-1,174905],"["],[[-1,214588],2],[[-1,214623],"Automerge"],[[-1,174904],"](https://github.com/automerge/automerge/)"],[[-1,214579]," (a popular CRDT"],[[-1,213895],", written by [a popular researcher"],[[-1,127554],17],[[-1,127556],1],[[-1,213861],"]("],[[-1,212523],"https://martin.kleppmann.com/"],[[-1,213859],")"],[[-1,214563],") takes "],[[-1,173844],"nearly 5 minutes to run. "],[[-1,204834],3],[[-1,214555],11],[[-1,174818],7],[[-1,214544],2],[[-1,214467],"I have a "],[[-1,19037],"["],[[-1,214458],"new implementation"],[[-1,19036],"](https://github.com/josephg/diamond-types)"],[[-1,214440]," that can "],[[-1,214377],"process"],[[-1,214430],3],[[-1,214427]," the same editing trace in "],[[-1,18981],"5"],[[-1,18978],"6"],[[-1,18980],1],[[-1,18984],2],[[-1,18991],1],[[-1,18986],1],[[-1,18988],1],[[-1,18990],1],[[-1,214392],3],[[-1,174805],2],[[-1,174809],2],[[-1,214358],2],[[-1,214356]," "],[[-1,173815],"milli"],[[-1,173810],1],[[-1,214355],"seconds"],[[-1,173808],". "],[[-1,21662],"Thats "],[[-1,173806],"0."],[[-1,173802],"0"],[[-1,18971],"56"],[[-1,18975],2],[[-1,173801],2],[[-1,173799]," seconds"],[[-1,21650],", which is"],[[-1,18968]," over"],[[-1,21640],1],[[-1,21638],1],[[-1,21655],1],[[-1,173804],1],[[-1,214348],2],[[-1,21653],1],[[-1,35496],5],[[-1,136645],3],[[-1,214346],5],[[-1,204831],5],[[-1,214341],1],[[-1,213857],1],[[-1,214340],6],[[-1,214321],25],[[-1,213855],3],[[-1,174801],6],[[-1,174795]," "],[[-1,174793],"5000x faster"],[[-1,213852],1],[[-1,204818],1],[[-1,204815],1],[[-1,204817],1],[[-1,204825],1],[[-1,204821],1],[[-1,204823],1],[[-1,213851],8],[[-1,214296],"."],[[-1,214291]," It"],[[-1,31176],"'"],[[-1,214288],"s the largest speed up I've ever gotten from optimization work - and "],[[-1,214199],"I'm utterly delighted by it."],[[-1,214219],15],[[-1,214201],1],[[-1,214204],2],[[-1,214295],2],[[-1,214334],2],[[-1,214323],1],[[-1,214332],4],[[-1,214326],2],[[-1,214328],1],[[-1,214364],3],[[-1,214389],11],[[-1,214370],5],[[-1,214400],4],[[-1,214542],1],[[-1,214536],1],[[-1,214505],11],[[-1,214492],20],[[-1,214494],1],[[-1,214535],30],[[-1,214472],4],[[-1,214541],4],[[-1,214626],1],[[-1,214628],1],[[-1,214644],2],[[-1,214685],1],[[-1,215007],20],[[-1,214974],1],[[-1,214987],13],[[-1,214973],32],[[-1,215083],1],[[-1,215110],2],[[-1,215122],2],[[-1,215153],9],[[-1,215251],6],[[-1,215274],3],[[-1,215309],7],[[-1,215338],2],[[-1,215371],19],[[-1,215408],1],[[-1,215425],1],[[-1,215465],13],[[-1,215487],1],[[-1,215521],3],[[-1,215530],4],[[-1,215536],1],[[-1,216045],1],[[-1,216135],4],[[-1,216182],1],[[-1,216195],3],[[-1,216241],1],[[-1,216519],51],[[-1,216529],9],[[-1,216544],14],[[-1,216575],4],[[-1,216591],15],[[-1,216663],15],[[-1,216696],1],[[-1,216793],24],[[-1,216763],26],[[-1,216735],15],[[-1,216695],2],[[-1,216737],1],[[-1,216769],5],[[-1,216795],1],[[-1,216873],20],[[-1,217082],23],[[-1,217051],55],[[-1,216988],20],[[-1,216964],3],[[-1,216968],2],[[-1,216996],4],[[-1,217059],7],[[-1,217110],4],[[-1,217152],1],[[-1,217180],1],[[-1,217182],1],[[-1,217220],4],[[-1,217245],3],[[-1,217290],2],[[-1,217340],2],[[-1,217365],8],[[-1,217395],4],[[-1,217389],18],[[-1,217391],1],[[-1,217470],24],[[-1,217539],15],[[-1,217632],2],[[-1,217647],1],[[-1,217654],3],[[-1,217704],10],[[-1,217688],9],[[-1,217694],3],[[-1,217783],1],[[-1,217754],2],[[-1,217866],9],[[-1,218305],1],[[-1,218293],103],[[-1,218304],10],[[-1,218645],2],[[-1,218676],2],[[-1,218792],2],[[-1,218823],5],[[-1,218830],1],[[-1,218838],6],[[-1,218848],1],[[-1,218862],1],[[-1,218941],9],[[-1,218950],9],[[-1,218932],22],[[-1,218906],8],[[-1,218910],2],[[-1,219257],22],[[-1,219233],41],[[-1,219183],22],[[-1,219192],8],[[-1,219235],1],[[-1,219266],8],[[-1,219271],4],[[-1,219442],1],[[-1,219557],1],[[-1,219638],1],[[-1,219793],1],[[-1,219861],1],[[-1,219870],3],[[-1,219880],2],[[-1,220062],48],[[-1,220010],81],[[-1,219925],10],[[-1,219905],19],[[-1,219882],1],[[-1,219886],2],[[-1,219915],5],[[-1,219929],2],[[-1,220014],2],[[-1,220169],1],[[-1,220128],9],[[-1,220150],21],[[-1,220117],17],[[-1,220098],36],[[-1,220100],1],[[-1,220168],17],[[-1,220183],1],[[-1,220280],1],[[-1,220354],3],[[-1,220379],21],[[-1,220448],"\n"],[[-1,213840],"\nLets talk about why automerge is"],[[-1,127537]," currently"],[[-1,213807]," slow, and "],[[-1,174781],"I'll take you through"],[[-1,174747]," all the steps "],[[-1,136642],7],[[-1,174713],"to"],[[-1,127527],"ward"],[[-1,174711]," mak"],[[-1,136633],"ing"],[[-1,174707],1],[[-1,174706]," it super fast."],[[-1,174732],18],[[-1,174752],3],[[-1,174758],3],[[-1,174760],1],[[-1,213796],7],[[-1,213783],8],[[-1,213769],17],[[-1,213752],"\n\n"],[[-1,173790],"Wait, no."],[[-1,173780]," First"],[[-1,174690],3],[[-1,213750],14],[[-1,213736]," "],[[-1,127522],"we need to"],[[-1,127512],1],[[-1,213735],4],[[-1,213731]," start with"],[[-1,174687],":"],[[-1,213720],"\n"],[[-1,450],"\n"],[[-1,213719],"\n##"],[[-1,7176],"#"],[[-1,213716]," What"],[[-1,213711],1],[[-1,213708],8],[[-1,213700]," "],[[-1,173769],9],[[-1,213699],"is"],[[-1,173774],3],[[-1,213697]," "],[[-1,213696],3],[[-1,213693],"automerge"],[[-1,121595],"?"],[[-1,213679],7],[[-1,213684],1],[[-1,213682],"\n\n"],[[-1,213672],"Automerge is "],[[-1,213578],"a library to help you do "],[[-1,213548],"collaborative editing. It"],[[-1,31175],"'"],[[-1,213523],"s "],[[-1,213509],"wr"],[[-1,213505],"itten by Martin Kleppmann, who's a little bit famous from his "],[[-1,213435],"book and "],[[-1,174640],"["],[[-1,213426],"excellent talks"],[[-1,174639],"](https://martin.kleppmann.com/2020/07/06/crdt-hard-parts-hydra.html)"],[[-1,213411],". "],[[-1,31172],"Automerge is"],[[-1,213409],2],[[-1,31174],1],[[-1,213407],1],[[-1,213406]," "],[[-1,213443],4],[[-1,213507],1],[[-1,213521],"based on"],[[-1,213405]," a"],[[-1,213391],"n algorithm "],[[-1,107189],3],[[-1,107126],24],[[-1,107142],15],[[-1,107170],24],[[-1,107186],15],[[-1,107203],7],[[-1,213379],"called "],[[-1,213394],1],[[-1,213403],6],[[-1,213513],1],[[-1,213512],"RGA"],[[-1,213372],", which "],[[-1,213362],"you can read about in a"],[[-1,107095],"n academic"],[[-1,213339]," paper if you're into that sort of thing."],[[-1,96324],"\n"],[[-1,48806],2],[[-1,48803],"\n"],[[-1,48810],2],[[-1,96323],1],[[-1,96304],"Martin explains "],[[-1,96278],"a"],[[-1,96288],1],[[-1,96287],"utomerge"],[[-1,96277]," far better than I "],[[-1,95968],2],[[-1,95970],1],[[-1,96258],"will in this talk"],[[-1,95964]," from 2020"],[[-1,96241],":\n\n<iframe"],[[-1,7226]," "],[[-1,7200],"class=\""],[[-1,7187],"youtube"],[[-1,7179],1],[[-1,7180],"\""],[[-1,7193],3],[[-1,7225],9],[[-1,7208],1],[[-1,7203],1],[[-1,7207],4],[[-1,7216],4],[[-1,96231],1],[[-1,7230],3],[[-1,7240],4],[[-1,7246],3],[[-1,7271],12],[[-1,7236],4],[[-1,7259],12],[[-1,7247]," "],[[-1,96230],25],[[-1,96205],"src=\"https://www.youtube-nocookie.com/embed/x7drE24geUw?start=1237\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>"],[[-1,96322],17],[[-1,173760],"\n"],[[-1,173759],1],[[-1,173664],1],[[-1,173338],14],[[-1,173654],15],[[-1,173756],13],[[-1,173737],4],[[-1,173663],9],[[-1,173733],7],[[-1,173481],9],[[-1,173437],15],[[-1,173421],2],[[-1,173726],2],[[-1,173635],20],[[-1,173419],1],[[-1,173399],3],[[-1,173418],14],[[-1,173639],2],[[-1,173724],59],[[-1,173589],1],[[-1,173472],1],[[-1,173588],3],[[-1,173471],30],[[-1,173585],4],[[-1,173576],10],[[-1,173395],1],[[-1,173390],26],[[-1,173394],2],[[-1,173566],24],[[-1,173541],2],[[-1,173507],3],[[-1,173500],8],[[-1,173358],19],[[-1,173492],10],[[-1,173504],2],[[-1,173539],5],[[-1,173532],1],[[-1,173529],20],[[-1,173531],1],[[-1,173534],1],[[-1,173581],4],[[-1,173665],1],[[-1,173615],26],[[-1,173743],3],[[-1,173758],1],[[-1,213298],1],[[-1,213297],"\n"],[[-1,173324],1],[[-1,173319],2],[[-1,173323],2],[[-1,213180],"Automerge (and "],[[-1,173316],"Yjs and other"],[[-1,173300],1],[[-1,173303],1],[[-1,213165],5],[[-1,213160]," CRDTs"],[[-1,213152],") think of a"],[[-1,213134]," shared document as a list of characters. "],[[-1,213080],"Each"],[[-1,213076],9],[[-1,213067]," "],[[-1,213043],"character"],[[-1,213066],4],[[-1,213062]," in the document "],[[-1,213014],"gets a unique ID"],[[-1,212899],", and "],[[-1,212838],"whenever "],[[-1,127509],"you "],[[-1,212821],"insert "],[[-1,127504],"into th"],[[-1,127489],"e document"],[[-1,127497],1],[[-1,127492],1],[[-1,127496],2],[[-1,212814],9],[[-1,212805],", you name"],[[-1,212794]," what you're inserting after."],[[-1,95953],"\n\nImagine I"],[[-1,212765],8],[[-1,212757]," type \"abc\""],[[-1,95938]," into an empty document."],[[-1,95940],1],[[-1,212746],1],[[-1,212745]," "],[[-1,95911],"A"],[[-1,212744],1],[[-1,95914],1],[[-1,212743],"utomerge creates 3 it"],[[-1,212716],"ems:\n\n"],[[-1,212664],"- Insert "],[[-1,48790],"*"],[[-1,48779],1],[[-1,212655],"'a'"],[[-1,48757],"*"],[[-1,212652]," id `(seph, 0)` after `ROOT`\n"],[[-1,121594],"  "],[[-1,212609],"- Insert "],[[-1,48791],"*"],[[-1,48780],1],[[-1,212600],"'b'"],[[-1,48758],"*"],[[-1,212597]," id `(seph, 1)` after `(seph, 0)`\n"],[[-1,121592],"    "],[[-1,212710],"- Inser"],[[-1,212701],"t "],[[-1,48792],"*"],[[-1,48781],1],[[-1,212699],"'"],[[-1,212562],"c"],[[-1,212622],1],[[-1,212698],1],[[-1,212697],"'"],[[-1,48759],"*"],[[-1,212696]," id "],[[-1,212682],"`"],[[-1,212692],"(seph, "],[[-1,212560],"2"],[[-1,212620],1],[[-1,212685],1],[[-1,212684],")`"],[[-1,212681]," after "],[[-1,212665],"`"],[[-1,212618],"(seph, "],[[-1,212558],"1"],[[-1,212611],1],[[-1,212610],")"],[[-1,212674],5],[[-1,212667],"`"],[[-1,212557],"\n"],[[-1,212037],"\n"],[[-1,173297],"We can draw this as a tree!"],[[-1,174543],10],[[-1,174569],25],[[-1,210218],12],[[-1,210204],5],[[-1,210191],10],[[-1,210199],7],[[-1,210206],1],[[-1,212036],48],[[-1,211988],"\n"],[[-1,84259],"\n"],[[-1,46018],"!"],[[-1,46007],"["],[[-1,45885],"tree"],[[-1,45879]," with \"abc\" inserts"],[[-1,45881],1],[[-1,45996],"]"],[[-1,45985],"("],[[-1,49141],9],[[-1,49132],"automerge1.drawio.svg"],[[-1,45963],")"],[[-1,49111],1],[[-1,84257],23],[[-1,84258],"\n"],[[-1,211987],1],[[-1,89291],5031],[[-1,95909],6617],[[-1,211986],15],[[-1,212038],1],[[-1,212429],"\nLet"],[[-1,212421],"s say"],[[-1,211581]," Mike"],[[-1,212416],1],[[-1,212413],1],[[-1,212412]," "],[[-1,212405],"insert"],[[-1,211576],"s"],[[-1,212399]," a"],[[-1,212393],"n '"],[[-1,211585],"X"],[[-1,212390],1],[[-1,212389],"' between "],[[-1,212364],"*"],[[-1,212368],1],[[-1,212377],"a"],[[-1,212363],"*"],[[-1,212367],1],[[-1,212376]," and "],[[-1,212358],"*b"],[[-1,212369],1],[[-1,212371],1],[[-1,212361],"*"],[[-1,212356],", so "],[[-1,211574],"we"],[[-1,212351],1],[[-1,212350]," get \"a"],[[-1,212341],"Xbc\"."],[[-1,211572],1],[[-1,212336]," "],[[-1,212312],"Then we have:\n"],[[-1,212298],1],[[-1,212297],"\n"],[[-1,212163],"- Insert "],[[-1,48793],"*"],[[-1,48782],1],[[-1,212154],"'a'"],[[-1,48760],"*"],[[-1,212151]," id `(seph, 0)` after `ROOT`\n"],[[-1,121584],"  "],[[-1,212296],"- Insert "],[[-1,48794],"*"],[[-1,48783],1],[[-1,212287],"'"],[[-1,211583],"X"],[[-1,212121],1],[[-1,212286],1],[[-1,212285],"'"],[[-1,48761],"*"],[[-1,212284]," id `("],[[-1,211569],"mike, 0"],[[-1,212278],6],[[-1,212119],1],[[-1,212272],1],[[-1,212271],")` after `"],[[-1,212117],"("],[[-1,212115],"seph, 0"],[[-1,212261],4],[[-1,212118],")"],[[-1,212257],"`\n"],[[-1,121586],"  "],[[-1,212255],"- Insert "],[[-1,48795],"*"],[[-1,48784],1],[[-1,212246],"'b'"],[[-1,48762],"*"],[[-1,212243]," id `(seph, 1)` after `(seph, 0)`\n"],[[-1,121588],"  "],[[-1,121582],"  "],[[-1,212209],"- Insert "],[[-1,48796],"*"],[[-1,48785],1],[[-1,212200],"'c'"],[[-1,48763],"*"],[[-1,212197]," id `(seph, 2)` after `(seph, 1)`"],[[-1,212316],2],[[-1,212335],18],[[-1,212343],1],[[-1,212370],1],[[-1,212379],1],[[-1,212397],2],[[-1,212411],3],[[-1,212415],1],[[-1,212425],2],[[-1,212430],"\n"],[[-1,49109],"\n"],[[-1,46020],"!"],[[-1,46008],"["],[[-1,45860],"tree with \"aXbc\""],[[-1,45997],"]"],[[-1,45986],"("],[[-1,49108],9],[[-1,49099],"automerge"],[[-1,49076],"2"],[[-1,49090],1],[[-1,49089],".drawio.svg"],[[-1,45964],")"],[[-1,49078],1],[[-1,174533],"\n"],[[-1,174532],2],[[-1,84233],14],[[-1,84215],7],[[-1,84219],2],[[-1,174530],13],[[-1,212107],"\n"],[[-1,211422],"Note the '"],[[-1,173243],"X"],[[-1,211412],1],[[-1,211411],"' and 'b' both share the same parent."],[[-1,173242]," "],[[-1,173241],9],[[-1,173211],21],[[-1,173232],5],[[-1,173189],16],[[-1,173227],16],[[-1,211374],1],[[-1,211373],"This will "],[[-1,211363],10],[[-1,211353],"happen when users"],[[-1,211336],13],[[-1,211323]," type"],[[-1,84116]," concurrently"],[[-1,211318]," in the same location"],[[-1,84103]," in the document"],[[-1,84049],3],[[-1,84206],". "],[[-1,84144],"But"],[[-1,84141],1],[[-1,84139],1],[[-1,84204],8],[[-1,84196]," how do we figure out which character goes first? "],[[-1,84145],"W"],[[-1,211297],7],[[-1,211290],"e "],[[-1,84135],"could just "],[[-1,84085],"sort "],[[-1,84041],"using"],[[-1,84080],2],[[-1,84078]," their "],[[-1,84068],"agent"],[[-1,84070],1],[[-1,84124],6],[[-1,211288],19],[[-1,173170],23],[[-1,211269],21],[[-1,211248]," IDs"],[[-1,84063]," or something"],[[-1,211244],". But "],[[-1,173270],"argh,"],[[-1,121498]," "],[[-1,120741],"if "],[[-1,120736],"we do that"],[[-1,120738],1],[[-1,121497],4],[[-1,121493]," the document "],[[-1,84035],"could"],[[-1,121479],5],[[-1,121474]," end up as"],[[-1,173265],1],[[-1,121579],21],[[-1,121556],15],[[-1,121539],40],[[-1,121541],1],[[-1,121558],1],[[-1,173146],21],[[-1,173125]," "],[[-1,127389],"*"],[[-1,173124],1],[[-1,173123],"ab"],[[-1,173121],1],[[-1,173120],"c"],[[-1,120725],"X"],[[-1,127387],"*"],[[-1,173119],1],[[-1,127479],", "],[[-1,127438],"even though "],[[-1,84027],"Mike inserted *X*"],[[-1,84029],1],[[-1,127426],17],[[-1,127409]," before the "],[[-1,127393],"*"],[[-1,127397],1],[[-1,127396],"b"],[[-1,127395],1],[[-1,127394],"*"],[[-1,127477],38],[[-1,173118],"."],[[-1,120724]," That would "],[[-1,120690],"be "],[[-1,120696],"really"],[[-1,120687]," confusing"],[[-1,120712],14],[[-1,120698],"."],[[-1,127385],"\n\n"],[[-1,211238],8],[[-1,173264],9],[[-1,211230],29],[[-1,173254],8],[[-1,173245],1],[[-1,211201],79],[[-1,173115],"Automerge"],[[-1,83996]," (RGA)"],[[-1,211122],3],[[-1,211119]," solves this "],[[-1,172757],"with a "],[[-1,127169],"neat hack"],[[-1,172750],13],[[-1,172737],". It "],[[-1,211106],3],[[-1,211103],"add"],[[-1,172728],"s"],[[-1,211100],3],[[-1,211097]," a"],[[-1,211062],"n extra integer"],[[-1,211095],19],[[-1,211076]," to each item"],[[-1,211043]," call"],[[-1,211036],"ed a *sequence number*"],[[-1,173106],". "],[[-1,173020],"When"],[[-1,172727],"ever"],[[-1,173016]," you "],[[-1,172993],"insert "],[[-1,84009],"somet"],[[-1,84000],"hing"],[[-1,84004],2],[[-1,172986],8],[[-1,172978],", you set "],[[-1,173011],15],[[-1,172995],"t"],[[-1,173104],1],[[-1,173103],"he"],[[-1,172723]," new item's"],[[-1,173101]," sequence number "],[[-1,172967],"to"],[[-1,173084],2],[[-1,173082]," "],[[-1,172965],"be "],[[-1,173078],"1 bigger than the biggest sequence number you've ever seen"],[[-1,172920],":"],[[-1,172961],40],[[-1,173081],2],[[-1,210780],1],[[-1,210786],3],[[-1,211014],1],[[-1,211038],1],[[-1,211045],1],[[-1,211063],1],[[-1,212064],25],[[-1,211970],1],[[-1,211792],14],[[-1,211776],7],[[-1,211778],1],[[-1,211969],29],[[-1,211938],9],[[-1,211769],10],[[-1,211929],13],[[-1,211914],4],[[-1,211908],2],[[-1,211811],17],[[-1,211906],25],[[-1,211758],58],[[-1,211561],25],[[-1,211700],32],[[-1,211536],1],[[-1,211644],14],[[-1,211535],1],[[-1,211630],44],[[-1,211532],32],[[-1,211458],35],[[-1,211483],1],[[-1,211475],16],[[-1,211482],5],[[-1,211500],16],[[-1,211664],19],[[-1,211668],2],[[-1,211794],1],[[-1,211881],53],[[-1,211817],2],[[-1,211828],8],[[-1,211910],1],[[-1,211916],1],[[-1,211940],1],[[-1,212091],26],[[-1,212106],14],[[-1,212108],1],[[-1,172918],12],[[-1,172793],9],[[-1,172906],26],[[-1,172878],9],[[-1,172857],18],[[-1,172763],3],[[-1,172774],9],[[-1,172783],8],[[-1,172820],27],[[-1,172839],18],[[-1,172859],1],[[-1,172869],9],[[-1,172880],1],[[-1,172919],"\n"],[[-1,211013],"\n- Insert "],[[-1,48797],"*"],[[-1,48786],1],[[-1,211003],"'a'"],[[-1,48764],"*"],[[-1,211000]," id `(seph, 0)` after `ROOT`"],[[-1,210833],", seq: "],[[-1,210824],"*"],[[-1,210826],"0*"],[[-1,210972],"\n"],[[-1,121426],"  "],[[-1,210971],"- Insert "],[[-1,48798],"*"],[[-1,48787],1],[[-1,210962],"'X'"],[[-1,48765],"*"],[[-1,210959]," id `(mike, 0)` after `(seph, 0)`"],[[-1,210823],", seq: *"],[[-1,210788],"3"],[[-1,210815],1],[[-1,210814],"*"],[[-1,210926],"\n"],[[-1,121428],"  "],[[-1,210925],"- Insert "],[[-1,48799],"*"],[[-1,48788],1],[[-1,210916],"'b'"],[[-1,48766],"*"],[[-1,210913]," id `(seph, 1)` after `(seph, 0)`"],[[-1,210813],", seq: *"],[[-1,210792],"1"],[[-1,210805],1],[[-1,210804],"*"],[[-1,210880],"\n"],[[-1,121430],"  "],[[-1,121424],"  "],[[-1,210879],"- Insert "],[[-1,48800],"*"],[[-1,48789],1],[[-1,210870],"'c'"],[[-1,48767],"*"],[[-1,210867]," id `(seph, 2)` after `(seph, 1)`"],[[-1,210803],", seq: *"],[[-1,210790],"2"],[[-1,210795],1],[[-1,210794],"*"],[[-1,172643],"\n\n"],[[-1,31159],"This is"],[[-1,121462],3],[[-1,121459]," the algorithmic version of "],[[-1,172641],2],[[-1,172552],"\""],[[-1,172639],"Wow I saw a sequence number, and it was *this big!*"],[[-1,172588],1],[[-1,172551],"\""],[[-1,172587]," "],[[-1,172550],"\""],[[-1,172582],"Yeah? Mine is *even big"],[[-1,172557],"ger!*"],[[-1,172549],"\""],[[-1,172548],1],[[-1,83689],"\n\n"],[[-1,83988],1],[[-1,83987],"The rule is that "],[[-1,83951],"children are sorted first based on the"],[[-1,83905],"ir sequence numbers (b"],[[-1,83879],"igger sequence number first). "],[[-1,83759],"I"],[[-1,83791],6],[[-1,83785],"f "],[[-1,83831],3],[[-1,83828],"the sequence numbers match,"],[[-1,83758]," "],[[-1,83686],"the changes"],[[-1,83757],4],[[-1,83753]," must be concurrent"],[[-1,83734],8],[[-1,83726],". In that case"],[[-1,83801]," "],[[-1,83673],"we"],[[-1,83670]," "],[[-1,83660],"can "],[[-1,83669],"sort them"],[[-1,83800],8],[[-1,83783],7],[[-1,83776]," "],[[-1,83712],"arbitrarily "],[[-1,83775],"based on their "],[[-1,83700],"agent IDs."],[[-1,83656]," (We do"],[[-1,83562]," it this way"],[[-1,83649],5],[[-1,83644]," "],[[-1,83548],"so"],[[-1,83643],8],[[-1,83621],13],[[-1,83608]," all peers "],[[-1,83593],"end up with the same"],[[-1,83546]," resulting"],[[-1,83573]," document"],[[-1,83563],"."],[[-1,83564],")"],[[-1,83597],2],[[-1,83631],9],[[-1,83635],2],[[-1,83835],2],[[-1,83849],13],[[-1,83883],2],[[-1,83907],1],[[-1,83913],3],[[-1,83960],8],[[-1,83970],9],[[-1,83990],1],[[-1,172547],6],[[-1,172559],1],[[-1,172584],1],[[-1,172586],1],[[-1,172712],1],[[-1,172703],1],[[-1,172701],51],[[-1,172647],1],[[-1,172650],2],[[-1,172702],"\n"],[[-1,127382],"\n"],[[-1,127361],8],[[-1,127203],19],[[-1,127381],15],[[-1,127366],"Yjs"],[[-1,121341]," - which we'll see more of later -"],[[-1,121405]," "],[[-1,121394],"implements a"],[[-1,121373]," CRDT called YATA"],[[-1,121307],". YATA is"],[[-1,121356],6],[[-1,121382],7],[[-1,121404],5],[[-1,127251],3],[[-1,127248]," identical"],[[-1,121420]," to "],[[-1,121408],"RGA"],[[-1,121410],1],[[-1,121412],1],[[-1,121416],3],[[-1,127183],","],[[-1,127238],1],[[-1,127237]," except that it"],[[-1,127363]," "],[[-1,127353],"solves this"],[[-1,127222]," problem"],[[-1,127342]," with a"],[[-1,121350]," slightly"],[[-1,127335]," "],[[-1,127334],1],[[-1,127333],"different"],[[-1,127324],1],[[-1,127323]," "],[[-1,127159],"hack"],[[-1,127175],5],[[-1,127180],4],[[-1,127208],5],[[-1,127322],4],[[-1,127213],"."],[[-1,107083]," But"],[[-1,127211]," "],[[-1,107078],"t"],[[-1,127210],1],[[-1,127318],7],[[-1,127311],"he difference isn't"],[[-1,107077]," really"],[[-1,127292],1],[[-1,127266],8],[[-1,127291],6],[[-1,127285]," import"],[[-1,127272],"ant"],[[-1,127256]," here"],[[-1,127268],"."],[[-1,127269],1],[[-1,127278],3],[[-1,127383],"\n"],[[-1,172711],5],[[-1,210834],1],[[-1,210494],1],[[-1,210489],49],[[-1,210493],3],[[-1,210495],1],[[-1,212556],"\n"],[[-1,210779],"Automerge"],[[-1,210252]," (RGA)"],[[-1,210770],"'s *"],[[-1,21627],"behaviour"],[[-1,21634],6],[[-1,210766],9],[[-1,210757],"* "],[[-1,21617],"is defined by this algorithm"],[[-1,210755],3],[[-1,210752],":\n\n- "],[[-1,210677],"Build the tree"],[[-1,210437],", connecting"],[[-1,210652],5],[[-1,210647]," each item to "],[[-1,31151],"i"],[[-1,31148],"t"],[[-1,31147],1],[[-1,31146],"s"],[[-1,31150],1],[[-1,210633],3],[[-1,210630]," parent"],[[-1,210623],18],[[-1,210663],"\n"],[[-1,210539],"- "],[[-1,174516],"When"],[[-1,210537],8],[[-1,210529]," an item has"],[[-1,210422]," multiple"],[[-1,210517]," children, "],[[-1,210412],"sort them"],[[-1,210403],6],[[-1,210397]," by sequence number then by "],[[-1,174511],"their "],[[-1,210369],"ID.\n"],[[-1,210364],"- The"],[[-1,174505]," resulting"],[[-1,210359]," list"],[[-1,174495]," (or "],[[-1,174488],"text document) can be made by"],[[-1,174458]," "],[[-1,174490],1],[[-1,210339],26],[[-1,210313],"flattening the tree with a depth-first"],[[-1,210264]," traversal."],[[-1,210275],2],[[-1,210271],6],[[-1,210273],1],[[-1,210352],12],[[-1,210354],1],[[-1,210365],"\n"],[[-1,210253],"\n"],[[-1,210039],"So how should you *implement* automerge? The automerge library does it in the obvious"],[[-1,209954],11],[[-1,209943]," way"],[[-1,174456],", which is to store "],[[-1,174432],"all the data as a tree"],[[-1,174436],2],[[-1,209939],". "],[[-1,172363],"("],[[-1,209937],"At least I think "],[[-1,121297],25],[[-1,121271],"so"],[[-1,209920],2],[[-1,209918]," -"],[[-1,209291]," after typing"],[[-1,209276]," \"abc\""],[[-1,209278],1],[[-1,209916]," "],[[-1,209842],"["],[[-1,209897],"this is"],[[-1,209438],1],[[-1,209433],5],[[-1,209422],4],[[-1,209424],1],[[-1,209428],2],[[-1,209437],2],[[-1,209890]," automerge"],[[-1,209878],"'s internal state"],[[-1,209841],"](https://gist.github.com/josephg/0522c4aec5021cc1dddb60e778828dbe)"],[[-1,209861],19],[[-1,209774],". "],[[-1,172541],"Uh, uhm, "],[[-1,209480],6],[[-1,209474],"I have no idea whats going on here"],[[-1,174402],4],[[-1,209440],"."],[[-1,174394]," "],[[-1,174393],1],[[-1,174329],"And "],[[-1,174324],"w"],[[-1,174392],1],[[-1,174391],"hat are all those Uint8Arrays doing all o"],[[-1,174344],"ver the place?"],[[-1,172362],1],[[-1,172386]," "],[[-1,172379],"W"],[[-1,172372],"hatever."],[[-1,21588],")"],[[-1,172364]," "],[[-1,172378],3],[[-1,172385],3],[[-1,172390],2],[[-1,172395],1],[[-1,172399],2],[[-1,172529],1],[[-1,172481],2],[[-1,172475],8],[[-1,172467],"The automerge library "],[[-1,172434],"works by building a tree of items."],[[-1,172445],10],[[-1,172479],2],[[-1,172520],37],[[-1,172528],7],[[-1,174330],1],[[-1,174323],1],[[-1,174350],3],[[-1,209772],6],[[-1,209880],1],[[-1,209915],2],[[-1,209911],13],[[-1,209913],1],[[-1,210246],18],[[-1,210181],1],[[-1,210228],9],[[-1,210180],73],[[-1,210065],2],[[-1,210061],21],[[-1,210063],1],[[-1,210107],40],[[-1,210506],11],[[-1,210656],2],[[-1,210589],9],[[-1,210574],34],[[-1,210580],5],[[-1,210654],2],[[-1,210605],15],[[-1,210662],5],[[-1,210694],16],[[-1,210747],16],[[-1,210721],15],[[-1,210702],7],[[-1,210706],2],[[-1,210731],9],[[-1,212537],14],[[-1,212494],16],[[-1,212444],13],[[-1,212478],34],[[-1,212555],4],[[-1,212549],11],[[-1,212551],1],[[-1,212669],1],[[-1,212703],1],[[-1,212722],1],[[-1,212719],1],[[-1,212721],1],[[-1,212829],4],[[-1,212847],8],[[-1,212893],12],[[-1,212858],11],[[-1,212881],15],[[-1,212860],1],[[-1,212866],5],[[-1,212910],10],[[-1,212984],8],[[-1,212940],27],[[-1,212948],6],[[-1,212976],27],[[-1,212998],1],[[-1,212995],9],[[-1,212997],1],[[-1,213034],19],[[-1,213091],10],[[-1,213140],3],[[-1,213154],1],[[-1,213188],4],[[-1,213271],26],[[-1,213202],13],[[-1,213245],43],[[-1,213273],1],[[-1,213296],5],[[-1,213280],6],[[-1,213291],10],[[-1,213364],1],[[-1,213553],4],[[-1,213659],3],[[-1,213647],26],[[-1,213620],6],[[-1,213612],33],[[-1,213614],1],[[-1,213656],9],[[-1,213710],1],[[-1,213775],3],[[-1,213789],3],[[-1,220447],1],[[-1,220446],"\n"],[[-1,174322],"\n"],[[-1,172223],"For "],[[-1,172218],"a"],[[-1,172240],16],[[-1,172343],15],[[-1,172360],7],[[-1,172347],3],[[-1,172351],2],[[-1,172353],1],[[-1,174305],48],[[-1,174253],2],[[-1,174249],4],[[-1,174230],1],[[-1,174238],6],[[-1,174245],6],[[-1,174229],1],[[-1,174227],1],[[-1,172327],1],[[-1,174207],3],[[-1,174179],2],[[-1,174202],3],[[-1,174199]," "],[[-1,174198],2],[[-1,174196],"simple benchmark"],[[-1,174204],1],[[-1,174226],2],[[-1,174251],1],[[-1,174257],2],[[-1,174321],15],[[-1,209755],1],[[-1,209744],13],[[-1,174220],12],[[-1,209731],3],[[-1,209728],", I'm"],[[-1,174177]," going to"],[[-1,174167]," "],[[-1,172321],"test"],[[-1,172214]," automerge"],[[-1,172317],3],[[-1,172314]," using"],[[-1,172325],3],[[-1,174166],3],[[-1,209723],6],[[-1,209717]," ["],[[-1,172303],"an editin"],[[-1,172292],"g trace "],[[-1,172294],1],[[-1,209715],"Mar"],[[-1,209708],"tin"],[[-1,172283]," himself made"],[[-1,127155],2],[[-1,127151],16],[[-1,127153],1],[[-1,209705],2],[[-1,209642],1],[[-1,172308],4],[[-1,209632],14],[[-1,209641],8],[[-1,209703],14],[[-1,209689],"](https://github.com/automerge/automerge-perf/)"],[[-1,209618],". "],[[-1,209605],"This is "],[[-1,120676],"a "],[[-1,120665],"character by character "],[[-1,120641],"recording"],[[-1,120674],6],[[-1,120668]," of"],[[-1,209597],10],[[-1,172269],7],[[-1,171870],4],[[-1,172262],2],[[-1,209587],14],[[-1,209573]," "],[[-1,209570],"Martin"],[[-1,174162],8],[[-1,209558]," "],[[-1,172252],"typing up"],[[-1,172242]," "],[[-1,209557],6],[[-1,172257],2],[[-1,209551],2],[[-1,174154],6],[[-1,209549],30],[[-1,209519],"an academic paper."],[[-1,209269]," There"],[[-1,174144]," aren't any"],[[-1,209263],5],[[-1,209258]," concurrent edits in this trace"],[[-1,171865],","],[[-1,209227],10],[[-1,174131],1],[[-1,174126],14],[[-1,174130],2],[[-1,209217],15],[[-1,174111],1],[[-1,209202],1],[[-1,209201]," "],[[-1,171863],"b"],[[-1,174109],1],[[-1,209200],1],[[-1,209199],"ut "],[[-1,209170],19],[[-1,174107],2],[[-1,209151],9],[[-1,208903],1],[[-1,174104],"u"],[[-1,208902],1],[[-1,208901],"sers"],[[-1,174103]," almost never"],[[-1,174010]," actually"],[[-1,174090],1],[[-1,208897]," "],[[-1,174087],"put their cursors a"],[[-1,174064],"t exactly the same place and "],[[-1,174035],6],[[-1,174068],2],[[-1,208888],13],[[-1,208875],"typ"],[[-1,173995],"e"],[[-1,172202]," any"],[[-1,172192],"way"],[[-1,127134],", so I'm no"],[[-1,127119],"t too worried"],[[-1,120632]," about that"],[[-1,127123],2],[[-1,172198],3],[[-1,208872],3],[[-1,174000],"."],[[-1,173994]," "],[[-1,173993],4],[[-1,173989],"I'm"],[[-1,171862]," also"],[[-1,172187]," only"],[[-1,173986],5],[[-1,173981]," counting the time"],[[-1,127105]," taken to"],[[-1,127096],1],[[-1,173963],5],[[-1,173958]," apply"],[[-1,126894],3],[[-1,173952],3],[[-1,173949]," this trace *locally*"],[[-1,171856],", which"],[[-1,171848]," isn't"],[[-1,173928],5],[[-1,173923]," ideal"],[[-1,173917],1],[[-1,173916]," but "],[[-1,173863],"i"],[[-1,173852],"t'll do."],[[-1,172182]," Kevin Jahns ("],[[-1,172168],4],[[-1,172164],"Yjs"],[[-1,120621],"'s"],[[-1,172161]," author) has a much "],[[-1,172134],"more "],[[-1,172101],"["],[[-1,172129],"extensive benchmarking suite"],[[-1,172100]," here](https://github.com/dmonad/crdt-benchmarks)"],[[-1,171839]," if you're into that sort of thing"],[[-1,172051],". All "],[[-1,171801],"the"],[[-1,171804],2],[[-1,172045],3],[[-1,172042]," benchmarks here are done "],[[-1,172016],10],[[-1,172004],8],[[-1,171996],"on my "],[[-1,171986],"chonky"],[[-1,171980],6],[[-1,171974]," ryzen 5800x workstation"],[[-1,171945],", with "],[[-1,171938],6],[[-1,171932],"Nodejs "],[[-1,32458],"v"],[[-1,32460],1],[[-1,171925],"16.1 "],[[-1,171919],"and rust"],[[-1,171911],1],[[-1,171910]," "],[[-1,32454],1],[[-1,32457],1],[[-1,171909],"1.52 when that"],[[-1,171795]," becomes"],[[-1,171895],1],[[-1,171894]," appropriate. "],[[-1,171798],"("],[[-1,171880],"Spoilers!"],[[-1,171797],")"],[[-1,171769],"\n\n"],[[-1,171746],"The editing trace has 2"],[[-1,83535],"6"],[[-1,171723],1],[[-1,171722],"0"],[[-1,171719]," 000 edits, and the final document size is about 100"],[[-1,171662]," "],[[-1,171660],"000 characters"],[[-1,171667],1],[[-1,171664],1],[[-1,171666],1],[[-1,171665],"."],[[-1,171640],"\n\n"],[[-1,171643],1],[[-1,171642],"A"],[[-1,171721],1],[[-1,171748],1],[[-1,171767],18],[[-1,171950],1],[[-1,171990],2],[[-1,172006],1],[[-1,172141],6],[[-1,173856],2],[[-1,173862],3],[[-1,173867],3],[[-1,173879],11],[[-1,173911],31],[[-1,174028],18],[[-1,208869],43],[[-1,208825],2],[[-1,171787],8],[[-1,171778],1],[[-1,208896],7],[[-1,209188],17],[[-1,209196],4],[[-1,209414],1],[[-1,209141],1],[[-1,209140],"s I said"],[[-1,171777]," above"],[[-1,209132],7],[[-1,209125],", automerge takes a little under 5 minutes to process this"],[[-1,209067],8],[[-1,209059]," trace"],[[-1,209051],"."],[[-1,48156]," Thats "],[[-1,48142],"just shy of 900 edits per se"],[[-1,48110],"cond, which is "],[[-1,48081],"probably fine. But"],[[-1,48095],13],[[-1,48114],2],[[-1,48149],6],[[-1,188185],4],[[-1,188181]," "],[[-1,171636],"by the time it"],[[-1,31145],"'"],[[-1,171622],"s don"],[[-1,171615],"e, automerge "],[[-1,48061],"is using"],[[-1,171602],4],[[-1,171617],1],[[-1,188180],18],[[-1,188162]," 880"],[[-1,171771]," "],[[-1,188158],"MB"],[[-1,188152]," of RAM."],[[-1,171598]," "],[[-1,171588],"Whoa! That"],[[-1,105726],"'"],[[-1,171578],"s 10kb "],[[-1,171569],"of ram *per key press*."],[[-1,32550]," "],[[-1,32523],"At peak, "],[[-1,22913],"automerge"],[[-1,22935],2],[[-1,22931],7],[[-1,22924]," was using"],[[-1,22933],1],[[-1,22956],6],[[-1,32501],13],[[-1,32467],1],[[-1,22967],4],[[-1,22947],10],[[-1,22937]," "],[[-1,22963],5],[[-1,32466],6],[[-1,32488],6],[[-1,32482],"2.6 GB of RAM"],[[-1,22949],"!"],[[-1,32469],1],[[-1,32514],11],[[-1,32549],25],[[-1,48177],2],[[-1,48170],11],[[-1,48175],4],[[-1,171571],1],[[-1,171597],3],[[-1,171590],1],[[-1,171592],1],[[-1,171594],1],[[-1,188140],45],[[-1,188144],"\n"],[[-1,105540],"\n"],[[-1,105358],"To get a sense of how "],[[-1,99764],"much overhead there"],[[-1,105331],16],[[-1,105315]," is, "],[[-1,83533],"I'"],[[-1,83524],"ll compare"],[[-1,83531],1],[[-1,105310],6],[[-1,105336],4],[[-1,105372],13],[[-1,105380],7],[[-1,105539],10],[[-1,83528],3],[[-1,105301],1],[[-1,105529],3],[[-1,105526]," "],[[-1,105243],"this "],[[-1,105248],4],[[-1,105525],2],[[-1,105300],1],[[-1,105523],6],[[-1,105517],"to "],[[-1,22904],"["],[[-1,105514],"a "],[[-1,99593],1],[[-1,105512],"baseline"],[[-1,22903]," benchmark](https://gist.github.com/josephg/13efc1444660c07870fcbd0b3e917638#file-js_baseline-js)"],[[-1,99497],10],[[-1,99592],95],[[-1,105238],10],[[-1,105504]," where"],[[-1,105498],1],[[-1,99896],6],[[-1,99888],7],[[-1,99877],6],[[-1,99858],11],[[-1,99845],50],[[-1,99795]," we just"],[[-1,99847],1],[[-1,99871],12],[[-1,99881],2],[[-1,99890],1],[[-1,105497],22],[[-1,105475]," "],[[-1,105396],"splic"],[[-1,99784],"e all the"],[[-1,83513]," edits"],[[-1,99775],8],[[-1,105391],3],[[-1,105474],7],[[-1,105467]," directly "],[[-1,105387],"into "],[[-1,105457],3],[[-1,105454],"a javascript string"],[[-1,99767],"."],[[-1,99742]," This "],[[-1,99711],"throws away"],[[-1,99700],4],[[-1,99696]," "],[[-1,22805],"all the"],[[-1,99695],4],[[-1,99621],5],[[-1,99616]," "],[[-1,99691],"inf"],[[-1,99680],"ormation we need "],[[-1,99614],"to"],[[-1,83505]," do"],[[-1,99612],5],[[-1,99663],3],[[-1,99660]," "],[[-1,99657],"collabor"],[[-1,99643],"ative editing"],[[-1,99607],5],[[-1,99630],", but it"],[[-1,99649],3],[[-1,99659],1],[[-1,99688],4],[[-1,99736],4],[[-1,99730],8],[[-1,99718],6],[[-1,99722],2],[[-1,99732],1],[[-1,105227],7],[[-1,105175]," gives us a se"],[[-1,105153],"nse of how fast javascript "],[[-1,22797],"is ca"],[[-1,22790],"pable of going"],[[-1,22792],1],[[-1,99601],3],[[-1,105126],52],[[-1,105074],"."],[[-1,105071]," "],[[-1,99481],"It turns out "],[[-1,99467],"j"],[[-1,99596],1],[[-1,105064],3],[[-1,105059],2],[[-1,105028],1],[[-1,105027],"avascript runni"],[[-1,105008],"ng on "],[[-1,104999],"V"],[[-1,105002],1],[[-1,105001],"8"],[[-1,105012],2],[[-1,105047],4],[[-1,105057],10],[[-1,105043]," is"],[[-1,105040],5],[[-1,105035]," "],[[-1,99465],"*"],[[-1,105034],"fast"],[[-1,99464],"*"],[[-1,99594],":"],[[-1,48511],"\n"],[[-1,48510],1],[[-1,48509],"\n| Test                              | Time taken | RAM usage |\n|:--------------------------        | ----------:| ---------:|\n| "],[[-1,48190],"**"],[[-1,48380],"automerge (v1.0.0-preview2)"],[[-1,48188],"**"],[[-1,48353],"  "],[[-1,48351],4],[[-1,48347]," |  291s      | 880 MB    |"],[[-1,48320],67],[[-1,48253],"\n| "],[[-1,20348],"*"],[[-1,21582],"P"],[[-1,21579],"l"],[[-1,21576],"a"],[[-1,21573],"i"],[[-1,21570],"n"],[[-1,21567]," "],[[-1,21564],"s"],[[-1,21561],"t"],[[-1,21558],"r"],[[-1,21555],"i"],[[-1,21552],"n"],[[-1,21549],"g"],[[-1,21546]," "],[[-1,21543],"e"],[[-1,21540],"d"],[[-1,21537],"i"],[[-1,21534],"t"],[[-1,21531],"s"],[[-1,21528]," "],[[-1,21525],"i"],[[-1,21522],"n"],[[-1,21519]," "],[[-1,21516],"J"],[[-1,21513],"S"],[[-1,20345],"*"],[[-1,48250],26],[[-1,48224],"        | 0.61s      | 0.1 MB    |"],[[-1,105030],1],[[-1,105061],1],[[-1,105070],3],[[-1,105072],1],[[-1,105159],3],[[-1,105161],1],[[-1,105220],4],[[-1,105206],18],[[-1,105186],10],[[-1,105188],1],[[-1,105216],1],[[-1,105211],2],[[-1,105215],2],[[-1,105254],3],[[-1,105434],27],[[-1,105405],7],[[-1,105407],1],[[-1,105435],1],[[-1,105298],1],[[-1,105258],1],[[-1,105297],38],[[-1,105541],1],[[-1,188143],1],[[-1,171528],23],[[-1,126878],14],[[-1,127084],14],[[-1,171505],3],[[-1,126864],20],[[-1,127070],20],[[-1,126919],11],[[-1,171502],20],[[-1,126952],33],[[-1,171481],9],[[-1,171530],1],[[-1,171545],14],[[-1,188156],2],[[-1,209050],21],[[-1,209025],19],[[-1,209004],31],[[-1,208942],21],[[-1,208823],5],[[-1,171471],6],[[-1,171463],2],[[-1,126842],20],[[-1,126820],11],[[-1,126798],13],[[-1,126783],10],[[-1,126785],1],[[-1,126809],4],[[-1,126804],5],[[-1,126822],1],[[-1,127048],20],[[-1,126957],1],[[-1,127026],15],[[-1,127003],8],[[-1,126885],4],[[-1,126880],1],[[-1,126890],4],[[-1,126995],4],[[-1,126901],6],[[-1,126903],1],[[-1,126991],31],[[-1,127010],5],[[-1,127028],1],[[-1,171461],2],[[-1,171444],6],[[-1,127091],4],[[-1,127086],1],[[-1,171438],31],[[-1,171405],5],[[-1,171459],14],[[-1,171465],1],[[-1,208818],1],[[-1,208807],19],[[-1,208817],8],[[-1,208788],10],[[-1,188093],2],[[-1,188080],18],[[-1,188091],10],[[-1,208778],1],[[-1,208809],1],[[-1,208964],14],[[-1,208946],3],[[-1,208950],2],[[-1,208973],9],[[-1,209006],1],[[-1,209029],2],[[-1,209053],1],[[-1,209388],3],[[-1,209384],1],[[-1,209413],9],[[-1,209397],9],[[-1,209404],6],[[-1,209499],17],[[-1,209383],1],[[-1,209378],2],[[-1,209382],4],[[-1,209376],1],[[-1,208718],19],[[-1,209375],17],[[-1,189602],5],[[-1,189592],5],[[-1,189522],2],[[-1,189597],4],[[-1,209358],1],[[-1,189575],1],[[-1,104682],1],[[-1,189574],40],[[-1,162386],1],[[-1,189534],12],[[-1,162376],1],[[-1,189520],2],[[-1,209333],9],[[-1,208697],19],[[-1,208699],1],[[-1,209324],15],[[-1,189587],11],[[-1,209309],1],[[-1,208777],2],[[-1,105544],1],[[-1,105542],1],[[-1,99434],27],[[-1,208775],26],[[-1,105543],1],[[-1,98990],1],[[-1,105545],1],[[-1,208749],3],[[-1,208738],3],[[-1,208746],5],[[-1,208658],6],[[-1,208741],1],[[-1,189518],4],[[-1,171400],1],[[-1,189514],8],[[-1,208740],1],[[-1,188256],62],[[-1,209357],2],[[-1,208725],3],[[-1,208733],8],[[-1,209307],9],[[-1,209355],8],[[-1,208921],17],[[-1,208678],15],[[-1,209347],2],[[-1,208722],4],[[-1,209297],1],[[-1,209294],3],[[-1,208663],5],[[-1,209296],1],[[-1,209345],12],[[-1,189506],12],[[-1,209482],"\n"],[[-1,83343],"\n"],[[-1,69417],"This is a chart showing the time "],[[-1,69163],"taken to"],[[-1,69384],5],[[-1,69379]," process"],[[-1,69090]," each"],[[-1,69371],22],[[-1,69349]," operation"],[[-1,69339],1],[[-1,69338]," "],[[-1,69154],"throughout"],[[-1,69337],6],[[-1,69331]," the test"],[[-1,69080],", "],[[-1,69038],"averaged"],[[-1,69078],8],[[-1,69070]," "],[[-1,69029],"in"],[[-1,69069],4],[[-1,69065]," groups of 1000 operations"],[[-1,69084],2],[[-1,69322],"."],[[-1,69144],1],[[-1,69141],5],[[-1,69115],12],[[-1,69117],1],[[-1,69136],11],[[-1,69103],1],[[-1,69125],7],[[-1,69102],7],[[-1,69143],1],[[-1,69321]," I think those spikes are V8's garbage collector trying to free up memory."],[[-1,48182],2],[[-1,68760],44],[[-1,68714],8],[[-1,68716],1],[[-1,69247],28],[[-1,69026],12],[[-1,69219],24],[[-1,69180],16],[[-1,83296],16],[[-1,69709],8],[[-1,69684],9],[[-1,69606],16],[[-1,69675],6],[[-1,69667],19],[[-1,69646],15],[[-1,69589],6],[[-1,69631],24],[[-1,69551],21],[[-1,69528],4],[[-1,69511],5],[[-1,69524],12],[[-1,69506],88],[[-1,69530],1],[[-1,69581],29],[[-1,69583],1],[[-1,69648],1],[[-1,69669],1],[[-1,69701],16],[[-1,83280],12],[[-1,69725],15],[[-1,83268],"\n"],[[-1,49074],"\n"],[[-1,46022],"!"],[[-1,46009],"["],[[-1,45962],"auto"],[[-1,45954],"m"],[[-1,45949],"erge performance chart"],[[-1,45953],2],[[-1,45958],2],[[-1,45998],"]"],[[-1,45987],"("],[[-1,49073],9],[[-1,49041],"am_perf1"],[[-1,49064],17],[[-1,49047],".svg"],[[-1,45965],")"],[[-1,49043],1],[[-1,83267],"\n"],[[-1,69195],14],[[-1,68705],1],[[-1,68704],"\n"],[[-1,30460],"In the slowest spike near the end,"],[[-1,30477],16],[[-1,33543],15],[[-1,33528]," "],[[-1,30424],"a"],[[-1,33185],1],[[-1,33446],21],[[-1,33425]," single edit "],[[-1,30422],"took"],[[-1,33364],18],[[-1,33412],4],[[-1,33408]," *1."],[[-1,33402],"8 seconds*"],[[-1,30418]," to process"],[[-1,33345],". O"],[[-1,33338],"of. In a real application"],[[-1,30407],","],[[-1,33313]," "],[[-1,33312],4],[[-1,33138],1],[[-1,33067],5],[[-1,33087],16],[[-1,33071],"the"],[[-1,33108],19],[[-1,33137],15],[[-1,33118],1],[[-1,33122],3],[[-1,33308],1],[[-1,33183],9],[[-1,33174]," whole "],[[-1,33036],"app"],[[-1,33167],8],[[-1,33153],3],[[-1,33062]," "],[[-1,33031],"(or browser tab) "],[[-1,33033],1],[[-1,33061],"would"],[[-1,33150],6],[[-1,33159],3],[[-1,33307],33],[[-1,33274]," free"],[[-1,33050],"ze"],[[-1,33052],1],[[-1,33269],1],[[-1,33115],3],[[-1,33112]," up"],[[-1,33141],1],[[-1,33268],6],[[-1,33262]," for a couple of seconds"],[[-1,32996]," sometimes"],[[-1,33048],10],[[-1,33238]," "],[[-1,33231],"while you're"],[[-1,33013]," in the middle of"],[[-1,33219]," "],[[-1,33210],17],[[-1,33193],"typing."],[[-1,33218],7],[[-1,33237],3],[[-1,33340],1],[[-1,33342],1],[[-1,33392],24],[[-1,33404],1],[[-1,33527],80],[[-1,68703],52],[[-1,68650],20],[[-1,33579],1],[[-1,33573],16],[[-1,33553],9],[[-1,33557],2],[[-1,33578],4],[[-1,68629],5],[[-1,68630],"\n"],[[-1,48726],"\nThe chart is"],[[-1,48713],6],[[-1,48707]," easier to read when we "],[[-1,48664],"average "],[[-1,48640],"everything out a bit"],[[-1,48050]," and zoom "],[[-1,48020],"the Y axis"],[[-1,48040],2],[[-1,48612],". "],[[-1,32986],"We can see the "],[[-1,32969],"average "],[[-1,32970],"p"],[[-1,48519],1],[[-1,48610],9],[[-1,48601],"erformance"],[[-1,48516]," gets"],[[-1,48591],4],[[-1,48558],7],[[-1,48551]," grad"],[[-1,48544],"ually"],[[-1,48010]," (roughly linearly)"],[[-1,48539]," worse over time.\n"],[[-1,48546],1],[[-1,48579],20],[[-1,48587],7],[[-1,48620],7],[[-1,48656],15],[[-1,48683],18],[[-1,48756],"\n"],[[-1,46024],"!"],[[-1,46010],"["],[[-1,45927],"automerge performance chart smoothed "],[[-1,45888],"out"],[[-1,45890],1],[[-1,45999],"]"],[[-1,45988],"("],[[-1,48755],9],[[-1,48746],"am_perf1"],[[-1,48733],"_smooth"],[[-1,48738],".svg"],[[-1,45966],")"],[[-1,48734],1],[[-1,48038],14],[[-1,83266],13540],[[-1,83306],9],[[-1,83338],31],[[-1,83342],2],[[-1,208618],"\n"],[[-1,209501],1],[[-1,209564],5],[[-1,209572],1],[[-1,209616],10],[[-1,209712],2],[[-1,209750],3],[[-1,209754],"\n"],[[-1,208652],"##"],[[-1,7175],"#"],[[-1,208650],1],[[-1,208649]," Why is "],[[-1,208633],"automerge slow"],[[-1,171395]," though?"],[[-1,208619],1],[[-1,171398],1],[[-1,206221],"\n\n"],[[-1,206028],119],[[-1,206158],46],[[-1,206110],71],[[-1,206112],1],[[-1,206196],37],[[-1,206202],5],[[-1,206211],8],[[-1,206219],7],[[-1,208641],7],[[-1,209753],1],[[-1,208617],1],[[-1,208614],"Automerge is slow for "],[[-1,207903],"a"],[[-1,204814]," whole slew"],[[-1,207902],8],[[-1,207894]," of "],[[-1,208592],2],[[-1,208590],"reasons:\n\n"],[[-1,204077],"1"],[[-1,208580],13],[[-1,208561],77],[[-1,208473],1],[[-1,208484],10],[[-1,208432],14],[[-1,208472],7],[[-1,208461],2],[[-1,208444],4],[[-1,208459],14],[[-1,208440],8],[[-1,208418],2],[[-1,208411],45],[[-1,208335],1],[[-1,208339],3],[[-1,208366],9],[[-1,208087],5],[[-1,208357],1],[[-1,207736],12],[[-1,208172],28],[[-1,208133],9],[[-1,207742],5],[[-1,208124],20],[[-1,208144],11],[[-1,208104],1],[[-1,208102],14],[[-1,208343],4],[[-1,208334],39],[[-1,208266],26],[[-1,208295],8],[[-1,208283],4],[[-1,208268],1],[[-1,208279],11],[[-1,208240],11],[[-1,208215],1],[[-1,208229],2],[[-1,208227],"."],[[-1,119244]," Automerge"],[[-1,119191],"'"],[[-1,119189],"s "],[[-1,119163],"core "],[[-1,119135],"tree based "],[[-1,119187],"data structure "],[[-1,119119],"gets big and "],[[-1,119172],2],[[-1,119148],5],[[-1,119124],3],[[-1,119141],"slow"],[[-1,119106]," as the document grows"],[[-1,119137],"."],[[-1,119143],1],[[-1,119156],4],[[-1,119170],5],[[-1,119164],1],[[-1,119234],1],[[-1,119204],12],[[-1,119233],7],[[-1,119222],16],[[-1,119192],1],[[-1,119206],1],[[-1,119226],2],[[-1,208226],1],[[-1,126758],4],[[-1,126750],11],[[-1,126754],1],[[-1,126772],2],[[-1,126760],1],[[-1,126770],8],[[-1,208225],9],[[-1,208009],1],[[-1,206923],16],[[-1,208008],29],[[-1,126709],21],[[-1,126673],4],[[-1,126688],12],[[-1,126739],16],[[-1,126752],1],[[-1,207966],1],[[-1,207979],12],[[-1,206906],28],[[-1,207967],1],[[-1,204406],"\n"],[[-1,204075],"2"],[[-1,204405],1],[[-1,204404],". Automerge makes heavy use of "],[[-1,136628],"["],[[-1,136629],"I"],[[-1,204373],1],[[-1,204372],"mmutable"],[[-1,204364],1],[[-1,204363],"js"],[[-1,136627],"](https://immutable-js.github.io/)"],[[-1,204361],". Immutablejs is a library which gives you clojure-like copy-on-write semantics for javascript objects. This is a cool set of functionality, but the V8 optimizer & GC struggles to optimize code that uses immutablejs. As a result, it increases memory usage and decreases performance."],[[-1,207964],"\n"],[[-1,207927],"3. Automerge "],[[-1,207889],"treats each inserted character as a separate item. Remember that paper I talked about earlier"],[[-1,207722],", where copy+paste operations are slow"],[[-1,126723],1],[[-1,207724],1],[[-1,207796],"? Automerge"],[[-1,126720]," does that"],[[-1,207785],7],[[-1,171386],4],[[-1,207778],16],[[-1,171382]," too"],[[-1,207683],"!"],[[-1,207760],2],[[-1,207756],3],[[-1,206866],42],[[-1,206818],10],[[-1,204802],"\n\n"],[[-1,99283],"Automerge was just never written with performance in mind. Their team is working on a replacement [rust implementation of the algorithm](https://github.com/automerge/automerge-rs/) to run through wasm, but at the time of writing it hasn't landed yet."],[[-1,98931]," I got the master branch working, but they "],[[-1,98888],10],[[-1,98878],"have some kinks to work out"],[[-1,39088]," before it"],[[-1,31134],"'"],[[-1,31144],1],[[-1,39078],"s ready."],[[-1,98851]," "],[[-1,38985],"Swi"],[[-1,38978],"tching to "],[[-1,38962],"the "],[[-1,38948],"automerge-rs backend doesn't make "],[[-1,30333],"average per"],[[-1,30314],"formance in this test"],[[-1,30322],4],[[-1,38909],9],[[-1,38900]," any faster."],[[-1,30406]," (Although it does "],[[-1,30360],"halve memory usage and "],[[-1,30387],"smooth out p"],[[-1,30371],"erformance"],[[-1,30335],"."],[[-1,30361],")"],[[-1,30337],1],[[-1,30375],2],[[-1,38887],29],[[-1,38856],7],[[-1,38858],1],[[-1,38914],4],[[-1,38958],9],[[-1,38968],5],[[-1,38982],2],[[-1,38987],1],[[-1,39069],1],[[-1,98850],2],[[-1,98826],13],[[-1,39067],9],[[-1,39054],9],[[-1,39034],18],[[-1,39045],10],[[-1,39058],3],[[-1,98848],22],[[-1,98813],1],[[-1,98788],27],[[-1,39014],3],[[-1,39007],19],[[-1,39009],1],[[-1,39011],1],[[-1,98761],1],[[-1,98812],21],[[-1,99033],28],[[-1,98988],2],[[-1,98949],5],[[-1,98986],2],[[-1,98982],22],[[-1,98944],11],[[-1,98960],11],[[-1,98984],1],[[-1,99005],15],[[-1,171001],1],[[-1,204800],7],[[-1,171013],10],[[-1,204793],13],[[-1,136592],5],[[-1,204780],15],[[-1,204757],24],[[-1,171378],4],[[-1,170998],3],[[-1,171374],32],[[-1,99383],1],[[-1,171276],12],[[-1,99381],1],[[-1,171342],4],[[-1,171263],22],[[-1,171338],9],[[-1,171326],18],[[-1,99380],45],[[-1,119712],20],[[-1,171308],6],[[-1,171158],23],[[-1,171302],9],[[-1,170994],11],[[-1,99384],1],[[-1,99399],2],[[-1,99334],17],[[-1,99312],19],[[-1,99291],7],[[-1,99293],1],[[-1,99317],4],[[-1,99397],12],[[-1,170983],1],[[-1,120546],1],[[-1,99404],1],[[-1,120545],2],[[-1,120450],1],[[-1,120543],16],[[-1,119273],15],[[-1,120527],16],[[-1,119257],6],[[-1,119679],6],[[-1,119377],23],[[-1,119379],1],[[-1,119483],7],[[-1,119448],11],[[-1,119476],28],[[-1,119496],10],[[-1,119634],55],[[-1,119505],1],[[-1,119352],4],[[-1,119504],2],[[-1,119501],1],[[-1,119347],5],[[-1,119500],3],[[-1,119579],3],[[-1,119572],44],[[-1,119522],15],[[-1,119341],1],[[-1,119436],20],[[-1,119313],7],[[-1,119304],11],[[-1,119286],13],[[-1,119293],6],[[-1,119306],1],[[-1,119416],9],[[-1,119339],24],[[-1,119407],12],[[-1,119391],11],[[-1,119249],"\n"],[[-1,98758],"\n"],[[-1,98756],"---"],[[-1,98757],"\n"],[[-1,98760],1],[[-1,119248],4],[[-1,119395],2],[[-1,119507],1],[[-1,119528],3],[[-1,119576],2],[[-1,119656],14],[[-1,119673],1],[[-1,119642],3],[[-1,119672],4],[[-1,119638],3],[[-1,119668],9],[[-1,119691],12],[[-1,119889],5],[[-1,119965],2],[[-1,119775],63],[[-1,119963],29],[[-1,119883],16],[[-1,119834],20],[[-1,119786],8],[[-1,119814],22],[[-1,119777],1],[[-1,119792],6],[[-1,119867],7],[[-1,119858],23],[[-1,119860],1],[[-1,119934],3],[[-1,119895],5],[[-1,119910],15],[[-1,119918],4],[[-1,119931],12],[[-1,120511],6],[[-1,120494],42],[[-1,120505],10],[[-1,171293],17],[[-1,171241],82],[[-1,171329],1],[[-1,198279],19],[[-1,198221],20],[[-1,198197],13],[[-1,198142],17],[[-1,197226],2],[[-1,198119],11],[[-1,198121],1],[[-1,198125],2],[[-1,198184],23],[[-1,197234],3],[[-1,197230],2],[[-1,198161],2],[[-1,198157],10],[[-1,198145],1],[[-1,198087],10],[[-1,197160],1],[[-1,197084],2],[[-1,197088],2],[[-1,197118],30],[[-1,197075],2],[[-1,197078],2],[[-1,197082],2],[[-1,197120],1],[[-1,197159],6],[[-1,197145],24],[[-1,197153],7],[[-1,197194],34],[[-1,197224],29],[[-1,198144],1],[[-1,198147],1],[[-1,198159],1],[[-1,198201],3],[[-1,198260],1],[[-1,198257],25],[[-1,198228],6],[[-1,198232],3],[[-1,198259],1],[[-1,204765],4],[[-1,206808],1],[[-1,206824],5],[[-1,206877],10],[[-1,207638],50],[[-1,207753],10],[[-1,207588],1],[[-1,171134],1],[[-1,205908],"\n"],[[-1,170969],9],[[-1,171132],"There's an old saying with performance"],[[-1,119081]," tuning"],[[-1,171094],7],[[-1,171087],":\n\n> You can't make "],[[-1,119073],"the computer "],[[-1,119060],3],[[-1,171067],10],[[-1,171057],"faster. You can only make"],[[-1,119056]," it"],[[-1,171032],1],[[-1,170981],12],[[-1,171031],2],[[-1,171029]," do less work.\n"],[[-1,205907],118],[[-1,205787],"\n"],[[-1,170958],"H"],[[-1,198073],4],[[-1,198069],"ow do we make the computer do less work here? There's lots of performance wins "],[[-1,83501],10],[[-1,83475],1],[[-1,83491],16],[[-1,197990],"to be had"],[[-1,170957]," from goin"],[[-1,170939],"g through the code and improving"],[[-1,83469]," lots of"],[[-1,119048]," small"],[[-1,170907]," things"],[[-1,83472],"."],[[-1,170947],4],[[-1,197981],1],[[-1,197980]," "],[[-1,83470],"B"],[[-1,197979],1],[[-1,197978],"ut"],[[-1,170900]," "],[[-1,126668],"the"],[[-1,170899],16],[[-1,170883]," "],[[-1,170874],"automerge team"],[[-1,126665]," has the right approach"],[[-1,170856],"."],[[-1,170860],1],[[-1,170882],7],[[-1,197976]," "],[[-1,119041],"I"],[[-1,170858],1],[[-1,197975],25],[[-1,197950],"t"],[[-1,31133],"'"],[[-1,31137],1],[[-1,31143],1],[[-1,197949],"s always best to start with macro optimizations"],[[-1,126642],". Fix the core "],[[-1,126613],"a"],[[-1,126610],"lgorithm and data"],[[-1,126581]," "],[[-1,126591],"structures"],[[-1,126568]," before moving to optimizing individual methods"],[[-1,126580],2],[[-1,126572],1],[[-1,126578],5],[[-1,126593],1],[[-1,126612],1],[[-1,126627],13],[[-1,197902],". There's no point optimizing "],[[-1,126520],"a function"],[[-1,197872],4],[[-1,197868]," "],[[-1,136521],"when "],[[-1,126490],"you're"],[[-1,126509],16],[[-1,136507],6],[[-1,136501]," about to throw it away in a rewrite"],[[-1,126484],7],[[-1,136516],8],[[-1,136538],16],[[-1,136554],9],[[-1,136565],6],[[-1,136586],8],[[-1,136571],1],[[-1,136578],4],[[-1,197867],27],[[-1,136542],3],[[-1,136558],3],[[-1,197840],1],[[-1,136574],3],[[-1,197839],"."],[[-1,205786],3],[[-1,205776],28],[[-1,205730],3],[[-1,205710],15],[[-1,202774],48],[[-1,202725],2],[[-1,205695],1],[[-1,204074],1],[[-1,204046],24],[[-1,202722],18],[[-1,203996],48],[[-1,198106],1],[[-1,202704],2],[[-1,198076],1],[[-1,198104],10],[[-1,202702],6],[[-1,202686],55],[[-1,198093],6],[[-1,202631],16],[[-1,202696],9],[[-1,203948],2],[[-1,198075],"\n"],[[-1,197838],"\n"],[[-1,98750],"B"],[[-1,126477],5],[[-1,126472],"y far, "],[[-1,170853],"A"],[[-1,202614],1],[[-1,203939],41],[[-1,203888],1],[[-1,203887],"utomerge's"],[[-1,203315]," biggest problem is it"],[[-1,31140],1],[[-1,31142],1],[[-1,203293],"s"],[[-1,31087],2],[[-1,203877]," complex tree based data structure."],[[-1,170840]," "],[[-1,120618],"And we can "],[[-1,170831],1],[[-1,170824],4],[[-1,126464],"replac"],[[-1,126456],"e it with something faster."],[[-1,126458],1],[[-1,170802],3],[[-1,170820],1],[[-1,170815],12],[[-1,170819],2],[[-1,170830],3],[[-1,170839],7],[[-1,170852],6],[[-1,197837],7],[[-1,199041],"\n\n\n##"],[[-1,199036],1],[[-1,199035]," "],[[-1,198992],"Improving the data structure"],[[-1,199034],11],[[-1,199010],17],[[-1,199023],13],[[-1,203694],29],[[-1,203842],"\n\n"],[[-1,202613],"Luckily, "],[[-1,202603],"t"],[[-1,202804],1],[[-1,202803],"her"],[[-1,202792],"e's a better way "],[[-1,202602],"to implement CRDTs"],[[-1,170788],","],[[-1,136464],6],[[-1,170787]," "],[[-1,170776],"pioneered "],[[-1,120606],"in"],[[-1,170766],2],[[-1,170786],8],[[-1,170798],1],[[-1,202461],2],[[-1,170796],7],[[-1,202459],37],[[-1,202505],41],[[-1,202584],25],[[-1,202552],1],[[-1,202547],30],[[-1,202421],1],[[-1,202517],2],[[-1,202515]," "],[[-1,47991],"["],[[-1,202514],"Yjs"],[[-1,47990],"](https://github.com/yjs/yjs)"],[[-1,202511],". "],[[-1,201952],"Yjs"],[[-1,136452]," is another (competing) "],[[-1,47960],"opensource "],[[-1,136428],"CRDT "],[[-1,136399],"implementation"],[[-1,136385],1],[[-1,136423],10],[[-1,136409],9],[[-1,136384]," made by "],[[-1,136371],"Kevin Jahns. "],[[-1,47946],"I"],[[-1,136352],5],[[-1,136347],"t"],[[-1,31132],"'"],[[-1,136346],"s"],[[-1,136345],7],[[-1,136338]," fast, well do"],[[-1,136322],"cumented and well made."],[[-1,83461]," If I wer"],[[-1,83448],"e going to build "],[[-1,83425],"software which support"],[[-1,83401],"s collaborative editing today, I'd "],[[-1,83347],"use "],[[-1,83366],12],[[-1,83349],"Y"],[[-1,83354],1],[[-1,83353],"js."],[[-1,83403],1],[[-1,83427],1],[[-1,83431],3],[[-1,83452],2],[[-1,136273],"\n\n"],[[-1,136299],1],[[-1,136298],"Yjs"],[[-1,136324],1],[[-1,136354],1],[[-1,136358],2],[[-1,136373],1],[[-1,136375],1],[[-1,136413],2],[[-1,201949]," doesn't need a whole blog post "],[[-1,170762],"talking about"],[[-1,201917],5],[[-1,201912]," how to make it fast"],[[-1,170747],1],[[-1,201892],2],[[-1,201890]," because it"],[[-1,31131],"'"],[[-1,201879],"s alread"],[[-1,201867],"y "],[[-1,136280],"pretty"],[[-1,136287],6],[[-1,136294],6],[[-1,170745],6],[[-1,170739]," "],[[-1,201865],"fast"],[[-1,120604],", as we'll see soon"],[[-1,201861],". It got there by using"],[[-1,201871],2],[[-1,201965],1],[[-1,201960],7],[[-1,201964],2],[[-1,202509],4],[[-1,202419],4],[[-1,202409],1],[[-1,202408]," a clever, obvious "],[[-1,170738],"data structure \""],[[-1,202389],"trick"],[[-1,170722],"\""],[[-1,202384]," that"],[[-1,202378]," I don't think anyone else "],[[-1,170721],"in the field has "],[[-1,202351],"noticed. Instead of implementing the CRDT as a tree like"],[[-1,170704]," automerge does"],[[-1,202295],5],[[-1,202290],":"],[[-1,202415],3],[[-1,202551],2],[[-1,202559],6],[[-1,202800],4],[[-1,203292],3],[[-1,203288],1],[[-1,203710],16],[[-1,203663],30],[[-1,203625],43],[[-1,203341],10],[[-1,203321],5],[[-1,203331],5],[[-1,203582],1],[[-1,203581],"\n\n```"],[[-1,203201],"javascript"],[[-1,203576],"\n"],[[-1,203570],"state = {\n"],[[-1,203490],"  { item: 'a', id"],[[-1,202850],": "],[[-1,202844],"["],[[-1,202842],"'seph', 0"],[[-1,202843],"]"],[[-1,202848],2],[[-1,203473],", seq"],[[-1,202833],": 0"],[[-1,203468],", children: [\n"],[[-1,203205],"    "],[[-1,203450],38],[[-1,203400],6],[[-1,203394],"{ item: '"],[[-1,203190],"X"],[[-1,203385],1],[[-1,203384],"', id"],[[-1,68918],6],[[-1,202830],6],[[-1,203379],", seq, children: ["],[[-1,203361],1],[[-1,203360],"]"],[[-1,203358],"}"],[[-1,203189],","],[[-1,203245],"\n    { item: 'b', id"],[[-1,68924],6],[[-1,202824],6],[[-1,203225],", seq, children: ["],[[-1,203287],"\n      { item: 'c', id"],[[-1,68930],6],[[-1,202818],6],[[-1,203265],", seq, children: []}"],[[-1,203357],"\n"],[[-1,203349],"    ]"],[[-1,203342],"}"],[[-1,203344],1],[[-1,203356],6],[[-1,203551],2],[[-1,203454],2],[[-1,203412],2],[[-1,203549],1],[[-1,203538],8],[[-1,203409],1],[[-1,203451],1],[[-1,203530],4],[[-1,203517],9],[[-1,203526],9],[[-1,203508],3],[[-1,203408],7],[[-1,203505],4],[[-1,203501],"\n"],[[-1,203494],"  ]}"],[[-1,203500],4],[[-1,203546],5],[[-1,203548],1],[[-1,203560],2],[[-1,203558],"\n"],[[-1,203553],"}"],[[-1,203557],2],[[-1,203575],1],[[-1,203574],"\n```"],[[-1,203188],"\n\n"],[[-1,202288],"Yjs"],[[-1,203186],5],[[-1,203181]," "],[[-1,201837],"just "],[[-1,203180],"put"],[[-1,202285],"s"],[[-1,203177]," all the items in a single "],[[-1,170688],"flat "],[[-1,203150],5],[[-1,203145],"list:"],[[-1,203633],7],[[-1,203728],17],[[-1,203840],69],[[-1,203755],26],[[-1,203771],1],[[-1,203764],8],[[-1,203768],2],[[-1,203770],1],[[-1,203898],9],[[-1,203946],6],[[-1,204022],25],[[-1,204048],1],[[-1,204067],18],[[-1,204069],1],[[-1,204070],"\n"],[[-1,204073],"\n"],[[-1,203140],"```javascript\nstate = "],[[-1,202940],"["],[[-1,203118],1],[[-1,203117],"\n  { item: 'a', id"],[[-1,202267],": ['seph', 0]"],[[-1,203099],", seq"],[[-1,68995],": 0"],[[-1,203094],", "],[[-1,202911],"p"],[[-1,202907],"a"],[[-1,202903],"r"],[[-1,202899],"e"],[[-1,202895],"n"],[[-1,202891],"t"],[[-1,202283],": null"],[[-1,202871]," "],[[-1,202867],"}"],[[-1,202810],","],[[-1,202887],1],[[-1,202883],1],[[-1,202929],11],[[-1,202936],6],[[-1,203092],11],[[-1,203081],"\n"],[[-1,202856],"  "],[[-1,203080],4],[[-1,203076],"{ item: 'X', id"],[[-1,68936],6],[[-1,69011],1],[[-1,69008],1],[[-1,69005],1],[[-1,69002],1],[[-1,68999],1],[[-1,68996],1],[[-1,203061],", seq, "],[[-1,202913],"p"],[[-1,202908],"a"],[[-1,202904],"r"],[[-1,202900],"e"],[[-1,202896],"n"],[[-1,202892],"t"],[[-1,202277],": "],[[-1,202254],"['seph', 0]"],[[-1,202275],4],[[-1,202872]," "],[[-1,202868],"}"],[[-1,202809],","],[[-1,202888],1],[[-1,202884],1],[[-1,203054],14],[[-1,203040],"\n"],[[-1,202859],"  "],[[-1,203039],4],[[-1,203035],"{ item: 'b', id"],[[-1,68942],6],[[-1,69012],1],[[-1,69009],1],[[-1,69006],1],[[-1,69003],1],[[-1,69000],1],[[-1,68997],1],[[-1,203020],", seq, "],[[-1,202915],"p"],[[-1,202909],"a"],[[-1,202905],"r"],[[-1,202901],"e"],[[-1,202897],"n"],[[-1,202893],"t"],[[-1,202243],": ['seph', 0]"],[[-1,202873]," "],[[-1,202869],"}"],[[-1,202808],","],[[-1,202889],1],[[-1,202885],1],[[-1,203013],11],[[-1,203002],"\n"],[[-1,202853],"  "],[[-1,202864],4],[[-1,203001],6],[[-1,202995],"{ item: 'c', id"],[[-1,68948],6],[[-1,69013],1],[[-1,69010],1],[[-1,69007],1],[[-1,69004],1],[[-1,69001],1],[[-1,68998],1],[[-1,202980],", seq, "],[[-1,202917],"p"],[[-1,202910],"a"],[[-1,202906],"r"],[[-1,202902],"e"],[[-1,202898],"n"],[[-1,202894],"t"],[[-1,202230],":"],[[-1,202221]," [..]"],[[-1,202229],4],[[-1,202874]," "],[[-1,202870],"}"],[[-1,202807],1],[[-1,202890],1],[[-1,202886],1],[[-1,202973],13],[[-1,202960],"\n"],[[-1,202959],12],[[-1,202938],"]"],[[-1,202947],1],[[-1,202946],"\n```"],[[-1,201594],13],[[-1,202942],1],[[-1,202216],1],[[-1,201981],10],[[-1,202215],3],[[-1,202189],39],[[-1,170680],1],[[-1,170673],1],[[-1,170679],3],[[-1,202150],4],[[-1,201832],5],[[-1,202212],12],[[-1,202141],21],[[-1,202118],6],[[-1,202071],9],[[-1,202112],10],[[-1,202082],2],[[-1,202078],6],[[-1,202080],1],[[-1,202102],10],[[-1,202091],9],[[-1,202092],1],[[-1,202062],2],[[-1,202056],25],[[-1,202027],29],[[-1,170670],12],[[-1,201998],16],[[-1,201969],2],[[-1,201967],"\n\n"],[[-1,170466],"That looks simple, but "],[[-1,170442],"h"],[[-1,170656],52],[[-1,170550],11],[[-1,170470],1],[[-1,170538],18],[[-1,170520],"ow do you insert a new item into a list"],[[-1,170481],10],[[-1,170539],"?"],[[-1,170586],1],[[-1,170602],11],[[-1,170604],1],[[-1,201826],68],[[-1,201758]," With automerge "],[[-1,170440],"it"],[[-1,31130],"'"],[[-1,170438],"s easy:"],[[-1,170554],3],[[-1,170584],1],[[-1,170556],1],[[-1,170581],11],[[-1,170569],10],[[-1,170583],1],[[-1,201742],7],[[-1,201733],7],[[-1,201726],"\n\n"],[[-1,201715],"1."],[[-1,201724],1],[[-1,201723]," Find t"],[[-1,201713],"he parent item\n2. "],[[-1,201432],"Insert"],[[-1,201686],3],[[-1,201683]," the new item"],[[-1,201425]," into"],[[-1,201670],3],[[-1,201667]," the "],[[-1,170393],"right location in the "],[[-1,201662],"parents' "],[[-1,201419],"list of children"],[[-1,169666],1],[[-1,169491],3],[[-1,169352],1],[[-1,169488],79],[[-1,169349],11],[[-1,169330],24],[[-1,169253],7],[[-1,169306],8],[[-1,169275],15],[[-1,169254],1],[[-1,169260],3],[[-1,169298],21],[[-1,169337],5],[[-1,169409],57],[[-1,169665],3],[[-1,169657],9],[[-1,169632],2],[[-1,169546],8],[[-1,169630],24],[[-1,169599],25],[[-1,169568],22],[[-1,169538],46],[[-1,169574],1],[[-1,169571],1],[[-1,169573],1],[[-1,169606],6],[[-1,169639],6],[[-1,169648],8],[[-1,169659],1],[[-1,169662],2],[[-1,170371],1],[[-1,170402],3],[[-1,170398],4],[[-1,170430],13],[[-1,170412],9],[[-1,170417],4],[[-1,201653],16],[[-1,201630],10],[[-1,201206],35],[[-1,201109],40],[[-1,201140],30],[[-1,201171],30],[[-1,201278],3],[[-1,201273],36],[[-1,201234],26],[[-1,201237],2],[[-1,201275],1],[[-1,201620],"\n\n"],[[-1,136265],"But with this"],[[-1,201618],1],[[-1,201615],7],[[-1,170369],1],[[-1,169245],1],[[-1,170362],3],[[-1,170368],3],[[-1,201608]," list approach"],[[-1,201578]," it"],[[-1,31129],"'"],[[-1,136247],"s more complicated"],[[-1,136251],2],[[-1,201575],1],[[-1,201574],":\n\n1. Find the parent item\n2. "],[[-1,198534],"Starting right after the parent item, "],[[-1,198495],"i"],[[-1,201523],1],[[-1,201522],"terate through the list"],[[-1,198486]," until we find the location "],[[-1,170359],"where "],[[-1,198458],"the new item should be inserted"],[[-1,136229]," (?)"],[[-1,198493],1],[[-1,201499],2],[[-1,198491],4],[[-1,201496],1],[[-1,201538],4],[[-1,201495],4],[[-1,201534],11],[[-1,201491],4],[[-1,201483],10],[[-1,201469],12],[[-1,201455],12],[[-1,201067],2],[[-1,201443],"\n3. "],[[-1,170342],"I"],[[-1,170353],8],[[-1,170344],1],[[-1,201439],1],[[-1,201438],"nsert"],[[-1,170340]," it"],[[-1,136225]," there, splicing into the array"],[[-1,170337],1],[[-1,201403],9],[[-1,201394],"\n\n"],[[-1,170320],"Essentially, "],[[-1,170306],"this approach"],[[-1,170335],4],[[-1,170331]," is"],[[-1,170327]," just a"],[[-1,201392],10],[[-1,200615],7],[[-1,200602],4],[[-1,200596],2],[[-1,200598],1],[[-1,200608],3],[[-1,201382],5],[[-1,201325],16],[[-1,200593],3],[[-1,201309],2],[[-1,200589],1],[[-1,201307],16],[[-1,201377],1],[[-1,201351],9],[[-1,201288],10],[[-1,201342],3],[[-1,201376],6],[[-1,201338],1],[[-1,201337]," fancy"],[[-1,201370],2],[[-1,201368]," insertion sort."],[[-1,135379]," We"],[[-1,135333],"'re"],[[-1,135376]," implement"],[[-1,135330],"ing"],[[-1,135366]," a list CRDT with a list. Genius!"],[[-1,200422],61],[[-1,201331],"\n"],[[-1,135113],1],[[-1,134767],"\n"],[[-1,27409],"This"],[[-1,134765],2],[[-1,134763]," sounds complicated - how do you figure out where the new item should go? But it"],[[-1,31128],"'"],[[-1,134683],"s complicated "],[[-1,126428],"in the same way"],[[-1,134669],4],[[-1,134665]," *math* is complicated. It"],[[-1,31127],"'"],[[-1,134639],"s hard to understand, but "],[[-1,126412],"once"],[[-1,134613],4],[[-1,134609]," you "],[[-1,126407],"understand it"],[[-1,134604],2],[[-1,134602],", you can "],[[-1,126393],"implement"],[[-1,134592],2],[[-1,134590]," the whole "],[[-1,120584],"insert function in"],[[-1,134579],8],[[-1,134571]," about 20 lines of code"],[[-1,25088],":"],[[-1,25085],"\n\n(But don't be alarmed if this "],[[-1,25047],"looks "],[[-1,25039],"confusing - "],[[-1,24847],"we could probably fit everyone"],[[-1,24988],7],[[-1,24977],3],[[-1,24974]," "],[[-1,24814],"on the planet "],[[-1,24973],"who "],[[-1,24955],"understand"],[[-1,24816],"s"],[[-1,24945]," this code"],[[-1,24799]," today"],[[-1,24935],1],[[-1,24918],6],[[-1,24883],9],[[-1,24912],3],[[-1,24909]," in"],[[-1,24793],"to"],[[-1,24906]," a small meeting room.)"],[[-1,24934],15],[[-1,24969],13],[[-1,24981],2],[[-1,25027],13],[[-1,25011],22],[[-1,25014],2],[[-1,25041],1],[[-1,25053],5],[[-1,26839],2],[[-1,26644],34],[[-1,26606],18],[[-1,26587],33],[[-1,26157],7],[[-1,26554],2],[[-1,26136],30],[[-1,25750],14],[[-1,26106],4],[[-1,26149],1],[[-1,26504],8],[[-1,26495],1],[[-1,26552],3],[[-1,26548],32],[[-1,26102],1],[[-1,26516],10],[[-1,26147],9],[[-1,26610],2],[[-1,26646],1],[[-1,26837],25],[[-1,26808],8],[[-1,26782],52],[[-1,25754],2],[[-1,26730],1],[[-1,25709],1],[[-1,25098],1],[[-1,25708],8],[[-1,25726],3],[[-1,25712],1],[[-1,25721],6],[[-1,25714],1],[[-1,25723],1],[[-1,26729],2],[[-1,26494],1],[[-1,26727],5],[[-1,25736],8],[[-1,26722],5],[[-1,26695],2],[[-1,26692],1],[[-1,26717],11],[[-1,26702],5],[[-1,26691],9],[[-1,26671],8],[[-1,26657],7],[[-1,26663],3],[[-1,26682],10],[[-1,26706],2],[[-1,26800],17],[[-1,26812],2],[[-1,27030],11],[[-1,27018],1],[[-1,134548],1],[[-1,28958],1],[[-1,27404],37],[[-1,27490],8],[[-1,27439],6],[[-1,27429],7],[[-1,27433],2],[[-1,27446],6],[[-1,27482],19],[[-1,27421],11],[[-1,27463],1],[[-1,28887],1],[[-1,28926],37],[[-1,28886],"\n"],[[-1,28884],"\n```"],[[-1,25866],"javascript"],[[-1,28208],10],[[-1,28880],10],[[-1,28870],"\n"],[[-1,28863],"const "],[[-1,25832],"automergeInsert"],[[-1,28857],22],[[-1,28835]," = "],[[-1,28832],3],[[-1,28829],"(doc"],[[-1,28825],8],[[-1,28817],", newItem"],[[-1,28808],2],[[-1,26210],1],[[-1,26186],1],[[-1,26200],3],[[-1,26185],5],[[-1,26197],1],[[-1,26206],6],[[-1,26196],9],[[-1,26208],1],[[-1,26209],1],[[-1,28806],7],[[-1,28799],") => {"],[[-1,28793],23],[[-1,27146],29],[[-1,27150],1],[[-1,28770],30],[[-1,27149],1],[[-1,28740],"\n  "],[[-1,28145],"const"],[[-1,28150],3],[[-1,28737],4],[[-1,28194],2],[[-1,28192]," "],[[-1,28733],"parent"],[[-1,26180],"Idx"],[[-1,28727]," = findItem(doc, newItem."],[[-1,26222],"p"],[[-1,26220],"a"],[[-1,26218],"r"],[[-1,26216],"e"],[[-1,26214],"n"],[[-1,26212],"t"],[[-1,28702],10],[[-1,28692],")"],[[-1,25369]," // "],[[-1,25357],"("],[[-1,24790],"1"],[[-1,25356],4],[[-1,25352],")"],[[-1,25365],4],[[-1,25670],"\n"],[[-1,25669],2],[[-1,27462],2],[[-1,27454],6],[[-1,27460],3],[[-1,28094],3],[[-1,28691],"\n"],[[-1,28132],"  // Scan to find the insert location"],[[-1,25681],"\n  let i"],[[-1,28095],1],[[-1,28140],7],[[-1,28690],47],[[-1,28643],"\n  for (i = parent"],[[-1,26177],"Idx"],[[-1,28625]," + 1; i < doc.content.length; i++) {\n    let o = doc.content[i]\n"],[[-1,28561],45],[[-1,27367],1],[[-1,27319],"    "],[[-1,27326],6],[[-1,27366],8],[[-1,27358],"if (newItem.seq > o.seq) break"],[[-1,27267]," // "],[[-1,26841],"O"],[[-1,27165],12],[[-1,27152],1],[[-1,27178],1],[[-1,27177],"ptimization."],[[-1,27204],16],[[-1,27187],1],[[-1,27263],9],[[-1,27246],3],[[-1,27186],6],[[-1,27210],5],[[-1,27243],32],[[-1,27250],2],[[-1,27254],2],[[-1,27314],"\n    let oparent"],[[-1,26168],"Idx"],[[-1,27298]," = findItem(doc, o."],[[-1,26224],"p"],[[-1,26221],"a"],[[-1,26219],"r"],[[-1,26217],"e"],[[-1,26215],"n"],[[-1,26213],"t"],[[-1,27279],10],[[-1,27269],")"],[[-1,25371],1],[[-1,27328],1],[[-1,28516],"\n\n    // Should we insert here?"],[[-1,28189]," ("],[[-1,27530],"Warning: "],[[-1,27520],13],[[-1,27506],"Black magic"],[[-1,25657]," part"],[[-1,27493],1],[[-1,28174],20],[[-1,28153],1],[[-1,28154],")"],[[-1,28187],8],[[-1,28485],"\n    if (oparent"],[[-1,26165],"I"],[[-1,26161],"d"],[[-1,26164],1],[[-1,26163],"x"],[[-1,28469]," < parent"],[[-1,26174],"Idx"],[[-1,28460],"\n"],[[-1,27593],"      || (oparent"],[[-1,26160],"Idx"],[[-1,27576]," === parent"],[[-1,26171],"Idx"],[[-1,27565],"\n        && "],[[-1,27553],1],[[-1,27552],"newItem.seq === o.seq"],[[-1,27531],1],[[-1,27677],55],[[-1,27622],"\n        && "],[[-1,25694],"newItem."],[[-1,27610],"id[0] < o.id[0])"],[[-1,27753],75],[[-1,27809],55],[[-1,27873],63],[[-1,27957],83],[[-1,28033],75],[[-1,28089],55],[[-1,28459],91],[[-1,28368],"\n    ) break\n  }"],[[-1,25666],3],[[-1,28352],1],[[-1,28351],"\n  // We've found the position. Insert at position *i*.\n  doc.content.splice(i, 0, newItem)"],[[-1,25351]," // ("],[[-1,24788],"2"],[[-1,25346],4],[[-1,25342],")"],[[-1,25661],"\n"],[[-1,25660],2],[[-1,27115],1],[[-1,27082],"\n"],[[-1,27075],"  //"],[[-1,25699]," .."],[[-1,25696],1],[[-1,27071]," And "],[[-1,27043],"do "],[[-1,27039],"various"],[[-1,27064],8],[[-1,27056]," bookkeeping."],[[-1,27066],1],[[-1,27081],3],[[-1,27114],31],[[-1,28260],49],[[-1,28211],"\n}"],[[-1,28869],1],[[-1,28868],"\n```"],[[-1,27017],17],[[-1,26868],11],[[-1,27000],16],[[-1,26911],1],[[-1,26984],72],[[-1,26910],2],[[-1,26906],1],[[-1,26856],3],[[-1,26905],3],[[-1,26908],1],[[-1,26912],1],[[-1,26883],15],[[-1,26884],1],[[-1,26902],5],[[-1,26891],6],[[-1,26897],3],[[-1,28885],1],[[-1,28931],4],[[-1,28937],5],[[-1,28947],9],[[-1,28957],9],[[-1,134547],"\n"],[[-1,134545],"\n"],[[-1,135102],"I implemented both Yjs"],[[-1,120566],"'s"],[[-1,120562]," "],[[-1,120557],"CRDT (YATA)"],[[-1,120561],2],[[-1,120564],1],[[-1,135080]," and Automerge"],[[-1,135066],7],[[-1,135059]," using this approach"],[[-1,46379]," in "],[[-1,46372],"my"],[[-1,46322]," "],[[-1,46300],"experimental"],[[-1,46321],4],[[-1,46313],12],[[-1,46317],2],[[-1,46370],18],[[-1,46375],2],[[-1,126366],18],[[-1,134972],5],[[-1,134967]," "],[[-1,134962],"["],[[-1,46271],"*"],[[-1,46348],"reference-crdts"],[[-1,46270],"*"],[[-1,134966],4],[[-1,134961],4],[[-1,134908],4],[[-1,134957],4],[[-1,134953],"]("],[[-1,134887],"https://github.com/josephg/reference-crdts/blob/main/crdts.ts"],[[-1,134951],42],[[-1,134909],")"],[[-1,46333]," "],[[-1,46279],"codebase"],[[-1,46287],7],[[-1,46332],8],[[-1,46324],"."],[[-1,134904],7],[[-1,126384],15],[[-1,134897],9],[[-1,134805],9],[[-1,134794],21],[[-1,126368],1],[[-1,134773],1],[[-1,134541]," "],[[-1,134796],1],[[-1,134826],20],[[-1,135039],10],[[-1,135023],10],[[-1,134989],16],[[-1,134991],1],[[-1,135013],21],[[-1,135029],5],[[-1,135112],9],[[-1,135114],1],[[-1,201063],1],[[-1,170293],29],[[-1,136192],54],[[-1,136137],7],[[-1,136128],19],[[-1,135428],4],[[-1,136109],11],[[-1,136028],1],[[-1,136009],13],[[-1,135994],2],[[-1,135996],1],[[-1,136027],2],[[-1,136020],10],[[-1,136025],4],[[-1,136098],39],[[-1,136054],25],[[-1,136059],1],[[-1,136056],1],[[-1,136058],1],[[-1,136130],1],[[-1,169244],2],[[-1,169235],7],[[-1,169224],41],[[-1,169182],1],[[-1,169228],2],[[-1,169242],6],[[-1,170264],2],[[-1,135990],41],[[-1,135423],18],[[-1,135399],18],[[-1,135405],3],[[-1,135949],4],[[-1,169180],1],[[-1,170262],4],[[-1,170257],1],[[-1,200585],24],[[-1,200531],6],[[-1,200519],9],[[-1,169179],22],[[-1,200525],3],[[-1,200551],14],[[-1,200536],4],[[-1,200561],9],[[-1,200825],69],[[-1,200509],1],[[-1,134771],3],[[-1,135120],3],[[-1,200756],2],[[-1,200754],"["],[[-1,170256],"Here's "],[[-1,170247],"the "],[[-1,169155],"insert function"],[[-1,25855],", with "],[[-1,26099],6],[[-1,26093],"a few more comments"],[[-1,170243],13],[[-1,170249],1],[[-1,200507],11],[[-1,170228],7],[[-1,170214],8],[[-1,135945],21],[[-1,170221],6],[[-1,200468],46],[[-1,200494],13],[[-1,200473],3],[[-1,200481],7],[[-1,200496],1],[[-1,200753],25],[[-1,200728],"](https://github.com/josephg/reference-crdts/blob/fed747255df9d457e11f36575de555b39f07e909/crdts.ts#L401-L459)."],[[-1,119040]," The "],[[-1,21468],"Y"],[[-1,21465],"j"],[[-1,21462],"s"],[[-1,119035],3],[[-1,119032]," version "],[[-1,118791],"of this "],[[-1,25841],"function"],[[-1,25846],4],[[-1,118783],8],[[-1,118775]," "],[[-1,119023],"is "],[[-1,118983],"in the same file, if you want to "],[[-1,118946],"have a look."],[[-1,118873]," Despite being very diff"],[[-1,118847],"erent papers, the "],[[-1,118773],"l"],[[-1,118768],"ogic"],[[-1,118760]," for inserting"],[[-1,118764]," is"],[[-1,118772],2],[[-1,118808],13],[[-1,118829],15],[[-1,118813],4],[[-1,118849],1],[[-1,118934],8],[[-1,118926]," almost "],[[-1,118882],"identical"],[[-1,118909],7],[[-1,118900],17],[[-1,118902],1],[[-1,118918],8],[[-1,118950],2],[[-1,119001],16],[[-1,118985],"."],[[-1,46747]," And even though "],[[-1,26071],"my"],[[-1,46730],3],[[-1,46727]," code is very different"],[[-1,26074],1],[[-1,46704],","],[[-1,46703],49],[[-1,46654]," this approach is *semantically* identical to the actual automerge, and "],[[-1,21470],"Y"],[[-1,21466],"j"],[[-1,21463],"s"],[[-1,46582],3],[[-1,46579]," and sync9 code"],[[-1,46462],"bases"],[[-1,46564],". ([Fuzzer verified (TM)](https://github.com/josephg/reference-crdts/blob/main/reference_test.ts))"],[[-1,26492],"."],[[-1,26068],"\n\n"],[[-1,26491],1],[[-1,26490],"If you"],[[-1,25815],"'re interested in"],[[-1,26476],8],[[-1,26468]," "],[[-1,24873],"goin"],[[-1,24863],"g deeper on this"],[[-1,24869],3],[[-1,26467],5],[[-1,25797],3],[[-1,26462],5],[[-1,25934],","],[[-1,26066],30],[[-1,26017],32],[[-1,26036],18],[[-1,26457],1],[[-1,26456]," I "],[[-1,25984],"gave "],[[-1,26446],"["],[[-1,25898],"a talk"],[[-1,26453],6],[[-1,26322],10],[[-1,26447],1],[[-1,26445],4],[[-1,26360],16],[[-1,26344]," about this approach"],[[-1,26441],"](https://invisiblecollege.s3-us-west-1.amazonaws.com/braid-meeting-10.mp4#t=300)"],[[-1,25978]," at a "],[[-1,25933],"["],[[-1,25972],"braid"],[[-1,25967],10],[[-1,25930],"](https://braid.org/)"],[[-1,25907]," meeting"],[[-1,25891]," a few weeks ago"],[[-1,25957],"."],[[-1,25956],18],[[-1,25937],1],[[-1,26312],14],[[-1,26288],35],[[-1,26251],13],[[-1,26234],9],[[-1,25875],4],[[-1,26238],2],[[-1,26253],1],[[-1,26298],5],[[-1,26324],1],[[-1,26482],3],[[-1,26484],1],[[-1,46466],"\n"],[[-1,119020],18],[[-1,134528],1],[[-1,134517],22],[[-1,134398],29],[[-1,134495],1],[[-1,134448],2],[[-1,134442],18],[[-1,134409],11],[[-1,134446],2],[[-1,134467],19],[[-1,134423],13],[[-1,134483],15],[[-1,134494],9],[[-1,134525],7],[[-1,134527],1],[[-1,134540],6],[[-1,200322],1],[[-1,135490],1],[[-1,135440],8],[[-1,135441],1],[[-1,135489],46],[[-1,135431],1],[[-1,200321],"\n"],[[-1,25789],"The important point is"],[[-1,25767],1],[[-1,25766]," "],[[-1,25764],"t"],[[-1,25793],2],[[-1,135585],46],[[-1,135701],46],[[-1,169139],1],[[-1,169138],"his approach is "],[[-1,135593],"better"],[[-1,135587],1],[[-1,135651],10],[[-1,135709],7],[[-1,169104],7],[[-1,169122],16],[[-1,169096],4],[[-1,25762],6],[[-1,169092],4],[[-1,169071],5],[[-1,169088],12],[[-1,135586],1],[[-1,135538],46],[[-1,135702],1],[[-1,200294],50],[[-1,200244],":\n\n"],[[-1,47054],"1"],[[-1,200241],20],[[-1,170201],9],[[-1,170190],16],[[-1,170192],1],[[-1,200221],1],[[-1,200218],14],[[-1,200190],1],[[-1,200204],13],[[-1,200189],7],[[-1,170174],10],[[-1,170156],66],[[-1,170164],7],[[-1,170206],5],[[-1,170090],1],[[-1,200182],31],[[-1,135142],17],[[-1,47944],2],[[-1,47942],". "],[[-1,47912],"We can use a "],[[-1,47831],"flat array to store "],[[-1,47803],"everything, rather than a"],[[-1,47746],"n unbalanced"],[[-1,47776],1],[[-1,47763],2],[[-1,47775],5],[[-1,47770]," tree."],[[-1,47758]," This makes "],[[-1,47734],"everything smaller and faster for the comp"],[[-1,47686],"uter to process."],[[-1,47053],"\n2. The code "],[[-1,47038],"is "],[[-1,47017],"really "],[[-1,47019],1],[[-1,47027],7],[[-1,47033],"simple"],[[-1,47010],"."],[[-1,46993]," Being faster *and* simpler"],[[-1,46966],7],[[-1,46959]," moves the [Pareto efficiency frontier](https://en.wikipedia.org/wiki/Pareto_efficiency). Ideas which do this are rare and truly golden."],[[-1,47035],1],[[-1,47040],1],[[-1,47144],"\n"],[[-1,46820],"3"],[[-1,47143],1],[[-1,47142],". You can implement lots of CRDTs like this. Yjs, Automerge, Sync9 and "],[[-1,25651],17],[[-1,47071],"others"],[[-1,25633]," "],[[-1,25632],3],[[-1,47065],5],[[-1,47060],"work"],[[-1,46818],". You can implement m"],[[-1,46789],"any l"],[[-1,46782],"ist CRDT"],[[-1,46772],"s in the same codebase."],[[-1,25601]," In my reference-crdts codebase I have an implementation of both RGA (automerge) and YATA ("],[[-1,21472],"Y"],[[-1,21467],"j"],[[-1,21464],"s"],[[-1,25510],3],[[-1,25507],")."],[[-1,25458]," They share most of their code (e"],[[-1,25423],"verything except this one function) and "],[[-1,25379],"their "],[[-1,25381],1],[[-1,25425],1],[[-1,25505],7],[[-1,25498],"performance in this test is identical."],[[-1,25460],1],[[-1,46774],1],[[-1,46784],1],[[-1,46791],1],[[-1,46797],3],[[-1,47255],"\n"],[[-1,47254],109],[[-1,47692],3],[[-1,47778],1],[[-1,47811],7],[[-1,47899],67],[[-1,47915],2],[[-1,47940],24],[[-1,135170],17],[[-1,200151],2],[[-1,135923],6],[[-1,135914],2],[[-1,135917],2],[[-1,200126],72],[[-1,135912],4],[[-1,135904],2],[[-1,135908],2],[[-1,200054],36],[[-1,170086],1],[[-1,135902],14],[[-1,170085],2],[[-1,135878],24],[[-1,135850],14],[[-1,135834],8],[[-1,135783],1],[[-1,135776],26],[[-1,135782],3],[[-1,135826],14],[[-1,135804],19],[[-1,135812],4],[[-1,135836],1],[[-1,135854],2],[[-1,135886],4],[[-1,170082],1],[[-1,200018],1],[[-1,200000],2],[[-1,199992],6],[[-1,170081],4],[[-1,199986],5],[[-1,170077],8],[[-1,199981],24],[[-1,199947],12],[[-1,199957],9],[[-1,170065],1],[[-1,199948],1],[[-1,198963],1],[[-1,47669],236],[[-1,47432],3],[[-1,47008],12],[[-1,47429],167],[[-1,47257],2],[[-1,47262],"\n"],[[-1,46445],"Th"],[[-1,46433],"eoretically this algorithm"],[[-1,46439],3],[[-1,46443],2],[[-1,46454],7],[[-1,47260],1],[[-1,170063],1],[[-1,198956],2],[[-1,170058],14],[[-1,135749]," "],[[-1,46384],"can "],[[-1,135748],4],[[-1,170044],1],[[-1,170027],5],[[-1,170022],"slow"],[[-1,46399],1],[[-1,170018],1],[[-1,170017]," down"],[[-1,68906]," "],[[-1,68905],5],[[-1,68956],6],[[-1,170012],1],[[-1,170011],"when there are"],[[-1,170043],2],[[-1,170039],11],[[-1,170041],1],[[-1,198954]," "],[[-1,169996],"c"],[[-1,198791],1],[[-1,198790],"oncurrent inserts "],[[-1,198760],"in the same location"],[[-1,68899]," in the document"],[[-1,169995],". "],[[-1,169991],"But that"],[[-1,105727],"'"],[[-1,169983],"s"],[[-1,169993],1],[[-1,198740],4],[[-1,198736]," "],[[-1,46406],"really"],[[-1,198735],5],[[-1,198730]," rare in practice"],[[-1,169980]," -"],[[-1,198706],4],[[-1,198713],5],[[-1,198708]," "],[[-1,198701],"y"],[[-1,198772],11],[[-1,198865],1],[[-1,198864],"ou almost always just insert "],[[-1,198823],"right afte"],[[-1,198809],"r the parent item."],[[-1,198700],1],[[-1,25623],2],[[-1,25617],15],[[-1,25621],2],[[-1,46397],1],[[-1,68882],1],[[-1,135724],3],[[-1,135720],1],[[-1,135742],1],[[-1,169976],1],[[-1,198699],50],[[-1,198638],9],[[-1,198621],16],[[-1,198588],4],[[-1,198603],14],[[-1,198584],1],[[-1,198561],6],[[-1,198553],7],[[-1,198563],1],[[-1,198583],18],[[-1,198546],12],[[-1,135718],1],[[-1,135741],4],[[-1,31126],1],[[-1,135737],13],[[-1,46396],12],[[-1,169974],1],[[-1,47259],"\n"],[[-1,198565],1],[[-1,198605],1],[[-1,198629],7],[[-1,198649],10],[[-1,198813],2],[[-1,198835],2],[[-1,198829],5],[[-1,198833],2],[[-1,198953],41],[[-1,198904],38],[[-1,198912],4],[[-1,198962],3],[[-1,199935],1],[[-1,170061],1],[[-1,198425],1],[[-1,199886],3],[[-1,199776],12],[[-1,169972],3],[[-1,199764],5],[[-1,169969],1],[[-1,199759],14],[[-1,169968],1],[[-1,199745],4],[[-1,199737],12],[[-1,199723],8],[[-1,199725],1],[[-1,199741],2],[[-1,199883],13],[[-1,199698],8],[[-1,169963],3],[[-1,199870],18],[[-1,199842],9],[[-1,169960],4],[[-1,118746],4],[[-1,169956],35],[[-1,118742],1],[[-1,118731],4],[[-1,118741],9],[[-1,199833],24],[[-1,169916],1],[[-1,169894],1],[[-1,169913],1],[[-1,199809],10],[[-1,199784],3],[[-1,199799],14],[[-1,169912],4],[[-1,169904],5],[[-1,135716],5],[[-1,169893],73],[[-1,169899],5],[[-1,169908],2],[[-1,169918],2],[[-1,169066],28],[[-1,68838],13],[[-1,135248],1],[[-1,68881],18],[[-1,68811],1],[[-1,68863],7],[[-1,68824],5],[[-1,68813],1],[[-1,68819],3],[[-1,68812],1],[[-1,68816],2],[[-1,68856],5],[[-1,68843],3],[[-1,68810],50],[[-1,68840],1],[[-1,68851],4],[[-1,135247],1],[[-1,135233],23],[[-1,135196],9],[[-1,135186],6],[[-1,135210],1],[[-1,135202],6],[[-1,135209],7],[[-1,135246],10],[[-1,135250],1],[[-1,135294],15],[[-1,135278],27],[[-1,135316],21],[[-1,135324],4],[[-1,168974],1],[[-1,135641],46],[[-1,169038],2],[[-1,168999],24],[[-1,169025],6],[[-1,169013],11],[[-1,169001],1],[[-1,169019],3],[[-1,169036],11],[[-1,199785],1],[[-1,199781],1],[[-1,198427],1],[[-1,170059],1],[[-1,198424],6],[[-1,169819],1],[[-1,169813],11],[[-1,169818],4],[[-1,198418],1],[[-1,169801],7],[[-1,198417],4],[[-1,198372],12],[[-1,198413],2],[[-1,169794],3],[[-1,169790],1],[[-1,198355],33],[[-1,169788],1],[[-1,169776],8],[[-1,169785],8],[[-1,198411],30],[[-1,198359],3],[[-1,198381],9],[[-1,198322],1],[[-1,199778],1],[[-1,199715],3],[[-1,199709],8],[[-1,199712],2],[[-1,199780],1],[[-1,199852],8],[[-1,199898],11],[[-1,199934],3],[[-1,199914],14],[[-1,199931],14],[[-1,199998],5],[[-1,200017],16],[[-1,200149],22],[[-1,200220],1],[[-1,200320],7],[[-1,200307],12],[[-1,200313],3],[[-1,201062],30],[[-1,201028],41],[[-1,200956],1],[[-1,200983],8],[[-1,200968],12],[[-1,200953],126],[[-1,200955],1],[[-1,200975],6],[[-1,200987],2],[[-1,201032],3],[[-1,201330],2],[[-1,200360],5],[[-1,200348],3],[[-1,200324],1],[[-1,200345],12],[[-1,200323],1],[[-1,200333],9],[[-1,200355],6],[[-1,201328],1],[[-1,134297],1],[[-1,134287],3],[[-1,126346],18],[[-1,134284],42],[[-1,134223],5],[[-1,134214],12],[[-1,134218],2],[[-1,134238],9],[[-1,134202],16],[[-1,134176],6],[[-1,134166],6],[[-1,118726],6],[[-1,134123],4],[[-1,134118],3],[[-1,134155],31],[[-1,134115],1],[[-1,134094],13],[[-1,134114],19],[[-1,134124],1],[[-1,118720],17],[[-1,118692],20],[[-1,118696],2],[[-1,118703],6],[[-1,134160],4],[[-1,134170],2],[[-1,134186],5],[[-1,134229],3],[[-1,134242],2],[[-1,134289],1],[[-1,135180],1],[[-1,134305],6],[[-1,134365],59],[[-1,135173],1],[[-1,135125],5],[[-1,135153],5],[[-1,135178],1],[[-1,135175],1],[[-1,135177],1],[[-1,135179],1],[[-1,199501],"\n"],[[-1,46262],"U"],[[-1,46266],2],[[-1,46268],1],[[-1,118671],1],[[-1,118381],3],[[-1,118664],6],[[-1,118389],4],[[-1,118653],5],[[-1,118397],5],[[-1,118500],10],[[-1,118400],1],[[-1,118490],3],[[-1,118433],31],[[-1,118487],15],[[-1,118570],24],[[-1,118638],10],[[-1,118626],3],[[-1,118622],19],[[-1,118546],9],[[-1,118603],10],[[-1,118537],8],[[-1,118593],1],[[-1,118628],1],[[-1,118648],5],[[-1,118658],4],[[-1,118670],3],[[-1,126326],32],[[-1,118438],1],[[-1,118591],1],[[-1,126164],3],[[-1,118517],9],[[-1,118465],26],[[-1,118528],10],[[-1,126161],9],[[-1,118589],14],[[-1,118472],4],[[-1,126152],1],[[-1,126271],3],[[-1,126266],9],[[-1,126255],6],[[-1,126240],28],[[-1,126211],11],[[-1,126200],"sing"],[[-1,126192]," this"],[[-1,126196],2],[[-1,126249],8],[[-1,126257],1],[[-1,126268],1],[[-1,126294],3],[[-1,126289],17],[[-1,126291],1],[[-1,134081],10],[[-1,168966],4],[[-1,168962]," approach"],[[-1,126187],","],[[-1,46261]," my implementation of automerge's algorithm is"],[[-1,168953],1],[[-1,126185],7],[[-1,126178]," "],[[-1,168952],3],[[-1,168949],"about"],[[-1,199500],9],[[-1,199326],7],[[-1,199491],6],[[-1,199377],17],[[-1,199485],1],[[-1,199404],1],[[-1,168971],3],[[-1,168968]," "],[[-1,169767],1],[[-1,169758],8],[[-1,169766],4],[[-1,199396],6],[[-1,199390],"1"],[[-1,199387],"0x "],[[-1,199318],"faster"],[[-1,126151]," than"],[[-1,46214]," the real"],[[-1,126146]," automerge"],[[-1,46204],". And it"],[[-1,31125],"'"],[[-1,46196],"s"],[[-1,118074],5],[[-1,118069]," 30x more"],[[-1,126176],10],[[-1,168943],5],[[-1,199384],7],[[-1,199312],19],[[-1,199293]," "],[[-1,199288],"memory-efficient"],[[-1,169749],":"],[[-1,198320],23],[[-1,198293],14],[[-1,198297],2],[[-1,199258],1],[[-1,199272],13],[[-1,199292],2],[[-1,199389],1],[[-1,199403],6],[[-1,201457],1],[[-1,201473],2],[[-1,201487],2],[[-1,201544],5],[[-1,201617],1],[[-1,201637],6],[[-1,201691],4],[[-1,201695],3],[[-1,201735],1],[[-1,201982],1],[[-1,202031],2],[[-1,202060],3],[[-1,202120],1],[[-1,202145],2],[[-1,202200],11],[[-1,204072],"\n"],[[-1,199679],"\n"],[[-1,199256],44],[[-1,199211],44],[[-1,199678],"| Test                       "],[[-1,199075]," "],[[-1,199072]," "],[[-1,199069]," "],[[-1,199066]," "],[[-1,199063]," "],[[-1,199060]," "],[[-1,199057]," "],[[-1,199649],"| Time taken |"],[[-1,189494]," RAM usage |"],[[-1,199122],"\n|"],[[-1,104683],":"],[[-1,199120],1],[[-1,199119],"-------------------------- "],[[-1,199076]," "],[[-1,199073]," "],[[-1,199070]," "],[[-1,199067]," "],[[-1,199064]," "],[[-1,199061]," "],[[-1,199058]," "],[[-1,199092],"| ----------"],[[-1,162387],":"],[[-1,199080],1],[[-1,199079],"|"],[[-1,189482]," ---------"],[[-1,162377],":"],[[-1,189472],1],[[-1,189471],"|"],[[-1,199167],"\n| "],[[-1,99462],"automerge (v1.0.0-preview2)"],[[-1,199164],26],[[-1,199138]," "],[[-1,199077],1],[[-1,199074]," "],[[-1,199071]," "],[[-1,199068]," "],[[-1,199065]," "],[[-1,199062]," "],[[-1,199059]," "],[[-1,199137],"| "],[[-1,199046],1],[[-1,199045]," "],[[-1,199135],"291s      "],[[-1,199125],1],[[-1,199124],"|"],[[-1,189470]," 880 MB    |"],[[-1,199635],45],[[-1,199484],43],[[-1,199441],"\n"],[[-1,199590],"| "],[[-1,105548],"*"],[[-1,105546],"*"],[[-1,199439],"reference-crdts"],[[-1,199588],9],[[-1,199579]," "],[[-1,199359],"("],[[-1,199337],"automerge "],[[-1,199341],3],[[-1,199358],10],[[-1,199348],"/ "],[[-1,21460],"Yjs"],[[-1,199346],3],[[-1,199343],")"],[[-1,105547],"*"],[[-1,105549],"*"],[[-1,199423],10],[[-1,199413]," "],[[-1,199578],17],[[-1,199561],"| "],[[-1,199048],"  "],[[-1,199407],"31"],[[-1,199411],2],[[-1,199559],3],[[-1,199556],"s"],[[-1,199405]," "],[[-1,199555],"    "],[[-1,199551],2],[[-1,199549]," |"],[[-1,189458],"  "],[[-1,188783],"2"],[[-1,188778],"8 MB"],[[-1,188780],1],[[-1,188782],1],[[-1,189456],5],[[-1,189451],"    |"],[[-1,199547],"\n"],[[-1,188319],"| "],[[-1,20349],"*"],[[-1,21584],"P"],[[-1,21580],"l"],[[-1,21577],"a"],[[-1,21574],"i"],[[-1,21571],"n"],[[-1,21568]," "],[[-1,21565],"s"],[[-1,21562],"t"],[[-1,21559],"r"],[[-1,21556],"i"],[[-1,21553],"n"],[[-1,21550],"g"],[[-1,21547]," "],[[-1,21544],"e"],[[-1,21541],"d"],[[-1,21538],"i"],[[-1,21535],"t"],[[-1,21532],"s"],[[-1,21529]," "],[[-1,21526],"i"],[[-1,21523],"n"],[[-1,21520]," "],[[-1,21517],"J"],[[-1,21514],"S"],[[-1,20346],"*"],[[-1,188317],26],[[-1,188291],"        | 0.61s      | 0.1 MB    |"],[[-1,199546],28],[[-1,199056],7],[[-1,199518],15],[[-1,189446],10],[[-1,189434],2],[[-1,189436],1],[[-1,199503],"\n"],[[-1,118376],"\n"],[[-1,118237],"I wish I could"],[[-1,118187]," attribute "],[[-1,117945],"*"],[[-1,118176],"all"],[[-1,117944],"*"],[[-1,118173]," of that"],[[-1,118059]," diffe"],[[-1,118051],"rence"],[[-1,118053],1],[[-1,118165]," to this"],[[-1,118046]," "],[[-1,118032],"sweet and simple"],[[-1,118045],5],[[-1,118157],1],[[-1,118039],6],[[-1,118156],5],[[-1,118151]," data structure."],[[-1,118135],1],[[-1,118223],1],[[-1,118209],21],[[-1,118222],11],[[-1,118211]," "],[[-1,118321],64],[[-1,118253],15],[[-1,118257],2],[[-1,118323],1],[[-1,118375],"But a lot of "],[[-1,117800],"the"],[[-1,118362],4],[[-1,118103],12],[[-1,118358]," difference"],[[-1,117797]," here"],[[-1,118347]," "],[[-1,117871],"is "],[[-1,117751],"probabl"],[[-1,117742],"y "],[[-1,117636],"just"],[[-1,117653],4],[[-1,117649]," immutablejs"],[[-1,117632]," gumming "],[[-1,46193],"automerge up"],[[-1,117623],9],[[-1,117744],1],[[-1,117791],13],[[-1,117740],26],[[-1,117761],8],[[-1,117778],11],[[-1,117868],4],[[-1,117863],13],[[-1,117841],1],[[-1,117836],14],[[-1,117767],"."],[[-1,46181],"\n"],[[-1,46155],"\nIt"],[[-1,31124],"'"],[[-1,46152],"s a lot faster than automerge:\n"],[[-1,46092],"\n!["],[[-1,46084],"Automerge is much slower than reference-crdts"],[[-1,46089],"]"],[[-1,46087],"("],[[-1,46121],1],[[-1,46102],9],[[-1,46120],"ref_vs_am_perf.svg"],[[-1,46085],")"],[[-1,46093],1],[[-1,46180],23],[[-1,117819],1],[[-1,117712],3],[[-1,117695],39],[[-1,117709],7],[[-1,117818],1],[[-1,117766],4],[[-1,117817],16],[[-1,117822],1],[[-1,117840],2],[[-1,117850],8],[[-1,117885],12],[[-1,117924],20],[[-1,117900],7],[[-1,117904],2],[[-1,118346],9],[[-1,117943],5],[[-1,118337],12],[[-1,117892],6],[[-1,118014],1],[[-1,117931],6],[[-1,117935],4],[[-1,118013],6],[[-1,118133],14],[[-1,118110],7],[[-1,118088],5],[[-1,117975],7],[[-1,118007],11],[[-1,118083],9],[[-1,117968],7],[[-1,117980],5],[[-1,117955],5],[[-1,117961],3],[[-1,117996],12],[[-1,118091],1],[[-1,118119],7],[[-1,118325],1],[[-1,118324],"\n"],[[-1,199502],"\n"],[[-1,168844],8],[[-1,168835],1],[[-1,169748],10],[[-1,169737],1],[[-1,197616],1],[[-1,197715],17],[[-1,168937],2],[[-1,197698],60],[[-1,197610],5],[[-1,197638],21],[[-1,197604],1],[[-1,169734],1],[[-1,169720],53],[[-1,168856],4],[[-1,168924],2],[[-1,168851],1],[[-1,168922],26],[[-1,168866],8],[[-1,168896],7],[[-1,168883],8],[[-1,168850],5],[[-1,168875],9],[[-1,168889],3],[[-1,168935],8],[[-1,169667],1],[[-1,168833],89],[[-1,168729],14],[[-1,168666],2],[[-1,168715],5],[[-1,168648],9],[[-1,168710],8],[[-1,168663],3],[[-1,168702],8],[[-1,168638],21],[[-1,134294],5],[[-1,168616],1],[[-1,168659],11],[[-1,168694],9],[[-1,168681],14],[[-1,168685],2],[[-1,168744],1],[[-1,168740],5],[[-1,168743],1],[[-1,169727],6],[[-1,169733],5],[[-1,197603],4],[[-1,197615],5],[[-1,197828],6],[[-1,197792],8],[[-1,197819],27],[[-1,197784],46],[[-1,197728],12],[[-1,197738],9],[[-1,197822],2],[[-1,199689],2],[[-1,197593],"\n##"],[[-1,197590],1],[[-1,197585]," "],[[-1,22576],"Death by 1000 scans"],[[-1,193309],17],[[-1,193328],18],[[-1,197584],19],[[-1,197552],"\n"],[[-1,168614],"\n"],[[-1,117584],"W"],[[-1,117614],9],[[-1,117604],1],[[-1,168470],1],[[-1,168613],41],[[-1,168615],1],[[-1,197551],5],[[-1,168513],5],[[-1,197546],1],[[-1,197545],"e'"],[[-1,197440],"re using "],[[-1,117602],"a "],[[-1,117595],"clean and "],[[-1,117600],"fast"],[[-1,197431],4],[[-1,168507],7],[[-1,168500]," "],[[-1,197427],5],[[-1,192634],1],[[-1,192633],"core data "],[[-1,117583],1],[[-1,192623],9],[[-1,168527],3],[[-1,168524],"abstraction"],[[-1,117581]," now"],[[-1,168464],", but the implementation is"],[[-1,168435]," still not *fast*. "],[[-1,134069],"There are two"],[[-1,168415],1],[[-1,168437],1],[[-1,168494],1],[[-1,168469],2],[[-1,168493],12],[[-1,168496],1],[[-1,197422],37],[[-1,192643],8],[[-1,192613],3],[[-1,168479],4],[[-1,192610],4],[[-1,168414]," big"],[[-1,192606]," performance "],[[-1,168402],"bottlenecks in this "],[[-1,134055],"code"],[[-1,126136],"base"],[[-1,134037]," we need to fix"],[[-1,168382],9],[[-1,192593],8],[[-1,168405],":"],[[-1,168409],1],[[-1,192585],1],[[-1,168570],42],[[-1,168572],1],[[-1,192647],2],[[-1,197385],6],[[-1,195839],4],[[-1,197379],27],[[-1,195832],9],[[-1,197352],1],[[-1,194119],"\n"],[[-1,194114],"\n"],[[-1,192583],"1."],[[-1,194113],1],[[-1,194112]," "],[[-1,194118],2],[[-1,197351],1],[[-1,197350],"Finding"],[[-1,197339]," the location to insert"],[[-1,24781],5],[[-1,24787],3],[[-1,168404],","],[[-1,194106]," and"],[[-1,194109],"\n"],[[-1,192580],"2."],[[-1,194108],1],[[-1,194107]," "],[[-1,194100],"A"],[[-1,195822],6],[[-1,195807],1],[[-1,195806],"ctually "],[[-1,195816],"inserting"],[[-1,194099]," into the array"],[[-1,25341],"\n\n"],[[-1,24730],"(These lines"],[[-1,24710]," are marked "],[[-1,24659],"*"],[[-1,24698],"(1)"],[[-1,24658],"*"],[[-1,24695]," and "],[[-1,24656],"*"],[[-1,24690],"(2)"],[[-1,24657],"*"],[[-1,24687]," in the code listing above)."],[[-1,24718],4],[[-1,24752],20],[[-1,24770],12],[[-1,24754],1],[[-1,24758],2],[[-1,25339],27],[[-1,25310],1],[[-1,25307],5],[[-1,25300],29],[[-1,25302],1],[[-1,25309],1],[[-1,25312],1],[[-1,134051],7],[[-1,195798],1],[[-1,195840],1],[[-1,195844],2],[[-1,197316],1],[[-1,197315],"\n"],[[-1,196537],"\n"],[[-1,24655],"To understand why "],[[-1,24616],"this "],[[-1,24598],"code "],[[-1,24611],"is"],[[-1,24592]," necessary"],[[-1,24609],7],[[-1,24602],", "],[[-1,24599],"l"],[[-1,24637],18],[[-1,134020],1],[[-1,134019],"ets say "],[[-1,134010],"w"],[[-1,134022],1],[[-1,168372],1],[[-1,196503],10],[[-1,196536],4],[[-1,196532],"e have a document"],[[-1,196432],", which is a list of items"],[[-1,196515],10],[[-1,196486],"."],[[-1,196126],1],[[-1,134008],1],[[-1,196104],31],[[-1,196072],1],[[-1,194082],13],[[-1,196071],2],[[-1,196125],20],[[-1,196485],1],[[-1,196405],3],[[-1,196401],6],[[-1,196482],11],[[-1,196069],5],[[-1,196471],1],[[-1,196462],4],[[-1,196394],3],[[-1,196458],14],[[-1,194054],16],[[-1,194068],9],[[-1,196444],11],[[-1,194059],2],[[-1,196377],1],[[-1,196390],12],[[-1,196470],7],[[-1,196484],1],[[-1,196492],5],[[-1,196505],1],[[-1,196504],"\n"],[[-1,196753],"\n```javascript\nstate = [\n"],[[-1,196375],47],[[-1,196728],"  { item: 'a', "],[[-1,196277],"i"],[[-1,196273],"s"],[[-1,196269],"D"],[[-1,196265],"e"],[[-1,196261],"l"],[[-1,196257],"e"],[[-1,196253],"t"],[[-1,196249],"e"],[[-1,196237],"d"],[[-1,196233],":"],[[-1,196229]," "],[[-1,196225],"f"],[[-1,196221],"a"],[[-1,196217],"l"],[[-1,196213],"s"],[[-1,196209],"e"],[[-1,196205],","],[[-1,196201]," "],[[-1,196245],1],[[-1,196713],"id: ['seph', 0], seq, parent: null },"],[[-1,196328],"\n  { item: 'X', "],[[-1,196278],"i"],[[-1,196274],"s"],[[-1,196270],"D"],[[-1,196266],"e"],[[-1,196262],"l"],[[-1,196258],"e"],[[-1,196254],"t"],[[-1,196250],"e"],[[-1,196238],"d"],[[-1,196234],":"],[[-1,196230]," "],[[-1,196226],"f"],[[-1,196222],"a"],[[-1,196218],"l"],[[-1,196214],"s"],[[-1,196210],"e"],[[-1,196206],","],[[-1,196202]," "],[[-1,196246],1],[[-1,196312],"id, seq, parent: ['seph', 0] },"],[[-1,196676],47],[[-1,196629],"\n  { item: 'b', "],[[-1,196279],"i"],[[-1,196275],"s"],[[-1,196271],"D"],[[-1,196267],"e"],[[-1,196263],"l"],[[-1,196259],"e"],[[-1,196255],"t"],[[-1,196251],"e"],[[-1,196239],"d"],[[-1,196235],":"],[[-1,196231]," "],[[-1,196132],"true"],[[-1,196227],1],[[-1,196223],1],[[-1,196219],1],[[-1,196215],1],[[-1,196211],1],[[-1,196207],","],[[-1,196128]," "],[[-1,196203]," "],[[-1,196247],1],[[-1,196613],"id, seq, parent: ['seph', 0] },\n  { item: 'c', "],[[-1,196280],"i"],[[-1,196276],"s"],[[-1,196272],"D"],[[-1,196268],"e"],[[-1,196264],"l"],[[-1,196260],"e"],[[-1,196256],"t"],[[-1,196252],"e"],[[-1,196240],"d"],[[-1,196236],":"],[[-1,196232]," "],[[-1,196228],"f"],[[-1,196224],"a"],[[-1,196220],"l"],[[-1,196216],"s"],[[-1,196212],"e"],[[-1,196208],","],[[-1,196204]," "],[[-1,196248],1],[[-1,196566],"id, seq, parent: ["],[[-1,24547],"'seph', 1"],[[-1,196548],2],[[-1,196546],"] }"],[[-1,194038],",\n  ..."],[[-1,196543],"\n]\n```"],[[-1,134006],"\n"],[[-1,133959],"\n"],[[-1,24570],"And"],[[-1,24582],5],[[-1,24577]," "],[[-1,24575],"s"],[[-1,133678],1],[[-1,133958],10],[[-1,133947],1],[[-1,134005],2],[[-1,134003],"ome of those items might have been deleted"],[[-1,24573],"."],[[-1,133945],1],[[-1,133944]," "],[[-1,133943],3],[[-1,133940],"I've added an `isDeleted` flag"],[[-1,133884]," to mark which ones"],[[-1,133885],"."],[[-1,133865]," "],[[-1,24566],"(Unfortunately "],[[-1,24550],"w"],[[-1,133864],1],[[-1,133863],"e can't just remove them from the array because other "],[[-1,133788],"inserts might depend on them. "],[[-1,133758],1],[[-1,133741],"Drat"],[[-1,133751],4],[[-1,133757],4],[[-1,133752],"!"],[[-1,133737]," But"],[[-1,133697]," "],[[-1,126101],"that"],[[-1,105728],"'"],[[-1,126097],"s a problem for another day.)"],[[-1,1],1],[[-1,3],1],[[-1,133696],4],[[-1,133733],9],[[-1,126132],9],[[-1,133724],13],[[-1,126116],1],[[-1,126107],5],[[-1,126115],4],[[-1,126118],1],[[-1,126122],2],[[-1,133711],5],[[-1,133691],12],[[-1,133706],8],[[-1,133753],1],[[-1,133746],2],[[-1,133809],20],[[-1,133910],14],[[-1,133894],8],[[-1,133896],1],[[-1,133961],1],[[-1,196754],"\n"],[[-1,194921],"\n"],[[-1,168369],"I"],[[-1,194920],6],[[-1,194914],"magine the document has 1"],[[-1,133664],"5"],[[-1,194889],1],[[-1,194888],"0"],[[-1,194885]," 000"],[[-1,133598]," array"],[[-1,194881]," items in it"],[[-1,133657],", representing 100 00"],[[-1,133634],"0 "],[[-1,133591],"characters"],[[-1,133632],5],[[-1,133627]," which haven't been deleted."],[[-1,133636],1],[[-1,133663],3],[[-1,194869],5],[[-1,194864]," "],[[-1,133580],"If t"],[[-1,194863],1],[[-1,194862],"he"],[[-1,194887],1],[[-1,197072],1],[[-1,196884],14],[[-1,196870]," user types an 'a' in the middle of the document ("],[[-1,196162],"at"],[[-1,196160],6],[[-1,196154]," "],[[-1,133567],"*"],[[-1,133576],"document "],[[-1,196200],3],[[-1,196185],22],[[-1,196197],6],[[-1,196820],3],[[-1,196817],"position"],[[-1,133566],"*"],[[-1,196809]," 50"],[[-1,194859]," 0"],[[-1,196806],"00)"],[[-1,133564],","],[[-1,196803],1],[[-1,193976]," "],[[-1,25270],"what index "],[[-1,25255],"does that correspond to"],[[-1,25259],2],[[-1,133562],1],[[-1,192576],22],[[-1,133677]," in "],[[-1,133558],"our"],[[-1,133555],9],[[-1,133673],2],[[-1,133671]," array"],[[-1,192554],"?"],[[-1,192551]," "],[[-1,133544],"To find out, "],[[-1,133530],"w"],[[-1,192550],1],[[-1,192549],"e"],[[-1,192548],3],[[-1,192545]," need to scan through the document"],[[-1,192503]," (skipping deleted items) to figure out"],[[-1,133525]," the right array location"],[[-1,192464],24],[[-1,168366],"."],[[-1,168365],17],[[-1,168295],36],[[-1,168348],5],[[-1,168331],22],[[-1,168307],11],[[-1,168309],1],[[-1,168333],1],[[-1,168343],5],[[-1,192440],6],[[-1,192422],36],[[-1,192386],"\n\n"],[[-1,24538],"So "],[[-1,24534],"i"],[[-1,25230],1],[[-1,133499],3],[[-1,133495],1],[[-1,192368],1],[[-1,192367],"f"],[[-1,168255]," the user"],[[-1,168259],2],[[-1,192366],5],[[-1,192361]," insert"],[[-1,168245],"s"],[[-1,192354]," at position 50 000, we'll probably have to "],[[-1,25229],"linearly "],[[-1,192310],"scan "],[[-1,192292],"past"],[[-1,192288],1],[[-1,192305],5],[[-1,192300]," "],[[-1,126066],"75"],[[-1,192299],2],[[-1,192297]," 000 "],[[-1,192287],"items "],[[-1,133492],"or something "],[[-1,192281],"to find the insert position"],[[-1,168243],"."],[[-1,192254],1],[[-1,192253]," Yikes!\n\nAnd then when we actually insert, "],[[-1,168239],"the cod"],[[-1,168228],"e does this"],[[-1,24086],", which is double yikes"],[[-1,24097],8],[[-1,133479],23],[[-1,168232],2],[[-1,192210],3],[[-1,168241],1],[[-1,192207],7],[[-1,192200],":"],[[-1,192384],15],[[-1,192424],1],[[-1,192434],9],[[-1,192511],7],[[-1,192553],1],[[-1,193975],11],[[-1,193953],50],[[-1,193826],37],[[-1,193788],59],[[-1,193719],17],[[-1,193698],17],[[-1,193680],1],[[-1,193702],2],[[-1,193729],5],[[-1,193860],33],[[-1,193882],21],[[-1,193903],20],[[-1,193964],10],[[-1,196802],44],[[-1,196037],10],[[-1,194030],1],[[-1,194023],3],[[-1,194029],3],[[-1,196027],30],[[-1,194019],1],[[-1,195997],2],[[-1,194017],8],[[-1,194006],2],[[-1,194002],2],[[-1,193992],5],[[-1,194000],8],[[-1,194004],1],[[-1,194009],2],[[-1,195995],25],[[-1,195961],5],[[-1,195948],31],[[-1,194838],1],[[-1,194833],1],[[-1,194795],3],[[-1,193985],9],[[-1,194792],5],[[-1,194832],35],[[-1,194837],2],[[-1,194857],5],[[-1,195917],3],[[-1,194851],1],[[-1,195914],15],[[-1,194850],12],[[-1,195899],17],[[-1,195870],9],[[-1,195882],4],[[-1,195860],10],[[-1,195878],8],[[-1,195956],7],[[-1,195970],7],[[-1,196758],4],[[-1,196152],1],[[-1,196053],15],[[-1,196058],4],[[-1,196151],18],[[-1,196985],82],[[-1,196901],1],[[-1,197071],80],[[-1,196989],3],[[-1,196991],1],[[-1,197073],1],[[-1,197314],1],[[-1,197270],33],[[-1,196900],15],[[-1,197307],13],[[-1,197292],21],[[-1,197294],1],[[-1,197313],5],[[-1,197343],2],[[-1,197543],2],[[-1,197448],3],[[-1,197541],48],[[-1,197489],40],[[-1,197493],3],[[-1,197565],12],[[-1,197589],2],[[-1,197595],2],[[-1,195334],18],[[-1,193673],4],[[-1,194770],9],[[-1,193678],4],[[-1,194761],6],[[-1,193668],6],[[-1,194755],6],[[-1,195316],5],[[-1,194781],10],[[-1,194787],3],[[-1,195311],13],[[-1,193661],2],[[-1,195298],45],[[-1,194965],6],[[-1,194945],9],[[-1,194959],12],[[-1,194966],1],[[-1,195253],102],[[-1,194747],1],[[-1,195151],2],[[-1,194748],1],[[-1,195149],13],[[-1,193655],12],[[-1,195136],51],[[-1,194744],2],[[-1,195085],50],[[-1,194746],2],[[-1,195035],9],[[-1,194934],12],[[-1,195026],26],[[-1,194742],2],[[-1,195000],3],[[-1,193642],2],[[-1,194740],1],[[-1,194717],37],[[-1,194676],43],[[-1,193640],1],[[-1,193629],1],[[-1,193639],4],[[-1,193628],1],[[-1,193635],6],[[-1,194633],2],[[-1,194625],5],[[-1,194616],60],[[-1,194556],"\n\n```javascript\ndoc.content.splice("],[[-1,194488],"destIdx"],[[-1,194494],5],[[-1,194521],7],[[-1,194514],", 0, newItem)"],[[-1,194481],9],[[-1,194501],"\n```\n"],[[-1,192196],"\n"],[[-1,192195],13],[[-1,192181],1],[[-1,192197],1],[[-1,194496],1],[[-1,194471],"If the"],[[-1,194365],1],[[-1,194391],6],[[-1,194379],9],[[-1,194385],3],[[-1,194465]," array currently has 1"],[[-1,133454],"5"],[[-1,194443],1],[[-1,194442],"0"],[[-1,194437]," 000 items, jav"],[[-1,194420],"ascript"],[[-1,192180]," will"],[[-1,194413]," "],[[-1,194363],"need"],[[-1,194359],1],[[-1,194358]," to move every "],[[-1,192174],"single "],[[-1,194343],"item"],[[-1,168217]," *after* the new item"],[[-1,192167]," once space forward"],[[-1,168196]," in the array"],[[-1,192148],"."],[[-1,192145]," "],[[-1,192135],"This part happens"],[[-1,168010]," in native code"],[[-1,192118],9],[[-1,192109],", but "],[[-1,168139],"it"],[[-1,31182],"'"],[[-1,168137],"s still probably slow when we're moving "],[[-1,168019],"so many"],[[-1,168021],1],[[-1,168097],12],[[-1,168085]," items"],[[-1,192103],4],[[-1,192095],5],[[-1,192090],"."],[[-1,168170]," ("],[[-1,168071],"Aside:"],[[-1,168078],5],[[-1,168073]," "],[[-1,168164],6],[[-1,168168],4],[[-1,168180],5],[[-1,192099],2],[[-1,192140],4],[[-1,192144],3],[[-1,192146],1],[[-1,194339],43],[[-1,194170],19],[[-1,194296],2],[[-1,193626],5],[[-1,194150],16],[[-1,168064],10],[[-1,168157],1],[[-1,168152],"V8"],[[-1,24062]," is actually "],[[-1,23960],"suspiciously "],[[-1,24049],6],[[-1,24043],"fast at this"],[[-1,23946]," part"],[[-1,24031],", so maybe "],[[-1,23940],"v8 isn't"],[[-1,24020],7],[[-1,24012]," using an"],[[-1,168156],2],[[-1,194294],20],[[-1,194133],9],[[-1,194274],7],[[-1,194267]," array "],[[-1,194245],"internally"],[[-1,23990]," to implement "],[[-1,23968],"Arra"],[[-1,23962],"ys"],[[-1,23964],1],[[-1,23976],7],[[-1,24003],"?"],[[-1,24001]," Who knows!"],[[-1,194235],1],[[-1,168148],4],[[-1,168143],1],[[-1,194234],4],[[-1,194124],4],[[-1,194230],5],[[-1,192089],2],[[-1,168045],4],[[-1,168040],1],[[-1,168051],3],[[-1,168053],1],[[-1,168141],1],[[-1,192087],14],[[-1,192049],27],[[-1,168027],5],[[-1,168038],3],[[-1,168031],2],[[-1,168035],2],[[-1,192022],6],[[-1,192073],22],[[-1,194225],2],[[-1,193620],1],[[-1,194223],31],[[-1,194172],2],[[-1,194192],9],[[-1,193619],7],[[-1,194183],8],[[-1,194175],")"],[[-1,167781],"\n\n"],[[-1,23931],"But "],[[-1,23904],"in "],[[-1,23897],"general"],[[-1,23901],2],[[-1,23927],19],[[-1,23908],", "],[[-1,23905],"i"],[[-1,167779],1],[[-1,167778],"nsert"],[[-1,167771],"ing an item "],[[-1,167750],"into a document"],[[-1,167759],8],[[-1,167773],1],[[-1,194260],11],[[-1,194412],20],[[-1,194422],1],[[-1,194441],2],[[-1,194620],2],[[-1,194631],5],[[-1,194680],2],[[-1,194739],8],[[-1,194729],11],[[-1,194731],1],[[-1,194997],30],[[-1,195850],3],[[-1,195788],77],[[-1,195645],25],[[-1,195619],3],[[-1,195711],7],[[-1,195377],1],[[-1,195704],5],[[-1,195378],1],[[-1,195699],7],[[-1,195686],41],[[-1,195616],19],[[-1,195593],47],[[-1,195539],10],[[-1,195546],5],[[-1,195480],10],[[-1,195446],10],[[-1,195470],23],[[-1,195436],56],[[-1,195376],1],[[-1,195365],30],[[-1,195375],9],[[-1,195500],19],[[-1,195521],2],[[-1,195517],6],[[-1,195509],3],[[-1,195511],1],[[-1,195519],1],[[-1,195529],4],[[-1,195541],1],[[-1,195597],2],[[-1,195692],3],[[-1,195847],2],[[-1,195797],8],[[-1,199682],2],[[-1,167991],36],[[-1,167955]," with "],[[-1,167926],"*"],[[-1,167949],"n"],[[-1,167925],"*"],[[-1,167948]," items"],[[-1,167695]," will take"],[[-1,167731],25],[[-1,167706]," "],[[-1,23889],"about "],[[-1,167705],"*n* steps"],[[-1,167733],1],[[-1,192016],3],[[-1,192012],1],[[-1,193599],19],[[-1,167995],3],[[-1,193580],2],[[-1,192008],17],[[-1,193578],11],[[-1,193528],11],[[-1,167924],1],[[-1,167941],1],[[-1,167923],1],[[-1,167940],14],[[-1,193517],27],[[-1,193488],26],[[-1,193462],". "],[[-1,126064],"Wait, no - "],[[-1,167684],6],[[-1,167678],"it"],[[-1,124248],"'"],[[-1,167676],"s worse than that"],[[-1,167647]," be"],[[-1,167640],"cause deleted items"],[[-1,126051]," stick around"],[[-1,167621],22],[[-1,167644],2],[[-1,167659],"."],[[-1,191989],17],[[-1,193460],6],[[-1,167920],1],[[-1,167917],12],[[-1,167905]," "],[[-1,167656],"I"],[[-1,167904],1],[[-1,167903],"nsert"],[[-1,167655],"ing"],[[-1,167898]," into a document where there have"],[[-1,167919],1],[[-1,193454],21],[[-1,193433]," "],[[-1,167650],"*"],[[-1,193432],1],[[-1,193431],"ever been"],[[-1,167649],"*"],[[-1,193422],1],[[-1,193421]," "],[[-1,167865],"*n* items"],[[-1,167598]," will take "],[[-1,167580],"*"],[[-1,167587],"n"],[[-1,167579],"*"],[[-1,167586]," steps"],[[-1,167856],1],[[-1,193420],15],[[-1,167841],48],[[-1,167847],3],[[-1,167855],4],[[-1,193392],". "],[[-1,193379],"This"],[[-1,167793]," algorithm"],[[-1,193375]," "],[[-1,23815],"is reasonably fast, bu"],[[-1,23790],"t"],[[-1,23793],1],[[-1,193374],15],[[-1,23880],1],[[-1,193359],2],[[-1,125967],5],[[-1,126038],4],[[-1,126032],27],[[-1,126005]," "],[[-1,23786],"i"],[[-1,23788],1],[[-1,23878],1],[[-1,126004],1],[[-1,126003],"t gets slower with every keystroke"],[[-1,126034],1],[[-1,193357],27],[[-1,193330],"."],[[-1,167782]," "],[[-1,133451],"I"],[[-1,167578],19],[[-1,167558],1],[[-1,191970],1],[[-1,191955],1],[[-1,191954],"nserting "],[[-1,167555],"*"],[[-1,191945],"n"],[[-1,167554],"*"],[[-1,191944]," characters will take "],[[-1,167557],"*"],[[-1,191969],4],[[-1,191965],"O(n"],[[-1,191960],"^2)"],[[-1,167556],"*"],[[-1,191957],"."],[[-1,167553],"\n"],[[-1,125962],"\n"],[[-1,68578],"You can see this if"],[[-1,68615],2],[[-1,68613]," we "],[[-1,68607],"zoom in "],[[-1,68259],"on"],[[-1,68599],7],[[-1,68365],9],[[-1,68354],14],[[-1,68340]," the "],[[-1,68356],1],[[-1,68592],"diagram above"],[[-1,68559],"."],[[-1,68516]," "],[[-1,23783],"There's a lot going on here because "],[[-1,23708],"Martin's editi"],[[-1,23684],"ng position bounced around the docu"],[[-1,23645],"ment. But there's a "],[[-1,23623],"strong linear trend up and to th"],[[-1,23587],"e right, which is what we would expect "],[[-1,23538],"when "],[[-1,23533],5],[[-1,23528],"insert"],[[-1,23496],"s"],[[-1,23522]," take"],[[-1,23517],1],[[-1,23516]," "],[[-1,23499],"*"],[[-1,23513],"O(n)"],[[-1,23498],"*"],[[-1,23509]," time"],[[-1,23493],":"],[[-1,23500],1],[[-1,23504],2],[[-1,23515],1],[[-1,23548],5],[[-1,23591],2],[[-1,23625],1],[[-1,23649],2],[[-1,23694],5],[[-1,23747],38],[[-1,23877],43],[[-1,23832],10],[[-1,23818],1],[[-1,23822],2],[[-1,23834],1],[[-1,68515],36],[[-1,68117],35],[[-1,68131],9],[[-1,68138],6],[[-1,68143],4],[[-1,68256],7],[[-1,68122],4],[[-1,68249],4],[[-1,68479],42],[[-1,68397],24],[[-1,68368],3],[[-1,68309],4],[[-1,68082],10],[[-1,68305],10],[[-1,68267],7],[[-1,25210],7],[[-1,68295],5],[[-1,68231],1],[[-1,68062],19],[[-1,25220],8],[[-1,25203],19],[[-1,25179],5],[[-1,25184],4],[[-1,25212],1],[[-1,68071],8],[[-1,45802],4],[[-1,45792],28],[[-1,45760],18],[[-1,45737],36],[[-1,25172],2],[[-1,45701],12],[[-1,45677],11],[[-1,45661],3],[[-1,45666],1],[[-1,45664],1],[[-1,45689],11],[[-1,45742],4],[[-1,45764],2],[[-1,45798],3],[[-1,68290],1],[[-1,68244],12],[[-1,68289],22],[[-1,68230],28],[[-1,68200],8],[[-1,68149],5],[[-1,68192],1],[[-1,68183],32],[[-1,68191],7],[[-1,68202],1],[[-1,68317],4],[[-1,68321],2],[[-1,68335],7],[[-1,68373],4],[[-1,68437],11],[[-1,68424],26],[[-1,68426],1],[[-1,68533],"\n"],[[-1,49032],"\n"],[[-1,46026],"!"],[[-1,46011],"["],[[-1,45844],"reference crdts impl"],[[-1,31179],"e"],[[-1,31181],1],[[-1,45824],"mentation zoomed in"],[[-1,46000],"]"],[[-1,45989],"("],[[-1,49031],9],[[-1,48999],"ref_perf3"],[[-1,49022],17],[[-1,49005],".svg"],[[-1,45967],")"],[[-1,49001],1],[[-1,68532],"\n"],[[-1,24533],"\n"],[[-1,23430],"And why this shape in particular? And "],[[-1,23391],"w"],[[-1,24531],1],[[-1,24530],"hy does "],[[-1,23492],"performance get better near the end?"],[[-1,23456],8],[[-1,24231],4],[[-1,24522],4],[[-1,24483],5],[[-1,24518],21],[[-1,24246],14],[[-1,24497],1],[[-1,24106],7],[[-1,24496]," "],[[-1,24227],"If we"],[[-1,23447]," simply"],[[-1,24222]," "],[[-1,24495],11],[[-1,24478],"graph"],[[-1,24219]," "],[[-1,23440],"*"],[[-1,24218],"where"],[[-1,23439],"*"],[[-1,24473],7],[[-1,24466]," "],[[-1,24213],"each "],[[-1,24459],"edit"],[[-1,24207]," happened "],[[-1,24186],"throughout the editing trace"],[[-1,24197],10],[[-1,24455],18],[[-1,24426],5],[[-1,24419],6],[[-1,24411],","],[[-1,24158]," "],[[-1,23437],"with"],[[-1,24157],7],[[-1,24410],5],[[-1,24405]," the same "],[[-1,24384],"bucketing and smoothing"],[[-1,24147],", "],[[-1,22594],"the result"],[[-1,22580]," is"],[[-1,22584],3],[[-1,23322],14],[[-1,23308]," "],[[-1,23294],"a very"],[[-1,23307],12],[[-1,24145],6],[[-1,24133],8],[[-1,23389],6],[[-1,23383]," "],[[-1,24125],11],[[-1,24114],"familiar"],[[-1,23288]," curve"],[[-1,24139],3],[[-1,24361],8],[[-1,24353],":"],[[-1,24395],10],[[-1,24413],1],[[-1,24421],1],[[-1,24437],8],[[-1,24463],3],[[-1,24465],1],[[-1,24532],"\n"],[[-1,24352],"\n!["],[[-1,24285],"Edit"],[[-1,24277]," position throughout document"],[[-1,24248],1],[[-1,24281],2],[[-1,24349],40],[[-1,24309],"]("],[[-1,24292],"inspos"],[[-1,24307],9],[[-1,24298],".svg)"],[[-1,68531],15],[[-1,68552],17],[[-1,68558],3],[[-1,68609],1],[[-1,68623],7],[[-1,125959],2],[[-1,125937],9],[[-1,125957],7],[[-1,125943],4],[[-1,125950],7],[[-1,125939],1],[[-1,125961],1],[[-1,191962],1],[[-1,192666],1],[[-1,68043],"\n"],[[-1,22774],"\n"],[[-1,22556],"It looks like the"],[[-1,22765],3],[[-1,22730],3],[[-1,22727]," time spent applying changes"],[[-1,22762],19],[[-1,22743]," is dominated"],[[-1,22622]," by"],[[-1,22635],6],[[-1,22698],3],[[-1,22695]," the time "],[[-1,22618],"it takes to"],[[-1,22685],5],[[-1,22680]," scan"],[[-1,22603]," through"],[[-1,22675],4],[[-1,22667]," "],[[-1,22646],"the"],[[-1,22666],3],[[-1,22663]," document"],[[-1,22643],"'s "],[[-1,22640],4],[[-1,22654],1],[[-1,22653],"array."],[[-1,22539],74],[[-1,22671],2],[[-1,22773],7],[[-1,22775],"\n"],[[-1,192665],"\n##"],[[-1,192662],2],[[-1,192660]," "],[[-1,25125],"Changing the data structure"],[[-1,25129],3],[[-1,25131],1],[[-1,25139],7],[[-1,25164],24],[[-1,25166],1],[[-1,192659],12],[[-1,191879],"\n"],[[-1,167551],"\nCan we fix this? Yes we can!"],[[-1,125900]," "],[[-1,45643],"And by \"we\", I mean "],[[-1,45657],"Kevin"],[[-1,45652],1],[[-1,125899],25],[[-1,125874]," fixed these problems"],[[-1,45650]," in Yjs"],[[-1,125853],". "],[[-1,38824],"How did he manage that?\n\nSo"],[[-1,38763]," "],[[-1,38760],"remember, there are two problems to fix:\n\n"],[[-1,38516],"1."],[[-1,38718],1],[[-1,38717]," "],[[-1,38633],"How do we find a specific insert position"],[[-1,38590],"?\n"],[[-1,38510],"2. "],[[-1,38588],1],[[-1,38513],1],[[-1,38587],1],[[-1,38586],"How do we"],[[-1,38530]," efficiently"],[[-1,38577]," insert content at that location"],[[-1,38545],14],[[-1,38531],"?"],[[-1,38592],1],[[-1,38701],67],[[-1,38716],14],[[-1,38762],1],[[-1,38797],33],[[-1,125830],4],[[-1,38847],8],[[-1,38835],10],[[-1,38838],1],[[-1,125826],7],[[-1,125815],7],[[-1,125819],3],[[-1,125851],3],[[-1,125846],15],[[-1,125848],1],[[-1,167552],"\n"],[[-1,191878],"\n"],[[-1,45619],"Kevin solved "],[[-1,38506],"the first"],[[-1,38497],1],[[-1,45606],4],[[-1,45602]," problem by thinking about how "],[[-1,45569],"humans actually edit"],[[-1,45507]," text"],[[-1,45549]," documents. "],[[-1,45571],1],[[-1,45623],2],[[-1,167522],9],[[-1,193390],10],[[-1,193405],2],[[-1,193401],8],[[-1,193403],1],[[-1,193490],1],[[-1,193533],4],[[-1,193567],6],[[-1,193559],8],[[-1,193545],11],[[-1,193551],5],[[-1,193561],1],[[-1,193612],12],[[-1,199680],1],[[-1,191917],35],[[-1,191918],1],[[-1,191921],1],[[-1,191919],1],[[-1,191922],1],[[-1,193292],1],[[-1,193285],2],[[-1,193279],55],[[-1,193134],9],[[-1,193056],1],[[-1,193007],"Usually "],[[-1,45516],"while"],[[-1,192999],4],[[-1,192995]," "],[[-1,45536],"we"],[[-1,45532],"'"],[[-1,45530],"re typing"],[[-1,192994],17],[[-1,45533],1],[[-1,192977],", "],[[-1,45519],"we"],[[-1,192975],4],[[-1,192971]," don't actually "],[[-1,38494],"bounce around"],[[-1,192955],11],[[-1,192944]," "],[[-1,45510],"a"],[[-1,45509],1],[[-1,192943],3],[[-1,192940]," document "],[[-1,192731],"very"],[[-1,192930],4],[[-1,192926]," much."],[[-1,192917]," "],[[-1,38481],"Rather than scanning the document each time an edit hap"],[[-1,38424],"pens, "],[[-1,38426],1],[[-1,125808],"Yjs"],[[-1,125805],1],[[-1,191876],12],[[-1,125803],1],[[-1,191864],24],[[-1,191840]," "],[[-1,192916],7],[[-1,192909],"cach"],[[-1,38414],"es"],[[-1,191837],3],[[-1,192905],1],[[-1,192904]," the last"],[[-1,192726]," "],[[-1,191833],"*"],[[-1,192710],"(index, position)"],[[-1,191834],"*"],[[-1,192693]," pair where"],[[-1,125802],4],[[-1,192725],14],[[-1,192895],1],[[-1,192881],8],[[-1,192873]," the user"],[[-1,38412]," ma"],[[-1,38401],"de an"],[[-1,38409],4],[[-1,191831]," edit"],[[-1,191826],2],[[-1,192864],1],[[-1,192681],6],[[-1,125796],12],[[-1,192675],9],[[-1,191823],"."],[[-1,192863],9],[[-1,192854]," "],[[-1,45486],"The next edit will probably be pretty close to the previous edit"],[[-1,45421],", so Kevin just scans "],[[-1,45393],"forwards or backwards from the last"],[[-1,38393]," editing"],[[-1,45358]," position"],[[-1,45399],5],[[-1,191821],1],[[-1,192853],2],[[-1,192845],11],[[-1,125784],7],[[-1,192834],8],[[-1,125775],9],[[-1,45500],6],[[-1,125766],6],[[-1,192826],5],[[-1,192815],1],[[-1,191820],1],[[-1,45494],8],[[-1,125755],4],[[-1,125742],3],[[-1,125751],9],[[-1,191819],16],[[-1,192814],33],[[-1,192774],3],[[-1,192767],6],[[-1,192757],6],[[-1,125739],"."],[[-1,45343]," "],[[-1,45347],2],[[-1,125738],14],[[-1,191801],5],[[-1,125722],8],[[-1,191796],9],[[-1,125723],1],[[-1,191787],33],[[-1,125712],19],[[-1,191754],5],[[-1,191737],1],[[-1,125688],1],[[-1,125692],2],[[-1,191734],1],[[-1,191733],"This sounds"],[[-1,191675]," a little bit"],[[-1,191722],8],[[-1,191714]," dodgy"],[[-1,45334]," to me"],[[-1,45322],18],[[-1,45328],3],[[-1,45342],6],[[-1,125687]," "],[[-1,45298],"- I mean, thats a big assumption"],[[-1,45254]," to make"],[[-1,45266],"!"],[[-1,125686],17],[[-1,125655],56],[[-1,125597],1],[[-1,125596]," "],[[-1,38385],"What if edits happ"],[[-1,38365],"en randomly"],[[-1,38348],"?!"],[[-1,38345]," But people don't actually edit documents randomly, so "],[[-1,38346],1],[[-1,38354],1],[[-1,38351],1],[[-1,38353],1],[[-1,38367],1],[[-1,125595],1],[[-1,125669],1],[[-1,125660],2],[[-1,125664],2],[[-1,125668],2],[[-1,191708],5],[[-1,45264],8],[[-1,191703],1],[[-1,191702],"it works great in practice."],[[-1,45134],"\n\n("],[[-1,44937],"W"],[[-1,45131],5],[[-1,45126],"hat if two users are editing different parts of a document"],[[-1,38254]," at the same time"],[[-1,45068],"?"],[[-1,44921]," "],[[-1,44920],22],[[-1,44925],2],[[-1,44927],1],[[-1,45067],1],[[-1,45066],"Yjs "],[[-1,44936],"actually "],[[-1,45058],"stores a whole set of cache"],[[-1,38237],"d"],[[-1,45031]," locations"],[[-1,38287],", so"],[[-1,44894],1],[[-1,44893]," "],[[-1,38282],"t"],[[-1,44891],1],[[-1,44896],1],[[-1,45021],6],[[-1,45015],"here's "],[[-1,44967],"almost always"],[[-1,44954],1],[[-1,45008],7],[[-1,45001]," a cached "],[[-1,44946],"cursor"],[[-1,44991],5],[[-1,44950],3],[[-1,44986],1],[[-1,44985]," location "],[[-1,38280],"near each user"],[[-1,44975],6],[[-1,44890]," no matter where "],[[-1,38265],"they're"],[[-1,44873],5],[[-1,44868]," mak"],[[-1,38257],"ing"],[[-1,44864],1],[[-1,44863]," changes in the document"],[[-1,44969],".)"],[[-1,45062],3],[[-1,45246],2],[[-1,45143],6],[[-1,45149],5],[[-1,45227],44],[[-1,45181],10],[[-1,45169],19],[[-1,45171],1],[[-1,45183],1],[[-1,45244],16],[[-1,191661],"\n\n"],[[-1,38236],"Once "],[[-1,38180],"Y"],[[-1,38231],1],[[-1,38230],"js finds the target insert location, it needs to"],[[-1,191659],15],[[-1,191644]," insert efficiently"],[[-1,167511],", without "],[[-1,167492],"copying all the existing items"],[[-1,167462],7],[[-1,167454],"."],[[-1,167501],8],[[-1,191625],2],[[-1,191605],5],[[-1,191600]," "],[[-1,44838],"Yjs "],[[-1,38177],"solves"],[[-1,38171],1],[[-1,44834],4],[[-1,44830]," that"],[[-1,167452],1],[[-1,191599],14],[[-1,191585]," by "],[[-1,35490],"using "],[[-1,191577],25],[[-1,191552],"a"],[[-1,35386]," bidirectional"],[[-1,191551]," "],[[-1,191539],7],[[-1,191550],"linked list"],[[-1,35484]," instead of an array"],[[-1,125928],". "],[[-1,35443],"So long as we have an insert position, "],[[-1,35403],"l"],[[-1,35450],6],[[-1,35460],5],[[-1,35463],1],[[-1,125926],14],[[-1,167451],12],[[-1,167439],"inked lists "],[[-1,167413],"allow "],[[-1,35372],2],[[-1,35401],6],[[-1,35395],"insert"],[[-1,35387],"s"],[[-1,35389]," "],[[-1,125909],7],[[-1,167407],6],[[-1,35461],1],[[-1,167401],1],[[-1,125911],1],[[-1,167400],15],[[-1,167385],"in "],[[-1,38166],"const"],[[-1,38149],"ant"],[[-1,38155],3],[[-1,38161],3],[[-1,38169],1],[[-1,167382],4],[[-1,38168],1],[[-1,167378]," time"],[[-1,167415],1],[[-1,167427],11],[[-1,191531],"."],[[-1,191530],1],[[-1,191523],1],[[-1,167373],6],[[-1,167366],1],[[-1,191522],45],[[-1,191473],26],[[-1,191447],"\n\n"],[[-1,191175],"Yjs"],[[-1,133415]," "],[[-1,35367],"does one more thing to "],[[-1,35337],"improve "],[[-1,35319],"performance"],[[-1,35307],"."],[[-1,35329],9],[[-1,35344],5],[[-1,38146],18],[[-1,133414],4],[[-1,167364],5],[[-1,191172],1],[[-1,188702],3],[[-1,191171],36],[[-1,133447],16],[[-1,133424],8],[[-1,133431],3],[[-1,191135],6],[[-1,167357],5],[[-1,191129],19],[[-1,191110]," "],[[-1,35305],"H"],[[-1,133410],8],[[-1,133401],1],[[-1,191109],1],[[-1,191108],"umans"],[[-1,35304]," usually"],[[-1,191103]," type in runs of characters"],[[-1,35295],"."],[[-1,35292]," So"],[[-1,35287]," w"],[[-1,133399],1],[[-1,191076],2],[[-1,35293],1],[[-1,133395],1],[[-1,133394],"hen we"],[[-1,133397],1],[[-1,191053],4],[[-1,191049]," type \"hello\""],[[-1,133388]," in a document"],[[-1,191036],", instead of storing:\n\n```javascript\nstate = [\n"],[[-1,190641],"  { item: 'h', isDeleted: false, id: ['seph', 0], seq, parent: null },\n"],[[-1,190558],"  { item: '"],[[-1,190324],"e"],[[-1,190547],1],[[-1,190546],"', isDeleted: false, id: ['seph', "],[[-1,190316],"1"],[[-1,190512],1],[[-1,190511],"], seq, parent: ['seph', "],[[-1,190306],"0]"],[[-1,190486],1],[[-1,190485]," },\n  { item: '"],[[-1,190322],"l"],[[-1,190326],1],[[-1,190470],1],[[-1,190469],"', isDeleted: false, id: ['seph', "],[[-1,190312],"2"],[[-1,190435],1],[[-1,190315],1],[[-1,190434],"], seq, parent: ['seph', 1"],[[-1,190304],"]"],[[-1,190408]," },\n  { item: '"],[[-1,190320],"l"],[[-1,190393],1],[[-1,190392],"', isDeleted: false, id: ['seph', "],[[-1,190310],"3"],[[-1,190358],1],[[-1,190357],"], seq, parent: ['seph', "],[[-1,190302],"2]"],[[-1,190332],1],[[-1,190331]," },\n"],[[-1,190989],"  { item: '"],[[-1,190318],"o"],[[-1,190717],1],[[-1,190978],1],[[-1,190977],"', isDeleted: false, id: ['seph', "],[[-1,190308],"4"],[[-1,190943],1],[[-1,190942],"], seq, parent: "],[[-1,190569],"['seph', "],[[-1,190299],"3]"],[[-1,190560],1],[[-1,190926],4],[[-1,190922]," },\n"],[[-1,190918],11],[[-1,190715],1],[[-1,190907],65],[[-1,190713],1],[[-1,190842],15],[[-1,190647],5],[[-1,190827],39],[[-1,190710],58],[[-1,190788],11],[[-1,190651],1],[[-1,190711],1],[[-1,190777],53],[[-1,190724],"]\n```"],[[-1,190297],"\n\nYjs just stores:"],[[-1,190719],"\n"],[[-1,190279],"\n```javascript\nstate = [\n  { item: 'h"],[[-1,189866],"ello"],[[-1,190242],"', isDeleted: false, id: ['seph', 0], seq, parent: null },\n"],[[-1,190183],312],[[-1,189871],"]\n```"],[[-1,188721],15],[[-1,191074],19],[[-1,191309],41],[[-1,191183],5],[[-1,191268],77],[[-1,191186],3],[[-1,191191],3],[[-1,191445],32],[[-1,191411],29],[[-1,191361],51],[[-1,191363],1],[[-1,191382],18],[[-1,191413],1],[[-1,191477],3],[[-1,191529],3],[[-1,191581],2],[[-1,191623],17],[[-1,191736],1],[[-1,191749],6],[[-1,192751],19],[[-1,192761],2],[[-1,192771],2],[[-1,192781],6],[[-1,192821],3],[[-1,192851],3],[[-1,192894],6],[[-1,192884],2],[[-1,192888],2],[[-1,192920],2],[[-1,193030],23],[[-1,193040],9],[[-1,193055],11],[[-1,193125],40],[[-1,193085],"\n"],[[-1,189860],"\n"],[[-1,35284],"F"],[[-1,38126],2],[[-1,167351],5],[[-1,167345],1],[[-1,189725],17],[[-1,188699],2],[[-1,188697],"inally "],[[-1,188661],"those pesky "],[[-1,188690],"paste events will be fast"],[[-1,38124]," too"],[[-1,188665],"!"],[[-1,133374],"\n\n"],[[-1,125576],"This is"],[[-1,125569],1],[[-1,125564],28],[[-1,68041]," the same information"],[[-1,38119],", just stored more compactly"],[[-1,125536],14],[[-1,125568],2],[[-1,133372],18],[[-1,125587],8],[[-1,133354],2],[[-1,125593],2],[[-1,133352],1],[[-1,133341],40],[[-1,125521],"."],[[-1,133301],1],[[-1,125519],1],[[-1,133300],10],[[-1,133288],23],[[-1,125518],4],[[-1,133265],32],[[-1,133229],1],[[-1,125512],1],[[-1,125507],12],[[-1,125476],10],[[-1,125458],28],[[-1,38091],9],[[-1,125430],5],[[-1,125391],31],[[-1,125425],8],[[-1,125411],19],[[-1,125417],3],[[-1,125466],4],[[-1,125495],18],[[-1,125511],2],[[-1,125514],1],[[-1,133227],6],[[-1,133228],1],[[-1,133212]," "],[[-1,38081],"U"],[[-1,133211],2],[[-1,133231],1],[[-1,133233],1],[[-1,133290],1],[[-1,133351],5],[[-1,188663],2],[[-1,167144],5],[[-1,167138],1],[[-1,189413],3],[[-1,167137],2],[[-1,167135],"nfortunately"],[[-1,133209]," we"],[[-1,189410]," can't collapse the whole"],[[-1,38079]," "],[[-1,38076],"document"],[[-1,38078],1],[[-1,189385],5],[[-1,167163]," into a single item"],[[-1,38068],8],[[-1,133206]," or something like that"],[[-1,38052]," using this trick"],[[-1,189380],10],[[-1,167344],". "],[[-1,44823],"The algorithm can"],[[-1,167337],6],[[-1,167331]," only collapse "],[[-1,167122],"inserts"],[[-1,167316],14],[[-1,167342],4],[[-1,189370],8],[[-1,189358],10],[[-1,189348]," when "],[[-1,167298],"the "],[[-1,167290],"IDs and parents"],[[-1,167114]," "],[[-1,167101],"line up"],[[-1,167105],3],[[-1,167113],7],[[-1,167275],4],[[-1,167271]," sequential"],[[-1,167094],"ly"],[[-1,44806]," - but "],[[-1,38035],13],[[-1,44775],"that happens whenever a user types a "],[[-1,44689],"run"],[[-1,44738],6],[[-1,44732]," of characters without moving their cursor"],[[-1,44777],1],[[-1,44799],21],[[-1,167294],2],[[-1,189342],7],[[-1,188648],2],[[-1,188634],5],[[-1,188646],1],[[-1,188637],1],[[-1,188645],4],[[-1,189335],2],[[-1,189325],5],[[-1,189305],7],[[-1,188628],"."],[[-1,38022]," And that happens a lot."],[[-1,133178],1],[[-1,133176],3],[[-1,133182],2],[[-1,188627],1],[[-1,167082],11],[[-1,125359],5],[[-1,167071],14],[[-1,133173],1],[[-1,167057],3],[[-1,167091],1],[[-1,188626],3],[[-1,167260],9],[[-1,167090],5],[[-1,188623],11],[[-1,167250],1],[[-1,188612],3],[[-1,188605],2],[[-1,167249],7],[[-1,188603],39],[[-1,167241],6],[[-1,188564],18],[[-1,125349],6],[[-1,188546],34],[[-1,167053],8],[[-1,133171],5],[[-1,167045],3],[[-1,167233],2],[[-1,188512],1],[[-1,188501],1],[[-1,188494],12],[[-1,44684],4],[[-1,188482],5],[[-1,125352],1],[[-1,125350],1],[[-1,125343],30],[[-1,133166],29],[[-1,133124],7],[[-1,133115],6],[[-1,133105],8],[[-1,133109],2],[[-1,133117],1],[[-1,133137],12],[[-1,188500],3],[[-1,188511],9],[[-1,188609],2],[[-1,189298],1],[[-1,189291],10],[[-1,133096],"\n\n"],[[-1,35278],"I"],[[-1,125313],4],[[-1,125308],1],[[-1,133093],1],[[-1,133092],"n "],[[-1,125303],"this"],[[-1,125299],1],[[-1,133090],3],[[-1,189281],3],[[-1,167227],1],[[-1,167013],21],[[-1,125307],3],[[-1,166992]," data"],[[-1,125298]," set"],[[-1,167040],26],[[-1,167226],1],[[-1,167191],25],[[-1,167166],", "],[[-1,35274],"using spa"],[[-1,35261],"ns"],[[-1,35265],2],[[-1,167216],24],[[-1,189278],1],[[-1,189297],3],[[-1,189320],14],[[-1,189327],1],[[-1,189333],3],[[-1,189362],2],[[-1,189708],1],[[-1,188476],13],[[-1,188455],18],[[-1,188463],4],[[-1,189276],1],[[-1,189707],4],[[-1,189431],5],[[-1,189703],19],[[-1,189426],1],[[-1,188430],6],[[-1,188436],5],[[-1,189425],12],[[-1,189684]," reduces the number of "],[[-1,35256],"array "],[[-1,167223],"entries"],[[-1,20456]," by "],[[-1,18954],"14"],[[-1,20452],1],[[-1,20451],"x"],[[-1,20446],". ("],[[-1,20450],1],[[-1,189661],9],[[-1,68020],14],[[-1,189273],3],[[-1,189652],4],[[-1,125293],5],[[-1,189648],10],[[-1,189638],"180"],[[-1,20401],"k "],[[-1,20392],"entries "],[[-1,20399],"down"],[[-1,189635],9],[[-1,189626]," to "],[[-1,18957],"12"],[[-1,20458],2],[[-1,20441],"k"],[[-1,20394],")."],[[-1,20440],5],[[-1,20426],9],[[-1,20435],4],[[-1,189622],8],[[-1,20464],2],[[-1,189614],5],[[-1,188952],"\n\n"],[[-1,166986],"How fast is it now? "],[[-1,44680],"This blows me away "],[[-1,44652],"- "],[[-1,44661],6],[[-1,166966],"Yjs"],[[-1,188423],27],[[-1,188384],12],[[-1,188372]," is"],[[-1,188396],6],[[-1,188722],1],[[-1,188950],23],[[-1,188803],6],[[-1,188797]," 30x faster"],[[-1,166962]," than "],[[-1,44649],"my "],[[-1,166956],4],[[-1,166952],"reference-crdts implementation"],[[-1,37998]," in this test"],[[-1,37984],"."],[[-1,166922],1],[[-1,166921]," "],[[-1,37982],"And"],[[-1,166920],3],[[-1,166917]," "],[[-1,37978],7],[[-1,44646],29],[[-1,166916],"it only "],[[-1,166907],"uses"],[[-1,188762],4],[[-1,188368],12],[[-1,188758],5],[[-1,188753]," "],[[-1,188354],"about"],[[-1,188348]," 10% "],[[-1,188341],"as much RAM"],[[-1,104838],". It"],[[-1,31123],"'"],[[-1,104834],"s *300x faster than automerge"],[[-1,104802],"!"],[[-1,104805],"*"],[[-1,104801],"."],[[-1,104804],1],[[-1,188330],1],[[-1,188343],1],[[-1,188752],29],[[-1,188786],1],[[-1,188927],1],[[-1,189269],"\n\n| Test                              | Time taken | RAM usage |\n|"],[[-1,104684],":"],[[-1,189203],1],[[-1,189202],"--------------------------        | ----------"],[[-1,162388],":"],[[-1,162396],1],[[-1,189156],1],[[-1,189155],"| ---------"],[[-1,162378],":"],[[-1,162398],1],[[-1,189144],1],[[-1,189143],"|\n| automerge "],[[-1,104967],"(v"],[[-1,189129],2],[[-1,189127],"1.0.0-preview2"],[[-1,104965],")"],[[-1,189113],1],[[-1,189112],"       |  291s      | 880 MB    |\n"],[[-1,188926],"| reference-crdts (automerge / "],[[-1,21456],"Yjs"],[[-1,188895],3],[[-1,188892],") |   31s      |  "],[[-1,188770],"2"],[[-1,188767],"8 MB"],[[-1,188769],1],[[-1,188874],5],[[-1,188869],"    |\n"],[[-1,189078],"| "],[[-1,105556],"*"],[[-1,105554],"*"],[[-1,188862],"Yjs"],[[-1,104979]," (v13.5.5)"],[[-1,104998],9],[[-1,105555],"*"],[[-1,105557],"*"],[[-1,188859],13],[[-1,188846],"          "],[[-1,188836],1],[[-1,188835],"      "],[[-1,189076],33],[[-1,189043]," | "],[[-1,188818],"0.97s"],[[-1,189040],2],[[-1,188826],3],[[-1,189038],3],[[-1,189035],"      | "],[[-1,188812],"3"],[[-1,188808],"."],[[-1,162328],"3"],[[-1,162334],1],[[-1,188805],1],[[-1,188807],1],[[-1,188811]," MB"],[[-1,189027],6],[[-1,189021],"    |\n| "],[[-1,20350],"*"],[[-1,21586],"P"],[[-1,21581],"l"],[[-1,21578],"a"],[[-1,21575],"i"],[[-1,21572],"n"],[[-1,21569]," "],[[-1,21566],"s"],[[-1,21563],"t"],[[-1,21560],"r"],[[-1,21557],"i"],[[-1,21554],"n"],[[-1,21551],"g"],[[-1,21548]," "],[[-1,21545],"e"],[[-1,21542],"d"],[[-1,21539],"i"],[[-1,21536],"t"],[[-1,21533],"s"],[[-1,21530]," "],[[-1,21527],"i"],[[-1,21524],"n"],[[-1,21521]," "],[[-1,21518],"J"],[[-1,21515],"S"],[[-1,20347],"*"],[[-1,189013],26],[[-1,188987],"        | 0.61s      | "],[[-1,188964],1],[[-1,188327],"0.1"],[[-1,188963],2],[[-1,188961]," "],[[-1,188323],"MB"],[[-1,188960],2],[[-1,188958],"    |\n"],[[-1,183003],"\n"],[[-1,162375],"Honestly "],[[-1,183002],"I"],[[-1,182982],"'m"],[[-1,182979]," "],[[-1,182970],"shocked"],[[-1,162366]," and a little suspicious of"],[[-1,166903],5],[[-1,166885],8],[[-1,166887],1],[[-1,166889],1],[[-1,166898],8],[[-1,182963]," how little ram "],[[-1,21442],"Y"],[[-1,21436],"j"],[[-1,21430],"s"],[[-1,182947],3],[[-1,182944]," uses"],[[-1,35249]," "],[[-1,35240],"in this test"],[[-1,35248],4],[[-1,182795],14],[[-1,182779],5],[[-1,182781],1],[[-1,182927],". "],[[-1,182920],"I'm sure there's"],[[-1,166874]," some"],[[-1,182904],13],[[-1,182891]," wizardry in V8 "],[[-1,182759],5],[[-1,166868],3],[[-1,182754],1],[[-1,182875],30],[[-1,182845],"mak"],[[-1,166863],"ing"],[[-1,182842],2],[[-1,182840]," this possible"],[[-1,35227],"."],[[-1,125282],5],[[-1,125276]," "],[[-1,35222],"I"],[[-1,125275],1],[[-1,182826],3],[[-1,182823],"t"],[[-1,31122],"'"],[[-1,182822],"s "],[[-1,182774],"extremely "],[[-1,182820],"impres"],[[-1,182812],"sive"],[[-1,182763],"."],[[-1,161350],1],[[-1,133082],10],[[-1,133086],2],[[-1,161349],11],[[-1,117435],3],[[-1,117424],10],[[-1,117432],7],[[-1,161338],18],[[-1,161192],9],[[-1,161197],4],[[-1,161320],27],[[-1,161182],1],[[-1,161293],4],[[-1,161283],15],[[-1,133027],12],[[-1,133070],1],[[-1,133056],14],[[-1,117413],4],[[-1,133042],12],[[-1,133028],1],[[-1,117577],1],[[-1,117408],14],[[-1,117576],15],[[-1,117548],22],[[-1,117514],4],[[-1,117526],12],[[-1,117510],12],[[-1,117462],18],[[-1,117440],4],[[-1,117444],2],[[-1,117498],35],[[-1,67986],"\n\n"],[[-1,53081],"Kevin says he wrote and rewrote parts of "],[[-1,21444],"Y"],[[-1,21437],"j"],[[-1,21431],"s"],[[-1,53040],3],[[-1,53037]," 12 times in order to make this code run so fast. If there was a programmer version of the speedrunning community, they would adore Kevin."],[[-1,35220]," "],[[-1,35219],6],[[-1,52899],1],[[-1,67821],"I can't"],[[-1,35213]," even"],[[-1,52897],5],[[-1,67814],7],[[-1,67807]," put "],[[-1,21446],"Y"],[[-1,21438],"j"],[[-1,21432],"s"],[[-1,67802],3],[[-1,67799]," on the same scale as the other algo"],[[-1,67759],"rithms because it"],[[-1,31121],"'"],[[-1,67742],"s so fast"],[[-1,67731],":"],[[-1,67733],1],[[-1,67763],2],[[-1,67897],75],[[-1,67931],7],[[-1,67922],24],[[-1,67924],1],[[-1,67984],19],[[-1,67952],20],[[-1,67965],12],[[-1,68005],"\n"],[[-1,48989],"\n"],[[-1,46028],"!"],[[-1,46012],"["],[[-1,21448],"Y"],[[-1,21439],"j"],[[-1,21433],"s"],[[-1,44459],3],[[-1,44456]," performance "],[[-1,44441],"vs other "],[[-1,44428],"al"],[[-1,44420],"gorithms"],[[-1,44426],3],[[-1,44432],2],[[-1,44443],1],[[-1,46001],"]"],[[-1,45990],"("],[[-1,48988],9],[[-1,48956],"yjs_perf4"],[[-1,48979],17],[[-1,48962],".svg"],[[-1,45968],")"],[[-1,48958],1],[[-1,68004],11],[[-1,67991],5],[[-1,67993],1],[[-1,117561],12],[[-1,133069],12],[[-1,161268],8],[[-1,161246],13],[[-1,161179],1],[[-1,161233],1],[[-1,161230],1],[[-1,161219],21],[[-1,161229],9],[[-1,161232],1],[[-1,161260],13],[[-1,161289],3],[[-1,182808],4],[[-1,182802],7],[[-1,182804],1],[[-1,182814],1],[[-1,182925],4],[[-1,182939],10],[[-1,182929],"\n"],[[-1,67729],"\n"],[[-1,52889],"I"],[[-1,67728],5],[[-1,67723],"f we isolate "],[[-1,21450],"Y"],[[-1,21440],"j"],[[-1,21434],"s"],[[-1,67710],3],[[-1,67707],", you can see it "],[[-1,53534],"has "],[[-1,53328],"*"],[[-1,53530],"mostly"],[[-1,53327],"*"],[[-1,53524]," flat performance. "],[[-1,53267],"Unlike the other algorithms, "],[[-1,53237],"i"],[[-1,53284],1],[[-1,53505],22],[[-1,53326],7],[[-1,53319],"t d"],[[-1,53312],"oesn't get slower"],[[-1,53283],1],[[-1,53295]," over time"],[[-1,52888],", as the document grows"],[[-1,44617],4],[[-1,53281],13],[[-1,53316],2],[[-1,53483],":"],[[-1,67686],9],[[-1,53554],19],[[-1,67614],7],[[-1,53559],1],[[-1,67607],42],[[-1,53557],2],[[-1,67565],14],[[-1,67549],1],[[-1,67548],"\n\n"],[[-1,46030],"!"],[[-1,46013],"["],[[-1,21452],"Y"],[[-1,21441],"j"],[[-1,21435],"s"],[[-1,44412],3],[[-1,44409]," performance isolated"],[[-1,46002],"]"],[[-1,45991],"("],[[-1,48944],9],[[-1,48935],"yjs_perf"],[[-1,48920],"5"],[[-1,48927],1],[[-1,48926],".svg"],[[-1,45969],")"],[[-1,48922],1],[[-1,67546],2],[[-1,53577],6],[[-1,53569],7],[[-1,53571],1],[[-1,67544],13966],[[-1,67551],1],[[-1,67677],7],[[-1,67619],4],[[-1,67649],28],[[-1,67662],12],[[-1,67670],7],[[-1,67690],2],[[-1,67730],"\n"],[[-1,53481],"\n"],[[-1,44609],"But "],[[-1,53379],"I have no idea what those spikes are"],[[-1,53200]," "],[[-1,44604],"near the end"],[[-1,53193],6],[[-1,53187],". They're pretty small in "],[[-1,44591],"*"],[[-1,53161],"absolute"],[[-1,44592],"*"],[[-1,53153]," terms, but it"],[[-1,31120],"'"],[[-1,53139],"s "],[[-1,53091],"still "],[[-1,53137],5],[[-1,53128],1],[[-1,53114],7],[[-1,53098],"weird"],[[-1,53107],7],[[-1,53100],"!"],[[-1,52865]," Maybe th"],[[-1,52852],"ey happen when the user moves their cursor "],[[-1,52798],"around the document? "],[[-1,35200],"Or when the user"],[[-1,35206],5],[[-1,52777],16],[[-1,52761]," deletes chunks"],[[-1,52741],"? I have "],[[-1,52724],"no idea."],[[-1,52732],7],[[-1,52746],4],[[-1,52809],10],[[-1,52856],2],[[-1,53127],12],[[-1,53132],2],[[-1,53199],3],[[-1,53235],34],[[-1,53343],15],[[-1,53480],27],[[-1,53452],17],[[-1,53433],1],[[-1,53400],1],[[-1,53396],4],[[-1,53390],10],[[-1,53392],1],[[-1,53398],1],[[-1,53432],31],[[-1,53435],1],[[-1,53482],"\n"],[[-1,163340],"\n"],[[-1,35180],"This is neat, but "],[[-1,35161],"t"],[[-1,35184],2],[[-1,52716],1],[[-1,52715],"he real question is: "],[[-1,53084],"C"],[[-1,161169],4],[[-1,161164],1],[[-1,161171],1],[[-1,161178],4],[[-1,161173],1],[[-1,162970],1],[[-1,162969],"an we "],[[-1,162963],6],[[-1,162957],"go"],[[-1,52693]," "],[[-1,52688],"*"],[[-1,52692],"even"],[[-1,162955]," faster"],[[-1,52687],"*"],[[-1,161163],7],[[-1,162948],"? "],[[-1,161156],"Honestly "],[[-1,162946],40],[[-1,162906],"I"],[[-1,161070]," doubt"],[[-1,161098],24],[[-1,162905],1],[[-1,161146],5],[[-1,161141]," I can ma"],[[-1,161130],"ke"],[[-1,161132],1],[[-1,162904],21],[[-1,162883]," "],[[-1,161064],"pure "],[[-1,162882],"javascript run"],[[-1,162868],15],[[-1,162853]," this test"],[[-1,161126]," "],[[-1,52681],"any"],[[-1,52684],2],[[-1,161125],3],[[-1,161122]," faster than Kevin "],[[-1,52677],"managed here"],[[-1,161103],3],[[-1,162843],"."],[[-1,162728]," But maybe.. just maybe we can be"],[[-1,162237],"..."],[[-1,163277],184],[[-1,163003],18],[[-1,162981],8],[[-1,162985],2],[[-1,163093],35],[[-1,163006],1],[[-1,163058],51],[[-1,163301],23],[[-1,163303],1],[[-1,163310],4],[[-1,163305],1],[[-1,163318],1],[[-1,163339],20],[[-1,163317],7],[[-1,163341],1],[[-1,163419],1],[[-1,163386],1],[[-1,163407],20],[[-1,163411],2],[[-1,163418],6],[[-1,182978],7],[[-1,183001],1],[[-1,182990],8],[[-1,183000],9],[[-1,189609],7],[[-1,189859],17],[[-1,189791],19],[[-1,189842],1],[[-1,189771],1],[[-1,189841],7],[[-1,189830],20],[[-1,189808],17],[[-1,189770],35],[[-1,189734],8],[[-1,189810],1],[[-1,189834],2],[[-1,189861],1],[[-1,188059],5],[[-1,164344],10],[[-1,164333],1],[[-1,166748],22],[[-1,166759],10],[[-1,166802],42],[[-1,166806],3],[[-1,166849],42],[[-1,166859],8],[[-1,182729],24],[[-1,182693],1],[[-1,182705],11],[[-1,182752],11],[[-1,182737],4],[[-1,182731],1],[[-1,182733],1],[[-1,182741],2],[[-1,187103],62],[[-1,187112],7],[[-1,188054],17],[[-1,188029],47],[[-1,166716],42],[[-1,166669],7],[[-1,166653],14],[[-1,166662],1],[[-1,166660],1],[[-1,166674],4],[[-1,187830],22],[[-1,187951],1],[[-1,187942],9],[[-1,166638],4],[[-1,187933],1],[[-1,166658],5],[[-1,187932],21],[[-1,166633],12],[[-1,187911],10],[[-1,166614],1],[[-1,166618],2],[[-1,187808],1],[[-1,166620],1],[[-1,187807],26],[[-1,187777],8],[[-1,166724],5],[[-1,187755],1],[[-1,187767],6],[[-1,187769],1],[[-1,187779],1],[[-1,187781],1],[[-1,187901],1],[[-1,166718],1],[[-1,187753],26],[[-1,187900],36],[[-1,187723],1],[[-1,166586],64],[[-1,166516],1],[[-1,166511],7],[[-1,166503],19],[[-1,163343],1],[[-1,163345],"\n"],[[-1,163382],"\n## "],[[-1,163004],"F"],[[-1,163378],11],[[-1,163367],"aster than "],[[-1,161059],5],[[-1,163356],"Javascript"],[[-1,163384],"\n"],[[-1,162327],"\n"],[[-1,162277],"When I told Kevin that I thought "],[[-1,162172],"I could make "],[[-1,162063],"a "],[[-1,162067],"CRDT"],[[-1,162159],1],[[-1,162229],11],[[-1,162218]," "],[[-1,162202],"implementation"],[[-1,162157]," that"],[[-1,105729],"'"],[[-1,161947],"s"],[[-1,162060],5],[[-1,162152],5],[[-1,162147]," "],[[-1,161664],"way"],[[-1,161659]," "],[[-1,161661],1],[[-1,162188],10],[[-1,162178],"faster"],[[-1,162145]," than "],[[-1,44589],"Yjs"],[[-1,162139],3],[[-1,162136],", he didn't believe me. "],[[-1,162108],"He said "],[[-1,161559],"Y"],[[-1,162100],1],[[-1,162099],"js was already so "],[[-1,161946],"well "],[[-1,162081],"optimized, "],[[-1,162019],"going"],[[-1,161544]," a lot"],[[-1,162014],5],[[-1,161558],13],[[-1,162009]," faster"],[[-1,161941]," probably"],[[-1,162002]," was"],[[-1,161964],"n't"],[[-1,161998],12],[[-1,161986]," "],[[-1,161960],"possib"],[[-1,161950],"le"],[[-1,161952],1],[[-1,161954],1],[[-1,161985],20],[[-1,161965],"."],[[-1,161752]," \"Maybe a little faster"],[[-1,161703]," i"],[[-1,161697],"f you just port it to "],[[-1,161667],"R"],[[-1,161675],1],[[-1,161674],"ust"],[[-1,161670],1],[[-1,161701],2],[[-1,161729],2],[[-1,161727],". "],[[-1,161665],"B"],[[-1,161725],1],[[-1,161724],"ut"],[[-1,161564]," not"],[[-1,161722],1],[[-1,161657],11],[[-1,161646]," "],[[-1,161721],4],[[-1,161717],"a lot faster!"],[[-1,161534]," V8 is really fast these days"],[[-1,161053],"!"],[[-1,161505],"!"],[[-1,161704],"\""],[[-1,161538],2],[[-1,161645],1],[[-1,161931],"\n\n"],[[-1,161783],"But I "],[[-1,161498],"knew"],[[-1,161503],4],[[-1,161777],4],[[-1,161773]," something "],[[-1,161642],"Kevin"],[[-1,161762],2],[[-1,161760]," didn't"],[[-1,161637]," know"],[[-1,161753],":"],[[-1,161632]," I knew about memory fragmentation "],[[-1,161595],"and cache"],[[-1,5],"s"],[[-1,161586],8],[[-1,161493],2],[[-1,161578],12],[[-1,161566],"."],[[-1,161456]," Rust isn't just *faster*. It"],[[-1,31119],"'"],[[-1,161425],"s also"],[[-1,31118]," a"],[[-1,161427],1],[[-1,161597],1],[[-1,161929],11],[[-1,161912],14],[[-1,161896],7],[[-1,161811],17],[[-1,161831],19],[[-1,161833],1],[[-1,161889],11],[[-1,161793],8],[[-1,161878],45],[[-1,161898],1],[[-1,161918],5],[[-1,162038],18],[[-1,162053],12],[[-1,162070],2],[[-1,162112],2],[[-1,162217],14],[[-1,162244],7],[[-1,162234],4],[[-1,162321],23],[[-1,162296],18],[[-1,162298],1],[[-1,162325],2],[[-1,162326],1],[[-1,162842],15],[[-1,161489],11],[[-1,161473],16],[[-1,161478],4],[[-1,162827],41],[[-1,162693],1],[[-1,162692]," "],[[-1,162786],6],[[-1,162780],"lower level"],[[-1,162691]," language, "],[[-1,161418],"and that gives us the tools we need to control allocations and"],[[-1,161356],4],[[-1,162668],5],[[-1,162662],4],[[-1,162680],11],[[-1,162769],26],[[-1,162743]," memory layout."],[[-1,161052],"\n\n"],[[-1,160850],">"],[[-1,160849],1],[[-1,161050],3],[[-1,160960],24],[[-1,161045],1],[[-1,161038],4],[[-1,161032],3],[[-1,161027],10],[[-1,161017]," Kevin"],[[-1,133011]," knows this now too, and he's"],[[-1,161011],1],[[-1,161008],11],[[-1,132978],20],[[-1,132957],9],[[-1,160997],18],[[-1,160979]," "],[[-1,160972],"working on "],[[-1,160936],"[Yrs](https://github.com/yjs/y-crdt)"],[[-1,132946]," "],[[-1,132938],"to see if he can "],[[-1,125260],"claim the"],[[-1,125251],1],[[-1,125273],7],[[-1,125265],4],[[-1,132921],10],[[-1,132911]," perfo"],[[-1,132901],"rmance"],[[-1,125249]," crown back"],[[-1,132895],"."],[[-1,132905],2],[[-1,132945],6],[[-1,160900],3],[[-1,160885],8],[[-1,160897],11],[[-1,160877],7],[[-1,160852],2],[[-1,160870],3],[[-1,160861],3],[[-1,160867],3],[[-1,160978],3],[[-1,161010],1],[[-1,161029],1],[[-1,161034],1],[[-1,161044],3],[[-1,161047],1],[[-1,166515],2],[[-1,166522],5],[[-1,187680],3],[[-1,187665],25],[[-1,166612],1],[[-1,166609],22],[[-1,166611],1],[[-1,187640],1],[[-1,187639],"\n\n"],[[-1,187597],"Imagine "],[[-1,44560],"one of our document items"],[[-1,187637],34],[[-1,187589]," in javascript"],[[-1,187603],":"],[[-1,187602],2],[[-1,187677],11],[[-1,187722],40],[[-1,187864],34],[[-1,187950],4],[[-1,187963],11],[[-1,187982],18],[[-1,188037],7],[[-1,188060],"\n"],[[-1,187575],"\n```"],[[-1,187479],"javascript"],[[-1,187484],4],[[-1,187495],10],[[-1,187571],"\n"],[[-1,52655],"var "],[[-1,52662],"item = "],[[-1,187570],"{"],[[-1,44585],"\n  "],[[-1,187569],1],[[-1,52650],"content"],[[-1,187568],4],[[-1,187564],": 'hello',"],[[-1,44576],"\n  "],[[-1,187554],1],[[-1,187553],"isDeleted: false,"],[[-1,44572],"\n  "],[[-1,187536],1],[[-1,187535],"id: ['seph', "],[[-1,187378],"10"],[[-1,187376],1],[[-1,187522],1],[[-1,187521],"],"],[[-1,44568],"\n  "],[[-1,187519],1],[[-1,187518],"seq"],[[-1,52642],":"],[[-1,52665],1],[[-1,52664]," 5"],[[-1,187515],","],[[-1,44564],"\n  "],[[-1,187514],1],[[-1,187513],"parent: "],[[-1,187373],"["],[[-1,187368],"'mike', 2]"],[[-1,44581],"\n"],[[-1,44580],2],[[-1,187372],2],[[-1,187505],5],[[-1,187500],"}\n```"],[[-1,187469],"\n\nThis object "],[[-1,52621],"is "],[[-1,187455],"actually"],[[-1,52617]," a mess like this"],[[-1,187447],9],[[-1,187434],7],[[-1,166484]," in memory"],[[-1,187427],":\n"],[[-1,48919],"\n"],[[-1,46032],"!"],[[-1,46014],"["],[[-1,44498],"javascript objects fragmented in memory"],[[-1,46003],"]"],[[-1,45992],"("],[[-1,48918],23],[[-1,187425],3],[[-1,52640],"mem-frag.drawio.svg"],[[-1,45970],")"],[[-1,48894],1],[[-1,187422],7],[[-1,132892],28],[[-1,132860],13],[[-1,132862],1],[[-1,132864],1],[[-1,187409],"\n"],[[-1,186572],"\n"],[[-1,160846],"Bad news: "],[[-1,166474],12],[[-1,185868],"*"],[[-1,162655],"Y"],[[-1,166461],1],[[-1,185872],1],[[-1,185871],"our"],[[-1,185874],1],[[-1,186539],3],[[-1,186536]," computer hates this."],[[-1,185867],"*"],[[-1,186299],"\n"],[[-1,185865],"\n"],[[-1,162653],"This is"],[[-1,166452],3],[[-1,166449]," terrible because "],[[-1,166430],"a"],[[-1,166460],4],[[-1,185864],1],[[-1,185863],"ll the data is "],[[-1,166429],"fragmented"],[[-1,166413],". It"],[[-1,31116],"'"],[[-1,166409],"s all "],[[-1,166419],3],[[-1,185848],"separated by pointers."],[[-1,21343],"\n\n> And yes, I know, V"],[[-1,21319],"8 "],[[-1,21315],"tries its har"],[[-1,21300],"dest to prevent this"],[[-1,21252]," sor"],[[-1,21244],"t o"],[[-1,21231],"f thing when it can"],[[-1,21241],5],[[-1,21248],2],[[-1,21280],". But its not "],[[-1,21260],8],[[-1,21266],"magic."],[[-1,21302],1],[[-1,21317],1],[[-1,21321],1],[[-1,185866],"\n"],[[-1,186298],"\nTo"],[[-1,166402]," arrange data like this"],[[-1,186295],1],[[-1,185825],13],[[-1,185800],4],[[-1,185812],12],[[-1,186294],9],[[-1,186285],", the computer has to allocate memory"],[[-1,166379]," "],[[-1,166365],"one by one "],[[-1,166378],"for each item"],[[-1,185795],". This"],[[-1,186241],7],[[-1,186234]," "],[[-1,186227],"is slow."],[[-1,185788]," Then"],[[-1,186219]," "],[[-1,185782],"t"],[[-1,186218],1],[[-1,186217],"he garbage collect"],[[-1,186195],"or needs "],[[-1,166332],"extra data "],[[-1,186186],"to "],[[-1,185781],5],[[-1,186171],"track"],[[-1,185776]," "],[[-1,166353],"all of those "],[[-1,166339],"objects"],[[-1,185775],2],[[-1,186166],12],[[-1,185237],", which is "],[[-1,185772],1],[[-1,186150],17],[[-1,186131],9],[[-1,186122],"also slow"],[[-1,186113],1],[[-1,186112],"."],[[-1,162634]," "],[[-1,186133],1],[[-1,186154],2],[[-1,186183],11],[[-1,186199],2],[[-1,186233],5],[[-1,186248],5],[[-1,186571],31],[[-1,186573],1],[[-1,186111],1],[[-1,185210],"Later w"],[[-1,185203],1],[[-1,185224],1],[[-1,186110],13],[[-1,186094],14],[[-1,186079],1],[[-1,185770],1],[[-1,185769],"e"],[[-1,185223],"'"],[[-1,166320],"ll "],[[-1,185222],11],[[-1,185768],1],[[-1,185767],"need to read "],[[-1,185200],"that data"],[[-1,166301],5],[[-1,166316],1],[[-1,166314],1],[[-1,166295],1],[[-1,166313],1],[[-1,185186],28],[[-1,166312],10],[[-1,185158],". "],[[-1,185754],2],[[-1,186078],5],[[-1,186097],2],[[-1,187408],1],[[-1,186514],5],[[-1,186508],1],[[-1,186856],13],[[-1,186506],5],[[-1,186843],57],[[-1,185189],1],[[-1,186786],1],[[-1,186047],16],[[-1,186027],32],[[-1,185751],1],[[-1,185995],8],[[-1,185752],1],[[-1,185987],2],[[-1,185727],"To read it, your computer "],[[-1,160835],"will often"],[[-1,185701],7],[[-1,185749],1],[[-1,185985],12],[[-1,185968],15],[[-1,185952],15],[[-1,185748],5],[[-1,185729],1],[[-1,185743],7],[[-1,185937]," need"],[[-1,185932],1],[[-1,185931]," to"],[[-1,185694]," go fetch it"],[[-1,185928],5],[[-1,185923]," from"],[[-1,185973],4],[[-1,186031],2],[[-1,186500],30],[[-1,186469],5],[[-1,186455],9],[[-1,186436],8],[[-1,186446],8],[[-1,186072],18],[[-1,186053],5],[[-1,186438],1],[[-1,186428],3],[[-1,186462],6],[[-1,186464],1],[[-1,186785],108],[[-1,186417],5],[[-1,186677],8],[[-1,186669]," "],[[-1,186668],5],[[-1,186663],"main memory"],[[-1,185681],", which"],[[-1,181772]," - you "],[[-1,181756],"guessed it -"],[[-1,181765],8],[[-1,185674]," is"],[[-1,185671],1],[[-1,185668],4],[[-1,185664]," slow"],[[-1,166292]," as well"],[[-1,185670],1],[[-1,186412],"."],[[-1,162632],"\n\n"],[[-1,185917],1],[[-1,162646],"How slow"],[[-1,162630]," are main memory reads"],[[-1,162638],"?"],[[-1,162637],1],[[-1,98364],12],[[-1,98350],5],[[-1,98352],1],[[-1,166283],5],[[-1,181743],6],[[-1,181737]," "],[[-1,181603],"["],[[-1,98341],"At"],[[-1,98339],2],[[-1,181736],9],[[-1,160176],11],[[-1,160163],18],[[-1,98395],3],[[-1,98392]," human scale"],[[-1,160165],1],[[-1,181727],52],[[-1,181600],"](https://gist.github.com/hellerbarde/2843375)"],[[-1,98335]," "],[[-1,166275],1],[[-1,181602],1],[[-1,181675],2],[[-1,181553],2],[[-1,181673],14],[[-1,181655],6],[[-1,98380],15],[[-1,181649],"each"],[[-1,181659],2],[[-1,185912],1],[[-1,185907],15],[[-1,185886],4],[[-1,185892],3],[[-1,185911],2],[[-1,185916],3],[[-1,186411],3],[[-1,186408]," "],[[-1,186359],"L1 cache read"],[[-1,98325]," takes"],[[-1,162608],1],[[-1,98332],5],[[-1,162607],5],[[-1,186346],1],[[-1,185880],5],[[-1,181643],1],[[-1,166272],6],[[-1,186345],5],[[-1,186400],27],[[-1,186373]," 0.5 seconds"],[[-1,98327],"."],[[-1,98319]," And"],[[-1,98314]," "],[[-1,98303],"a "],[[-1,98313],5],[[-1,162578],8],[[-1,162600],6],[[-1,162588],9],[[-1,162594],3],[[-1,181642],1],[[-1,166261],2],[[-1,166265],2],[[-1,181641],8],[[-1,162570],6],[[-1,181633],12],[[-1,181620],1],[[-1,186361],1],[[-1,186340],1],[[-1,160823],1],[[-1,166212],7],[[-1,166203],2],[[-1,166195],6],[[-1,166201],3],[[-1,166205],1],[[-1,166258],1],[[-1,166251],18],[[-1,162563],5],[[-1,166257],3],[[-1,181545],6],[[-1,181537],2],[[-1,181539],1],[[-1,181550],4],[[-1,181619],4],[[-1,186339],"read"],[[-1,186335],3],[[-1,186332]," from "],[[-1,186322],"main memory"],[[-1,162558]," "],[[-1,98300],"takes"],[[-1,162557],1],[[-1,162554],3],[[-1,162556],1],[[-1,166231],19],[[-1,160821]," close"],[[-1,98295],1],[[-1,160815]," to"],[[-1,186326],2],[[-1,186407],6],[[-1,186652],13],[[-1,186311],5],[[-1,162551],6],[[-1,162545]," "],[[-1,181613],"2 minutes"],[[-1,162543],"!"],[[-1,98293]," "],[[-1,97049],"This is"],[[-1,98290],2],[[-1,98286],1],[[-1,98285]," the difference between a single"],[[-1,97041]," "],[[-1,97012],"heart"],[[-1,97040],"beat"],[[-1,97036],14],[[-1,98253],11],[[-1,98242],", and the time"],[[-1,97022]," it takes"],[[-1,98228],6],[[-1,98222]," to brush your teeth."],[[-1,98288],1],[[-1,98292],1],[[-1,160812],"\n\n"],[[-1,160810],52],[[-1,162422],20],[[-1,186639],2],[[-1,186305],1],[[-1,186637],64],[[-1,166164],1],[[-1,160757],37],[[-1,160536],10],[[-1,160720],31],[[-1,160526],14],[[-1,160689],19],[[-1,160511],2],[[-1,160660],24],[[-1,160508],2],[[-1,160636],46],[[-1,160558],15],[[-1,160506],1],[[-1,160543],7],[[-1,160505],44],[[-1,160590],1],[[-1,160569],5],[[-1,160589],19],[[-1,160670],5],[[-1,160758],1],[[-1,166163],1],[[-1,162542],19],[[-1,162441],4],[[-1,162432],1],[[-1,162437],3],[[-1,162444],2],[[-1,162509],43],[[-1,162463],1],[[-1,162462],"Arranging"],[[-1,162466],1],[[-1,162513],2],[[-1,162523],4],[[-1,162517],3],[[-1,162519],1],[[-1,181532],10],[[-1,181522]," memory like javascript does"],[[-1,181494],5],[[-1,181489]," "],[[-1,96880],"would be like"],[[-1,181488],7],[[-1,185156],16],[[-1,185124]," wr"],[[-1,166181],"iting"],[[-1,185121],3],[[-1,185118]," a"],[[-1,185140],1],[[-1,185139]," shopping list"],[[-1,96811],". But"],[[-1,160458],1],[[-1,160457]," "],[[-1,160456],4],[[-1,162423],1],[[-1,166161],1],[[-1,185116],2],[[-1,166159],1],[[-1,185114],4],[[-1,185110],"instead of "],[[-1,160452],"\"Cheese, Milk, Bread\","],[[-1,160430],1],[[-1,185099],8],[[-1,185043],9],[[-1,181480],3],[[-1,181477]," "],[[-1,97090],"your"],[[-1,97086],9],[[-1,97077]," list "],[[-1,96997],"is"],[[-1,96992]," actually"],[[-1,96995],1],[[-1,97005],8],[[-1,97054],2],[[-1,97060],5],[[-1,97070],9],[[-1,97389],17],[[-1,181476],4],[[-1,166176],10],[[-1,181472],5],[[-1,160426],1],[[-1,97404],14],[[-1,160143],2],[[-1,97408]," a"],[[-1,160419],17],[[-1,160425],3],[[-1,181465],1],[[-1,185034],2],[[-1,185091],1],[[-1,185082],3],[[-1,185077],6],[[-1,181461],10],[[-1,181324],10],[[-1,181451],7],[[-1,181444]," scavenger hunt"],[[-1,96982],":"],[[-1,160402],1],[[-1,181312],14],[[-1,181429],7],[[-1,185071],1],[[-1,97371],30],[[-1,97340],1],[[-1,160107],61],[[-1,97339],2],[[-1,97337]," \"Under the couch\", \"On top of the "],[[-1,97300],"fridge\", and so on."],[[-1,97302],1],[[-1,160045],1],[[-1,160116],8],[[-1,181421],1],[[-1,181412],3],[[-1,166156],1],[[-1,160140],4],[[-1,160134],17],[[-1,160136],1],[[-1,166155],32],[[-1,181409],11],[[-1,181397],11],[[-1,181420],4],[[-1,185070],2],[[-1,181463],2],[[-1,185068],25],[[-1,185032],31],[[-1,160399],6],[[-1,160393]," "],[[-1,96980],"Under the couch "],[[-1,97262],22],[[-1,97240],"is a little note "],[[-1,97195],"mentioning"],[[-1,97223],6],[[-1,97217]," you"],[[-1,97185],9],[[-1,97213]," need toothpaste."],[[-1,97279],16],[[-1,160041],1],[[-1,160043],1],[[-1,160392],47],[[-1,166118],13],[[-1,166101],2],[[-1,166105],2],[[-1,181298],34],[[-1,185001],1],[[-1,181384],11],[[-1,185000],8],[[-1,181372],1],[[-1,160343],28],[[-1,181371],6],[[-1,184992],6],[[-1,160037],1],[[-1,184986],1],[[-1,184962],1],[[-1,184985],5],[[-1,181263],9],[[-1,181252],3],[[-1,181254],1],[[-1,184980],1],[[-1,166098],12],[[-1,184979],5],[[-1,166037],1],[[-1,166036]," Needless to say, "],[[-1,96900],"this makes doing"],[[-1,96884],1],[[-1,96945],5],[[-1,96940]," the grocery shopping "],[[-1,96865],"a l"],[[-1,96848],"ot of work"],[[-1,96862],7],[[-1,96918],16],[[-1,96961],11],[[-1,96948],2],[[-1,96950],1],[[-1,97162],36],[[-1,97123],1],[[-1,97118],19],[[-1,97095],3],[[-1,97092],"."],[[-1,96828],16],[[-1,96830],1],[[-1,96838],4],[[-1,97099],2],[[-1,97122],3],[[-1,97125],1],[[-1,166017],1],[[-1,166039],1],[[-1,184974],11],[[-1,166083],9],[[-1,97176],13],[[-1,166074],15],[[-1,166016],1],[[-1,117383],10],[[-1,117394],6],[[-1,166015],4],[[-1,117387],4],[[-1,166011],2],[[-1,160035],3],[[-1,166009],12],[[-1,166059],16],[[-1,165991],19],[[-1,160311],5],[[-1,160028],1],[[-1,160009],1],[[-1,160007],19],[[-1,160027],18],[[-1,159988],5],[[-1,165972],1],[[-1,166043],1],[[-1,165996],2],[[-1,166085],1],[[-1,181248],2],[[-1,184961],39],[[-1,181329],1],[[-1,181327],2],[[-1,181363],33],[[-1,184922],1],[[-1,185079],1],[[-1,185084],1],[[-1,185090],3],[[-1,185659],1],[[-1,185240],1],[[-1,185241],"\n"],[[-1,184918],"\n"],[[-1,184908],"To "],[[-1,184843],"go "],[[-1,184905],4],[[-1,184901],"faster, we need to "],[[-1,181245],"squish"],[[-1,184882],4],[[-1,184878]," all the"],[[-1,184839]," data"],[[-1,184834],3],[[-1,184870],7],[[-1,184863]," together"],[[-1,160306]," so"],[[-1,160267]," "],[[-1,159977],"the"],[[-1,159964]," computer can fetch "],[[-1,35159],"more information"],[[-1,117371],19],[[-1,117352]," with each r"],[[-1,117336],"ead "],[[-1,35142],"of"],[[-1,117332],2],[[-1,117330]," main m"],[[-1,117321],"emory"],[[-1,117323],1],[[-1,117340],2],[[-1,159944],16],[[-1,159974],5],[[-1,160266],3],[[-1,160303],35],[[-1,184854],"."],[[-1,96803]," ("],[[-1,35140],"We want"],[[-1,96801],2],[[-1,96799]," "],[[-1,96640],"a single read of my "],[[-1,96798],18],[[-1,96780],"grocery list"],[[-1,96620]," "],[[-1,35131],"to"],[[-1,52594],5],[[-1,52589]," tell us everything we need to know"],[[-1,52598],3],[[-1,96455],6],[[-1,96445],5],[[-1,96432],16],[[-1,96436],2],[[-1,96440],2],[[-1,96449],3],[[-1,96619],8],[[-1,96768],35],[[-1,96610],8],[[-1,96733],")."],[[-1,160253]," "],[[-1,96730],"L"],[[-1,160233],23],[[-1,160206],18],[[-1,160188],"inked lists"],[[-1,159845]," are"],[[-1,159841],1],[[-1,125237],2],[[-1,125235]," rarely"],[[-1,159840],12],[[-1,159828]," used in the real world"],[[-1,96728]," for "],[[-1,96711],"exactly this reason"],[[-1,96723],11],[[-1,159927],13],[[-1,159912],2],[[-1,159910]," - "],[[-1,125228],"*"],[[-1,159907],"memory fragmentation "],[[-1,159882],"ruins performance"],[[-1,125227],"*"],[[-1,159865],18],[[-1,159847],"."],[[-1,159784]," "],[[-1,159886],2],[[-1,159914],1],[[-1,160210],2],[[-1,160252],18],[[-1,160256],3],[[-1,184853],5],[[-1,165588],"I"],[[-1,160261]," also"],[[-1,165587]," want to"],[[-1,184848],4],[[-1,184828],6],[[-1,184822]," move away from linked lists"],[[-1,159801]," because"],[[-1,165577],1],[[-1,184794],3],[[-1,165575],1],[[-1,184791],22],[[-1,184769]," the user *does* sometimes hop around the document"],[[-1,96597],", which in "],[[-1,21428],"Y"],[[-1,96586],1],[[-1,96585],"js has "],[[-1,96560],"a "],[[-1,96578],"linear performance"],[[-1,96558]," cost"],[[-1,125226],"."],[[-1,125221]," "],[[-1,35121],"Thats probably no"],[[-1,35102],"t a big "],[[-1,35090],"deal in text editing"],[[-1,35094],2],[[-1,35104],1],[[-1,35128],6],[[-1,96553],18],[[-1,96533],2],[[-1,96525],5],[[-1,96505],17],[[-1,96488],", but "],[[-1,96520],14],[[-1,96531],3],[[-1,96535],1],[[-1,96601],4],[[-1,125220],3],[[-1,117316],1],[[-1,117315],"I wan"],[[-1,117306],"t"],[[-1,117310],2],[[-1,125217]," this code "],[[-1,117304],"to"],[[-1,125193],6],[[-1,125187]," be fast"],[[-1,96480]," in other"],[[-1,35070]," use"],[[-1,96471]," cases too"],[[-1,125179],5],[[-1,96686],30],[[-1,96688],1],[[-1,125160],3],[[-1,96690],1],[[-1,125157],5],[[-1,125148],14],[[-1,125134],"."],[[-1,117302]," "],[[-1,125132],"I"],[[-1,125152],2],[[-1,125167],5],[[-1,125174],6],[[-1,125206],12],[[-1,125225],2],[[-1,184719],7],[[-1,184712]," don't want"],[[-1,117301]," "],[[-1,96654],"the progr"],[[-1,96643],"am"],[[-1,96645],1],[[-1,117300],2],[[-1,184701]," to "],[[-1,184687],"*"],[[-1,184697],"ever"],[[-1,184686],"*"],[[-1,125130],8],[[-1,184685]," "],[[-1,96460],"need"],[[-1,184684],2],[[-1,125122],7],[[-1,184682]," "],[[-1,159792],"those "],[[-1,35065],"slow"],[[-1,184681],5],[[-1,184693],1],[[-1,181235],5],[[-1,125114],8],[[-1,125106]," "],[[-1,181230],5],[[-1,181239],2],[[-1,184692],"scan"],[[-1,184675],"s."],[[-1,165572],20],[[-1,165492],23],[[-1,165552],35],[[-1,165468],4],[[-1,165517],24],[[-1,181225],2],[[-1,165959],18],[[-1,165961],1],[[-1,181223],10],[[-1,165971],9],[[-1,181166],5],[[-1,165940],5],[[-1,181213],39],[[-1,165933],35],[[-1,181174],8],[[-1,181160],26],[[-1,181133],1],[[-1,181134],1],[[-1,184688],1],[[-1,184917],8],[[-1,184919],"\n"],[[-1,185658],"\n"],[[-1,185434],"We can't fix this in javascript. "],[[-1,159783],"The problem with "],[[-1,159765],"f"],[[-1,165896],1],[[-1,185401],11],[[-1,184672],1],[[-1,184671],"ancy data structures in javascript"],[[-1,165895]," "],[[-1,159764],"is that you end up "],[[-1,165894],"need"],[[-1,159745],"ing"],[[-1,165890]," a lot of"],[[-1,165848]," "],[[-1,35059],"exotic "],[[-1,52337],7],[[-1,165847],5],[[-1,165881],1],[[-1,165880],"objects"],[[-1,165817]," (like fixed size ar"],[[-1,165795],"rays)"],[[-1,165789],". "],[[-1,165463],"All those extra objects"],[[-1,165765],8],[[-1,165757]," make"],[[-1,165752],1],[[-1,165751]," fragmentation worse"],[[-1,165691],", "],[[-1,165439],"so "],[[-1,159740],"as a result "],[[-1,159686],"of all "],[[-1,125104],"your"],[[-1,159679],4],[[-1,159675]," work"],[[-1,52522],","],[[-1,159670]," "],[[-1,159728],"your programs often end up running"],[[-1,165436],19],[[-1,165689],6],[[-1,165677],15],[[-1,165662]," slow"],[[-1,165653],"er"],[[-1,159693]," anyway"],[[-1,125100],12],[[-1,165651],12],[[-1,165657],2],[[-1,165683],5],[[-1,165701],"."],[[-1,165692]," "],[[-1,165416],"This is"],[[-1,165409],1],[[-1,165700],7],[[-1,165731],27],[[-1,165781],13],[[-1,165767],1],[[-1,165787],5],[[-1,165797],1],[[-1,165841],12],[[-1,165825],7],[[-1,165829],2],[[-1,165861],12],[[-1,165873],1],[[-1,165869],3],[[-1,165865],3],[[-1,165872],1],[[-1,184637],2],[[-1,184595],2],[[-1,184467],27],[[-1,184593],8],[[-1,184581],14],[[-1,184499],8],[[-1,184439],1],[[-1,184436],28],[[-1,184438],1],[[-1,184491],9],[[-1,184567],18],[[-1,184481],14],[[-1,184549],1],[[-1,184547],2],[[-1,184539],10],[[-1,184529]," the"],[[-1,184541],1],[[-1,184545],2],[[-1,184585],3],[[-1,184635],13],[[-1,184610],13],[[-1,184622],11],[[-1,185390],49],[[-1,185341]," same limitation"],[[-1,185325],20],[[-1,185305]," immutablejs"],[[-1,184405]," has"],[[-1,159669],", and why it"],[[-1,117256],"s"],[[-1,117254]," "],[[-1,159657],3],[[-1,159652],4],[[-1,159630],1],[[-1,117292],25],[[-1,117267],"performance"],[[-1,117253]," "],[[-1,117246],"hasn't improved"],[[-1,52554]," much"],[[-1,44534]," in the decade since it was released"],[[-1,117252],3],[[-1,159629],24],[[-1,125087],22],[[-1,159648],17],[[-1,159654],1],[[-1,184524],"."],[[-1,52549]," The "],[[-1,52540],"V8 optimizer "],[[-1,35051],"is very clever"],[[-1,52470],5],[[-1,52451],9],[[-1,52465],14],[[-1,52326],", "],[[-1,52323],"b"],[[-1,52418],1],[[-1,52438],1],[[-1,52416],14],[[-1,52398],1],[[-1,52386],26],[[-1,52397],10],[[-1,52402],2],[[-1,52437],2],[[-1,52435],"ut"],[[-1,35036]," it"],[[-1,31115],"'"],[[-1,35033],"s not "],[[-1,52433],1],[[-1,52359],3],[[-1,52342],5],[[-1,52349],5],[[-1,52356],5],[[-1,52432],8],[[-1,52424],"magic"],[[-1,52296]," and "],[[-1,35001],"clever"],[[-1,35007],5],[[-1,35025],17],[[-1,52291],3],[[-1,52288]," tricks only get us so far."],[[-1,52419],1],[[-1,52322],23],[[-1,52440],1],[[-1,52477],6],[[-1,52520],41],[[-1,52527],5],[[-1,52544],2],[[-1,117222],"\n\n"],[[-1,165590],1],[[-1,184400],2],[[-1,184396],"But"],[[-1,184393],8],[[-1,184366],1],[[-1,165639],5],[[-1,184365],2],[[-1,184345],21],[[-1,184316],13],[[-1,184297],6],[[-1,184287],17],[[-1,165633]," we"],[[-1,34985],"'"],[[-1,34983],"re not limited to"],[[-1,165630],18],[[-1,34986],1],[[-1,165612]," javascript"],[[-1,34965],5],[[-1,34995],7],[[-1,125033],"."],[[-1,165601],9],[[-1,125064],1],[[-1,125063]," "],[[-1,125031],"E"],[[-1,125062],1],[[-1,125061],"ven w"],[[-1,125054],"hen making webpages"],[[-1,125029],","],[[-1,125056],1],[[-1,184270],1],[[-1,184269]," "],[[-1,125027],"w"],[[-1,184268],1],[[-1,184267],"e"],[[-1,184291],2],[[-1,184303],3],[[-1,184324],7],[[-1,184363]," have "],[[-1,34959],1],[[-1,165404],"WebAssembly"],[[-1,117219]," these days. We can "],[[-1,117197],"co"],[[-1,117189],"de this "],[[-1,117162],"up in"],[[-1,117181],1],[[-1,117176],1],[[-1,117175]," "],[[-1,117164],"*"],[[-1,117174],"anything"],[[-1,117165],"*"],[[-1,117166],"."],[[-1,117180],2],[[-1,117195],3],[[-1,117199],1],[[-1,125025],1],[[-1,117231],4],[[-1,184357],12],[[-1,184266],"\n\n"],[[-1,165392],"To see how fast we can *really* go,"],[[-1,181116],2],[[-1,181114]," I've been quietly building "],[[-1,184260],1],[[-1,181035],"a CRDT implementation in rust"],[[-1,20152]," called "],[[-1,20142],"["],[[-1,20125],"D"],[[-1,20127],1],[[-1,20141],1],[[-1,20140],"iamond types"],[[-1,20144],1],[[-1,20157],2],[[-1,181086],17],[[-1,181061],25],[[-1,181069],7],[[-1,181130],13],[[-1,184259],4],[[-1,184255],"]("],[[-1,20197],"https://github.com/josephg/diamond-types"],[[-1,184253],42],[[-1,184211],")"],[[-1,184210],14],[[-1,184192],5],[[-1,184176],4],[[-1,184170],17],[[-1,184138],5],[[-1,184123],14],[[-1,182692],11],[[-1,184109],8],[[-1,184101],". "],[[-1,20123],"Diamond"],[[-1,184099],19],[[-1,184048]," "],[[-1,117145],"is almos"],[[-1,117131],"t identical to"],[[-1,117137],3],[[-1,165330],5],[[-1,117157],3],[[-1,117150],4],[[-1,117154],2],[[-1,165325],12],[[-1,165313]," "],[[-1,21426],"Y"],[[-1,165312],1],[[-1,165311],"js"],[[-1,165308],","],[[-1,184047],6],[[-1,184039],21],[[-1,165357],4],[[-1,165342],9],[[-1,184018],3],[[-1,165353],9],[[-1,182681],25],[[-1,182656]," "],[[-1,165306],"b"],[[-1,182654],1],[[-1,184015],2],[[-1,184013],"ut"],[[-1,183728]," "],[[-1,183726],"i"],[[-1,184011],3],[[-1,183994],3],[[-1,183991],"t "],[[-1,183981],"uses a "],[[-1,21110],"["],[[-1,21120],"range tree"],[[-1,21109],"](https://en.wikipedia.org/wiki/Range_tree)"],[[-1,183974],1],[[-1,183954],2],[[-1,183973],5],[[-1,183968]," instead of "],[[-1,183952],"a linked list"],[[-1,165305]," internally"],[[-1,183939]," to st"],[[-1,183929],"ore "],[[-1,181003],"all of "],[[-1,34956],"the"],[[-1,180996],3],[[-1,183925],3],[[-1,183922]," items."],[[-1,21037],1],[[-1,21030],21],[[-1,21007],12],[[-1,21009],1],[[-1,21036],5],[[-1,21064],1],[[-1,21066],1],[[-1,34952],"\n\n"],[[-1,20968],"Under the hood, my range tree "],[[-1,20934],"is"],[[-1,20932],1],[[-1,20911],8],[[-1,20903]," just a "],[[-1,20881],"slightly modified "],[[-1,20895],"b-tree."],[[-1,20888],4],[[-1,20884]," "],[[-1,20861],"But u"],[[-1,20882],1],[[-1,20931],2],[[-1,20919],7],[[-1,20929],5],[[-1,20938],2],[[-1,20993],24],[[-1,21044],4],[[-1,21049],4],[[-1,21058],8],[[-1,21062],2],[[-1,34950],1],[[-1,34949],"sually when people talk about b-trees they mean"],[[-1,34896]," a "],[[-1,34668],"["],[[-1,34893],"BTreeMap"],[[-1,34667],"](https://doc.rust-lang.org/std/collections/struct.BTreeMap.html)"],[[-1,34883],"."],[[-1,34846]," Thats not what I'm doing here."],[[-1,34882],22],[[-1,34859],2],[[-1,34851],4],[[-1,34857],3],[[-1,34885],1],[[-1,34902],3],[[-1,44374],12],[[-1,44341],1],[[-1,44338],5],[[-1,44323],13],[[-1,44310]," Instead of storing "],[[-1,34813],"keys"],[[-1,44290],7],[[-1,44283],","],[[-1,44333],5],[[-1,44340],1],[[-1,44347],3],[[-1,44362],1],[[-1,44350],1],[[-1,44361],9],[[-1,182648]," "],[[-1,44281],"e"],[[-1,117080],1],[[-1,182652],2],[[-1,183843],50],[[-1,183787],13],[[-1,183793],3],[[-1,183915],1],[[-1,183895],4],[[-1,183889],"ach "],[[-1,180993],"in"],[[-1,180985],"ternal "],[[-1,180991],3],[[-1,183885],"node of the b-tree"],[[-1,183867],3],[[-1,183864]," store"],[[-1,117078],"s"],[[-1,183858]," the "],[[-1,34572],"total"],[[-1,34563]," "],[[-1,34567],2],[[-1,34601],"number of characters"],[[-1,34471]," (recursively)"],[[-1,34581]," in that"],[[-1,183771],21],[[-1,183750]," item's children"],[[-1,34809],14],[[-1,117082],"."],[[-1,44280]," "],[[-1,34456],"So we can"],[[-1,44279],5],[[-1,44272],5],[[-1,44260],2],[[-1,34560]," "],[[-1,34529],"look up any item"],[[-1,34446]," in the document"],[[-1,34513]," by "],[[-1,34507],"character position,"],[[-1,34430]," or"],[[-1,34509],1],[[-1,34559],10],[[-1,34545],15],[[-1,34549],2],[[-1,44258],1],[[-1,34794],2],[[-1,34792]," insert"],[[-1,34480],1],[[-1,34483]," or"],[[-1,34785],8],[[-1,34777]," delet"],[[-1,34472],"e"],[[-1,34423]," anywhere in th"],[[-1,34408],1],[[-1,34407],"e"],[[-1,34397]," "],[[-1,34406],"document"],[[-1,34769],4],[[-1,34765]," "],[[-1,34427],4],[[-1,34764],"in"],[[-1,34771],1],[[-1,44257],7],[[-1,44212],4],[[-1,44204],4],[[-1,44208],2],[[-1,44216],3],[[-1,44242],9],[[-1,44250],8],[[-1,44233],6],[[-1,44193],4],[[-1,44189]," "],[[-1,44227],"*log"],[[-1,44219],"("],[[-1,44223],1],[[-1,44222],"n"],[[-1,44218],")"],[[-1,44221],"*"],[[-1,44188]," "],[[-1,34761],"time"],[[-1,34561],"."],[[-1,34757],56],[[-1,34691],19],[[-1,34701],9],[[-1,44187],28],[[-1,44199],3],[[-1,44265],4],[[-1,44267],1],[[-1,44274],1],[[-1,117115],2],[[-1,117111],10],[[-1,117097],14],[[-1,117101],3],[[-1,117113],1],[[-1,183734],1],[[-1,159605],8],[[-1,159595],11],[[-1,159578],9],[[-1,159540],11],[[-1,159569],18],[[-1,159494],6],[[-1,159551],1],[[-1,159529],9],[[-1,159516],17],[[-1,159520],2],[[-1,159546],3],[[-1,159550],4],[[-1,159584],3],[[-1,159597],1],[[-1,183213],"\n"],[[-1,31082],"\n"],[[-1,31077],"This example shows "],[[-1,30997],"the tree storing "],[[-1,31058],"a docu"],[[-1,31048],"ment "],[[-1,31021],"which currently has "],[[-1,31043],5],[[-1,31038],"1000 chara"],[[-1,31026],"cters"],[[-1,30998],":"],[[-1,31000],1],[[-1,31028],1],[[-1,31052],2],[[-1,31081],3],[[-1,31083],"\n"],[[-1,48893],"\n"],[[-1,46034],"!"],[[-1,46015],"["],[[-1,44388],"b-tree diagram"],[[-1,46004],"]"],[[-1,45993],"("],[[-1,48892],23],[[-1,183212],3],[[-1,52260],"btree.drawio.svg"],[[-1,45971],")"],[[-1,48867],1],[[-1,183197],7],[[-1,183189],1],[[-1,183209],12],[[-1,183725],"\n"],[[-1,20854],"\n> "],[[-1,20640],"This is a range tree, right? "],[[-1,20526],"The"],[[-1,20665],4],[[-1,20661]," "],[[-1,20523],"["],[[-1,20660],"wikipedia ar"],[[-1,20646],"ticle "],[[-1,20601],"on range trees"],[[-1,20522],"](https://en.wikipedia.org/wiki/Range_tree)"],[[-1,20587]," "],[[-1,20585],"is a pretty "],[[-1,20474],"weak"],[[-1,20478],3],[[-1,20573],4],[[-1,20569]," "],[[-1,20562],"description of what I'm doing here."],[[-1,20568],3],[[-1,20611],10],[[-1,20648],1],[[-1,20671],3],[[-1,20689],17],[[-1,20851],160],[[-1,20691],"\n"],[[-1,34394],67],[[-1,34213],12],[[-1,34230],8],[[-1,34327],10],[[-1,34313],3],[[-1,34308],18],[[-1,34287],57],[[-1,34290],2],[[-1,34310],1],[[-1,34317],3],[[-1,34395],1],[[-1,183724],"\n"],[[-1,183418],"This solves both of our linear scanning problems from earlier"],[[-1,182646],":\n\n-"],[[-1,182642],1],[[-1,183357],1],[[-1,183356]," When we want to find "],[[-1,182582],"the "],[[-1,183334],"item"],[[-1,182578]," at position"],[[-1,183330]," "],[[-1,30935],"2"],[[-1,30979],1],[[-1,183329],4],[[-1,183325],"00"],[[-1,183323],4],[[-1,182639],3],[[-1,183319],8],[[-1,183311],", we can just traverse "],[[-1,180978],"across and down"],[[-1,180963],1],[[-1,183288],4],[[-1,183284]," the tree"],[[-1,182584],1],[[-1,183275],"."],[[-1,30978]," In th"],[[-1,30968],"e "],[[-1,30954],"example above, "],[[-1,30933],"the item with position "],[[-1,30890],"3"],[[-1,30885],"50"],[[-1,30889],2],[[-1,30910],3],[[-1,30907]," must be in the "],[[-1,30883],"middle "],[[-1,30861],"leaf node here."],[[-1,30876],14],[[-1,30939],3],[[-1,30966],11],[[-1,30972],2],[[-1,183274]," Trees are very tidy -"],[[-1,182606]," we can"],[[-1,182599],1],[[-1,183252]," stor"],[[-1,182594],"e"],[[-1,183247],3],[[-1,183244]," "],[[-1,52243],"Martin's editing trace"],[[-1,183187],5],[[-1,183176],14],[[-1,183162]," "],[[-1,182592],"in just"],[[-1,182635],10],[[-1,182625]," "],[[-1,19461],"3"],[[-1,20469],1],[[-1,182619],1],[[-1,182618]," levels"],[[-1,182624],1],[[-1,182622],1],[[-1,183157],13],[[-1,183142],6],[[-1,183136]," in"],[[-1,182610]," our"],[[-1,183133],4],[[-1,183129]," tree"],[[-1,180959],","],[[-1,52220]," which"],[[-1,180958],3],[[-1,125024],5],[[-1,125019]," means"],[[-1,30846]," in this benchmark"],[[-1,125013]," we"],[[-1,125008]," can find any "],[[-1,124990],"item in"],[[-1,124982]," about"],[[-1,124994],2],[[-1,125010],1],[[-1,180955],14],[[-1,159488],5],[[-1,159483]," "],[[-1,19459],"3"],[[-1,20467],1],[[-1,180941],1],[[-1,180940]," reads"],[[-1,124976]," from main memory"],[[-1,180934],9],[[-1,165293],8],[[-1,165285],"."],[[-1,44158]," In practice, most of these reads will already be in your CPU's cache."],[[-1,180925],9],[[-1,183124],1],[[-1,182565],"\n- Updating "],[[-1,182553],3],[[-1,182550],"the tree is "],[[-1,182532],"fast too"],[[-1,165283],"."],[[-1,117077]," We update a leaf, then "],[[-1,52213],"update "],[[-1,116975],"the character "],[[-1,116955],"counts at "],[[-1,116961],3],[[-1,116981],3],[[-1,117053],"its parent, and its parent, all the way up to th"],[[-1,116995],"e root"],[[-1,117005],5],[[-1,165282],8],[[-1,182313],20],[[-1,124957],"."],[[-1,116988]," "],[[-1,116985],"So"],[[-1,116987],1],[[-1,182293]," "],[[-1,116982],"a"],[[-1,124955],1],[[-1,124954],"gain,"],[[-1,116945]," after"],[[-1,182292],2],[[-1,165272],8],[[-1,159482],6],[[-1,180915],8],[[-1,180907]," "],[[-1,19457],"3"],[[-1,20465],1],[[-1,182290],10],[[-1,182280]," "],[[-1,180906],"or so "],[[-1,182279],"steps"],[[-1,165263],4],[[-1,165259]," we're done"],[[-1,182274],1],[[-1,182258],13],[[-1,182273],14],[[-1,182245],8],[[-1,182259],"."],[[-1,182237]," Much better"],[[-1,180896]," than "],[[-1,124949],"shuffling everything in a "],[[-1,180868],5],[[-1,180863],"javascript array."],[[-1,176931],"\n"],[[-1,165247],"\n"],[[-1,116897],"We never merge edits from remote peers in this test,"],[[-1,116844]," but I made that fast too anyway."],[[-1,116934],35],[[-1,116899]," "],[[-1,116810],"W"],[[-1,116898],1],[[-1,116936],1],[[-1,165238],14],[[-1,165220],23],[[-1,165197],"hen merging remote edits we also need to find items by their ID ("],[[-1,116809],"eg "],[[-1,165224],2],[[-1,165246],7],[[-1,165248],1],[[-1,176930],19],[[-1,176909],7],[[-1,176895],12],[[-1,176798],12],[[-1,176883],7],[[-1,176804],4],[[-1,176868],16],[[-1,176850],10],[[-1,176834],1],[[-1,176833],"*"],[[-1,176830],"["],[[-1,176821],"'seph', 100]"],[[-1,176807],"*"],[[-1,176786],4],[[-1,176806],")"],[[-1,176778],"."],[[-1,165131]," "],[[-1,8477],"Diamond"],[[-1,165130],22],[[-1,165108]," has "],[[-1,116789],"little "],[[-1,165103],3],[[-1,165100],"index to"],[[-1,159474],5],[[-1,159476],1],[[-1,165092]," "],[[-1,116805],"search "],[[-1,116782],"the b-tree "],[[-1,116798],"by ID."],[[-1,44088]," That codepath doesn't get benchmarked here though"],[[-1,43995],". It"],[[-1,31114],"'"],[[-1,43991],"s fast but for now "],[[-1,44038],3],[[-1,44035],"you'll have to ta"],[[-1,44016],"ke my word for it."],[[-1,44018],1],[[-1,165091],20],[[-1,176809],1],[[-1,176829],4],[[-1,176832],1],[[-1,176838],2],[[-1,176840],1],[[-1,176852],1],[[-1,176876],6],[[-1,176897],1],[[-1,176902],4],[[-1,176911],1],[[-1,180846],"\n\n"],[[-1,165070],"I'm not using"],[[-1,180844],9],[[-1,180831],2],[[-1,176777],5],[[-1,180829],7],[[-1,176771],5],[[-1,180822],1],[[-1,180817],14],[[-1,180706],3],[[-1,180703]," "],[[-1,43971],"Yjs"],[[-1,180702],3],[[-1,180699],"'s trick"],[[-1,176765]," of"],[[-1,180691],4],[[-1,180687]," "],[[-1,180803],"cach"],[[-1,176761],"ing"],[[-1,180799],1],[[-1,180798]," the "],[[-1,180785],"last"],[[-1,43968]," edit"],[[-1,180781]," "],[[-1,180793],"location"],[[-1,165057]," - "],[[-1,165033],"at least not yet"],[[-1,165054],20],[[-1,180780],". "],[[-1,116770],"It might help"],[[-1,43961],"."],[[-1,116757],2],[[-1,165007],4],[[-1,164991],16],[[-1,164975]," "],[[-1,165003],6],[[-1,180778],"I"],[[-1,116755]," just"],[[-1,180777],1],[[-1,165017],4],[[-1,165013]," "],[[-1,180776],"haven't "],[[-1,180759],"tried"],[[-1,124918]," it "],[[-1,124908],"yet."],[[-1,124914],3],[[-1,165011],4],[[-1,180754],38],[[-1,180716],"\n"],[[-1,180707],"\n"],[[-1,20009],"Rust gives us total control over the memory layout, so we can pack everything in tightly. Unlike in the diagram, each leaf node in my b-tree stores a block of 32 entries, packed in a fixed size array in memory. Inserting with a structure like this results in a little bit of memcpy-ing, but a little bit of memcpy is fine. Memcpy is always faster than I think it will be - CPUs can copy several bytes per clock cycle. Its not the epic hunt of a main memory lookup."],[[-1,19542],"\n\n"],[[-1,19525],1],[[-1,176758],4],[[-1,164916],42],[[-1,164872],42],[[-1,164874],1],[[-1,164962],45],[[-1,164972],8],[[-1,176754],8],[[-1,178313],49],[[-1,30828],23],[[-1,178264],1],[[-1,30804],1],[[-1,124904],12],[[-1,124890],16],[[-1,124892],1],[[-1,159462],8],[[-1,124870],2],[[-1,159454],14],[[-1,159416],7],[[-1,159440],5],[[-1,178263],24],[[-1,176743],6],[[-1,178239],62],[[-1,164830],9],[[-1,124859],11],[[-1,178177],10],[[-1,124848],12],[[-1,20114],5],[[-1,20100],11],[[-1,20109],7],[[-1,124836],19],[[-1,124866],6],[[-1,159434],18],[[-1,164818],6],[[-1,164805],15],[[-1,164812],6],[[-1,164820],1],[[-1,176737],10],[[-1,176725],19],[[-1,176727],1],[[-1,178167],46],[[-1,20086],10],[[-1,20069],21],[[-1,20076],6],[[-1,20088],1],[[-1,176699],1],[[-1,176703],1],[[-1,178121],12],[[-1,176698],10],[[-1,178109],6],[[-1,159405],7],[[-1,20047],1],[[-1,159398],3],[[-1,178103],7],[[-1,20045],15],[[-1,178096],53],[[-1,164789],6],[[-1,164782],10],[[-1,178043],3],[[-1,176688],3],[[-1,176681],4],[[-1,176685],2],[[-1,178040],22],[[-1,176676],2],[[-1,178018],10],[[-1,176673],11],[[-1,164771],3],[[-1,30802],21],[[-1,164721],2],[[-1,31113],1],[[-1,164719],2],[[-1,159359],16],[[-1,124816],11],[[-1,124804],2],[[-1,30781],4],[[-1,30776],1],[[-1,124802],3],[[-1,159343],9],[[-1,164768],14],[[-1,164752],7],[[-1,159389],9],[[-1,159377],16],[[-1,164745],2],[[-1,159395],4],[[-1,159390],1],[[-1,164743],4],[[-1,164717],3],[[-1,159334],6],[[-1,164714],1],[[-1,164739],16],[[-1,164712],24],[[-1,164723],1],[[-1,116750],1],[[-1,20011],1],[[-1,19545],1],[[-1,20030],"And "],[[-1,20025],"w"],[[-1,43960],1],[[-1,43959],"hy 32"],[[-1,30775]," entries"],[[-1,43954],"?"],[[-1,18952]," "],[[-1,18951],15],[[-1,43953],1],[[-1,43951],"I ran "],[[-1,30766],"this"],[[-1,43945],2],[[-1,116749],14],[[-1,116735]," "],[[-1,116734],13],[[-1,116714],22],[[-1,116692],"benchmark"],[[-1,43939]," "],[[-1,116683],3],[[-1,116641],5],[[-1,116589],6],[[-1,116636],7],[[-1,116629],"with a "],[[-1,18935],"bunch of"],[[-1,116622],3],[[-1,116619]," different "],[[-1,30762],"bucket "],[[-1,116608],"sizes"],[[-1,43937]," and"],[[-1,116678],1],[[-1,116676]," "],[[-1,116666],"32 "],[[-1,18807],"worked well"],[[-1,18895],15],[[-1,18880],"."],[[-1,18878]," I have no idea"],[[-1,18859]," why that"],[[-1,18839]," worked out to be the best."],[[-1,18850],10],[[-1,18863],2],[[-1,18911],15],[[-1,18920],7],[[-1,18927],5],[[-1,116663],4],[[-1,116657],2],[[-1,116603],8],[[-1,116655],1],[[-1,20023],11],[[-1,19466],4],[[-1,116654],6],[[-1,116594],5],[[-1,19492],7],[[-1,19475],8],[[-1,19485],9],[[-1,116648],6],[[-1,19521],26],[[-1,19524],1],[[-1,19540],14],[[-1,116659],1],[[-1,116668],1],[[-1,116675],6],[[-1,116680],1],[[-1,116721],7],[[-1,164754],1],[[-1,178008],1],[[-1,178007],"\n"],[[-1,178005],"\n"],[[-1,176661],"Speaking of fast,"],[[-1,180461],102],[[-1,180355],11],[[-1,180332],78],[[-1,180248],1],[[-1,180241],25],[[-1,180203],9],[[-1,180188],11],[[-1,180056],17],[[-1,180088],1],[[-1,180063],6],[[-1,180039],14],[[-1,180004],10],[[-1,180025],21],[[-1,179994],1],[[-1,179763],75],[[-1,179675],2],[[-1,179669],4],[[-1,179663],7],[[-1,179361],37],[[-1,179656],1],[[-1,179651],33],[[-1,179122],4],[[-1,179618],5],[[-1,179322],15],[[-1,179613],1],[[-1,179610],16],[[-1,179590],2],[[-1,179307],5],[[-1,179301],1],[[-1,179586],48],[[-1,179536],5],[[-1,179477],17],[[-1,179531],15],[[-1,179512],18],[[-1,179489],9],[[-1,179118],13],[[-1,179480],3],[[-1,179460],15],[[-1,179104],1],[[-1,179445],25],[[-1,179298],13],[[-1,179102],7],[[-1,179091],12],[[-1,179095],2],[[-1,179285],19],[[-1,179264],58],[[-1,179266],1],[[-1,179420],27],[[-1,179077],14],[[-1,179393],26],[[-1,179363],2],[[-1,179204],1],[[-1,179196],9],[[-1,179203],5],[[-1,179185],60],[[-1,179198],2],[[-1,179367],2],[[-1,179494],4],[[-1,179516],2],[[-1,179538],1],[[-1,179588],1],[[-1,179594],2],[[-1,179612],1],[[-1,179655],2],[[-1,179665],1],[[-1,179673],2],[[-1,179688],12],[[-1,179993],9],[[-1,179984]," how "],[[-1,179977],"fast"],[[-1,179971]," does it go?\n\n"],[[-1,164630],"If we "],[[-1,18796],"["],[[-1,164624],"compile this code to"],[[-1,164646],12],[[-1,179957],23],[[-1,164633],2],[[-1,179934],7],[[-1,179927]," weba"],[[-1,179920],"ssembly"],[[-1,18795],"](https://github.com/josephg/diamond-js)"],[[-1,164604]," and drive it from javascript"],[[-1,43933]," like in the other tests"],[[-1,179913],", "],[[-1,164687],"we can now proces"],[[-1,164668],"s the whole "],[[-1,43909],"editing "],[[-1,164656],"trace in"],[[-1,43901]," "],[[-1,20201],"193"],[[-1,43900],4],[[-1,164670],1],[[-1,179897],13],[[-1,179798],1],[[-1,20216],6],[[-1,179797],3],[[-1,179794]," milli"],[[-1,179884],5],[[-1,179879],"seconds."],[[-1,30755]," Thats 5x faster than "],[[-1,21422],"Y"],[[-1,30733],1],[[-1,21425],1],[[-1,30732],"js"],[[-1,30703],"."],[[-1,30730],1],[[-1,30729]," "],[[-1,30701],"And "],[[-1,30728],3],[[-1,30724],1],[[-1,30721],"remarkably"],[[-1,30723],1],[[-1,43896],6],[[-1,43779],2],[[-1,43777]," 3x faster than "],[[-1,30697],"our baseline test "],[[-1,43761],"editing a native javascript string"],[[-1,30678],", despite"],[[-1,30705],1],[[-1,30709],2],[[-1,43727],9],[[-1,43638],1],[[-1,43718],2],[[-1,43636],1],[[-1,43716],6],[[-1,31112],1],[[-1,43710],1],[[-1,43709]," doing "],[[-1,30667],"all the work to support"],[[-1,43702],36],[[-1,43666]," collaborative editing"],[[-1,43644],4],[[-1,43640],"!"],[[-1,43890],46],[[-1,43843],"\n\n"],[[-1,18753],"Javascript and WASM is now a bottleneck. "],[[-1,18754],"I"],[[-1,19314],3],[[-1,19233],4],[[-1,19311],17],[[-1,19293],1],[[-1,19343],1],[[-1,19385],21],[[-1,19364],"f we "],[[-1,19358],"skip"],[[-1,18711]," "],[[-1,18586],"javasc"],[[-1,18578],"ript"],[[-1,18580],1],[[-1,18710],8],[[-1,18702]," and run"],[[-1,18693]," the"],[[-1,19354],1],[[-1,19292],15],[[-1,19353],4],[[-1,19229],1],[[-1,19342],1],[[-1,19227],4],[[-1,19212],4],[[-1,19208]," benchmark "],[[-1,19182],"["],[[-1,18572],"directly in rust"],[[-1,19197],6],[[-1,19223],10],[[-1,19341],8],[[-1,19276],3],[[-1,19333],4],[[-1,19349],5],[[-1,30634],1],[[-1,30640],5],[[-1,30642],1],[[-1,179871],1],[[-1,164575],18],[[-1,30632],14],[[-1,164557],3],[[-1,19315],1],[[-1,19190],7],[[-1,19326],2],[[-1,19328],1],[[-1,164554],9],[[-1,19321],2],[[-1,19247],13],[[-1,164545],10],[[-1,30618],1],[[-1,164534],7],[[-1,179870],25],[[-1,30617],"]("],[[-1,18688],"https://github.com/josephg/diamond-types/blob/42a8bc8fb4d44671147ccaf341eee18d77b2d532/benches/yjs.rs"],[[-1,19455],70],[[-1,30615],102],[[-1,30513],")"],[[-1,18556],", we"],[[-1,19272],2],[[-1,19263],16],[[-1,19270],6],[[-1,179845],2],[[-1,179841],2],[[-1,179839]," can pro"],[[-1,179829],"cess "],[[-1,18547],"all"],[[-1,18551],3],[[-1,43841],3],[[-1,43838]," 260k edits in "],[[-1,179824],"this editing trace in"],[[-1,43823]," just"],[[-1,179803]," "],[[-1,164527],"*"],[[-1,20234],"56"],[[-1,179787],2],[[-1,179785]," "],[[-1,179782],"milliseconds"],[[-1,164526],"*"],[[-1,164522],"."],[[-1,159327]," That"],[[-1,105730],"'"],[[-1,159322],"s"],[[-1,20232]," over"],[[-1,159321]," "],[[-1,20224],"5000"],[[-1,20226],1],[[-1,159320],1],[[-1,159313],3],[[-1,159310],"x faster than "],[[-1,159292],"where we started with automerge"],[[-1,159208],". It can process"],[[-1,159259],4],[[-1,159255]," "],[[-1,159254],6],[[-1,159248],"4."],[[-1,20217],"6"],[[-1,20219],1],[[-1,159246],1],[[-1,159245]," "],[[-1,159190],"*"],[[-1,159244],"million"],[[-1,159189],"*"],[[-1,159237]," "],[[-1,159234],"operations every second."],[[-1,159236],1],[[-1,159261],1],[[-1,159296],3],[[-1,159319],3],[[-1,164524],1],[[-1,179770],1],[[-1,178004],"\n"],[[-1,178003],1],[[-1,178001],"\n| Test                              | Time taken | RAM usage |\n|"],[[-1,104685],":"],[[-1,104692],1],[[-1,104694],1],[[-1,177936],1],[[-1,177935],"--------------------------        | ----------"],[[-1,162389],":"],[[-1,177889],1],[[-1,177888],"| ---------"],[[-1,162379],":"],[[-1,177877],1],[[-1,177876],"|\n| automerge "],[[-1,177224],"("],[[-1,177186],"v"],[[-1,177862],2],[[-1,177860],"1.0.0-preview2"],[[-1,177222],")"],[[-1,177846],1],[[-1,177845],"       |  291s      | 880 MB    |\n| reference-crdts (automerge / "],[[-1,21418],"Y"],[[-1,21416],"j"],[[-1,21414],"s"],[[-1,177780],3],[[-1,177777],") |   31s      |  28 MB    |\n| Yjs "],[[-1,177190],"("],[[-1,177184],"v"],[[-1,177742],2],[[-1,177219],1],[[-1,177212],1],[[-1,177211],"13.5.5)"],[[-1,177189],"  "],[[-1,177204],"           "],[[-1,177214],1],[[-1,177216],1],[[-1,177218],1],[[-1,177740],20],[[-1,177720],"        | 0.97s      | 3."],[[-1,162329],"3"],[[-1,162335],1],[[-1,177695],1],[[-1,177694]," MB    |\n"],[[-1,177472],8],[[-1,177386],11],[[-1,177395],7],[[-1,177374],3],[[-1,177388],1],[[-1,177464],32],[[-1,177358],1],[[-1,177355],1],[[-1,177357],1],[[-1,177432],23],[[-1,177685],62],[[-1,177622],8],[[-1,177591],1],[[-1,177408],6],[[-1,177590],13],[[-1,177402],6],[[-1,177577],19],[[-1,177354],1],[[-1,177558],3],[[-1,177491],19],[[-1,177555],1],[[-1,177554],"| "],[[-1,159188],"*"],[[-1,20383],"Plain string edits in JS"],[[-1,177552],11],[[-1,159187],"*"],[[-1,20358],"        "],[[-1,177541],23],[[-1,177518],"| 0.61s      | 0.1 MB    |"],[[-1,177288],"\n| "],[[-1,105573],"**"],[[-1,9194],"D"],[[-1,9192],"i"],[[-1,9190],"a"],[[-1,9188],"m"],[[-1,9186],"o"],[[-1,9184],"n"],[[-1,9182],"d"],[[-1,9180]," "],[[-1,9178],"("],[[-1,9176],"w"],[[-1,9174],"a"],[[-1,9164],"s"],[[-1,9162],"m"],[[-1,9160]," "],[[-1,9158],"v"],[[-1,9156],"i"],[[-1,9154],"a"],[[-1,9152]," "],[[-1,9150],"n"],[[-1,9148],"o"],[[-1,9146],"d"],[[-1,9144],"e"],[[-1,9142],"j"],[[-1,9140],"s"],[[-1,9138],")"],[[-1,9136],1],[[-1,9134],1],[[-1,9132],1],[[-1,9130],1],[[-1,9128],1],[[-1,9172],1],[[-1,9170],1],[[-1,177285],30],[[-1,105571],"**"],[[-1,9126],"     "],[[-1,177255],4],[[-1,177251],"| 0."],[[-1,20208],"1"],[[-1,20203],"9"],[[-1,20205],1],[[-1,20207],1],[[-1,177247],2],[[-1,177245],"s      | "],[[-1,175582],"???   "],[[-1,175576],1],[[-1,177236],6],[[-1,177230],"    |"],[[-1,177352],"\n| "],[[-1,105564],"*"],[[-1,105562],"*"],[[-1,9118],"D"],[[-1,9116],"i"],[[-1,9114],"a"],[[-1,9112],"m"],[[-1,9110],"o"],[[-1,9108],"n"],[[-1,9106],"d"],[[-1,9104]," "],[[-1,9102],"("],[[-1,9100],"n"],[[-1,9098],"a"],[[-1,9096],"t"],[[-1,9094],"i"],[[-1,9092],"v"],[[-1,9090],"e"],[[-1,9088],")"],[[-1,177349],13],[[-1,105563],"*"],[[-1,105565],"*"],[[-1,177336],4],[[-1,177332],"  "],[[-1,177330],3],[[-1,177327],"            | 0.0"],[[-1,17759],"5"],[[-1,17757],"6"],[[-1,177310],2],[[-1,177308],"s     | "],[[-1,20240],"1"],[[-1,20238],"."],[[-1,20236],"1"],[[-1,177300],3],[[-1,177297]," MB    |"],[[-1,177606],14],[[-1,177614],7],[[-1,178002],"\n"],[[-1,164331],1],[[-1,43816],35],[[-1,164253],5],[[-1,164227],7],[[-1,164248],16],[[-1,164230],2],[[-1,164219],1],[[-1,164232],1],[[-1,164324],12],[[-1,164218],3],[[-1,164312],13],[[-1,164269],7],[[-1,164299],7],[[-1,164215],3],[[-1,164210],4],[[-1,164212],1],[[-1,164261],7],[[-1,164292],22],[[-1,104794],25],[[-1,104759],37],[[-1,104720],25],[[-1,104722],1],[[-1,104769],9],[[-1,104795],1],[[-1,51650],30],[[-1,104844],5],[[-1,164270],1],[[-1,104962],1],[[-1,104960],32],[[-1,104911],62],[[-1,104848],1],[[-1,104849],1],[[-1,104928],16],[[-1,104961],1],[[-1,52205],"\n"],[[-1,51752],"Performance is smooth as butter. "],[[-1,43256],"A b-tree doesn't"],[[-1,43332],24],[[-1,43306],3],[[-1,43297],39],[[-1,43299],1],[[-1,43303],2],[[-1,43308],1],[[-1,43426],8],[[-1,43418]," care where "],[[-1,43238],"edits"],[[-1,43406],7],[[-1,43399]," happen"],[[-1,43230],". "],[[-1,43227],"T"],[[-1,43392],4],[[-1,43388],"his system is uniformly fast across the whole document. "],[[-1,51719],"Rust doesn't need a garbage collector to track memory allocations, "],[[-1,51616],"so there's no"],[[-1,43634]," mysterious"],[[-1,51603],4],[[-1,51599]," GC spikes."],[[-1,43538]," "],[[-1,43537],49],[[-1,43481],18],[[-1,43453],26],[[-1,43463],9],[[-1,43488],6],[[-1,50618],1],[[-1,43622],"And because memory is "],[[-1,43589],"so"],[[-1,43546]," tightly"],[[-1,43587]," "],[[-1,43600],"packed"],[[-1,43594],3],[[-1,43591],", "],[[-1,43584],"p"],[[-1,50496],1],[[-1,50495],"rocessing "],[[-1,50617],9],[[-1,50501],3],[[-1,50608],"this entire data set "],[[-1,50556],"(all 260"],[[-1,50545]," "],[[-1,50548],"000"],[[-1,50544],") "],[[-1,50542],11],[[-1,50587],"only"],[[-1,50464],6],[[-1,50583]," "],[[-1,18538],"results in "],[[-1,31367],5],[[-1,31391],5],[[-1,50484],12],[[-1,50582],6],[[-1,18543],"1394"],[[-1,50576],1],[[-1,50571],3],[[-1,31385]," calls to malloc"],[[-1,50471],6],[[-1,50465],"."],[[-1,50568],1],[[-1,50527],7],[[-1,50531],2],[[-1,50567],11],[[-1,50520],9],[[-1,50503],1],[[-1,50511],6],[[-1,50575],2],[[-1,51588],1],[[-1,51538],30],[[-1,51487],8],[[-1,51467],11],[[-1,51469],1],[[-1,51479],9],[[-1,51508],18],[[-1,51550],11],[[-1,51582],8],[[-1,51570],19],[[-1,51574],2],[[-1,51587],4],[[-1,51652],2],[[-1,51887],38],[[-1,51830],21],[[-1,51803],25],[[-1,51761],7],[[-1,51778],17],[[-1,51809],3],[[-1,51840],9],[[-1,51849],8],[[-1,52204],1],[[-1,52201],2],[[-1,52193],19],[[-1,52168],4],[[-1,52174],6],[[-1,52164],2],[[-1,52126],8],[[-1,52110],48],[[-1,52037],43],[[-1,51988],4],[[-1,51921],13],[[-1,51982],25],[[-1,51951],3],[[-1,51944],2],[[-1,51936],12],[[-1,51908],"\n"],[[-1,48866],"\n"],[[-1,20304],"![rust implementation in wasm vs Yjs](rust_perf6.svg)"],[[-1,20250],"\n"],[[-1,18515],"\n"],[[-1,18475],"Oh,"],[[-1,18376]," what a pity."],[[-1,18472]," "],[[-1,18362],"I"],[[-1,18471],1],[[-1,18470],"ts so"],[[-1,18465],1],[[-1,18361],12],[[-1,18349]," "],[[-1,18464],"fast you can barely see it next to yjs "],[[-1,18348],"("],[[-1,18423],"*fleexxxx*"],[[-1,18347],")"],[[-1,18413],". Lets"],[[-1,18425],1],[[-1,18514],8],[[-1,18506]," zoom in a bit there "],[[-1,18403],"and bask in that flat line"],[[-1,18342],":"],[[-1,18344],1],[[-1,18377],1],[[-1,18485],9],[[-1,18516],"\n"],[[-1,20251],"\n"],[[-1,18523],5],[[-1,46036],"!"],[[-1,46016],"["],[[-1,43226],"rust "],[[-1,43217],"implementation in was"],[[-1,43194],"m"],[[-1,43193],4],[[-1,21420],1],[[-1,21417],1],[[-1,21415],1],[[-1,43189],3],[[-1,43196],1],[[-1,43221],3],[[-1,46005],"]"],[[-1,45994],"("],[[-1,48865],23],[[-1,51907],3],[[-1,51904],"rust_perf"],[[-1,20248],"7"],[[-1,51895],1],[[-1,51894],".svg"],[[-1,45972],")"],[[-1,18001],"\n\nWell, a nearly flat line."],[[-1,17974],10],[[-1,17885],10],[[-1,17873],20],[[-1,17851],3],[[-1,17853],1],[[-1,17875],1],[[-1,17964],78],[[-1,18341],8],[[-1,18005],2],[[-1,18333],18],[[-1,18060],15],[[-1,18315],15],[[-1,18273],13],[[-1,18300],16],[[-1,18044],4],[[-1,18039],1],[[-1,18032],10],[[-1,18038],5],[[-1,18237],2],[[-1,18224],18],[[-1,18163],11],[[-1,18173],9],[[-1,18206],19],[[-1,18020],14],[[-1,18187],13],[[-1,18151],43],[[-1,18099],27],[[-1,18100],1],[[-1,18108],4],[[-1,18174],1],[[-1,18235],10],[[-1,18253],15],[[-1,18255],1],[[-1,18284],8],[[-1,18527],4],[[-1,48840],1],[[-1,51942],3],[[-1,51948],2],[[-1,51957],3],[[-1,51984],1],[[-1,51994],3],[[-1,52041],2],[[-1,52062],20],[[-1,52118],7],[[-1,52155],12],[[-1,52133],6],[[-1,52136],1],[[-1,52143],6],[[-1,52135],1],[[-1,52137],1],[[-1,52162],6],[[-1,52199],3],[[-1,52203],1],[[-1,52206],"\n"],[[-1,51007],"\n"],[[-1,10201],"And"],[[-1,10087]," remember,"],[[-1,10198]," "],[[-1,10196],"t"],[[-1,17813],1],[[-1,17848],14],[[-1,17826],1],[[-1,17834],1],[[-1,17833],"his "],[[-1,10276],"chart shows"],[[-1,10220]," the "],[[-1,10077],"*"],[[-1,10215],"slow"],[[-1,10076],"*"],[[-1,10211]," version. "],[[-1,10136],"This chart is "],[[-1,10120],"gener"],[[-1,10111],"ated "],[[-1,10102],"from"],[[-1,10106],3],[[-1,10115],2],[[-1,10122],1],[[-1,10159],22],[[-1,10195],4],[[-1,10178],18],[[-1,10191],1],[[-1,10187],8],[[-1,10190],2],[[-1,17829],2],[[-1,17825],1],[[-1,51005],25],[[-1,31640]," "],[[-1,10262],"javascript"],[[-1,10252],1],[[-1,31639],11],[[-1,10251],", "],[[-1,10242],"calling into rust "],[[-1,10095],"through"],[[-1,10224],3],[[-1,10249],6],[[-1,31628],8],[[-1,50980]," WASM"],[[-1,31618],6],[[-1,31610],8],[[-1,31612],1],[[-1,50975],1],[[-1,50868],16],[[-1,50974],20],[[-1,50875],5],[[-1,50954],14],[[-1,17821],6],[[-1,50940],10],[[-1,50930],"."],[[-1,50929],2],[[-1,50756],7],[[-1,50764],7],[[-1,50927],48],[[-1,42850],43],[[-1,50879],1],[[-1,17811],3],[[-1,31983],1],[[-1,31602],4],[[-1,31597],1],[[-1,31982],10],[[-1,31595],12],[[-1,17808],1],[[-1,31583],4],[[-1,17807],1],[[-1,31579],9],[[-1,31570]," "],[[-1,17805],"If"],[[-1,31463],4],[[-1,31459]," I run this benchmark natively it"],[[-1,17803],"s"],[[-1,31569],8],[[-1,31561]," "],[[-1,17801],"another"],[[-1,31560],5],[[-1,31545],7],[[-1,31538]," "],[[-1,18069],"~4"],[[-1,31555],1],[[-1,31554],"x faster"],[[-1,31414]," "],[[-1,18066],"again"],[[-1,31413],9],[[-1,31422],6],[[-1,31546],1],[[-1,31972],17],[[-1,31953],16],[[-1,31935],6],[[-1,31955],1],[[-1,43090],1],[[-1,43051],17],[[-1,39898],14],[[-1,43033],1],[[-1,43080],29],[[-1,43032],7],[[-1,39883],7],[[-1,31929],5],[[-1,31920],32],[[-1,31884],1],[[-1,31888],2],[[-1,31924],3],[[-1,39876],12],[[-1,43025],6],[[-1,43019],"."],[[-1,9937],"\n\n"],[[-1,445],7],[[-1,9934],"Why is WASM"],[[-1,31883],1],[[-1,10073],9],[[-1,31537],4],[[-1,31532],1],[[-1,31641],1],[[-1,31882],12],[[-1,10064],1],[[-1,9972],7],[[-1,9965]," "],[[-1,8820],"4x slower than"],[[-1,9964],19],[[-1,9922],14],[[-1,9945]," native"],[[-1,8804]," execution"],[[-1,9908],2],[[-1,10063],17],[[-1,31870],"?"],[[-1,43018]," "],[[-1,31868],"Are"],[[-1,31865],3],[[-1,43017],3],[[-1,39863],3],[[-1,39857],8],[[-1,39860],3],[[-1,42806],20],[[-1,42782],13],[[-1,42786],2],[[-1,43014],6],[[-1,43008]," javascript"],[[-1,39846]," calls to the "],[[-1,42764],4],[[-1,42997],1],[[-1,42767],1],[[-1,42996],2],[[-1,42994],"WASM"],[[-1,39831]," VM"],[[-1,9985]," really that"],[[-1,31663],4],[[-1,39828],4],[[-1,39824]," "],[[-1,39815],"slow"],[[-1,39823],4],[[-1,42990],1],[[-1,42979],8],[[-1,42971],"? "],[[-1,42931],"Does LLVM"],[[-1,42922],1],[[-1,10046],11],[[-1,10035]," "],[[-1,39810],6],[[-1,42916],21],[[-1,42921],4],[[-1,42969],3],[[-1,42936],4],[[-1,42966],7],[[-1,42953],3],[[-1,42894],"optimiz"],[[-1,39801],"e"],[[-1,39772],1],[[-1,17793],1],[[-1,39771],11],[[-1,17792],1],[[-1,42887],3],[[-1,42884]," native "],[[-1,42870],"x"],[[-1,42861],"86 code"],[[-1,17791]," "],[[-1,17790],9],[[-1,39800],1],[[-1,39799],"better"],[[-1,39791],18],[[-1,39793],1],[[-1,42854],"? Or"],[[-1,10032]," do"],[[-1,10029],2],[[-1,10027]," WASM's"],[[-1,42759],4],[[-1,42728],10],[[-1,17781]," memory"],[[-1,42718]," bounds checks"],[[-1,10019]," "],[[-1,9995],5],[[-1,10018],"slow it down"],[[-1,10006],10],[[-1,9996],"?"],[[-1,435]," I'm so curious!"],[[-1,437],1],[[-1,42704],1],[[-1,42692],19],[[-1,17773],6],[[-1,31527],4],[[-1,31521],31],[[-1,31403],11],[[-1,31489],1],[[-1,31523],1],[[-1,31530],1],[[-1,31855],13],[[-1,31857],1],[[-1,42665],16],[[-1,42630],6],[[-1,42649],7],[[-1,42638],7],[[-1,42623],7],[[-1,42631],1],[[-1,42642],2],[[-1,42671],5],[[-1,42673],1],[[-1,42703],10],[[-1,42755],4],[[-1,42749],20],[[-1,42751],1],[[-1,42865],2],[[-1,42869],2],[[-1,42876],3],[[-1,42950],13],[[-1,42959],3],[[-1,42987],7],[[-1,42989],1],[[-1,43089],8],[[-1,43186],1],[[-1,43166],13],[[-1,43115],24],[[-1,43153],37],[[-1,43185],18],[[-1,50878],"\n"],[[-1,50876],"\n"],[[-1,42616],4],[[-1,50648],1],[[-1,39760],5],[[-1,43582],1],[[-1,42610],28],[[-1,43581],12],[[-1,50647],29],[[-1,43568],1],[[-1,50726],27],[[-1,50748],19],[[-1,51348],15],[[-1,51331],63],[[-1,51241],17],[[-1,51174],16],[[-1,51149],7],[[-1,51158],9],[[-1,51142],1],[[-1,51186],11],[[-1,51224],12],[[-1,51207],1],[[-1,51198],10],[[-1,51206],4],[[-1,51212],4],[[-1,51266],24],[[-1,51268],1],[[-1,51333],1],[[-1,51349],1],[[-1,51455],1],[[-1,51383],24],[[-1,50850],2],[[-1,50846],4],[[-1,50848],1],[[-1,51359],10],[[-1,50728],1],[[-1,50851],1],[[-1,50842],5],[[-1,39720],1],[[-1,39695],27],[[-1,39719],18],[[-1,39668],10],[[-1,39728],1],[[-1,39723],1],[[-1,39727],3],[[-1,50811],1],[[-1,39754],2],[[-1,39748],6],[[-1,39752],2],[[-1,50686],25],[[-1,39742],11],[[-1,50661],1],[[-1,50808],8],[[-1,50697],9],[[-1,50800],7],[[-1,50791],22],[[-1,50659],10],[[-1,50769],4],[[-1,39698],1],[[-1,50765],1],[[-1,43567],1],[[-1,31474],1],[[-1,31488],11],[[-1,31111],1],[[-1,31477],1],[[-1,31473],9],[[-1,31657],12],[[-1,31741],6],[[-1,31680],5],[[-1,31735],20],[[-1,31643],1],[[-1,31715],19],[[-1,31666],1],[[-1,31696],9],[[-1,31673],4],[[-1,31687],4],[[-1,31797],5],[[-1,31744],1],[[-1,31790],5],[[-1,31754],7],[[-1,31777],20],[[-1,31785],7],[[-1,31792],1],[[-1,43566],6],[[-1,31802],1],[[-1,39658],4],[[-1,43560],3],[[-1,39654],7],[[-1,43557],10],[[-1,31842],1],[[-1,31801],3],[[-1,31841],15],[[-1,31824],9],[[-1,31807],4],[[-1,31815],4],[[-1,31826],1],[[-1,43547],1],[[-1,50793],1],[[-1,50810],1],[[-1,50837],25],[[-1,51010],1],[[-1,51139],128],[[-1,51141],1],[[-1,51398],1],[[-1,51454],32],[[-1,51396],6],[[-1,51388],1],[[-1,51422],22],[[-1,164330],3],[[-1,164332],1],[[-1,164508],"\n"],[[-1,153612],"##"],[[-1,153608]," Struct of arrays "],[[-1,150245],"or"],[[-1,153590],2],[[-1,153588]," Array of structs"],[[-1,150243],"?"],[[-1,153610],1],[[-1,164507],3],[[-1,164509],"\n"],[[-1,153570],"\n"],[[-1,153569],31],[[-1,153530],2],[[-1,153528],"This impl"],[[-1,153515],"ementation "],[[-1,153498],"has another small"],[[-1,151199],", important"],[[-1,153481]," change - and I'm not sure "],[[-1,153445],"if I like it.\n"],[[-1,153431],33],[[-1,153319],10],[[-1,153398],1],[[-1,153118],18],[[-1,153305],5],[[-1,153295],16],[[-1,153096],2],[[-1,153275],77],[[-1,153099],2],[[-1,153279],4],[[-1,153297],1],[[-1,153325],3],[[-1,153309],1],[[-1,153322],3],[[-1,153307],1],[[-1,153300],1],[[-1,153397],9],[[-1,153197],5],[[-1,153388],19],[[-1,153191],4],[[-1,153369],13],[[-1,153186],4],[[-1,153356],24],[[-1,153181],11],[[-1,153332],7],[[-1,153170],9],[[-1,153092],3],[[-1,153156],4],[[-1,153149],6],[[-1,153143],"\n"],[[-1,50455],"I"],[[-1,131214],6],[[-1,131207],1],[[-1,131216],1],[[-1,153142],1],[[-1,153141],"n rust I'm"],[[-1,131205]," actually"],[[-1,153131]," doing"],[[-1,152699]," something "],[[-1,150675],"like"],[[-1,150671],1],[[-1,151231],9],[[-1,151222]," "],[[-1,152686],9],[[-1,152688],1],[[-1,153125],1],[[-1,153088],18],[[-1,153124],"this:"],[[-1,153152],2],[[-1,153161],4],[[-1,153454],8],[[-1,153504],5],[[-1,153519],2],[[-1,153538],4],[[-1,153571],"\n"],[[-1,153069],1],[[-1,153068],"\n```javascript\ndoc = {"],[[-1,152677],"\n"],[[-1,152676],22],[[-1,152650],6],[[-1,152349],3],[[-1,152644],1],[[-1,152352],"  "],[[-1,152643],2],[[-1,152654],2],[[-1,152815],3],[[-1,152601],5],[[-1,153046],10],[[-1,152562],9],[[-1,152568],5],[[-1,152596],10],[[-1,152553],1],[[-1,153036],1],[[-1,152840],1],[[-1,152794],4],[[-1,152839],23],[[-1,153035],1],[[-1,152383],4],[[-1,152799],4],[[-1,153034],4],[[-1,152862],9],[[-1,153030],38],[[-1,152637],1],[[-1,152992],25],[[-1,152537],4],[[-1,152542],4],[[-1,152550],4],[[-1,152633],3],[[-1,152617],4],[[-1,152624],4],[[-1,152630],3],[[-1,152967],7],[[-1,152613],9],[[-1,152960],1],[[-1,152804],4],[[-1,152959],4],[[-1,152851],10],[[-1,152955],37],[[-1,152635],1],[[-1,152918],26],[[-1,152639],1],[[-1,152892],14],[[-1,152789],4],[[-1,152811],6],[[-1,152878],7],[[-1,152784],1],[[-1,152778],2],[[-1,152783],4],[[-1,152871],2],[[-1,152552],1],[[-1,152772],7],[[-1,152764],"textContent: "],[[-1,152586],"Rope"],[[-1,152580],"y"],[[-1,152579],1],[[-1,152578],"Rope {"],[[-1,152582]," "],[[-1,152751],"'hello'"],[[-1,152572]," }"],[[-1,152350],","],[[-1,152314],"\n"],[[-1,152313],2],[[-1,152344],"\n  clients: ['seph', 'mike'],"],[[-1,152355],"\n"],[[-1,152378],"\n  items: "],[[-1,42297],8],[[-1,42302],"BTree"],[[-1,152368],9],[[-1,152359]," {["],[[-1,152410],"\n    // "],[[-1,31362],"Note: "],[[-1,152402],"No string content!"],[[-1,152461],"\n    { "],[[-1,131161],"l"],[[-1,131159],"e"],[[-1,131157],"n"],[[-1,152454],6],[[-1,152448],": "],[[-1,39608]," "],[[-1,152446],"5, id: [0, 0], seq, parent: ROOT },"],[[-1,152515],"\n    { "],[[-1,131163],"l"],[[-1,131160],"e"],[[-1,131158],"n"],[[-1,152508],6],[[-1,152502],": -5, id: [1, 0], seq, parent: [0, 0] },"],[[-1,131196]," // neg"],[[-1,39642],"ative"],[[-1,131189],5],[[-1,131184]," "],[[-1,131156],"len "],[[-1,39618],"means the "],[[-1,39622],2],[[-1,131183],9],[[-1,131172],1],[[-1,131171],"content"],[[-1,39636]," was deleted"],[[-1,131174],1],[[-1,152524],"\n    ..."],[[-1,152531],"\n  ]},"],[[-1,152533],1],[[-1,152744],18],[[-1,152701],1],[[-1,152721],19],[[-1,152726],4],[[-1,152776],"\n"],[[-1,152775],2],[[-1,152869],"}\n```"],[[-1,153070],"\n"],[[-1,152271],"\n"],[[-1,150668],"Notice t"],[[-1,150658],"he document's"],[[-1,150660],1],[[-1,151187],3],[[-1,151212],4],[[-1,151220],4],[[-1,151241],8],[[-1,152253],36],[[-1,151262],5],[[-1,152217],6],[[-1,152208],1],[[-1,152270],1],[[-1,152211],1],[[-1,152269],6],[[-1,151257],14],[[-1,151413],19],[[-1,152263],6],[[-1,152255],2],[[-1,152207],8],[[-1,151393],6],[[-1,152199],3],[[-1,152190],8],[[-1,151207],3],[[-1,151204]," text"],[[-1,152182],2],[[-1,152180]," "],[[-1,151181],"content"],[[-1,149861]," doesn't live in the "],[[-1,149834],"list of items anymore. Now it"],[[-1,31110],"'"],[[-1,149805],"s"],[[-1,149803]," in"],[[-1,149800],1],[[-1,149840],5],[[-1,150645],1],[[-1,150638],15],[[-1,150644],3],[[-1,151174],1],[[-1,152179],8],[[-1,152171]," "],[[-1,152092],"a separate data"],[[-1,152170],7],[[-1,152163]," structure"],[[-1,150623],". "],[[-1,131152],3],[[-1,150621],"I'm"],[[-1,150617],1],[[-1,151385],1],[[-1,151384]," "],[[-1,151996],2],[[-1,151949],"using a"],[[-1,151932]," rust library"],[[-1,149798]," for this"],[[-1,151919]," calle"],[[-1,151909],"d "],[[-1,151913],2],[[-1,151942],5],[[-1,151951],1],[[-1,151994],"[Ropey]("],[[-1,149770],"https://crates.io/crates/ropey"],[[-1,151986],34],[[-1,151952],")"],[[-1,131146],9],[[-1,151382],". Ropey implements"],[[-1,151906],8],[[-1,151888],10],[[-1,151878]," *"],[[-1,149733],4],[[-1,149739],3],[[-1,151876],"another* b-tre"],[[-1,151361],2],[[-1,151862],"e"],[[-1,149772]," "],[[-1,151355],1],[[-1,149789],8],[[-1,151354],"to"],[[-1,149728]," efficiently"],[[-1,151352]," "],[[-1,151351],12],[[-1,151339],"manage"],[[-1,149716]," "],[[-1,131137],"just "],[[-1,149715],"the document's"],[[-1,151333]," text"],[[-1,149700]," content"],[[-1,151328],8],[[-1,151319],"."],[[-1,42578],30],[[-1,42544],17],[[-1,42507],18],[[-1,42484],39],[[-1,42439],13],[[-1,42424],17],[[-1,42401],50],[[-1,42349],32],[[-1,42305],2],[[-1,42317],11],[[-1,42351],1],[[-1,42407],5],[[-1,42426],1],[[-1,42445],5],[[-1,42489],4],[[-1,42523],15],[[-1,42527],2],[[-1,42548],2],[[-1,42582],2],[[-1,131131],"\n\n"],[[-1,151318],1],[[-1,151317],"This isn't "],[[-1,131125],"universally a"],[[-1,151306],1],[[-1,131128],1],[[-1,151305],4],[[-1,151301]," win."],[[-1,151357],1],[[-1,151861],1],[[-1,151898],1],[[-1,151895],3],[[-1,151897],1],[[-1,151907],1],[[-1,152002],1],[[-1,151999],1],[[-1,152001],1],[[-1,152153],1],[[-1,152152]," "],[[-1,151295],"We have unfortunately arrived at"],[[-1,152108],3],[[-1,152101],7],[[-1,152094]," "],[[-1,152076],"the "],[[-1,152047],"L"],[[-1,152072],1],[[-1,152071],"and of"],[[-1,151631]," Uncomfortable"],[[-1,152065]," "],[[-1,152062],"Engineering "],[[-1,152049],"T"],[[-1,152105],2],[[-1,152134],11],[[-1,152123],"radeoff"],[[-1,152064],"s"],[[-1,152077],1],[[-1,152116],":\n\n"],[[-1,152110],"-"],[[-1,151860]," "],[[-1,150612],"R"],[[-1,150614],1],[[-1,151859],5],[[-1,151852],17],[[-1,151834],28],[[-1,151755],7],[[-1,151806],6],[[-1,151795],1],[[-1,151794],"opey"],[[-1,150611]," can"],[[-1,151747]," to"],[[-1,151790],4],[[-1,151786]," do text-specific "],[[-1,149559],"byte "],[[-1,149566],"packing"],[[-1,151768],13],[[-1,151714],". "],[[-1,131111],"So "],[[-1,131096],"with "],[[-1,131108],6],[[-1,131102],"ropey"],[[-1,131091],", we use less RAM."],[[-1,42283],"\n"],[[-1,42215],177],[[-1,42282],35],[[-1,42243],27],[[-1,41860],23],[[-1,41817],16],[[-1,41837],13],[[-1,41822],4],[[-1,41800],19],[[-1,41736],9],[[-1,41781],26],[[-1,41726],2],[[-1,41755],19],[[-1,41824],1],[[-1,42038],1],[[-1,42037],"- "],[[-1,41723],"W"],[[-1,42035],5],[[-1,42030],"hen inserting we need to update 2 data structures instead of 1. This makes everything more than twice as slow, and it makes the wasm bundle twice as big "],[[-1,17765]," "],[[-1,41877],"(60kb -> 120kb)."],[[-1,41722],"\n- "],[[-1,31328],"For"],[[-1,31331],2],[[-1,31356],3],[[-1,31353]," "],[[-1,31351],"l"],[[-1,41719],1],[[-1,41718],"ots of use cases"],[[-1,31349]," we'll end up"],[[-1,41702],5],[[-1,41697]," stor"],[[-1,31335],"ing"],[[-1,41692],1],[[-1,41691]," the document content somewhere else anyway. "],[[-1,31324],"For example"],[[-1,41646],2],[[-1,41644],", if you hook this"],[[-1,31313]," CRDT"],[[-1,41626]," up to VS Code,"],[[-1,41402]," "],[[-1,31307],"the editor"],[[-1,41401],7],[[-1,41394]," "],[[-1,41389],"will "],[[-1,31296],"keep"],[[-1,41384],4],[[-1,41380]," a cop"],[[-1,41370],"y of the document at all times anyway. So"],[[-1,41328]," there's no need to "],[[-1,41374],2],[[-1,41393],3],[[-1,41611],46],[[-1,41565],"stor"],[[-1,41305],"e the document in "],[[-1,41281],"my "],[[-1,41287],4],[[-1,41561],10],[[-1,41551],"CRDT"],[[-1,41278]," structures as well"],[[-1,31292],", at all"],[[-1,41547],7],[[-1,41540],"."],[[-1,41257]," "],[[-1,31282],"This implementation approach makes it easy to just turn that part of the code off."],[[-1,41256],83],[[-1,41538],1],[[-1,41519],41],[[-1,41468],10],[[-1,41433],31],[[-1,41458],5],[[-1,41438],4],[[-1,41453],14],[[-1,41478],5],[[-1,41537],17],[[-1,42247],2],[[-1,150606],1],[[-1,151687],31],[[-1,150605],5],[[-1,151656],25],[[-1,149692],24],[[-1,149659],34],[[-1,149579],11],[[-1,149625],4],[[-1,149601],22],[[-1,149621],19],[[-1,149668],8],[[-1,151712],20],[[-1,151689],1],[[-1,151617],1],[[-1,116582],4],[[-1,116577],1],[[-1,150039],1],[[-1,151616],3],[[-1,150597],6],[[-1,151613],1],[[-1,151588],6],[[-1,151578],10],[[-1,150590],3],[[-1,151568],1],[[-1,149554],10],[[-1,151567],2],[[-1,131072],4],[[-1,151563],33],[[-1,151520],11],[[-1,151429],5],[[-1,151509],2],[[-1,150585],6],[[-1,151507],8],[[-1,151473],13],[[-1,151499],26],[[-1,151458],10],[[-1,131052],19],[[-1,131058],3],[[-1,131068],5],[[-1,151448],4],[[-1,131029],30],[[-1,130998],15],[[-1,151422],2],[[-1,131033],1],[[-1,151171],1],[[-1,150087],8],[[-1,150078],1],[[-1,150047],7],[[-1,150077],25],[[-1,151419],1],[[-1,151415],1],[[-1,151170],1],[[-1,150577],18],[[-1,151169],4],[[-1,151159],15],[[-1,151136],8],[[-1,150558],3],[[-1,151128],4],[[-1,151144],8],[[-1,151124],7],[[-1,151103],31],[[-1,151117],13],[[-1,151072],7],[[-1,151040],9],[[-1,151065],15],[[-1,130980],2],[[-1,151050],8],[[-1,130978],1],[[-1,150049],1],[[-1,150038],1],[[-1,149906],10],[[-1,149543],4],[[-1,149896],35],[[-1,149539],35],[[-1,149503],7],[[-1,149504],1],[[-1,150037],2],[[-1,149957],35],[[-1,149916],9],[[-1,149922],3],[[-1,149975],17],[[-1,150035],59],[[-1,150180],"\n\n"],[[-1,130977],"So "],[[-1,150158],"I'm still not sure "],[[-1,150116],"whether I like this approach."],[[-1,150139],22],[[-1,150178],19],[[-1,150198],16],[[-1,150242],1],[[-1,150554],11],[[-1,151030],25],[[-1,151004],1],[[-1,150952],2],[[-1,150542],6],[[-1,150950],39],[[-1,150535],15],[[-1,151003],2],[[-1,150959],1],[[-1,151001],6],[[-1,150958],5],[[-1,150995],14],[[-1,150979],19],[[-1,150981],1],[[-1,151042],1],[[-1,151165],5],[[-1,151418],2],[[-1,151444],15],[[-1,151460],1],[[-1,151530],5],[[-1,151565],1],[[-1,151582],2],[[-1,151592],2],[[-1,151612],19],[[-1,151692],2],[[-1,151743],28],[[-1,151800],4],[[-1,151854],1],[[-1,152113],2],[[-1,152151],6],[[-1,152141],6],[[-1,152145],2],[[-1,152196],3],[[-1,152257],1],[[-1,152305],32],[[-1,152306],"\n"],[[-1,152309],1],[[-1,158671],27],[[-1,164205],4],[[-1,164200],1],[[-1,178622],307],[[-1,178624],1],[[-1,179061],1],[[-1,164521],10],[[-1,179060],97],[[-1,164198],8],[[-1,178963],14],[[-1,164504],27],[[-1,178949],2],[[-1,164477],24],[[-1,178947],2],[[-1,164189],9],[[-1,178945],9],[[-1,164180],11],[[-1,164452],5],[[-1,178936],51],[[-1,164447],19],[[-1,178885],1],[[-1,164427],1],[[-1,175573],1],[[-1,178884],178],[[-1,175572],1],[[-1,175557],1],[[-1,164421],15],[[-1,175556],14],[[-1,164405],1],[[-1,175542],32],[[-1,175501],2],[[-1,175510],8],[[-1,175498],14],[[-1,164426],4],[[-1,175484],1],[[-1,164094],2],[[-1,164161],25],[[-1,158643],9],[[-1,164136],40],[[-1,158634],24],[[-1,158609],5],[[-1,158595],5],[[-1,158604],8],[[-1,164081],6],[[-1,164096],1],[[-1,164085],1],[[-1,164074],1],[[-1,164083],1],[[-1,164163],1],[[-1,175502],1],[[-1,175571],13],[[-1,177182],2],[[-1,164092],3],[[-1,164088],1],[[-1,164400],2],[[-1,177152],3],[[-1,164403],1],[[-1,177149],14],[[-1,177131],5],[[-1,176571],1],[[-1,176644],8],[[-1,176570],1],[[-1,158587],6],[[-1,176636],1],[[-1,177126],4],[[-1,164072],3],[[-1,177122],19],[[-1,177052],9],[[-1,164388],1],[[-1,164393],5],[[-1,164387],4],[[-1,164381],1],[[-1,158580],1],[[-1,158578],2],[[-1,158555],8],[[-1,158563],4],[[-1,158576],13],[[-1,158579],1],[[-1,164380],4],[[-1,164358],5],[[-1,164376],2],[[-1,158545],20],[[-1,164374],4],[[-1,164353],5],[[-1,164365],1],[[-1,164370],5],[[-1,164364],6],[[-1,164346],2],[[-1,164383],1],[[-1,164397],2],[[-1,177043],1],[[-1,176996],29],[[-1,176633],10],[[-1,176619],12],[[-1,176595],16],[[-1,176601],3],[[-1,176607],3],[[-1,176623],2],[[-1,176946],15],[[-1,176967],8],[[-1,176955],8],[[-1,176959],2],[[-1,177042],45],[[-1,177103],1],[[-1,177090],8],[[-1,177058],1],[[-1,176578],7],[[-1,177057],5],[[-1,177078],19],[[-1,177082],2],[[-1,177102],3],[[-1,177095],5],[[-1,177099],2],[[-1,177135],2],[[-1,177154],1],[[-1,177180],24],[[-1,178706],81],[[-1,179063],1],[[-1,158524],"\n"],[[-1,31200],"But regardless, "],[[-1,31183],"m"],[[-1,41173],14],[[-1,41158],1],[[-1,116574],1],[[-1,149495],4],[[-1,149490],1],[[-1,158523],10],[[-1,158511],14],[[-1,158491],37],[[-1,158452],3],[[-1,158443],9],[[-1,158409],6],[[-1,158434],14],[[-1,158419],9],[[-1,158420],1],[[-1,158401],2],[[-1,158449],5],[[-1,158454],1],[[-1,158497],3],[[-1,158513],1],[[-1,158525],1],[[-1,176569],1],[[-1,164168],4],[[-1,176556],12],[[-1,176538],8],[[-1,158399],5],[[-1,176530],11],[[-1,152045],43],[[-1,176519],43],[[-1,158392],3],[[-1,158383],16],[[-1,158389],3],[[-1,176476],2],[[-1,175483],23],[[-1,176474],16],[[-1,176456],1],[[-1,176455],"y "],[[-1,150238],"CRDT implementation"],[[-1,150219],1],[[-1,175458],6],[[-1,176453],4],[[-1,176449]," is"],[[-1,158366]," so fast"],[[-1,150217]," at this point"],[[-1,158358]," that"],[[-1,176446],12],[[-1,176434]," "],[[-1,158326],"most of the algorithm's time is spent "],[[-1,158280],"updating "],[[-1,116572],"the document"],[[-1,41156]," contents"],[[-1,158271],6],[[-1,158265]," "],[[-1,158288],"in ropey"],[[-1,176433],5],[[-1,158350],23],[[-1,158352],1],[[-1,176428],"."],[[-1,116560]," Ropey on its own takes 29ms to process this "],[[-1,116503],"editing trace."],[[-1,116508],4],[[-1,116515],6],[[-1,175897],21],[[-1,175868],12],[[-1,175831],31],[[-1,164069],3],[[-1,164065],1],[[-1,175640],13],[[-1,175620],3],[[-1,175627],3],[[-1,175768],17],[[-1,175751]," "],[[-1,158255],8],[[-1,158262],"W"],[[-1,175749],1],[[-1,175800],1],[[-1,175799],"hat happens if I "],[[-1,175617],"just ... "],[[-1,175782],"turn "],[[-1,158260],"ropey"],[[-1,175777],4],[[-1,175773]," off"],[[-1,149489],"?"],[[-1,149487]," How"],[[-1,150202],4],[[-1,175451],11],[[-1,175440]," fast "],[[-1,149483],"can "],[[-1,175434],"this puppy can really go?"],[[-1,175769],1],[[-1,175856],24],[[-1,175876],7],[[-1,176420],17],[[-1,176427],5],[[-1,176458],1],[[-1,176544],5],[[-1,176568],8],[[-1,176558],1],[[-1,176560],1],[[-1,179769],5],[[-1,179784],1],[[-1,179831],1],[[-1,179843],1],[[-1,179911],13],[[-1,179922],1],[[-1,179973],1],[[-1,179979],1],[[-1,180087],10],[[-1,180177],1],[[-1,180164],6],[[-1,180077],6],[[-1,180158],21],[[-1,180070],6],[[-1,180137],4],[[-1,180108],1],[[-1,180103],7],[[-1,180094],4],[[-1,180096],1],[[-1,180107],2],[[-1,180133],25],[[-1,180170],3],[[-1,180176],5],[[-1,180194],3],[[-1,180216],12],[[-1,180247],5],[[-1,180254],3],[[-1,180344],11],[[-1,180359],2],[[-1,180681],219],[[-1,180684],2],[[-1,180715],1],[[-1,180768],8],[[-1,180821],2],[[-1,180835],2],[[-1,180886],5],[[-1,180879],7],[[-1,180870],1],[[-1,180872],1],[[-1,180881],1],[[-1,180890],3],[[-1,182225],29],[[-1,182192],25],[[-1,182165],6],[[-1,182167],1],[[-1,182196],2],[[-1,182524],1],[[-1,182499],86],[[-1,182409],50],[[-1,182344],28],[[-1,182359],14],[[-1,182413],2],[[-1,182523],23],[[-1,182538],5],[[-1,183123],2],[[-1,182154],1],[[-1,182147],22],[[-1,181997],5],[[-1,182125],24],[[-1,182097],33],[[-1,181947],16],[[-1,181992],17],[[-1,182064],10],[[-1,182101],3],[[-1,182153],3],[[-1,183113],14],[[-1,181975],4],[[-1,181969],13],[[-1,181971],1],[[-1,182054],1],[[-1,182026],13],[[-1,181930],1],[[-1,181927],44],[[-1,181863],36],[[-1,181800],28],[[-1,180710],1],[[-1,180712],1],[[-1,180714],"\n"],[[-1,176402],"\n| Test                              | Time taken | RAM usage |"],[[-1,164030],11],[[-1,163839],1],[[-1,164019],3],[[-1,164010],9],[[-1,164001]," "],[[-1,8860],"Data"],[[-1,8836]," structure "],[[-1,8847],10],[[-1,8856],8],[[-1,149474],4],[[-1,164000],14],[[-1,163764],1],[[-1,163763],"|"],[[-1,9066],1],[[-1,9057],4],[[-1,8865],4],[[-1,9053],6],[[-1,9065],4],[[-1,164016],3],[[-1,176339],"\n"],[[-1,163922],"|"],[[-1,104686],":"],[[-1,163921],1],[[-1,163920],"--------------------------        | ----------"],[[-1,162390],":"],[[-1,163874],1],[[-1,163873],"| ---------"],[[-1,162380],":"],[[-1,163862],1],[[-1,163861],"|"],[[-1,8070],":"],[[-1,163860],1],[[-1,163793],"----------"],[[-1,163770],"-----|"],[[-1,9047],11],[[-1,163783],11],[[-1,163859],9],[[-1,163838],1],[[-1,163835],11],[[-1,163837],1],[[-1,176338],62],[[-1,163986],10],[[-1,163924],1],[[-1,176276],"\n| automerge (v1.0.0-preview2)       |  291s      | 880 MB    |"],[[-1,163976]," "],[[-1,163759],"Naive"],[[-1,163742]," "],[[-1,163754],1],[[-1,163753],"tree     |"],[[-1,9036],11],[[-1,163761],1],[[-1,163971],3],[[-1,163848],9],[[-1,163824],1],[[-1,163812],2],[[-1,163823],10],[[-1,163975],2],[[-1,176213],"\n| reference-crdts (automerge / "],[[-1,21413],"Yjs"],[[-1,176181],3],[[-1,176178],") |   31s      |  28 MB    |"],[[-1,163962]," "],[[-1,163740],"Array          |"],[[-1,9025],11],[[-1,163961],10],[[-1,163850],2],[[-1,163810],3],[[-1,163968],3],[[-1,176150],"\n| Yjs (v13.5.5)                     | 0.97s      | 3."],[[-1,162330],"3"],[[-1,162336],1],[[-1,176096],1],[[-1,176095]," MB    |"],[[-1,163951]," "],[[-1,163723],"Linked list    |"],[[-1,9014],11],[[-1,163950],4],[[-1,163807],11],[[-1,176087],"\n"],[[-1,150518],"| *"],[[-1,20337],"Plain string edits in JS"],[[-1,150515],11],[[-1,150504],"*"],[[-1,20312],"        "],[[-1,150503],21],[[-1,150482],"| 0.61s      | 0.1 MB    | *(none)*       |"],[[-1,9003],11],[[-1,150439],"\n"],[[-1,150409],"| "],[[-1,9196],"D"],[[-1,9193],"i"],[[-1,9191],"a"],[[-1,9189],"m"],[[-1,9187],"o"],[[-1,9185],"n"],[[-1,9183],"d"],[[-1,9181]," "],[[-1,9179],"("],[[-1,9177],"w"],[[-1,9175],"a"],[[-1,9165],"s"],[[-1,9163],"m"],[[-1,9161]," "],[[-1,9159],"v"],[[-1,9157],"i"],[[-1,9155],"a"],[[-1,9153]," "],[[-1,9151],"n"],[[-1,9149],"o"],[[-1,9147],"d"],[[-1,9145],"e"],[[-1,9143],"j"],[[-1,9141],"s"],[[-1,9139],")"],[[-1,9137]," "],[[-1,9135]," "],[[-1,9133]," "],[[-1,9131]," "],[[-1,9129]," "],[[-1,9173],1],[[-1,9171],1],[[-1,150407],30],[[-1,150377],"    | 0.20s      | ???       | B-Tree         |"],[[-1,8992],1],[[-1,8932],4],[[-1,8753],1],[[-1,8743],1],[[-1,8752],6],[[-1,8759],5],[[-1,8880],1],[[-1,8873],4],[[-1,8879],3],[[-1,8902],1],[[-1,8928],1],[[-1,8919],4],[[-1,8901],3],[[-1,8897],1],[[-1,8927],4],[[-1,8991],21],[[-1,150330],"\n"],[[-1,150328],"| "],[[-1,9120],"D"],[[-1,9117],"i"],[[-1,9115],"a"],[[-1,9113],"m"],[[-1,9111],"o"],[[-1,9109],"n"],[[-1,9107],"d"],[[-1,9105]," "],[[-1,9103],"("],[[-1,9101],"n"],[[-1,9099],"a"],[[-1,9097],"t"],[[-1,9095],"i"],[[-1,9093],"v"],[[-1,9091],"e"],[[-1,9089],")"],[[-1,150326],13],[[-1,150313]," "],[[-1,150312],3],[[-1,150309],"                 | 0.0"],[[-1,17760],"5"],[[-1,17758],"6"],[[-1,150287],2],[[-1,150285],"s     | "],[[-1,20241],"1"],[[-1,20239],"."],[[-1,20237],"1"],[[-1,150277],3],[[-1,150274]," MB    | B-Tree         |"],[[-1,8969],1],[[-1,8908],4],[[-1,8968],10],[[-1,150249],"\n"],[[-1,176086],"| "],[[-1,163499],"*"],[[-1,150437],"Ropey ("],[[-1,149476],"r"],[[-1,149478],1],[[-1,150430],1],[[-1,150429],"ust)"],[[-1,176084],2],[[-1,176082]," baseline"],[[-1,163500],"*"],[[-1,176073],12],[[-1,176061],"           | 0."],[[-1,150414],"029"],[[-1,176046],2],[[-1,176044],"s "],[[-1,176042],1],[[-1,176041],"    | 0."],[[-1,150247],"2"],[[-1,176033],1],[[-1,176032]," MB    |"],[[-1,163946]," "],[[-1,163625],"*"],[[-1,163706],"(none)"],[[-1,163626],"*"],[[-1,163700],2],[[-1,163698],"       |"],[[-1,8958],1],[[-1,8894],4],[[-1,8957],10],[[-1,163945],6],[[-1,176024],1],[[-1,163688],62],[[-1,163622],7],[[-1,163601],10],[[-1,176023],51],[[-1,175589],6],[[-1,175972],11],[[-1,163939],5],[[-1,175961],1],[[-1,163589],79],[[-1,175748],62],[[-1,163934],1],[[-1,163614],6],[[-1,163591],1],[[-1,163933],4],[[-1,175686],"\n"],[[-1,175960],"| "],[[-1,104680],"*"],[[-1,104678],"*"],[[-1,9078],"Diamond"],[[-1,9080],1],[[-1,175958],4],[[-1,175954]," (native"],[[-1,175946],1],[[-1,175685],", no"],[[-1,9070]," doc"],[[-1,175671],1],[[-1,175605],3],[[-1,175602]," content"],[[-1,175654],7],[[-1,175607],")"],[[-1,104679],"*"],[[-1,104681],"*"],[[-1,175647]," "],[[-1,175670],6],[[-1,175663],8],[[-1,175681],5],[[-1,175945],21],[[-1,175924],"| 0.0"],[[-1,175644],"23"],[[-1,175919],2],[[-1,175917],"s  "],[[-1,175914],3],[[-1,175911],"| "],[[-1,9903],"0."],[[-1,9899],"96"],[[-1,9901],1],[[-1,17753],3],[[-1,175909],2],[[-1,175641],1],[[-1,175907],1],[[-1,175906]," MB "],[[-1,175902],1],[[-1,175901],"  |"],[[-1,163929]," "],[[-1,163607],"B-Tree"],[[-1,163510],"         |"],[[-1,8947],1],[[-1,8887],4],[[-1,8946],10],[[-1,163928],4],[[-1,175898],"\n"],[[-1,175409],"\nBoom."],[[-1,130974]," This is kind of useless"],[[-1,130948],", but it"],[[-1,31109],"'"],[[-1,130940],"s now"],[[-1,130950],1],[[-1,175401]," 14000"],[[-1,175393],"x faster"],[[-1,157693]," than automerge"],[[-1,164063],"."],[[-1,97626]," We're processing 260 000 operations in 23ms"],[[-1,49998],". Thats "],[[-1,97582],2],[[-1,97575],8],[[-1,97580],3],[[-1,97785],23],[[-1,97760],6],[[-1,97752],38],[[-1,97710],13],[[-1,97647],20],[[-1,97672],2],[[-1,97697],1],[[-1,97694],17],[[-1,97668],19],[[-1,97677],1],[[-1,97649],1],[[-1,97676],2],[[-1,97696],1],[[-1,97714],2],[[-1,97754],1],[[-1,97762],1],[[-1,158246],1],[[-1,158245],"11 million operations "],[[-1,97566],"per"],[[-1,158223],1],[[-1,158222]," "],[[-1,158219],"second."],[[-1,132029]," "],[[-1,130853],"I could saturate my"],[[-1,97563]," home"],[[-1,130834]," internet connection "],[[-1,130791],"with "],[[-1,8741],"keystrokes"],[[-1,49990],5],[[-1,97557],5],[[-1,49985]," and"],[[-1,130786],4],[[-1,130782]," "],[[-1,97550],"I'd still "],[[-1,97532],"have"],[[-1,97540],4],[[-1,130813],8],[[-1,130805]," CPU to spare."],[[-1,130874],20],[[-1,130878],3],[[-1,130886],7],[[-1,130909],19],[[-1,132028],12],[[-1,131943],8],[[-1,130933],22],[[-1,131935],24],[[-1,131909],19],[[-1,131911],1],[[-1,132016],8],[[-1,131958],9],[[-1,132008],3],[[-1,131962],3],[[-1,132005],9],[[-1,131983],21],[[-1,131889],2],[[-1,131987],2],[[-1,131996],3],[[-1,131989],1],[[-1,131993],2],[[-1,158221],1],[[-1,164062],5],[[-1,158211],16],[[-1,164057],9],[[-1,149313],21],[[-1,98066],6],[[-1,149292],10],[[-1,164048],18],[[-1,149282],14],[[-1,163496],1],[[-1,49813],1],[[-1,49814],"\n"],[[-1,17749],"\n---\n"],[[-1,107064],"\n"],[[-1,107063],48],[[-1,98101],15],[[-1,98082],3],[[-1,98075],7],[[-1,98079],2],[[-1,98086],2],[[-1,98200],1],[[-1,98051],4],[[-1,97528],5],[[-1,98047],17],[[-1,97521],10],[[-1,97523],1],[[-1,98030],7],[[-1,98015],69],[[-1,97942],5],[[-1,97935],22],[[-1,97510],27],[[-1,97479],4],[[-1,97483],2],[[-1,97913],11],[[-1,97901],1],[[-1,97937],1],[[-1,97946],3],[[-1,98023],7],[[-1,98183],15],[[-1,98059],7],[[-1,98168],48],[[-1,98199],15],[[-1,107015],4],[[-1,98119],1],[[-1,107011],7],[[-1,98117],2],[[-1,98111],10],[[-1,98115],2],[[-1,107004],20],[[-1,97900],36],[[-1,97863],1],[[-1,106984],36],[[-1,97471],28],[[-1,97440],30],[[-1,97443],2],[[-1,97861],13],[[-1,106948],45],[[-1,97808],7],[[-1,97793],5],[[-1,97473],1],[[-1,97788],1],[[-1,97801],4],[[-1,97813],3],[[-1,97809],1],[[-1,106903],49],[[-1,97847],6],[[-1,106854],9],[[-1,97837],24],[[-1,106845],16],[[-1,50454],2],[[-1,50227],49],[[-1,49921],3],[[-1,50178],25],[[-1,49971],19],[[-1,49914],9],[[-1,49952],2],[[-1,49925],3],[[-1,49950],11],[[-1,49918],1],[[-1,49939],13],[[-1,49981],7],[[-1,50153],6],[[-1,49973],1],[[-1,50074],2],[[-1,50062],2],[[-1,50056],17],[[-1,50021],22],[[-1,49904],3],[[-1,50039],17],[[-1,50060],2],[[-1,50067],4],[[-1,50072],3],[[-1,50088],12],[[-1,50147],12],[[-1,50076],1],[[-1,50135],5],[[-1,50115],26],[[-1,50332],2],[[-1,50334],1],[[-1,50385],43],[[-1,50329],4],[[-1,50277],9],[[-1,50325],3],[[-1,50320],15],[[-1,50279],1],[[-1,50267],5],[[-1,50258],27],[[-1,50262],2],[[-1,50305],23],[[-1,50322],1],[[-1,50342],7],[[-1,50393],5],[[-1,50452],11],[[-1,50433],39],[[-1,50441],7],[[-1,106829],1],[[-1,50130],15],[[-1,149470],1],[[-1,131887],4],[[-1,131882],1],[[-1,149350],2],[[-1,131880],5],[[-1,116489],2],[[-1,116484],1],[[-1,116486],1],[[-1,131881],1],[[-1,149348],5],[[-1,148658],25],[[-1,116483],12],[[-1,148609],1],[[-1,149343],15],[[-1,107069],4],[[-1,148612],1],[[-1,148631],12],[[-1,149328],8],[[-1,148608],1],[[-1,131874],4],[[-1,148574],36],[[-1,130780],17],[[-1,130761],10],[[-1,130747],8],[[-1,116470],19],[[-1,130751],2],[[-1,130763],1],[[-1,148537],1],[[-1,148534],20],[[-1,148480],3],[[-1,148506],16],[[-1,148468],1],[[-1,148470],1],[[-1,148472],1],[[-1,148476],2],[[-1,148490],1],[[-1,148514],7],[[-1,148536],1],[[-1,148538],1],[[-1,148583],8],[[-1,148607],23],[[-1,148669],11],[[-1,149143],1],[[-1,148979],11],[[-1,149011],15],[[-1,149134],2],[[-1,149127],6],[[-1,149051],16],[[-1,148968],1],[[-1,149035],7],[[-1,130730],1],[[-1,130707],13],[[-1,130729],5],[[-1,130679],1],[[-1,116451],7],[[-1,130678],12],[[-1,130662],12],[[-1,130666],2],[[-1,130693],7],[[-1,130724],12],[[-1,130738],4],[[-1,148967],13],[[-1,148953],1],[[-1,148934],28],[[-1,148897],15],[[-1,148906],3],[[-1,130712],5],[[-1,148903],1],[[-1,148488],5],[[-1,131866],1],[[-1,148902],4],[[-1,131865],1],[[-1,148952],17],[[-1,149024],1],[[-1,148995],15],[[-1,149023],11],[[-1,149028],2],[[-1,149096],3],[[-1,149089],37],[[-1,148898],1],[[-1,149093],2],[[-1,149116],19],[[-1,149121],4],[[-1,149132],4],[[-1,149142],7],[[-1,149320],1],[[-1,149247],27],[[-1,149210],12],[[-1,149165],14],[[-1,149198],13],[[-1,149149],5],[[-1,149185],20],[[-1,149220],5],[[-1,149250],2],[[-1,149319],5],[[-1,149265],14],[[-1,149359],7],[[-1,149467],1],[[-1,149416],21],[[-1,149393],8],[[-1,149366],6],[[-1,149385],15],[[-1,149368],1],[[-1,149370],1],[[-1,149395],1],[[-1,149466],4],[[-1,149423],6],[[-1,149447],6],[[-1,149434],10],[[-1,149441],6],[[-1,149449],1],[[-1,149462],12],[[-1,149469],1],[[-1,163495],1],[[-1,49898],1],[[-1,49896],40],[[-1,49852],33],[[-1,49856],3],[[-1,49897],1],[[-1,34200],1],[[-1,32778],"We can "],[[-1,30511],"calculate"],[[-1,32771],20],[[-1,32751]," "],[[-1,32749],"t"],[[-1,32780],1],[[-1,32959],1],[[-1,34104],13],[[-1,34089],6],[[-1,34083],"he"],[[-1,32936]," "],[[-1,32660],"average "],[[-1,32935],"speed "],[[-1,32909],"each algorithm "],[[-1,32929],3],[[-1,32926],"process"],[[-1,32891],"es"],[[-1,32919],3],[[-1,32916]," edits"],[[-1,32958],8],[[-1,34091],1],[[-1,34156],14],[[-1,34080],32],[[-1,32950],13],[[-1,34142],37],[[-1,34048],":"],[[-1,34186],29],[[-1,34188],1],[[-1,34199],10],[[-1,34201],"\n"],[[-1,40833],"\n"],[[-1,40822],"![](totals.svg)"],[[-1,39581],"\n\n"],[[-1,39185],"But"],[[-1,32888]," "],[[-1,32877],"these numbers are misleading. "],[[-1,32842],"Remember, "],[[-1,32831],1],[[-1,32846],3],[[-1,32843],"a"],[[-1,32887],10],[[-1,34047],1],[[-1,34031],17],[[-1,34046],2],[[-1,34040],7],[[-1,34044],2],[[-1,39182],17],[[-1,39406],21],[[-1,39381],1],[[-1,39374],16],[[-1,39344],38],[[-1,39358],13],[[-1,39380],3],[[-1,39385],2],[[-1,39536],14],[[-1,39492],4],[[-1,39520],1],[[-1,39519],"utomerge "],[[-1,39506],"and ref-crdts"],[[-1,32747]," aren't steady. They"],[[-1,32726],"'re fast at first"],[[-1,32707],", then"],[[-1,32701],1],[[-1,32709],1],[[-1,34014],8],[[-1,33997],19],[[-1,34006],8],[[-1,39164],4],[[-1,39150],7],[[-1,39141],23],[[-1,33750],8],[[-1,33741],4],[[-1,39143],1],[[-1,39160],9],[[-1,39493],1],[[-1,39470],16],[[-1,39303],20],[[-1,39454],17],[[-1,39435],2],[[-1,39282],1],[[-1,39117],14],[[-1,32828],9],[[-1,32819]," "],[[-1,33736],"slow down as the document grows"],[[-1,33977],3],[[-1,39103],3],[[-1,39281],4],[[-1,39271],14],[[-1,39097],5],[[-1,39257],21],[[-1,39091],2],[[-1,39236],2],[[-1,39230],31],[[-1,39092],1],[[-1,39199],1],[[-1,39196],9],[[-1,39187],"."],[[-1,33972]," "],[[-1,30500],"E"],[[-1,32799],5],[[-1,32794],"ven though "],[[-1,32782],"a"],[[-1,32817],1],[[-1,32816],"utomerge can "],[[-1,33971],29],[[-1,33704],9],[[-1,33942],3],[[-1,33694],4],[[-1,33939],16],[[-1,33893],"process"],[[-1,33923],2],[[-1,33921]," about 900 edits per second"],[[-1,33886]," *on average*"],[[-1,32652]," "],[[-1,32645],"(which "],[[-1,32636],"is fast enough that user"],[[-1,32604],"s won't notice)"],[[-1,32612],4],[[-1,32638],1],[[-1,32651],3],[[-1,33873],","],[[-1,32587]," "],[[-1,32452],13],[[-1,32586],14],[[-1,32568],12],[[-1,32439],1],[[-1,32556],6],[[-1,32572],2],[[-1,32803],4],[[-1,33872],5],[[-1,33867],"the"],[[-1,32668]," slowest"],[[-1,32680],9],[[-1,33864],8],[[-1,32690],7],[[-1,33856]," edit during this benchmark"],[[-1,33689]," run"],[[-1,33829],1],[[-1,33762],10],[[-1,33752]," "],[[-1,33772],9],[[-1,33822],"stalle"],[[-1,33814],"d "],[[-1,33774],"V8"],[[-1,33804],10],[[-1,33794]," for"],[[-1,32697]," a full"],[[-1,33790]," 1.8 "],[[-1,33783],"seconds."],[[-1,32438],1],[[-1,32433],3],[[-1,32420],53],[[-1,32363],6],[[-1,32365],1],[[-1,32367],1],[[-1,32430],7],[[-1,32437],2],[[-1,32589],1],[[-1,33684],6],[[-1,33657],24],[[-1,33629],18],[[-1,33589],8],[[-1,33595],3],[[-1,33611],12],[[-1,33597],1],[[-1,33599],1],[[-1,33633],2],[[-1,33678],2],[[-1,33674],2],[[-1,33664],6],[[-1,33672],7],[[-1,33676],1],[[-1,33785],1],[[-1,33812],7],[[-1,33816],1],[[-1,33828],5],[[-1,33974],1],[[-1,39198],1],[[-1,39234],2],[[-1,39277],5],[[-1,39433],27],[[-1,39437],1],[[-1,39488],17],[[-1,39510],2],[[-1,39522],1],[[-1,39575],27],[[-1,39542],5],[[-1,39548],3],[[-1,39579],2],[[-1,40826],2],[[-1,40828],1],[[-1,40832],2],[[-1,40834],"\n"],[[-1,49809],1],[[-1,49808],"\nWe can put"],[[-1,49642]," everything "],[[-1,41146],"in a "],[[-1,41137],"single, pretty"],[[-1,41141],3],[[-1,49630],2],[[-1,49797],27],[[-1,49770]," "],[[-1,49648],"chart"],[[-1,49769],5],[[-1,49764]," if I use a log scale. It"],[[-1,31106],"'"],[[-1,31108],1],[[-1,49739],"s remarkable how "],[[-1,31099],"ti"],[[-1,31095],"dy"],[[-1,31097],1],[[-1,49722],4],[[-1,49718]," "],[[-1,31104],"this"],[[-1,49717],2],[[-1,49715]," looks"],[[-1,17743],":"],[[-1,49709],43],[[-1,49666],"\n"],[[-1,48839],"\n"],[[-1,46038],"!"],[[-1,46017],"["],[[-1,41122],"all data in one chart"],[[-1,46006],"]"],[[-1,45995],"("],[[-1,48838],23],[[-1,49665],3],[[-1,49662],"all_perf.svg"],[[-1,45973],")"],[[-1,41095],"\n"],[[-1,11115],"\n"],[[-1,11112],"> "],[[-1,11101],"Huh - "],[[-1,10937],"look at the bottom two lines"],[[-1,10909],11],[[-1,10894],4],[[-1,10890],". "],[[-1,10887],"T"],[[-1,10898],2],[[-1,10939],1],[[-1,11095],1],[[-1,11094],"he jitter"],[[-1,11081],"yness of yjs and "],[[-1,8706],"d"],[[-1,8704],"i"],[[-1,8702],"a"],[[-1,8700],"m"],[[-1,8698],"o"],[[-1,8696],"n"],[[-1,8694],"d"],[[-1,11064],17],[[-1,11047]," "],[[-1,10885],"mirror each other"],[[-1,11046],7],[[-1,11039],"."],[[-1,11037]," Periods when yjs "],[[-1,8727],"gets"],[[-1,11019],2],[[-1,11017]," slow"],[[-1,8723],"er"],[[-1,11012],", "],[[-1,8708],"d"],[[-1,8705],"i"],[[-1,8703],"a"],[[-1,8701],"m"],[[-1,8699],"o"],[[-1,8697],"n"],[[-1,8695],"d"],[[-1,11010],9],[[-1,11001]," gets fast"],[[-1,8721],"er"],[[-1,10991],2],[[-1,10867],1],[[-1,10989],16],[[-1,10973],". I wonder what"],[[-1,10864],"s"],[[-1,10862]," going on "],[[-1,8714],"there"],[[-1,10852],5],[[-1,10958],5],[[-1,10949],3],[[-1,10940],"!"],[[-1,10946],3],[[-1,10953],2],[[-1,11085],2],[[-1,11110],8],[[-1,11114],1],[[-1,11116],"\n"],[[-1,41094],"\n"],[[-1,17742],"But "],[[-1,17737],"l"],[[-1,23033],1],[[-1,23346],3],[[-1,41093],8],[[-1,41083],3],[[-1,41080],"og scales "],[[-1,23381],"are junk food for your in"],[[-1,23354],"tuition"],[[-1,23356],1],[[-1,41070],16],[[-1,41054],". "],[[-1,17735],"O"],[[-1,23059],13],[[-1,23031],2],[[-1,23029],"n"],[[-1,23046],1],[[-1,23039],4],[[-1,23045],3],[[-1,23330],1],[[-1,23343],10],[[-1,23332],1],[[-1,39605],4],[[-1,39601]," a linear scale"],[[-1,17734]," the data"],[[-1,39586]," "],[[-1,39584],1],[[-1,39607],1],[[-1,41052],18],[[-1,23329],6],[[-1,41034],"looks like this"],[[-1,40835],":"],[[-1,40852],15],[[-1,40854],1],[[-1,40896],39],[[-1,41019],1],[[-1,41018],"\n\n"],[[-1,40965],"![all data in one chart"],[[-1,40920],", with a linear "],[[-1,40904],1],[[-1,40903],"scale"],[[-1,40942],"](all_perf"],[[-1,40927],"_linear"],[[-1,40932],".svg)"],[[-1,41016],50],[[-1,41085],1],[[-1,41101],3],[[-1,48811],1],[[-1,49810],"\n"],[[-1,10844],1],[[-1,10843],"\n"],[[-1,10775],1],[[-1,10842],"That, my friends, is how you make the computer do a lot less work."],[[-1,32355],"\n"],[[-1,10773],"\n"],[[-1,158195],"\n#"],[[-1,7174],"#"],[[-1,158193]," Conc"],[[-1,158186],"l"],[[-1,158173],"usion\n"],[[-1,104673],"\n"],[[-1,104671],"That"],[[-1,104520]," silly"],[[-1,104667]," academic paper "],[[-1,104514],"I rea"],[[-1,104507],"d all t"],[[-1,104490],"hose years ago "],[[-1,98718],"says"],[[-1,98748],4],[[-1,98744]," "],[[-1,23028],"some "],[[-1,98743],"CRDTs and OT algorithms"],[[-1,103698],5],[[-1,103728],21],[[-1,100055],12],[[-1,103707],8],[[-1,104027],11],[[-1,104015],3],[[-1,104010],1],[[-1,104012],1],[[-1,104176],11],[[-1,104183],6],[[-1,104475],5],[[-1,104458],8],[[-1,104470],12],[[-1,104500],5],[[-1,104509],1],[[-1,104522],1],[[-1,104614],25],[[-1,104587],13],[[-1,100042]," are"],[[-1,100038],7],[[-1,100031]," slow"],[[-1,104574],4],[[-1,104448],"."],[[-1,104425]," "],[[-1,104213],"And "],[[-1,104192],"everyone"],[[-1,104209],6],[[-1,104424],35],[[-1,104383],10],[[-1,104373]," believed the "],[[-1,104008],"paper"],[[-1,104359],11],[[-1,104203],", because "],[[-1,104165],"it was "],[[-1,100944],"P"],[[-1,104158],1],[[-1,104157],"ublished "],[[-1,100942],"S"],[[-1,104148],1],[[-1,104147],"cie"],[[-1,104142],"nce"],[[-1,104144],1],[[-1,104348],"."],[[-1,101577]," "],[[-1,101504],"But"],[[-1,101501],1],[[-1,101499],1],[[-1,101576],12],[[-1,100941]," the "],[[-1,100934],"pa"],[[-1,100928],"per was wrong."],[[-1,30499]," As I"],[[-1,30490],"'ve shown,"],[[-1,30494],2],[[-1,100932],2],[[-1,100936],1],[[-1,101564]," "],[[-1,30479],"w"],[[-1,100913],1],[[-1,101563],1],[[-1,101562],"e "],[[-1,100058],"*"],[[-1,101560],"can"],[[-1,100057],"*"],[[-1,101557]," make CRDTs "],[[-1,101497],"fast. We can make them "],[[-1,100912],"*"],[[-1,101474],"crazy fast"],[[-1,100911],"*"],[[-1,23152]," if we get creative with "],[[-1,23113],"our "],[[-1,23127],"implementation"],[[-1,23109]," strategies"],[[-1,101451],". "],[[-1,23098],"With the right approach, "],[[-1,23072],"w"],[[-1,101449],1],[[-1,101448],"e can make"],[[-1,23071]," CRDTs"],[[-1,101438],6],[[-1,100909],3],[[-1,100906]," so fast "],[[-1,23064],"that "],[[-1,98712],"we can compete with the performance of "],[[-1,100897],27],[[-1,100870],"native strings"],[[-1,101432],41],[[-1,101464],3],[[-1,101457],5],[[-1,101461],3],[[-1,101545],39],[[-1,101506],". "],[[-1,100855],"T"],[[-1,101390],2],[[-1,104389],4],[[-1,104447],4],[[-1,104570],6],[[-1,104138],1],[[-1,104137],"he"],[[-1,104564],3],[[-1,104561]," performance"],[[-1,104441]," numbers"],[[-1,101388]," in that paper"],[[-1,104433]," "],[[-1,104430],"were"],[[-1,104311],"n't just wrong. "],[[-1,101373],"They were"],[[-1,100016]," "],[[-1,98664],"\""],[[-1,98670],1],[[-1,98673],1],[[-1,100015],"a"],[[-1,104295],18],[[-1,104002],1],[[-1,103997],19],[[-1,101795],19],[[-1,101774],7],[[-1,101745],15],[[-1,101767],10],[[-1,101648],1],[[-1,101642],23],[[-1,101610],10],[[-1,101619],8],[[-1,101599],1],[[-1,101647],4],[[-1,101730],2],[[-1,101597],14],[[-1,101582],4],[[-1,101728],44],[[-1,101755],8],[[-1,101757],1],[[-1,101776],1],[[-1,103693],1],[[-1,101653],4],[[-1,101683],10],[[-1,101671],2],[[-1,101665],11],[[-1,101669],2],[[-1,101673],1],[[-1,103692],10],[[-1,103603],6],[[-1,103631],3],[[-1,101362],5],[[-1,100024],5],[[-1,103628],11],[[-1,103682],12],[[-1,103670]," billiona"],[[-1,103655],"ire "],[[-1,98654],"guessing"],[[-1,98662],7],[[-1,103651],8],[[-1,103643]," a"],[[-1,103639]," banana"],[[-1,103616]," costs $1000"],[[-1,98666],"\""],[[-1,98668],1],[[-1,98672],1],[[-1,100014]," kind of wrong"],[[-1,103604],"."],[[-1,23155],"\n\n"],[[-1,23197],41],[[-1,23282],18],[[-1,23221],23],[[-1,23241],14],[[-1,23223],1],[[-1,23227],2],[[-1,23264],6],[[-1,23254],12],[[-1,23258],2],[[-1,101801],3],[[-1,103641],1],[[-1,103661],3],[[-1,104001],2],[[-1,104277],1],[[-1,104242],28],[[-1,104029],1],[[-1,103978],1],[[-1,103977],"But"],[[-1,103597]," you know"],[[-1,101357]," what"],[[-1,103588],"?"],[[-1,100854]," I"],[[-1,100840]," sort of appreciate that paper now."],[[-1,100804]," "],[[-1,100799],"Their mistake is"],[[-1,100803],3],[[-1,100852],11],[[-1,103974],1],[[-1,103586],1],[[-1,103973],5],[[-1,103968]," ok."],[[-1,103585]," "],[[-1,100782],"It"],[[-1,31093],"'"],[[-1,100780],"s"],[[-1,103584],5],[[-1,103579]," "],[[-1,100779],"*"],[[-1,103578],"human"],[[-1,100778],"*"],[[-1,103573],5],[[-1,103962],10],[[-1,104028],1],[[-1,104078],48],[[-1,104135],55],[[-1,104266],4],[[-1,104258],15],[[-1,104262],2],[[-1,104276],8],[[-1,104426],1],[[-1,104345],7],[[-1,104333],22],[[-1,104338],4],[[-1,104432],1],[[-1,104549],6],[[-1,104539],16],[[-1,104543],2],[[-1,104589],1],[[-1,104651],5],[[-1,104639],13],[[-1,104646],7],[[-1,104625],10],[[-1,104672],1],[[-1,158167],1],[[-1,157574],3],[[-1,103952],1],[[-1,103943],7],[[-1,103951],7],[[-1,157571],1],[[-1,154974],12],[[-1,157570],50],[[-1,157520],". I used to "],[[-1,103564],"feel "],[[-1,103559],8],[[-1,103551],"inadequate "],[[-1,98644],"around"],[[-1,103540],4],[[-1,103536]," academics -"],[[-1,103524],1],[[-1,157508],20],[[-1,156814],5],[[-1,157488],1],[[-1,157265],34],[[-1,157487],23],[[-1,157464]," maybe I'll "],[[-1,157452],5],[[-1,157447],"never be that smart"],[[-1,157428],1],[[-1,157427],"! "],[[-1,157409],"But "],[[-1,103935],"this whole thing made me "],[[-1,103888],"realise something "],[[-1,103870],22],[[-1,103848],"obvious"],[[-1,103516],":"],[[-1,103841],1],[[-1,103838],2],[[-1,103834],10],[[-1,103822]," Scientists aren't gods"],[[-1,103790],", sent from the heaven"],[[-1,103513],"s with the gift of"],[[-1,103768],10],[[-1,103758]," Truth"],[[-1,103752],11],[[-1,103799],". "],[[-1,103741],"No, "],[[-1,103736],"t"],[[-1,103797],1],[[-1,103796],"hey're"],[[-1,101352]," "],[[-1,10772],"beautiful, flawed "],[[-1,100000],"*"],[[-1,101351],"people"],[[-1,99999],"*"],[[-1,99998],2],[[-1,98637],27],[[-1,99996],7],[[-1,103824],1],[[-1,103836],1],[[-1,103840],1],[[-1,103910],21],[[-1,157405],29],[[-1,157374],7],[[-1,157230],4],[[-1,157224],3],[[-1,157226],1],[[-1,157367]," just"],[[-1,156166],5],[[-1,157362]," "],[[-1,157355],"like the rest of us"],[[-1,10753]," mook"],[[-1,10746],"s"],[[-1,10748],1],[[-1,124659],"."],[[-1,148880]," "],[[-1,103735],"Great"],[[-1,124657],9],[[-1,148879],1],[[-1,157200],5],[[-1,157322],10],[[-1,157220],5],[[-1,157215]," at"],[[-1,157195]," "],[[-1,124777],"what"],[[-1,124648],"ever"],[[-1,124773]," we"],[[-1,124769]," obsess over"],[[-1,124786],3],[[-1,157194],3],[[-1,157187],2],[[-1,157191],2],[[-1,157312],12],[[-1,157210],1],[[-1,157184],7],[[-1,148876],1],[[-1,124782],3],[[-1,148875],1],[[-1,157177],14],[[-1,157209],9],[[-1,157300],7],[[-1,157293],", "],[[-1,124796],"but"],[[-1,124793],6],[[-1,157291],3],[[-1,157288]," kin"],[[-1,157280],"d of"],[[-1,157275]," "],[[-1,156160],"middling"],[[-1,157274],8],[[-1,157163]," everywhere else."],[[-1,124757]," I can"],[[-1,32354]," "],[[-1,32346],"optimize"],[[-1,32353],6],[[-1,124751]," code"],[[-1,101344]," pretty well"],[[-1,124746],1],[[-1,124743],11],[[-1,124730],", but "],[[-1,124714],"I still get zuc"],[[-1,124660],"c"],[[-1,21211],"h"],[[-1,124662],1],[[-1,124699],1],[[-1,124698],"ini and cucu"],[[-1,124676],"mber mixed up"],[[-1,116431],"."],[[-1,101329]," And"],[[-1,23021],", no matter "],[[-1,23004],"the "],[[-1,22998],"teasing"],[[-1,22974]," I get"],[[-1,22991]," from my friends,"],[[-1,23000],1],[[-1,23009],4],[[-1,101325],1],[[-1,100777],8],[[-1,32337],1],[[-1,32334],4],[[-1,32336],1],[[-1,37910],3],[[-1,37875],9],[[-1,37865],5],[[-1,37907],32],[[-1,37940],10],[[-1,37917],6],[[-1,37930],13],[[-1,37968],17],[[-1,37947],6],[[-1,37951],2],[[-1,98608],16],[[-1,98578],7],[[-1,98592],10],[[-1,98579],1],[[-1,100741],5],[[-1,100711],1],[[-1,100736],4],[[-1,99988],7],[[-1,100732],7],[[-1,100710],1],[[-1,100725],1],[[-1,100719],8],[[-1,100724],5],[[-1,100746],4],[[-1,100769],20],[[-1,98582],1],[[-1,100749]," "],[[-1,101324],"thats "],[[-1,32269],"ok"],[[-1,32328],6],[[-1,101318],2],[[-1,101296],"."],[[-1,32322],2],[[-1,32266],17],[[-1,32241],7],[[-1,32192],5],[[-1,32234],20],[[-1,32213],1],[[-1,32249],4],[[-1,32310],38],[[-1,32271],1],[[-1,32272],1],[[-1,32312],1],[[-1,32320],7],[[-1,101314],17],[[-1,101316],1],[[-1,101331],1],[[-1,116442],10],[[-1,124643],1],[[-1,124686],5],[[-1,124724],2],[[-1,124718],3],[[-1,124722],2],[[-1,124732],1],[[-1,124745],1],[[-1,153636],15],[[-1,153617],4],[[-1,153621],2],[[-1,157146],"\n"],[[-1,102944],"\n"],[[-1,101294],3],[[-1,102943],3],[[-1,102621],6],[[-1,102940],37],[[-1,102879],10],[[-1,102903],24],[[-1,102614],15],[[-1,102594],20],[[-1,102599],4],[[-1,102804],2],[[-1,102800],27],[[-1,102735],21],[[-1,102773],1],[[-1,102768],33],[[-1,102714],4],[[-1,102574],2],[[-1,102568],6],[[-1,102572],2],[[-1,102710],21],[[-1,101291],56],[[-1,101199],6],[[-1,101235],35],[[-1,102689],2],[[-1,102556],5],[[-1,102545],9],[[-1,102535],1],[[-1,102525],22],[[-1,102534],5],[[-1,102528],2],[[-1,102551],5],[[-1,102561],4],[[-1,102687],51],[[-1,102503],2],[[-1,102501],"A decade ago Google Wave really needed a good quality list CRDT. "],[[-1,102436],3],[[-1,102433],"I got super excited when the papers for CRDTs started to emerge. [LOGOOT](https://hal.inria.fr/inria-00432368/document) and [WOOT](https://hal.inria.fr/inria-00445975/document) seemed like a big deal! But that excitement "],[[-1,101966],"died when I"],[[-1,102212],20],[[-1,102192]," realised the algorithms were too slow and inefficient to be practically useful."],[[-1,101192]," And"],[[-1,101188],15],[[-1,102112],4],[[-1,102108]," I made a big mistake - I assumed if the academics couldn't make them fast, nobody could."],[[-1,102019],50],[[-1,102770],1],[[-1,102772],1],[[-1,102802],1],[[-1,102815],10],[[-1,102869],53],[[-1,102945],"\n"],[[-1,100708],"\n"],[[-1,100420],"But"],[[-1,10744],8],[[-1,100417],13],[[-1,100707],3],[[-1,100704]," sometimes the best"],[[-1,100403]," work"],[[-1,10735]," comes out of"],[[-1,100398],6],[[-1,100392]," a"],[[-1,100685]," collaboration"],[[-1,32187]," between "],[[-1,32174],"people with"],[[-1,32163],1],[[-1,32178],2],[[-1,100389],27],[[-1,98567],9],[[-1,100362],23],[[-1,96383],20],[[-1,96363]," different skills"],[[-1,96346],3],[[-1,96395],6],[[-1,100671],22],[[-1,100649],". "],[[-1,100338],1],[[-1,100647],17],[[-1,100336],2],[[-1,100332],1],[[-1,100334],1],[[-1,100630],6],[[-1,99981],1],[[-1,100624],18],[[-1,99980],53],[[-1,100331],1],[[-1,98558],1],[[-1,98536],4],[[-1,98476],9],[[-1,98532],35],[[-1,98495],10],[[-1,98496],1],[[-1,98555],18],[[-1,98557],1],[[-1,100330],10],[[-1,98482],5],[[-1,100320],35],[[-1,100606],21],[[-1,100285],5],[[-1,100278],49],[[-1,100280],1],[[-1,100585],2],[[-1,100229],11],[[-1,100217],1],[[-1,100215],1],[[-1,100583],37],[[-1,99926],11],[[-1,100546],1],[[-1,100213],7],[[-1,100545],28],[[-1,100205],3],[[-1,99912],12],[[-1,99914],1],[[-1,100202],3],[[-1,100517],45],[[-1,100197],36],[[-1,98466],4],[[-1,100161],1],[[-1,100156],18],[[-1,98461],2],[[-1,100138],9],[[-1,100127],2],[[-1,100129],1],[[-1,100160],2],[[-1,100472],51],[[-1,157145],1],[[-1,154784],13],[[-1,156409],7],[[-1,148871],1],[[-1,156402],34],[[-1,148869],13],[[-1,156368],8],[[-1,156013],13],[[-1,156360],28],[[-1,154769],1],[[-1,132847],3],[[-1,154768],2],[[-1,154962],1],[[-1,154957],2],[[-1,154961],2],[[-1,156000],1],[[-1,155483],5],[[-1,154766],1],[[-1,148854],5],[[-1,154765],6],[[-1,155478],13],[[-1,155489],3],[[-1,155485],1],[[-1,155999],4],[[-1,155789],1],[[-1,155794],5],[[-1,155995],16],[[-1,155788],1],[[-1,155705],83],[[-1,155787],81],[[-1,155979],13],[[-1,155618],5],[[-1,155596],24],[[-1,155613],13],[[-1,155599],1],[[-1,155537],39],[[-1,155598],1],[[-1,155620],1],[[-1,155966],14],[[-1,155950],19],[[-1,155498],1],[[-1,155931],6],[[-1,155921],1],[[-1,155497],5],[[-1,155920],7],[[-1,155491],1],[[-1,155903],3],[[-1,155899],1],[[-1,155913],3],[[-1,155925],2],[[-1,155952],1],[[-1,156332],1],[[-1,155906],2],[[-1,156151],1],[[-1,155909],1],[[-1,156331],16],[[-1,156149],16],[[-1,156315],35],[[-1,156133],17],[[-1,154955],4],[[-1,155464],6],[[-1,154950],4],[[-1,154759],1],[[-1,148849],24],[[-1,154758],3],[[-1,155458],12],[[-1,153765],1],[[-1,156116],6],[[-1,153764],47],[[-1,156110],5],[[-1,153717],1],[[-1,156105],4],[[-1,153716],47],[[-1,148824],1],[[-1,148779],4],[[-1,148773],7],[[-1,148775],1],[[-1,148823],4],[[-1,148815],25],[[-1,148819],2],[[-1,154755],6],[[-1,156101],9],[[-1,153669],13],[[-1,148789],3],[[-1,148784],2],[[-1,148786],1],[[-1,155446],11],[[-1,155414],21],[[-1,124273],1],[[-1,124270],2],[[-1,124272],1],[[-1,155393],21],[[-1,124640],24],[[-1,124599],9],[[-1,155372],24],[[-1,124615],1],[[-1,124590],6],[[-1,124267],18],[[-1,124573],6],[[-1,124584],9],[[-1,124614],14],[[-1,155348],7],[[-1,155332],3],[[-1,155327],12],[[-1,155314],6],[[-1,155329],1],[[-1,155341],8],[[-1,155435],5],[[-1,155420],5],[[-1,155430],5],[[-1,156092],1],[[-1,156050],2],[[-1,155897],3],[[-1,156048],7],[[-1,156039],10],[[-1,156041],1],[[-1,156091],24],[[-1,155570],3],[[-1,155564],5],[[-1,148766],2],[[-1,155559],10],[[-1,154946],1],[[-1,148762],6],[[-1,132844],5],[[-1,148756],3],[[-1,148751],29],[[-1,148718],2],[[-1,148714],1],[[-1,148720],1],[[-1,148753],1],[[-1,154748],7],[[-1,154945],4],[[-1,155549],11],[[-1,154741],19],[[-1,155307],6],[[-1,154941],2],[[-1,148703],23],[[-1,148713],8],[[-1,154939],1],[[-1,148679],7],[[-1,154938],7],[[-1,155567],1],[[-1,156067],14],[[-1,156028],1],[[-1,155894],5],[[-1,156053],2],[[-1,156280],10],[[-1,155863],52],[[-1,155871],7],[[-1,156270],4],[[-1,155888],1],[[-1,155883],11],[[-1,155887],3],[[-1,156266],8],[[-1,155809],3],[[-1,156258],1],[[-1,156027],4],[[-1,155802],4],[[-1,156257],9],[[-1,155806],2],[[-1,156023],9],[[-1,156248],18],[[-1,155296],2],[[-1,156230],32],[[-1,154722],1],[[-1,148671],1],[[-1,154695],4],[[-1,153656],3],[[-1,154691],1],[[-1,116430],28],[[-1,116400],3],[[-1,116402],1],[[-1,154690],1],[[-1,124566],2],[[-1,124562],8],[[-1,124564],1],[[-1,154689],13],[[-1,154721],1],[[-1,154712],16],[[-1,154720],4],[[-1,155796],2],[[-1,100124],1],[[-1,101172],17],[[-1,132838],10],[[-1,101953],4],[[-1,132828],8],[[-1,154081],17],[[-1,148451],"I"],[[-1,101155],"'m"],[[-1,147427],9],[[-1,148425],1],[[-1,148423],1],[[-1,148422]," ter"],[[-1,148414],"rible "],[[-1,101151],"at"],[[-1,124523],16],[[-1,148408],2],[[-1,124554],1],[[-1,124536],12],[[-1,124553],12],[[-1,148406]," academic papers"],[[-1,101148],","],[[-1,101949],3],[[-1,101888],26],[[-1,101861],45],[[-1,101946],1],[[-1,101915],20],[[-1,101941],3],[[-1,101936],19],[[-1,101894],1],[[-1,101917],1],[[-1,101938],1],[[-1,101945],2],[[-1,148390],1],[[-1,148389]," "],[[-1,101892],3],[[-1,148388],4],[[-1,148382],1],[[-1,148418],2],[[-1,148444],12],[[-1,148426],1],[[-1,148432],3],[[-1,148450],3],[[-1,148467],13],[[-1,154064],48],[[-1,154016],"I"],[[-1,148454],"'m"],[[-1,154015],3],[[-1,154012]," pretty good at making code run fast. "],[[-1,100118],"And yet"],[[-1,100122],3],[[-1,101813],3],[[-1,101048],4],[[-1,101810]," "],[[-1,101808],"h"],[[-1,101815],1],[[-1,153974],5],[[-1,153969],"ere, in my own field,"],[[-1,101093]," "],[[-1,101092],28],[[-1,153948],1],[[-1,101134],"I "],[[-1,101104],"didn't"],[[-1,101054]," even"],[[-1,101098]," try"],[[-1,101064]," to help."],[[-1,101094],1],[[-1,101132],27],[[-1,153947],23],[[-1,148379],18],[[-1,153924],4],[[-1,148380],1],[[-1,153920],47],[[-1,153873]," The"],[[-1,148360]," researchers"],[[-1,153869],1],[[-1,153868]," were doing their part"],[[-1,130650]," to "],[[-1,124505],"make"],[[-1,130646],6],[[-1,153846],8],[[-1,153652],3],[[-1,153641],5],[[-1,153649],4],[[-1,153838],6],[[-1,148348],13],[[-1,148335]," "],[[-1,147418],"P2P collaborative editing"],[[-1,124501]," work"],[[-1,148334],14],[[-1,148320],". "],[[-1,10718],"And "],[[-1,148318],3],[[-1,153832],6],[[-1,153826],"I"],[[-1,10714]," just thumbed my nose at them all and kept "],[[-1,10663],"work"],[[-1,10653],"ing on Operational Tran"],[[-1,10625],"s"],[[-1,10630],"form"],[[-1,10659],3],[[-1,10671],7],[[-1,153825],18],[[-1,153807],"."],[[-1,148313]," "],[[-1,147391],"I"],[[-1,148307],4],[[-1,148299],1],[[-1,148298],"f I"],[[-1,10624]," helped out"],[[-1,148295],4],[[-1,148291],", "],[[-1,96339],"maybe we would"],[[-1,148289],3],[[-1,148232],5],[[-1,148286],5],[[-1,148281]," have "],[[-1,148273],"had fast, workable "],[[-1,148226],2],[[-1,148254],"C"],[[-1,148251],"RDTs"],[[-1,148222]," for text editing"],[[-1,148247]," a decade ago."],[[-1,101044]," "],[[-1,10612],2],[[-1,100978],"Oops! It turned out "],[[-1,100957],"c"],[[-1,101043],1],[[-1,101042],"ollaborative editing needed"],[[-1,101015],1],[[-1,100956],3],[[-1,100949],2],[[-1,100947]," "],[[-1,100953],2],[[-1,101014],"a collaboration"],[[-1,100998]," between all of us"],[[-1,100999],"."],[[-1,100111]," "],[[-1,98427],"How ironic! "],[[-1,98450],"Who could have guessed"],[[-1,98414],"?!"],[[-1,98428],1],[[-1,98458],7],[[-1,100110],23],[[-1,148233],1],[[-1,148253],1],[[-1,148275],1],[[-1,148303],2],[[-1,148312],3],[[-1,101805],1],[[-1,101802],1],[[-1,101804],1],[[-1,148309],2],[[-1,153806],41],[[-1,154930],5],[[-1,156198],15],[[-1,155293],1],[[-1,155291],1],[[-1,155076],8],[[-1,154924],18],[[-1,155068],20],[[-1,155255],1],[[-1,155270],3],[[-1,155263],5],[[-1,155257],1],[[-1,155267],2],[[-1,155290],20],[[-1,155254],1],[[-1,155247],13],[[-1,155230],6],[[-1,154906],3],[[-1,155224],19],[[-1,155234],4],[[-1,155043],1],[[-1,154902],1],[[-1,155205],2],[[-1,154900],1],[[-1,155203],5],[[-1,154334],8],[[-1,154324],10],[[-1,154326],1],[[-1,154676],3],[[-1,155198],19],[[-1,154312],3],[[-1,155179],10],[[-1,154673],1],[[-1,154575],6],[[-1,154584],8],[[-1,154672],6],[[-1,155042],7],[[-1,155169],6],[[-1,154897],1],[[-1,154307],3],[[-1,154896],3],[[-1,154569],22],[[-1,154302],1],[[-1,154304],1],[[-1,154547],1],[[-1,154893],3],[[-1,154803],1],[[-1,154890],12],[[-1,154807],1],[[-1,154878],3],[[-1,154802],1],[[-1,154806],1],[[-1,154875],9],[[-1,154863],7],[[-1,154854],9],[[-1,154300],13],[[-1,154665],4],[[-1,154545],6],[[-1,154661],5],[[-1,154856],1],[[-1,154866],3],[[-1,154845],5],[[-1,154831],13],[[-1,154800],15],[[-1,154538],10],[[-1,154818],11],[[-1,154656],11],[[-1,154643],25],[[-1,154615],30],[[-1,154528],1],[[-1,154156],22],[[-1,154124],11],[[-1,154103],1],[[-1,154092],6],[[-1,154084],2],[[-1,154086],1],[[-1,154102],5],[[-1,154113],5],[[-1,154134],9],[[-1,154618],2],[[-1,154645],1],[[-1,154840],8],[[-1,155163],11],[[-1,155023],8],[[-1,155152],7],[[-1,155015],9],[[-1,155145],6],[[-1,155033],8],[[-1,155139],23],[[-1,155114],34],[[-1,154987],6],[[-1,154997],5],[[-1,155005],4],[[-1,155080],1],[[-1,155079],"\n"],[[-1,155078],1],[[-1,148205],16],[[-1,154418],80],[[-1,148186],7],[[-1,154338],4],[[-1,154286],43],[[-1,148174],20],[[-1,148179],4],[[-1,154243],1],[[-1,154206],11],[[-1,154193],4],[[-1,148152],12],[[-1,132818],12],[[-1,132805],3],[[-1,148140],14],[[-1,148125],12],[[-1,147916],11],[[-1,147901],12],[[-1,147905],2],[[-1,148113],7],[[-1,154189],29],[[-1,132802],1],[[-1,132456],1],[[-1,132769],1],[[-1,132801],31],[[-1,124428],4],[[-1,124430],1],[[-1,124467],9],[[-1,124439],2],[[-1,124423],5],[[-1,124417],10],[[-1,124437],6],[[-1,124458],9],[[-1,124447],7],[[-1,124449],1],[[-1,124495],27],[[-1,132645],16],[[-1,124407],2],[[-1,132629],1],[[-1,132499],12],[[-1,132485],14],[[-1,132467],3],[[-1,132471],2],[[-1,132487],1],[[-1,132659],4],[[-1,132770],1],[[-1,132654],4],[[-1,132767],2],[[-1,132761],3],[[-1,132697],1],[[-1,132685],3],[[-1,132647],1],[[-1,132682],4],[[-1,124400],9],[[-1,124402],1],[[-1,132461],5],[[-1,132758],1],[[-1,132741],15],[[-1,132725],27],[[-1,132695],9],[[-1,132678],1],[[-1,132673],2],[[-1,132463],1],[[-1,132455],1],[[-1,132671],12],[[-1,132675],1],[[-1,132677],1],[[-1,132745],2],[[-1,132757],12],[[-1,132765],2],[[-1,148106],2],[[-1,147655],43],[[-1,147389],3],[[-1,147612],16],[[-1,147386],25],[[-1,147596],97],[[-1,147356],3],[[-1,147499],14],[[-1,116397],18],[[-1,147352],1],[[-1,132627],3],[[-1,132616],6],[[-1,132624],4],[[-1,147350],4],[[-1,147485],12],[[-1,132607],5],[[-1,147473],18],[[-1,132601],11],[[-1,116341],19],[[-1,116357],15],[[-1,116377],17],[[-1,132581],15],[[-1,132562],8],[[-1,132546],8],[[-1,132554],1],[[-1,132549],1],[[-1,132553],2],[[-1,132590],8],[[-1,147455],26],[[-1,132566],1],[[-1,147346],12],[[-1,147330],1],[[-1,147319],1],[[-1,111054],21],[[-1,111000],1],[[-1,110997],13],[[-1,110970],11],[[-1,110984],1],[[-1,110977],3],[[-1,110983],3],[[-1,110999],1],[[-1,111033],10],[[-1,111021],12],[[-1,110959],1],[[-1,111009],5],[[-1,111023],1],[[-1,147318],32],[[-1,111003],1],[[-1,147286],2],[[-1,111001],1],[[-1,147284],4],[[-1,147272],25],[[-1,147245],4],[[-1,116321],5],[[-1,124355],10],[[-1,116315],1],[[-1,110957],13],[[-1,116314],3],[[-1,116309],4],[[-1,116311],1],[[-1,124345],1],[[-1,124281],7],[[-1,124344],3],[[-1,124301],4],[[-1,124341],4],[[-1,124357],1],[[-1,147241],13],[[-1,147226],5],[[-1,124296],13],[[-1,116304],5],[[-1,110905],59],[[-1,124283],1],[[-1,147221],6],[[-1,124297],1],[[-1,124337],1],[[-1,124311],6],[[-1,124328],14],[[-1,124336],6],[[-1,132538],1],[[-1,130638],19],[[-1,132537],17],[[-1,124389],31],[[-1,147215],1],[[-1,110908],1],[[-1,110938],28],[[-1,116299],4],[[-1,110944],3],[[-1,116295],21],[[-1,116272],17],[[-1,116247],8],[[-1,116116],1],[[-1,116115],"\n"],[[-1,116239],2],[[-1,116237],"Well, it took a decade"],[[-1,116199],", some hard work"],[[-1,116215]," and "],[[-1,116169],"some great ideas from"],[[-1,115877]," a bunch of"],[[-1,115866],1],[[-1,115721],5],[[-1,115716]," "],[[-1,115865],"clever"],[[-1,115496]," folks"],[[-1,115859],7],[[-1,115852],"."],[[-1,116147],1],[[-1,116210],1],[[-1,116207],5],[[-1,116145],1],[[-1,116134],6],[[-1,116144],10],[[-1,116128],10],[[-1,116202],1],[[-1,116200],1],[[-1,116112]," "],[[-1,116017],"The "],[[-1,115266],"binary"],[[-1,116084],12],[[-1,116067],8],[[-1,116059]," encoding system"],[[-1,116013]," Martin"],[[-1,115850]," "],[[-1,115473],"invented for"],[[-1,115849],1],[[-1,115842],8],[[-1,115848],3],[[-1,116006],1],[[-1,115478],2],[[-1,116005],4],[[-1,116001]," "],[[-1,116000],4],[[-1,115996],"Automerge"],[[-1,116043]," is "],[[-1,115259],"brilliant"],[[-1,32160],2],[[-1,32071],11],[[-1,32104],32],[[-1,32124],19],[[-1,32134],9],[[-1,32158],1],[[-1,32155],7],[[-1,32146],11],[[-1,32148],1],[[-1,32157],1],[[-1,116039],9],[[-1,115483],"."],[[-1,32051],1],[[-1,32001],16],[[-1,32042],3],[[-1,32033],1],[[-1,32009],7],[[-1,32032],22],[[-1,32039],3],[[-1,32048],5],[[-1,32050],1],[[-1,115987],5],[[-1,115715]," "],[[-1,115481],1],[[-1,115714],2],[[-1,115982],11],[[-1,115965],13],[[-1,115489],4],[[-1,115952],1],[[-1,115945],5],[[-1,115934],13],[[-1,115940],3],[[-1,115951],6],[[-1,115971],3],[[-1,116019],1],[[-1,115918],1],[[-1,115834],"The system of"],[[-1,110846]," avoiding UUIDs by"],[[-1,115821]," "],[[-1,115819],"using"],[[-1,115912],5],[[-1,115907]," incrementing"],[[-1,115763]," (agent id,"],[[-1,115894]," sequence"],[[-1,115751],") tuples"],[[-1,110827]," "],[[-1,115885],8],[[-1,115814],1],[[-1,115250],9],[[-1,115796],2],[[-1,115743],6],[[-1,115794],6],[[-1,115780],15],[[-1,115764],1],[[-1,115788],8],[[-1,115813],16],[[-1,115239],11],[[-1,115736],1],[[-1,115735],"is genius"],[[-1,110824],"."],[[-1,115227],5],[[-1,115726],1],[[-1,115725]," "],[[-1,115711],"I have no idea who came up with that"],[[-1,110823],", but "],[[-1,110803],"I love it"],[[-1,110817],13],[[-1,115675],". And"],[[-1,115222]," of course,"],[[-1,115670]," "],[[-1,115178],"Kevin's"],[[-1,115171],1],[[-1,115204],3],[[-1,115210],3],[[-1,115669],7],[[-1,115662]," list "],[[-1,115460],"represent"],[[-1,115449],"ation"],[[-1,115201]," + insertion approac"],[[-1,115179],"h"],[[-1,115181],1],[[-1,115444]," "],[[-1,115442],9],[[-1,115451],1],[[-1,115656],9],[[-1,115647],"I describe here"],[[-1,110793]," makes everything s"],[[-1,110772],"o much "],[[-1,100087],"faster and "],[[-1,110765],"simpler"],[[-1,110774],1],[[-1,115632],16],[[-1,115606],9],[[-1,115091],". "],[[-1,115081],"I bet"],[[-1,115089],7],[[-1,115597],2],[[-1,115616],8],[[-1,115595],9],[[-1,115586]," 100 "],[[-1,115571],"smart p"],[[-1,115562],"eople "],[[-1,115432],"must "],[[-1,115556],"have "],[[-1,115551],7],[[-1,115544],"walked "],[[-1,115530],"right past"],[[-1,115076]," that i"],[[-1,115065],"dea over the last decade"],[[-1,115069],2],[[-1,115520]," without"],[[-1,115041]," any of "],[[-1,100072],"them"],[[-1,100075],2],[[-1,115033],4],[[-1,115512]," noticing"],[[-1,115029]," it"],[[-1,115503],3],[[-1,115500],"."],[[-1,115427]," "],[[-1,115165],"I "],[[-1,110757],"doubt"],[[-1,115114],11],[[-1,115103]," I would"],[[-1,115095],1],[[-1,115163],5],[[-1,115147],3],[[-1,115144]," have thought of "],[[-1,115025],"it either"],[[-1,115127],11],[[-1,115116],"."],[[-1,10604]," My contribution is using"],[[-1,10561]," "],[[-1,10552],"run-length encoded "],[[-1,10560],3],[[-1,10554],1],[[-1,10557],1],[[-1,10579],1],[[-1,10578],"b-trees"],[[-1,10531]," "],[[-1,10517],"and"],[[-1,10497]," clever indexing. And showing Kevin's "],[[-1,10319],"fast "],[[-1,10459],"list representation can be adapted to an"],[[-1,10415],"y "],[[-1,10394],"CRDT algorithm"],[[-1,10413],9],[[-1,10404],". "],[[-1,10360],"I don't think anyone noticed that before."],[[-1,10379],18],[[-1,10402],7],[[-1,10417],1],[[-1,10419],1],[[-1,10514],5],[[-1,10507],2],[[-1,10503],4],[[-1,10505],1],[[-1,10509],1],[[-1,10530],12],[[-1,10571],7],[[-1,10608],2],[[-1,115156],1],[[-1,115153],5],[[-1,115155],1],[[-1,115158],1],[[-1,115413],1],[[-1,115305],38],[[-1,115412],1],[[-1,115354],13],[[-1,115335],29],[[-1,115341],3],[[-1,115411],6],[[-1,115367],12],[[-1,115405],17],[[-1,115380],12],[[-1,115388],4],[[-1,115426],12],[[-1,115537],6],[[-1,115564],1],[[-1,115573],1],[[-1,115581],7],[[-1,115608],1],[[-1,115724],3],[[-1,115917],4],[[-1,116030],7],[[-1,116072],4],[[-1,116111],6],[[-1,116103],18],[[-1,116105],1],[[-1,116183],13],[[-1,116201],1],[[-1,116209],1],[[-1,116255],1],[[-1,116250],1],[[-1,116254],2],[[-1,116274],1],[[-1,147214],"\n\n"],[[-1,101143],"And now"],[[-1,147212],3],[[-1,110680],", after a decade of waiting,"],[[-1,147209]," we"],[[-1,100068]," finally"],[[-1,100060],1],[[-1,130617]," "],[[-1,10313],"figure"],[[-1,10303],"d out how to make"],[[-1,10307],2],[[-1,130616],4],[[-1,110740],16],[[-1,110724]," fast"],[[-1,110713],", lightw"],[[-1,110703],"eight"],[[-1,37860]," list"],[[-1,110698]," "],[[-1,110705],1],[[-1,110719],1],[[-1,130612],1],[[-1,110751],5],[[-1,110746],"CRDT"],[[-1,37854]," implementation"],[[-1,110696],15],[[-1,110681],"s"],[[-1,110742],1],[[-1,110718],2],[[-1,147206],16],[[-1,147190],"."],[[-1,10286]," "],[[-1,10285],6],[[-1,110647],1],[[-1,110651],2],[[-1,130609],2],[[-1,130611],1],[[-1,132520],1],[[-1,132519],"Practical "],[[-1,132507],"d"],[[-1,147189],1],[[-1,147154],1],[[-1,147153],"ecentralized "],[[-1,147139],"r"],[[-1,147184],1],[[-1,147183],"ealtime collaborative editing"],[[-1,147138],"?"],[[-1,132501]," "],[[-1,132505],2],[[-1,147137],1],[[-1,147136],"We're coming for you"],[[-1,130605]," next"],[[-1,147116],".\n\n"],[[-1,144514],"\n#"],[[-1,7173],1],[[-1,7172],"#"],[[-1,144512]," Appendi"],[[-1,144500],"x"],[[-1,141775]," A:"],[[-1,144499],3],[[-1,144490],1],[[-1,144450],1],[[-1,144417],9],[[-1,144408]," I want to use a CRDT for my application. What should I do?\n\n"],[[-1,144309],"If you're building a"],[[-1,143977]," "],[[-1,143970],"document based collaborative"],[[-1,143974],2],[[-1,143976],1],[[-1,144289],1],[[-1,144288]," application today"],[[-1,143942],", "],[[-1,143940],4],[[-1,143936],"you"],[[-1,143933],6],[[-1,143919],24],[[-1,143927],4],[[-1,144270],4],[[-1,144266]," should "],[[-1,144257],"u"],[[-1,144347],1],[[-1,144346],"se "],[[-1,9896],"["],[[-1,21398],"Y"],[[-1,21392],"j"],[[-1,21386],"s"],[[-1,9895],"](https://github.com/yjs/yjs)"],[[-1,144343],3],[[-1,144340],". Yjs has "],[[-1,9863],"solid"],[[-1,9865],1],[[-1,144330],9],[[-1,144321]," performance"],[[-1,144256],", low memory usage"],[[-1,144186]," and"],[[-1,144238],1],[[-1,144237]," great support"],[[-1,144182],". "],[[-1,144058],"If you "],[[-1,144040],"want help im"],[[-1,144020],"plementing "],[[-1,21400],"Y"],[[-1,21393],"j"],[[-1,21387],"s"],[[-1,144009],3],[[-1,144006]," in your application,"],[[-1,143835]," "],[[-1,143877],1],[[-1,143842],3],[[-1,143876],11],[[-1,143863],9],[[-1,143854],"Kevin Jahns"],[[-1,143834]," "],[[-1,142719],"sometimes accepts money in exchan"],[[-1,142684],"ge for help integrat"],[[-1,142662],"ing "],[[-1,21402],"Y"],[[-1,21394],"j"],[[-1,21388],"s"],[[-1,142658],3],[[-1,142655]," into various applications. He uses"],[[-1,142612]," this to"],[[-1,142620],1],[[-1,142615],1],[[-1,142619],2],[[-1,142664],1],[[-1,142686],1],[[-1,143833],18],[[-1,142727],7],[[-1,143815],5],[[-1,143752],2],[[-1,143750]," fund"],[[-1,142603]," working on"],[[-1,143745],8],[[-1,143790],3],[[-1,143783],14],[[-1,143769]," "],[[-1,21404],"Y"],[[-1,21395],"j"],[[-1,21389],"s"],[[-1,143768],3],[[-1,143736]," (and adjacent "],[[-1,143719],"work)"],[[-1,143721],1],[[-1,143765]," ful"],[[-1,143759],"l time."],[[-1,132452]," Yjs already runs fast and "],[[-1,132417],"soon it "],[[-1,132403],"should become even faster."],[[-1,37839],"\n\n"],[[-1,37757],"The "],[[-1,37752],"a"],[[-1,37837],1],[[-1,37836],"utomerge"],[[-1,37751]," team is also fantastic. "],[[-1,37695],"I've "],[[-1,37416],"had some great conversations with them about "],[[-1,37690],33],[[-1,37657],"these issues"],[[-1,37371],". They"],[[-1,37352],"'"],[[-1,37350],"re making performance the"],[[-1,37321]," #1 issue of 2021 "],[[-1,37325],2],[[-1,37365],13],[[-1,37645],1],[[-1,37644],"and they're "],[[-1,37300],"planning on using a lot of these tricks to "],[[-1,37256],"make "],[[-1,37247],"automerge fast"],[[-1,37233],1],[[-1,37251],3],[[-1,37726],30],[[-1,37828],62],[[-1,37630],18],[[-1,37612],"."],[[-1,37581]," "],[[-1,37230],"It might already be much faster "],[[-1,37539],10],[[-1,37528],1],[[-1,37580],23],[[-1,37551],12],[[-1,37527],10],[[-1,37453],"by the time you're reading this"],[[-1,37422],4],[[-1,37418],"."],[[-1,37505],8],[[-1,37479],25],[[-1,37491],11],[[-1,37497],3],[[-1,37517],11],[[-1,37557],5],[[-1,37611],1],[[-1,37588],5],[[-1,37608],19],[[-1,37610],1],[[-1,37766],9],[[-1,132409],5],[[-1,132425],7],[[-1,143714],"\n\n"],[[-1,14420],"Diamond"],[[-1,143712],12],[[-1,143700]," is "],[[-1,132377],"*"],[[-1,143696],"really"],[[-1,132376],"*"],[[-1,143690]," fast, but "],[[-1,14413],"there's a lot of work before "],[[-1,14379],"I have feature parity with "],[[-1,14384],4],[[-1,37169],13],[[-1,37196],26],[[-1,143679],3],[[-1,143666],5],[[-1,143674],8],[[-1,143661],11],[[-1,37122],3],[[-1,143650],8],[[-1,143633],7],[[-1,143624],28],[[-1,143281],6],[[-1,21406],"Y"],[[-1,21396],"j"],[[-1,21390],"s"],[[-1,143275],3],[[-1,37155]," and "],[[-1,14350],"A"],[[-1,37150],1],[[-1,37149],"utomerge"],[[-1,143596],"."],[[-1,37119]," "],[[-1,37090],"There"],[[-1,37079]," is a lot more that goes into a good CRDT library than "],[[-1,14349],"operation "],[[-1,37024],"speed."],[[-1,37017]," CRDT libraries also need to support"],[[-1,37085],3],[[-1,37118],27],[[-1,143595],1],[[-1,143544],6],[[-1,143526],24],[[-1,143270],1],[[-1,143416],2],[[-1,143502],1],[[-1,143490],26],[[-1,142591],4],[[-1,142585],5],[[-1,142587],1],[[-1,143464],18],[[-1,143437],19],[[-1,143411],11],[[-1,143400]," binary encoding"],[[-1,143377],", network protocols, "],[[-1,143356],12],[[-1,143344],"non-list"],[[-1,36979]," data"],[[-1,143336]," structures, presence (cur"],[[-1,143306],"sor positions)"],[[-1,37141],", editor bindings"],[[-1,143292]," and so on."],[[-1,14189]," "],[[-1,14118],"At the time of writing,"],[[-1,14151],6],[[-1,14144]," d"],[[-1,14188],1],[[-1,14187],"iamond "],[[-1,14176],"does almost none of this"],[[-1,14137],15],[[-1,14122],"."],[[-1,14139],1],[[-1,14141],1],[[-1,14152],1],[[-1,14180],3],[[-1,14264],74],[[-1,14339],10],[[-1,14305],5],[[-1,14329],24],[[-1,14300],35],[[-1,132375],20],[[-1,143268],"\n\nIf you want database"],[[-1,143246],5],[[-1,143241]," semantics"],[[-1,130596]," instead of document semantics"],[[-1,143231],21],[[-1,143210],", "],[[-1,143164],"as far as I know "],[[-1,143196],"nobody has "],[[-1,143183],"done this well "],[[-1,143146],"on top of CRDTs yet. You can use "],[[-1,142963],"["],[[-1,143104],3],[[-1,143113],"Share"],[[-1,143106],"DB"],[[-1,142962],"](https://github.com/share/sharedb/)"],[[-1,132354],", which"],[[-1,130564]," us"],[[-1,130559],"es"],[[-1,130561],1],[[-1,132347],24],[[-1,132321],2],[[-1,132319]," OT."],[[-1,132323],1],[[-1,142926],1],[[-1,143100]," "],[[-1,143099],7],[[-1,143092],"I"],[[-1,142924],1],[[-1,143091]," wrote "],[[-1,49620],"ShareDB"],[[-1,49626],3],[[-1,142922],4],[[-1,142916],3],[[-1,142913]," "],[[-1,142918],1],[[-1,143084],"ye"],[[-1,143078],"ars ago, and"],[[-1,49510]," "],[[-1,49475],"it"],[[-1,31092],"'"],[[-1,49473],"s "],[[-1,49509],"well used"],[[-1,49471],", well maintained"],[[-1,49454],1],[[-1,49496]," and battle tested"],[[-1,49476],"."],[[-1,49500],2],[[-1,143066],1],[[-1,49613],2],[[-1,49553],26],[[-1,49611],1],[[-1,143065],3],[[-1,49598],5],[[-1,49558],3],[[-1,49593],11],[[-1,49526],14],[[-1,49582],7],[[-1,49573],13],[[-1,49559],1],[[-1,49575],1],[[-1,143062],26],[[-1,49608],9],[[-1,142990],1],[[-1,143036],13],[[-1,143019],27],[[-1,142853],"\n\n"],[[-1,142851],24],[[-1,142910],1],[[-1,142909],"Looking forward, "],[[-1,142992],1],[[-1,142989],"I'm excited for "],[[-1,142892],"["],[[-1,142973],"Redwoo"],[[-1,142965],"d"],[[-1,142891],"](https://github.com/redwood/redwood)"],[[-1,142825]," - which "],[[-1,142762],"supports "],[[-1,142736],"P2P"],[[-1,142753],3],[[-1,142750]," editing and "],[[-1,142768],5],[[-1,142798],"has planned full CRDT support."],[[-1,142806],7],[[-1,142816],9],[[-1,142964],1],[[-1,142967],1],[[-1,143023],2],[[-1,143082],2],[[-1,143108],1],[[-1,143168],4],[[-1,143185],1],[[-1,143208],4],[[-1,143200],3],[[-1,143204],2],[[-1,143310],2],[[-1,143384],5],[[-1,143418],2],[[-1,143445],4],[[-1,143501],10],[[-1,143538],11],[[-1,143575],30],[[-1,143594],19],[[-1,143626],1],[[-1,143642],8],[[-1,143676],1],[[-1,143761],1],[[-1,143787],2],[[-1,143810],16],[[-1,143865],1],[[-1,143985],7],[[-1,143895],17],[[-1,144028],4],[[-1,144051],10],[[-1,144066],4],[[-1,144173],13],[[-1,144140],24],[[-1,144113],20],[[-1,144091],24],[[-1,144093],1],[[-1,144116],1],[[-1,144160],3],[[-1,144180],6],[[-1,144223],17],[[-1,144155],14],[[-1,144206],3],[[-1,144195],8],[[-1,144203],7],[[-1,144427],9],[[-1,144449],21],[[-1,144496],3],[[-1,144504],2],[[-1,144515],"\n"],[[-1,106200],"\n"],[[-1,147113],"\n"],[[-1,7171],"##"],[[-1,147110],1],[[-1,141770]," Appending B:"],[[-1,36902]," Lies, damned lies and benchmarks"],[[-1,36866],"\n\nIs this for real? Yes"],[[-1,36818],"."],[[-1,36773]," But "],[[-1,36730],"pe"],[[-1,36724],"r"],[[-1,36715],"formance is complicated and "],[[-1,36723],4],[[-1,36728],2],[[-1,36768],"I'm not telling the full picture here."],[[-1,36817],40],[[-1,36843],2],[[-1,36775],1],[[-1,36841],3],[[-1,36832],3],[[-1,36838],3],[[-1,141757],1],[[-1,106254],3],[[-1,106233],16],[[-1,106211],11],[[-1,106217],3],[[-1,106251],6],[[-1,106243],9],[[-1,106245],1],[[-1,106278],1],[[-1,106273],9],[[-1,106256],1],[[-1,106264],4],[[-1,106277],2],[[-1,106305],25],[[-1,106325],17],[[-1,106327],1],[[-1,106345],17],[[-1,106371],25],[[-1,106418],46],[[-1,106487],4],[[-1,106482],1],[[-1,106497],10],[[-1,106481],9],[[-1,106544],46],[[-1,106817],4],[[-1,106548],1],[[-1,106812],1],[[-1,106827],10],[[-1,106811],9],[[-1,138350],4],[[-1,141708],5],[[-1,141756],20],[[-1,141730],8],[[-1,141736],5],[[-1,141722],13],[[-1,144489],1],[[-1,147109],1],[[-1,144472],22],[[-1,144487],13],[[-1,147108],10],[[-1,147096],2],[[-1,147092],24],[[-1,36918],14],[[-1,36930],6],[[-1,36923],1],[[-1,106783],3],[[-1,106112],5],[[-1,36922],1],[[-1,106106],1],[[-1,36974],23],[[-1,36950],20],[[-1,106105],11],[[-1,106114],1],[[-1,106116],1],[[-1,106198],9],[[-1,106185],39],[[-1,106142],1],[[-1,106131],14],[[-1,106141],5],[[-1,106146],2],[[-1,106189],3],[[-1,106472],4],[[-1,106780],6],[[-1,106467],12],[[-1,106632],80],[[-1,106774],12],[[-1,132315],3],[[-1,106802],4],[[-1,132312],2],[[-1,106797],12],[[-1,132310],8],[[-1,132301],16],[[-1,111062],8],[[-1,132285],2],[[-1,147014],11],[[-1,147068],5],[[-1,147056],7],[[-1,138345],9],[[-1,147049],4],[[-1,147031],15],[[-1,132278],6],[[-1,147002],22],[[-1,146937],12],[[-1,146947],5],[[-1,146949],1],[[-1,146980],5],[[-1,146961],11],[[-1,146925],1],[[-1,110643],"\n"],[[-1,36829],"\nFirst, "],[[-1,36819],"i"],[[-1,106726],43],[[-1,109765],1],[[-1,109763],3],[[-1,108286],20],[[-1,108349],10],[[-1,108315],7],[[-1,108254],5],[[-1,108308],14],[[-1,108264],8],[[-1,108294],8],[[-1,108339],23],[[-1,109760],60],[[-1,109764],1],[[-1,110642],2],[[-1,110640],"f you want to play with any of the benchmarks"],[[-1,109811]," I ran"],[[-1,110595]," yourself"],[[-1,109805],", "],[[-1,36687],"you can"],[[-1,35622],"."],[[-1,35637],1],[[-1,35636]," "],[[-1,35635],1],[[-1,35620],"But"],[[-1,35634],6],[[-1,35641],2],[[-1,36680],4],[[-1,36676]," "],[[-1,109803],"everything is a bit of a"],[[-1,109779],7],[[-1,109770],5],[[-1,106070]," mess"],[[-1,35625],"."],[[-1,35627],1],[[-1,106065],1],[[-1,109699],1],[[-1,106091],20],[[-1,106454],8],[[-1,106425],5],[[-1,106446],6],[[-1,106426],1],[[-1,106440],1],[[-1,106437],10],[[-1,106439],1],[[-1,106661],27],[[-1,106761],8],[[-1,106732],5],[[-1,106753],6],[[-1,106681],1],[[-1,106667],1],[[-1,106680],10],[[-1,106733],1],[[-1,106747],1],[[-1,106744],10],[[-1,106746],1],[[-1,109698],27],[[-1,109772],1],[[-1,109813],1],[[-1,109812],"\n"],[[-1,109825],11],[[-1,110571],3],[[-1,110568],"\nThe benchmark code for "],[[-1,109050],"the "],[[-1,110544],3],[[-1,110541],"JS "],[[-1,21210],"plain "],[[-1,110538],"string"],[[-1,21204]," editing"],[[-1,110532]," baseline, "],[[-1,21408],"Y"],[[-1,21397],"j"],[[-1,21391],"s"],[[-1,110521],3],[[-1,108857],","],[[-1,110518],4],[[-1,110514]," automerge"],[[-1,108856]," and reference-crdts"],[[-1,109046]," tests"],[[-1,110504]," is"],[[-1,108836]," all "],[[-1,108818],"in"],[[-1,108831],11],[[-1,110501]," ["],[[-1,110499],3],[[-1,110496],"this github gist](https://gist.github.com/josephg/13efc1444660c07870fcbd0b3e917638). It"],[[-1,31091],"'"],[[-1,110409],"s a mess; but messy code is better than missing code."],[[-1,109487],"\n"],[[-1,14497],"\n"],[[-1,16275],1],[[-1,15611],40],[[-1,15664],30],[[-1,15633],21],[[-1,16273],596],[[-1,15676],1],[[-1,15422],11],[[-1,15394],9],[[-1,15381],14],[[-1,15385],2],[[-1,15402],7],[[-1,15411],8],[[-1,15569],1],[[-1,15366],4],[[-1,15568],5],[[-1,15361],7],[[-1,15563],96],[[-1,15354],2],[[-1,15334],60],[[-1,15273],1],[[-1,15350],15],[[-1,15352],1],[[-1,15467],10],[[-1,15455],4],[[-1,15434],12],[[-1,15451],16],[[-1,15457],1],[[-1,109486],1],[[-1,109252],35],[[-1,108815],5],[[-1,109217],7],[[-1,109039],3],[[-1,109210],14],[[-1,109035],5],[[-1,109196],106],[[-1,109003],35],[[-1,108874],16],[[-1,108962],14],[[-1,108937],63],[[-1,108948],10],[[-1,108968],5],[[-1,109090],4],[[-1,109029],1],[[-1,109027],14],[[-1,109012],8],[[-1,109086],35],[[-1,109030],1],[[-1,109485],13],[[-1,109470],17],[[-1,109444],14],[[-1,109428],83],[[-1,109338],20],[[-1,109310],56],[[-1,109318],4],[[-1,109345],6],[[-1,109430],1],[[-1,109453],8],[[-1,109472],1],[[-1,110356],28],[[-1,109671],8],[[-1,108808],10],[[-1,110328],19],[[-1,106052],8],[[-1,17724],13],[[-1,106044],14],[[-1,106063],10],[[-1,110309],9],[[-1,108367],17],[[-1,110300],2],[[-1,17710],86],[[-1,110298],90],[[-1,106029],7],[[-1,106018],13],[[-1,106022],2],[[-1,110208],13],[[-1,17624],34],[[-1,110195],47],[[-1,106004],1],[[-1,110148],1],[[-1,109663],12],[[-1,110147],31],[[-1,106002],1],[[-1,110116],31],[[-1,106001],10],[[-1,110085],8],[[-1,105991],27],[[-1,110077],1],[[-1,108797],2],[[-1,110076],14],[[-1,108794],8],[[-1,17588],1],[[-1,108786],4],[[-1,108773],22],[[-1,108782],8],[[-1,110062],30],[[-1,17477],4],[[-1,110032],16],[[-1,17587],109],[[-1,110016],9],[[-1,105963],1],[[-1,17472],36],[[-1,105962],4],[[-1,110007],6],[[-1,17435],55],[[-1,110001],62],[[-1,108751],18],[[-1,105957],1],[[-1,108733],1],[[-1,109939],2],[[-1,108731],9],[[-1,109937],43],[[-1,108721],26],[[-1,108611],11],[[-1,108695],16],[[-1,108668],6],[[-1,108599],31],[[-1,105955],51],[[-1,105902],5],[[-1,105871],21],[[-1,105836],41],[[-1,105850],13],[[-1,105891],2],[[-1,105885],7],[[-1,105889],2],[[-1,105897],1],[[-1,105894],1],[[-1,105896],1],[[-1,105904],1],[[-1,108662],12],[[-1,108612],1],[[-1,108650],37],[[-1,108672],2],[[-1,108679],6],[[-1,109894],10],[[-1,109580],2],[[-1,109651],8],[[-1,109508],5],[[-1,109643],37],[[-1,105793],23],[[-1,109606],5],[[-1,109591],10],[[-1,109578],46],[[-1,109502],15],[[-1,109532],24],[[-1,108567],20],[[-1,108518],11],[[-1,108547],28],[[-1,108506],8],[[-1,108495],6],[[-1,105756],23],[[-1,105769],12],[[-1,108489],15],[[-1,108384],17],[[-1,108498],1],[[-1,108474],90],[[-1,40803],2],[[-1,40767],21],[[-1,40719],2],[[-1,40746],6],[[-1,40717],1],[[-1,40740],2],[[-1,40736],10],[[-1,40716],75],[[-1,40726],3],[[-1,40738],1],[[-1,40801],27],[[-1,40772],4],[[-1,40774],1],[[-1,108497],1],[[-1,109601],9],[[-1,109884],1],[[-1,40806],1],[[-1,40807],1],[[-1,109883],1],[[-1,17377],1],[[-1,109882],22],[[-1,15673],7],[[-1,109860],32],[[-1,15675],1],[[-1,16278],1],[[-1,16875],596],[[-1,16877],1],[[-1,17221],1],[[-1,17220],"You'll also need `automerge-paper.json.gz` from [josephg/crdt-benchmarks](https://github.com/josephg/crdt-benchmarks) in order to run most of these tests. The reference-crdts benchmark depends on [crdts.ts from josephg/reference-crdts, at this version](https://github.com/josephg/reference-crdts/tree/fed747255df9d457e11f36575de555b39f07e909)"],[[-1,14496],".\n"],[[-1,14500],1],[[-1,15070],"\nDiamond's benchmarks come from [josephg/diamond-types, at this version](https://github.com/josephg/diamond-types/tree/42a8bc8fb4d44671147ccaf341eee18d77b2d532). Benchmark by running ` RUSTFLAGS='-C target-cpu=native' cargo criterion yjs`. The inline rope structure updates can be enabled or disabled by editing [the constant at the top of src/list/doc.rs](https://github.com/josephg/diamond-types/blob/42a8bc8fb4d44671147ccaf341eee18d77b2d532/src/list/doc.rs#L15). You can look at memory statistics by running `cargo run --release --features memusage --example stats`."],[[-1,15072],"\n"],[[-1,15270],"\nDiamond is compiled to wasm using [this "],[[-1,14492],"wrapper"],[[-1,15229],7],[[-1,15222],"](https://github.com/josephg/diamond-js/tree/6e8a95670b651c0aaa7701a1a763778d3a486b0c), hardcoded to point to a local copy of diamond-types from git."],[[-1,14485]," The"],[[-1,14474]," wasm bundle is "],[[-1,14428],5],[[-1,14458],"optimized with "],[[-1,14437],"wasm-opt."],[[-1,14439],1],[[-1,14443],3],[[-1,14481],6],[[-1,15272],1],[[-1,17223],"\n"],[[-1,17337],"\nThe charts were made on [ObservableHQ](https://observablehq.com/@josephg/crdt-algorithm-performance-benchmarks)."],[[-1,17339],1],[[-1,17376],36],[[-1,110586],2],[[-1,110579],7],[[-1,110584],4],[[-1,146924],"\n"],[[-1,36673],"\n"],[[-1,145171],"\n"],[[-1,145169],"##"],[[-1,7169],1],[[-1,145167],"# "],[[-1,36660],"Are "],[[-1,36642],"Automerge and "],[[-1,36646],"Yjs "],[[-1,36626],"doing the same thing?"],[[-1,36605],6],[[-1,36656],9],[[-1,36671],10],[[-1,36674],1],[[-1,144546],10],[[-1,144534],9],[[-1,144536],1],[[-1,145157],20],[[-1,145133],14],[[-1,145137],2],[[-1,145165],7],[[-1,145170],"\n"],[[-1,146923],"\n"],[[-1,146922],3],[[-1,146346],"Through"],[[-1,49452],"out"],[[-1,146339]," this post "],[[-1,146419],"I'"],[[-1,49448],"ve been"],[[-1,146417],1],[[-1,146416]," "],[[-1,146407],9],[[-1,146398],"comparing the performance of implementations "],[[-1,146349],"of"],[[-1,146353],2],[[-1,146415],4],[[-1,146890],1],[[-1,146435],14],[[-1,146889],25],[[-1,146671],14],[[-1,146864],1],[[-1,146833],45],[[-1,146863],9],[[-1,146786],10],[[-1,146854],5],[[-1,146842],9],[[-1,146776],1],[[-1,146775]," "],[[-1,146772],"RGA (automerge) and YA"],[[-1,146744],"TA ("],[[-1,21378],"Y"],[[-1,21374],"j"],[[-1,21370],"s"],[[-1,146740],3],[[-1,146737]," + my rust "],[[-1,146656],"implementation"],[[-1,146726],4],[[-1,146722],")"],[[-1,146328]," interchang"],[[-1,146313],"e"],[[-1,146317],"ably"],[[-1,145114],".\n\n"],[[-1,141700],"Doing this"],[[-1,141689],1],[[-1,141702],1],[[-1,146721],1],[[-1,146163],1],[[-1,146156],40],[[-1,146112],5],[[-1,146116],4],[[-1,146107],2],[[-1,146162],5],[[-1,146312],1],[[-1,146248],4],[[-1,146244]," rests on "],[[-1,146100],"the"],[[-1,146102],1],[[-1,146234],3],[[-1,146231]," assumption that "],[[-1,146085],"the "],[[-1,21138],"concurrent "],[[-1,21146],"merging "],[[-1,21187],"b"],[[-1,21182],"e"],[[-1,21177],"h"],[[-1,21172],"a"],[[-1,21167],"v"],[[-1,21162],"i"],[[-1,21157],"o"],[[-1,21152],"u"],[[-1,21147],"r"],[[-1,146214],5],[[-1,146096],9],[[-1,146081]," "],[[-1,141687],"for YATA and RGA "],[[-1,146080],"are"],[[-1,145110]," bas"],[[-1,145098],"ically the same"],[[-1,145106],1],[[-1,145101],1],[[-1,145105],2],[[-1,146077],11],[[-1,146062],1],[[-1,146066],4],[[-1,146060],", and"],[[-1,145372]," that"],[[-1,145382],5],[[-1,146055]," "],[[-1,146038],3],[[-1,146035],"you"],[[-1,141655]," can"],[[-1,146032]," swap"],[[-1,141670]," between CRDT"],[[-1,146027]," "],[[-1,21189],"b"],[[-1,21183],"e"],[[-1,21178],"h"],[[-1,21173],"a"],[[-1,21168],"v"],[[-1,21163],"i"],[[-1,21158],"o"],[[-1,21153],"u"],[[-1,21148],"r"],[[-1,146026],9],[[-1,141651]," without chang"],[[-1,141635],"ing your implementation, or your implementation performance"],[[-1,141637],1],[[-1,146017],11],[[-1,146000],19],[[-1,145367],42],[[-1,145981],1],[[-1,146006],3],[[-1,146054],15],[[-1,146087],1],[[-1,146209],41],[[-1,146164],"."],[[-1,146311],24],[[-1,146286],25],[[-1,146259],5],[[-1,146250],1],[[-1,146254],4],[[-1,146261],1],[[-1,146720],1],[[-1,146697],11],[[-1,146641],4],[[-1,146686],1],[[-1,146683],12],[[-1,146637],6],[[-1,146609],53],[[-1,146556]," "],[[-1,145922],"This is "],[[-1,145066],"a "],[[-1,145015],"novel idea that "],[[-1,144992],"I think "],[[-1,144999],"nobody "],[[-1,144984],"has "],[[-1,141572],"looked at"],[[-1,141574],1],[[-1,144980],10],[[-1,144970]," before"],[[-1,144962],"."],[[-1,144960],"\n\n"],[[-1,145064],3],[[-1,145060],5],[[-1,145047],1],[[-1,145031],15],[[-1,145046],14],[[-1,145055],4],[[-1,145914],10],[[-1,145083],9],[[-1,145316],3],[[-1,145307],3],[[-1,145313],3],[[-1,145325],4],[[-1,145904],6],[[-1,145896],5],[[-1,145069],1],[[-1,145072],1],[[-1,145304],1],[[-1,145891],9],[[-1,145898],1],[[-1,145979],"I"],[[-1,141562]," feel confident in this claim because I"],[[-1,145978],3],[[-1,145975]," demonstrated"],[[-1,21126]," it"],[[-1,145302],10],[[-1,144944]," "],[[-1,144943],8],[[-1,144956],6],[[-1,145292],8],[[-1,145962],6],[[-1,145931],9],[[-1,145956],18],[[-1,145938],"in my "],[[-1,146513],"["],[[-1,146555],"reference CRDT"],[[-1,146512],1],[[-1,146541]," implementation"],[[-1,146510],"](https://github.com/josephg/reference-crdts)"],[[-1,145284],", which has identical performance "],[[-1,141521],"(and a"],[[-1,40641],"n"],[[-1,141509]," almost"],[[-1,40639]," "],[[-1,141502],1],[[-1,141501],"identical codepath) "],[[-1,141515],3],[[-1,145229],"when using"],[[-1,144935]," "],[[-1,21380],"Y"],[[-1,21375],"j"],[[-1,21371],"s"],[[-1,144934],6],[[-1,145219],1],[[-1,145250],7],[[-1,145243]," "],[[-1,145215],"or"],[[-1,145242],3],[[-1,145239]," automerge"],[[-1,144928],"'s"],[[-1,145213]," "],[[-1,21191],"b"],[[-1,21184],"e"],[[-1,21179],"h"],[[-1,21174],"a"],[[-1,21169],"v"],[[-1,21164],"i"],[[-1,21159],"o"],[[-1,21154],"u"],[[-1,21149],"r"],[[-1,145210],9],[[-1,145212],1],[[-1,145880],"."],[[-1,141481]," There might be some performance "],[[-1,141442],"differences with conflict-heavy editing traces - but that"],[[-1,105731],"'"],[[-1,141385],"s extremely rare in "],[[-1,141361],"practice."],[[-1,49441],36],[[-1,49394],24],[[-1,49405],10],[[-1,141350],"\n\n"],[[-1,141365],2],[[-1,141448],5],[[-1,145879],1],[[-1,145201],4],[[-1,145197],"I"],[[-1,145185],"'m"],[[-1,141348]," also"],[[-1,145183]," confident y"],[[-1,145196],7],[[-1,145188],1],[[-1,145585],1],[[-1,145868],1],[[-1,145749],12],[[-1,145867],10],[[-1,145857],"ou could"],[[-1,145849],25],[[-1,145824]," modify "],[[-1,21382],"Y"],[[-1,21376],"j"],[[-1,21372],"s"],[[-1,145816],3],[[-1,145813]," to "],[[-1,145800],"implement RGA"],[[-1,21123],"'s"],[[-1,145787]," "],[[-1,21193],"b"],[[-1,21185],"e"],[[-1,21180],"h"],[[-1,21175],"a"],[[-1,21170],"v"],[[-1,21165],"i"],[[-1,21160],"o"],[[-1,21155],"u"],[[-1,21150],"r"],[[-1,145786],9],[[-1,145584]," if you wanted"],[[-1,145565]," to"],[[-1,141342],", without changing "],[[-1,21384],"Y"],[[-1,21377],"j"],[[-1,21373],"s"],[[-1,141323],3],[[-1,141320],"'s"],[[-1,141304],10],[[-1,141318]," pe"],[[-1,141313],"rformance"],[[-1,141315],1],[[-1,145568],"."],[[-1,145777],2],[[-1,145775]," "],[[-1,40637],"You would just need to:"],[[-1,141291],27],[[-1,145566],1],[[-1,145774],18],[[-1,144924],1],[[-1,144923],"\n\n-"],[[-1,145756]," "],[[-1,144919],"C"],[[-1,145755],1],[[-1,145754],"hange"],[[-1,145736]," "],[[-1,144917],"Y"],[[-1,145735],1],[[-1,145734],"js's *integrate* method"],[[-1,144916]," (or make an alternative"],[[-1,144877],") which used slightly different logic for concurrent edits"],[[-1,144818],"\n- S"],[[-1,144892],6],[[-1,144883],4],[[-1,144886],2],[[-1,145711],7],[[-1,145704],"tore *"],[[-1,145694],"se"],[[-1,145691],"q* "],[[-1,145677],"instead of *originRight* in"],[[-1,145562]," each"],[[-1,145650]," *Item*"],[[-1,144813],"\n- S"],[[-1,145557],1],[[-1,145643],6],[[-1,145637],"tore"],[[-1,145624]," "],[[-1,145623],10],[[-1,145633],1],[[-1,145632],"*maxSeq*"],[[-1,145613]," in the document"],[[-1,144808],", and keep it up to d"],[[-1,144783],"ate"],[[-1,144787],2],[[-1,145555]," and"],[[-1,144779],"\n- "],[[-1,144775],"C"],[[-1,145551],1],[[-1,145548],1],[[-1,145547],"hange "],[[-1,21368],"Y"],[[-1,144774],1],[[-1,144773],"js's"],[[-1,144769],1],[[-1,145541],3],[[-1,145538]," binary encoding format"],[[-1,145550],1],[[-1,145597],"."],[[-1,144765],"\n\n"],[[-1,145596],1],[[-1,145514],"I talked to Kevin about this"],[[-1,130546],", and "],[[-1,130540],1],[[-1,141250],1],[[-1,145486],4],[[-1,141264],5],[[-1,145453],2],[[-1,130556],4],[[-1,141247],1],[[-1,145451],12],[[-1,145482],1],[[-1,145481],"he doesn't see "],[[-1,145386],"any "],[[-1,145430],4],[[-1,145464],4],[[-1,145460],"point"],[[-1,144761]," in adding "],[[-1,141245],"RGA support"],[[-1,141233]," into"],[[-1,144750],15],[[-1,144735]," his library"],[[-1,144763],1],[[-1,145426],4],[[-1,145409],21],[[-1,145415],5],[[-1,145422],6],[[-1,145439],4],[[-1,145455],"."],[[-1,141119]," "],[[-1,130528],28],[[-1,141118],"It"],[[-1,31090],"'"],[[-1,141116],"s not "],[[-1,130537],"something"],[[-1,141110],9],[[-1,141101]," any"],[[-1,141093],"body actually asks for."],[[-1,40595]," And RGA"],[[-1,40319]," can have"],[[-1,40587],4],[[-1,40334]," weird"],[[-1,40583],1],[[-1,40540],2],[[-1,40538]," "],[[-1,40482],"["],[[-1,40537],"interleaving"],[[-1,40525],1],[[-1,40327],8],[[-1,40366],9],[[-1,40370],2],[[-1,40380],9],[[-1,40524],7],[[-1,40481],"](https://www.cl.cam.ac.uk/~arb33/papers/KleppmannEtAl-InterleavingAnomalies-PaPoC2019.pdf)"],[[-1,40501]," "],[[-1,40490],"when "],[[-1,40354],"prepending "],[[-1,40307],"items"],[[-1,40343],4],[[-1,40335],"."],[[-1,40337],1],[[-1,40339],1],[[-1,40485],3],[[-1,40390],6],[[-1,40357],1],[[-1,40496],3],[[-1,40500],2],[[-1,40517],15],[[-1,40582],41],[[-1,40602],5],[[-1,40604],1],[[-1,40614],5],[[-1,141097],2],[[-1,141211],1],[[-1,141196],57],[[-1,141126],6],[[-1,141139],12],[[-1,141210],13],[[-1,141228],2],[[-1,141215],1],[[-1,141226],9],[[-1,144723],"\n\nFor "],[[-1,13798],"diamond"],[[-1,144717],12],[[-1,144705],", I"],[[-1,40300]," make my code"],[[-1,144702],29],[[-1,144666],27],[[-1,144639]," "],[[-1,144634],"acce"],[[-1,144618],"pt a type parameter "],[[-1,40286],"for "],[[-1,144598],6],[[-1,144592],"switch"],[[-1,40280],"ing"],[[-1,144586],2],[[-1,144584]," between "],[[-1,21364],"Y"],[[-1,21362],"j"],[[-1,21360],"s"],[[-1,144575],3],[[-1,144572]," and automerge"],[[-1,40277],"'"],[[-1,40272],"s"],[[-1,40276],2],[[-1,144558]," "],[[-1,21195],"b"],[[-1,21186],"e"],[[-1,21181],"h"],[[-1,21176],"a"],[[-1,21171],"v"],[[-1,21166],"i"],[[-1,21161],"o"],[[-1,21156],"u"],[[-1,21151],"r"],[[-1,144557],9],[[-1,144548],"."],[[-1,13791]," I'm "],[[-1,13780],"not sure if I want to. Kevin is probably right - I don't think this is something people ask for."],[[-1,13786],5],[[-1,144525],"\n"],[[-1,13684],"\n---\n"],[[-1,14095],"\n"],[[-1,13677],"Well, "],[[-1,13670],"t"],[[-1,13678],1],[[-1,14093],12],[[-1,14081],"here is one way in which Yjs has a definite edge over "],[[-1,13968],"automerge"],[[-1,13657],32],[[-1,13669],6],[[-1,14027],15],[[-1,14006],10],[[-1,13996],": Yjs "],[[-1,13943],"doesn't "],[[-1,11876],"record"],[[-1,13935],5],[[-1,13930]," "],[[-1,13621],"*when* each item in a"],[[-1,13929],16],[[-1,13913]," document"],[[-1,13599]," has"],[[-1,13904],5],[[-1,13899]," been deleted. Only "],[[-1,11163],"whether each "],[[-1,11146],"item has been"],[[-1,11150],2],[[-1,13879],10],[[-1,13865],1],[[-1,13869],4],[[-1,13858],6],[[-1,13852]," deleted"],[[-1,11133]," or not"],[[-1,13844],1],[[-1,13232],2],[[-1,11870],5],[[-1,13215],44],[[-1,13169],23],[[-1,13146],"."],[[-1,13171],1],[[-1,13230],14],[[-1,13843]," This "],[[-1,13833],"has some weird implications:\n\n"],[[-1,13800],"-"],[[-1,13595]," "],[[-1,13517],"Storing when each delete happened "],[[-1,11864],"has a "],[[-1,13483],3],[[-1,13480],"weirdly large"],[[-1,11858]," impact on memory usage"],[[-1,11806]," and on-disk storage size"],[[-1,13467],". "],[[-1,11834],"A"],[[-1,12001],8],[[-1,11993],"dd"],[[-1,11833],"ing"],[[-1,13346],6],[[-1,13340]," "],[[-1,8684],"this data"],[[-1,13141],16],[[-1,13339],9],[[-1,13380],2],[[-1,13364],3],[[-1,13144],2],[[-1,13361],9],[[-1,13351],2],[[-1,13378],1],[[-1,13369],2],[[-1,13377],4],[[-1,13465],7],[[-1,11829]," "],[[-1,11123],"doubles"],[[-1,8674]," diamond's"],[[-1,11818],9],[[-1,11826],6],[[-1,11828],1],[[-1,11989],1],[[-1,11988]," "],[[-1,11987],2],[[-1,11991],1],[[-1,13122],10],[[-1,13458],3],[[-1,13455],"memory usage"],[[-1,11984]," "],[[-1,11983],9],[[-1,13443],11],[[-1,13432],"from 1.12mb to 2.3"],[[-1,11973],"4"],[[-1,13414],1],[[-1,13413],"mb"],[[-1,9752],", and makes the system about "],[[-1,9704],"5"],[[-1,9706],1],[[-1,9719],2],[[-1,9717],"% slower."],[[-1,9723],2],[[-1,11808],1],[[-1,13381],1],[[-1,13330],1],[[-1,12454],8],[[-1,11972],8],[[-1,12446],8],[[-1,11963],8],[[-1,12438],18],[[-1,13329],9],[[-1,12482],11],[[-1,13320],32],[[-1,11954],4],[[-1,13269],6],[[-1,12470],1],[[-1,13263],1],[[-1,13288],8],[[-1,13278],8],[[-1,13111],1],[[-1,11933],22],[[-1,11910],1],[[-1,11949],1],[[-1,12466],1],[[-1,12468],1],[[-1,13110],14],[[-1,12464],9],[[-1,12417],5],[[-1,13096],19],[[-1,13066],8],[[-1,13073],7],[[-1,13058],5],[[-1,11908],26],[[-1,11948],15],[[-1,13053],1],[[-1,13077],3],[[-1,13280],1],[[-1,13348],"\n"],[[-1,13233],"-"],[[-1,13052]," "],[[-1,8664],25],[[-1,11781],26],[[-1,13051],"Yjs "],[[-1,8637],"doe"],[[-1,8618],"sn't store enough information to "],[[-1,8630],6],[[-1,8634],2],[[-1,13047],5],[[-1,12993],1],[[-1,11754],"implement"],[[-1,12411],2],[[-1,12409]," "],[[-1,12407],"per-keystroke editing"],[[-1,12969],34],[[-1,12992],22],[[-1,12933]," replays"],[[-1,12386]," or "],[[-1,11744],"other"],[[-1,12382],8],[[-1,12374]," fancy"],[[-1,11739]," stuff"],[[-1,12368]," like that"],[[-1,12925],"."],[[-1,11733]," (Maybe "],[[-1,11717],"thats what people want?"],[[-1,11693]," Is it weird to have every"],[[-1,11647]," err"],[[-1,11635],"ant"],[[-1,11643],4],[[-1,11667]," keystroke recorded?"],[[-1,11694],")"],[[-1,11725],7],[[-1,12922],1],[[-1,12894],43],[[-1,12850],1],[[-1,12851],1],[[-1,12849],"\n- Yjs"],[[-1,12837]," needs to "],[[-1,12796],11],[[-1,12785],"encode"],[[-1,11632],4],[[-1,12779]," "],[[-1,12766],"information about which items have been "],[[-1,12778],4],[[-1,12774],"delet"],[[-1,12724],"ed into the "],[[-1,11626],"*"],[[-1,12712],"version"],[[-1,11625],"*"],[[-1,12705]," field. In diamond, versions are"],[[-1,12350]," tens of"],[[-1,12352],1],[[-1,12673],1],[[-1,12662],5],[[-1,12657]," bytes. In yjs, versions are "],[[-1,12624],"~"],[[-1,12628],"4kb."],[[-1,12623]," And the"],[[-1,12613],"y grow over time"],[[-1,12594]," as the document grows"],[[-1,12566],21],[[-1,12596],1],[[-1,12597],"."],[[-1,11624]," "],[[-1,11600],"Kevin assures me that "],[[-1,11570],"this information is "],[[-1,8584],"basically "],[[-1,11550],"always small in practice"],[[-1,8573],". He might be right"],[[-1,11526],1],[[-1,11525]," "],[[-1,11516],"but"],[[-1,11462]," this"],[[-1,11464],1],[[-1,11513],1],[[-1,11499],2],[[-1,11497]," still "],[[-1,11484],"makes me"],[[-1,8554]," weir"],[[-1,8549],1],[[-1,8548],"d"],[[-1,8545],"l"],[[-1,8547],"y"],[[-1,11476]," nervous."],[[-1,11490],5],[[-1,11512],12],[[-1,11524],4],[[-1,11578],7],[[-1,11623],22],[[-1,12572],3],[[-1,12615],1],[[-1,12672],7],[[-1,12769],2],[[-1,12802],3],[[-1,12827],24],[[-1,12843],3],[[-1,12921],23],[[-1,12924],1],[[-1,12970],1],[[-1,13042],27],[[-1,13010],16],[[-1,13015],4],[[-1,13261],26],[[-1,13411],13],[[-1,13394],11],[[-1,13398],2],[[-1,13594],42],[[-1,13538],20],[[-1,13552],13],[[-1,13803],2],[[-1,13837],3],[[-1,13864],3],[[-1,13958],14],[[-1,13990],6],[[-1,13978],8],[[-1,13984],3],[[-1,14012],3],[[-1,14094],"\n"],[[-1,12543],"\n"],[[-1,9857],"For now, the"],[[-1,12542],3],[[-1,12539]," master branch of diamond "],[[-1,9840],"includes"],[[-1,9844],3],[[-1,12508],4],[[-1,12504]," "],[[-1,12331],"temporal deletes"],[[-1,12311],". "],[[-1,9832],"But "],[[-1,9827],"a"],[[-1,11429],1],[[-1,11428],"ll benchmarks in this blog post use "],[[-1,9825],"a"],[[-1,11372],3],[[-1,11369]," [yjs-style"],[[-1,11358],1],[[-1,11391],1],[[-1,11456],8],[[-1,11446],16],[[-1,11448],1],[[-1,12309],32],[[-1,12271],7],[[-1,12264]," "],[[-1,12277],"branch"],[[-1,11295]," of diamond-types"],[[-1,11355],"](https://github.com/josephg/diamond-types/tree/yjs-style)"],[[-1,11278],", "],[[-1,9823],"which "],[[-1,9702],"matches how"],[[-1,9817],6],[[-1,9790],4],[[-1,9811],12],[[-1,9799]," "],[[-1,9771],"Y"],[[-1,9798],1],[[-1,9793],"js"],[[-1,9691]," works"],[[-1,9786]," in"],[[-1,9777],"stead"],[[-1,9783],3],[[-1,9797],2],[[-1,11276],5],[[-1,11270],2],[[-1,12263],1],[[-1,11390],17],[[-1,12262],16],[[-1,11266],9],[[-1,12246],8],[[-1,11256],". This makes for"],[[-1,12238],9],[[-1,12229]," "],[[-1,12213],"a fair"],[[-1,11239],"er"],[[-1,12228],3],[[-1,12225]," comparison "],[[-1,12206],"with yjs"],[[-1,11236],", but"],[[-1,12198],5],[[-1,12193]," "],[[-1,9684],30],[[-1,9628],10],[[-1,9654],14],[[-1,9640],"diamond 1.0"],[[-1,9615]," might "],[[-1,9579],"have a "],[[-1,9564],"slightly different "],[[-1,9541],"performance profile"],[[-1,9545],2],[[-1,9572],4],[[-1,9589],9],[[-1,9608],3],[[-1,9595],5],[[-1,9605],9],[[-1,12183],3],[[-1,11230],6],[[-1,12180],21],[[-1,12185],1],[[-1,12192],7],[[-1,12159],7],[[-1,9769],16],[[-1,11221],44],[[-1,11177],"."],[[-1,9511]," "],[[-1,9506],"("],[[-1,9503],"There's plenty of puns here about diamond not being polished yet, but I'm not sharp enough "],[[-1,9387],"for those right now"],[[-1,9367],"."],[[-1,9368],")"],[[-1,9395],7],[[-1,9412],16],[[-1,9505],1],[[-1,9510],2],[[-1,9517],5],[[-1,9522],4],[[-1,9618],1],[[-1,11169],4],[[-1,11176],6],[[-1,12152],22],[[-1,12129],6],[[-1,12106],24],[[-1,12123],16],[[-1,12130],1],[[-1,12038],34],[[-1,12082],9],[[-1,12071],31],[[-1,12073],1],[[-1,12315],2],[[-1,12335],3],[[-1,12341],5],[[-1,12503],21],[[-1,12513],4],[[-1,12544],"\n"],[[-1,40216],"\n"],[[-1,144524],"\n"],[[-1,142731],"###"],[[-1,142580]," "],[[-1,8692],"These"],[[-1,40271],4],[[-1,40267]," "],[[-1,40253],"benchmarks"],[[-1,40242]," measure the wron"],[[-1,40223],"g thing"],[[-1,40225],1],[[-1,40266],12],[[-1,142579],18],[[-1,142551],22],[[-1,142529],"\n"],[[-1,141069],"\n"],[[-1,141068],25],[[-1,141043],"This post only measure"],[[-1,141019],"s the time "],[[-1,140943],11],[[-1,141008],"t"],[[-1,141003],"aken to repla"],[[-1,140988],"y "],[[-1,140982],"a local editing trace"],[[-1,40214],". And I'"],[[-1,40202],"m measuring"],[[-1,40206],2],[[-1,140931],5],[[-1,140926]," the resulting RAM usage"],[[-1,140961],"."],[[-1,40190]," A"],[[-1,140892],6],[[-1,140886],"rguably"],[[-1,140879],1],[[-1,140878]," "],[[-1,140876],"a"],[[-1,140960],12],[[-1,140944],1],[[-1,140902],6],[[-1,140948],2],[[-1,140986],3],[[-1,140990],1],[[-1,141007],2],[[-1,141021],1],[[-1,142528],7],[[-1,142504],11],[[-1,142521],9],[[-1,142492],1],[[-1,142491],"ccepting incoming changes from the user"],[[-1,142450]," only needs to happen fast "],[[-1,142415],"*"],[[-1,142423],"enough"],[[-1,142414],"*. Fingers simply don't type very fast"],[[-1,40184],". "],[[-1,40181],"O"],[[-1,142376],7],[[-1,142369],"nce a "],[[-1,142359],"CRDT "],[[-1,142348],"can handle any "],[[-1,142320],"local "],[[-1,142333],"user edit in "],[[-1,142314],"under "],[[-1,139765],"about "],[[-1,142308],"1ms, going faster probably doesn't matte"],[[-1,142266],"r"],[[-1,129392]," much"],[[-1,142265],"."],[[-1,40180]," (And automerge "],[[-1,40151],"usually perform"],[[-1,40130],"s that well"],[[-1,40117]," already"],[[-1,36592],", "],[[-1,36588],"barring some unlucky GC pauses"],[[-1,36590],1],[[-1,40118],"."],[[-1,40119],")"],[[-1,40136],3],[[-1,40164],12],[[-1,139755],"\n"],[[-1,139754],25],[[-1,139757],1],[[-1,139759],1],[[-1,142264],1],[[-1,142263],"\n"],[[-1,140867],"The *actually important*"],[[-1,140869],1],[[-1,142262],3],[[-1,141798],1],[[-1,140872],1],[[-1,140874],1],[[-1,141797],8],[[-1,142259],1],[[-1,142236],5],[[-1,142258],9],[[-1,140871],1],[[-1,142249]," metrics are:"],[[-1,142231],"\n\n"],[[-1,142229],6],[[-1,139201],2],[[-1,139195],7],[[-1,139199],2],[[-1,142223],26],[[-1,142177],9],[[-1,142197],16],[[-1,142178],"-"],[[-1,142168]," How"],[[-1,142162]," "],[[-1,142097],"many bytes "],[[-1,40108],"does "],[[-1,142086],"a document take"],[[-1,142071],1],[[-1,142070]," "],[[-1,139124],"on disk or"],[[-1,142046],3],[[-1,142033],13],[[-1,142020]," "],[[-1,142039],5],[[-1,142043],2],[[-1,142069],"over the "],[[-1,142053],"network"],[[-1,139188],"\n- How much time "],[[-1,40102],"does "],[[-1,139171],"the document take"],[[-1,139154],1],[[-1,139153]," to save and load"],[[-1,138984],"\n- "],[[-1,40095],"How much time it takes"],[[-1,138963],14],[[-1,138949]," to update a docu"],[[-1,138926],"ment"],[[-1,40071]," stored"],[[-1,138922]," at rest"],[[-1,138848]," (more below)"],[[-1,138851],2],[[-1,138914],42],[[-1,138866],14],[[-1,138872],3],[[-1,138932],3],[[-1,138979],15],[[-1,138981],1],[[-1,139136],10],[[-1,142019],"\n\n"],[[-1,141989],"The editing trace I'm using here also only has a single user making edits"],[[-1,141910],". There "],[[-1,141895],"could be pathological "],[[-1,141845],"performance "],[[-1,141873],"cases lurking in the shadows"],[[-1,141833]," when "],[[-1,141787],"users make "],[[-1,141827],"concurrent edits"],[[-1,141776],"."],[[-1,140843],"\n\nI did it this way "],[[-1,140809],"because"],[[-1,140523]," I "],[[-1,140499],"haven't implemented"],[[-1,140520],5],[[-1,140515]," "],[[-1,140514],5],[[-1,140509],"a binary"],[[-1,140480]," format in my reference-crdts "],[[-1,140443],"implementation "],[[-1,140450],"or"],[[-1,140428]," "],[[-1,9363],"di"],[[-1,9359],"amond yet"],[[-1,9361],1],[[-1,140427],2],[[-1,140448],5],[[-1,140425],5],[[-1,140420],"."],[[-1,140418]," "],[[-1,140372],"If I"],[[-1,140122],16],[[-1,140089]," did"],[[-1,140368],4],[[-1,140362],", "],[[-1,140092],"I'd"],[[-1,140102],8],[[-1,140360],3],[[-1,140357]," "],[[-1,140291],"probably "],[[-1,140356],"copy "],[[-1,21366],"Y"],[[-1,21363],"j"],[[-1,21361],"s"],[[-1,140351],3],[[-1,140348]," & automerge's binary formats"],[[-1,140082]," because"],[[-1,140073]," they're so"],[[-1,140319],19],[[-1,140300]," compact"],[[-1,140060],"."],[[-1,140292],1],[[-1,140282]," "],[[-1,140058],"S"],[[-1,140281],3],[[-1,140278],"o"],[[-1,140057]," I expect"],[[-1,140277]," "],[[-1,140048],"the resulting "],[[-1,49369],"binary "],[[-1,140276],"size would be "],[[-1,9348],"similar"],[[-1,140262],9],[[-1,140034]," between all of these implementations"],[[-1,9339],","],[[-1,9263]," "],[[-1,9232],"except for"],[[-1,9262],6],[[-1,9256]," "],[[-1,9253],"delete operations."],[[-1,9235],1],[[-1,9255],1],[[-1,9338]," "],[[-1,9205],"P"],[[-1,9207],1],[[-1,9221],7],[[-1,9329],4],[[-1,9337],4],[[-1,140253],7],[[-1,139997],16],[[-1,140246],6],[[-1,140364],1],[[-1,140417],8],[[-1,140389],5],[[-1,140384],"erformance "],[[-1,139979],"for loading and saving "],[[-1,9323],"will probably app"],[[-1,9304],"roximately"],[[-1,9306],1],[[-1,140409],8],[[-1,140401]," "],[[-1,49362],"mirror the benchmarks I showed above"],[[-1,49325],1],[[-1,140400],2],[[-1,139954],22],[[-1,140398],9],[[-1,140236],13],[[-1,140221],29],[[-1,140167],14],[[-1,140153],"."],[[-1,139924],23],[[-1,139899],8],[[-1,139865],37],[[-1,139822],18],[[-1,139828],3],[[-1,139870],4],[[-1,139891],20],[[-1,139901],1],[[-1,139932],7],[[-1,140149],4],[[-1,49323],17],[[-1,140145]," "],[[-1,9294],"Maybe."],[[-1,9287]," Or maybe I'm wrong."],[[-1,9288]," "],[[-1,140144],"I've been wrong before"],[[-1,9266],"."],[[-1,49305],1],[[-1,49304]," "],[[-1,9264],"I"],[[-1,49303],5],[[-1,49298],"t would be fun to find out"],[[-1,139803],".\n"],[[-1,139801],1],[[-1,139796],5],[[-1,139728],8],[[-1,49272],9],[[-1,139720],10],[[-1,49262],18],[[-1,139710],22],[[-1,49242],1],[[-1,139688],3],[[-1,139635],1],[[-1,139577],20],[[-1,139537],32],[[-1,139503],19],[[-1,139480],2],[[-1,139476],3],[[-1,139467],3],[[-1,139448],4],[[-1,139440],28],[[-1,139410],45],[[-1,49239],6],[[-1,49231],1],[[-1,49233],2],[[-1,139361],12],[[-1,36554],6],[[-1,139349],3],[[-1,139342],2],[[-1,139311],8],[[-1,139340],10],[[-1,36557],2],[[-1,139330],17],[[-1,139303],1],[[-1,139313],1],[[-1,139302],1],[[-1,36420],5],[[-1,36547],10],[[-1,36414],1],[[-1,36537],8],[[-1,139301],23],[[-1,139266],22],[[-1,139238],17],[[-1,139112],23],[[-1,49228],7],[[-1,139089],57],[[-1,139030],13],[[-1,36412],12],[[-1,139017],17],[[-1,138999],2],[[-1,139000],1],[[-1,36528],6],[[-1,36398],6],[[-1,36379],1],[[-1,36392],3],[[-1,36383],3],[[-1,36389],3],[[-1,36522],14],[[-1,36399],1],[[-1,36481],61],[[-1,36508],13],[[-1,36493],11],[[-1,36495],1],[[-1,138995],8],[[-1,139032],1],[[-1,139221],5],[[-1,139206],3],[[-1,139216],9],[[-1,139244],3],[[-1,139278],11],[[-1,139346],2],[[-1,139365],2],[[-1,139412],1],[[-1,139444],2],[[-1,139458],5],[[-1,139464],5],[[-1,139471],2],[[-1,139473],1],[[-1,139478],1],[[-1,139484],2],[[-1,139505],1],[[-1,139552],14],[[-1,139557],4],[[-1,139634],4],[[-1,139628],2],[[-1,139622],26],[[-1,139586],8],[[-1,139596],9],[[-1,139626],2],[[-1,139630],1],[[-1,139685],49],[[-1,139791],26],[[-1,139800],2],[[-1,140151],1],[[-1,138356],"\n---\n"],[[-1,36378],"\n"],[[-1,36264],"There's "],[[-1,30291],"one other"],[[-1,36256],1],[[-1,36255]," performance measure "],[[-1,30282],"I think "],[[-1,36234],"nobody is taking seriously enough at the moment. And that is,"],[[-1,36172]," "],[[-1,36377],22],[[-1,36343],61],[[-1,36278],7],[[-1,36267],2],[[-1,36271],2],[[-1,36282],2],[[-1,36355],2],[[-1,36349],5],[[-1,36353],2],[[-1,138834],4],[[-1,129387],6],[[-1,129380],4],[[-1,129372],16],[[-1,129376],2],[[-1,138830],10],[[-1,108248],2],[[-1,40063],15],[[-1,108246],38],[[-1,108208],"how we"],[[-1,138820],53],[[-1,129356],4],[[-1,138767]," upda"],[[-1,138754],"t"],[[-1,108199],"e"],[[-1,138753],3],[[-1,138750]," a document at rest"],[[-1,36171]," (in a database)"],[[-1,138731],"."],[[-1,129782]," Most applications aren"],[[-1,129757],"'t collaborative text ed"],[[-1,129729],"itors"],[[-1,129564],". "],[[-1,30273],"U"],[[-1,36155],4],[[-1,36150],1],[[-1,129347],1],[[-1,129346],"sually "],[[-1,129336],"applications "],[[-1,36149],"are actually intera"],[[-1,36128],"cting with"],[[-1,36118],1],[[-1,36130],1],[[-1,129323],4],[[-1,129339],2],[[-1,129562],2],[[-1,129554],6],[[-1,129520],10],[[-1,129548],9],[[-1,129539]," "],[[-1,129534],"databases full"],[[-1,129509]," of tiny objects"],[[-1,129318],". Each "],[[-1,129493],7],[[-1,129486],"of"],[[-1,129310]," those objects"],[[-1,129484],6],[[-1,129478]," is "],[[-1,129461],"very rarely written to"],[[-1,36091],"."],[[-1,108197],1],[[-1,36089],1],[[-1,108196],31],[[-1,108163],19],[[-1,108139],24],[[-1,108108],11],[[-1,108115],7],[[-1,108097],2],[[-1,36114],6],[[-1,36087],24],[[-1,36059],22],[[-1,36063],2],[[-1,36103],12],[[-1,36108],4],[[-1,108095],8],[[-1,108081],5],[[-1,108087],5],[[-1,108144],4],[[-1,108165],1],[[-1,129474],12],[[-1,129538],2],[[-1,129560],3],[[-1,129640],29],[[-1,129609],38],[[-1,129569],4],[[-1,129571],1],[[-1,129611],1],[[-1,129724],1],[[-1,129294],"\n\nIf you want to update a single object in "],[[-1,129243],"a "],[[-1,96412],"database using "],[[-1,21358],"Yjs"],[[-1,129241],4],[[-1,129235],5],[[-1,129237],1],[[-1,129251],1],[[-1,129246],1],[[-1,129250],2],[[-1,129428],1],[[-1,129431],1],[[-1,129433],1],[[-1,129438],2],[[-1,129720],6],[[-1,129708],42],[[-1,129660],18],[[-1,129666],5],[[-1,129714],5],[[-1,129722],1],[[-1,129733],2],[[-1,129759],1],[[-1,138730],12],[[-1,129951],11],[[-1,129938],12],[[-1,129940],1],[[-1,138718],1],[[-1,138712],5],[[-1,138717],4],[[-1,129925],1],[[-1,138713],1],[[-1,138707],10],[[-1,138695],10],[[-1,129923],39],[[-1,129880],11],[[-1,129785],2],[[-1,129868],9],[[-1,129859]," "],[[-1,129227],"or"],[[-1,129858],3],[[-1,129855]," automerge"],[[-1,96414],1],[[-1,129845]," today"],[[-1,129225],1],[[-1,129839]," you need to:"],[[-1,129884],2],[[-1,138685],8],[[-1,138655],2],[[-1,138677],20],[[-1,138650],23],[[-1,138625],18],[[-1,138585],12],[[-1,138569],16],[[-1,138545],5],[[-1,138540],"\n\n1. Load the "],[[-1,138454],"whole "],[[-1,138526],"docu"],[[-1,138516],"ment into RAM\n2. Make your change\n"],[[-1,138465],"3. Save the"],[[-1,138448]," whole document back to disk again\n"],[[-1,129826],"\nThis is going to be aw"],[[-1,129799],"fully slow"],[[-1,129427],"."],[[-1,129789],2],[[-1,129803],2],[[-1,138413],1],[[-1,132165],8],[[-1,132155],4],[[-1,132134],3],[[-1,132129],3],[[-1,132122],1],[[-1,132119],15],[[-1,132121],1],[[-1,132126],2],[[-1,132131],1],[[-1,132151],9],[[-1,132103],3],[[-1,132142],5],[[-1,132136],1],[[-1,132157],1],[[-1,138391],8],[[-1,138335],9],[[-1,138383],27],[[-1,138326],2],[[-1,138322],7],[[-1,138262],5],[[-1,138315],6],[[-1,138157],1],[[-1,138307],5],[[-1,138295],1],[[-1,138053],4],[[-1,132099],4],[[-1,138049],1],[[-1,132077],1],[[-1,138048],19],[[-1,138027],15],[[-1,137971],12],[[-1,137949],11],[[-1,132092],13],[[-1,137959],10],[[-1,137938],13],[[-1,138012],30],[[-1,137976],5],[[-1,132272]," Ther"],[[-1,132265],"e are "],[[-1,132257],"better ap"],[[-1,132240],"proaches"],[[-1,129425]," "],[[-1,30271],"for"],[[-1,129424],4],[[-1,129420]," this"],[[-1,132074]," -"],[[-1,132232],50],[[-1,132182]," but"],[[-1,132176]," "],[[-1,132174],"a"],[[-1,132248],4],[[-1,132259],1],[[-1,132267],1],[[-1,137924],3],[[-1,137921],"s far as I know, nobody is "],[[-1,129413],"working on"],[[-1,129403],1],[[-1,137894],14],[[-1,137880]," this "],[[-1,137874],8],[[-1,137866],"at "],[[-1,132173],"all"],[[-1,132070],". "],[[-1,132054],"We could use y"],[[-1,132036],"our "],[[-1,132031],"h"],[[-1,132040],2],[[-1,132068],1],[[-1,132067],"elp"],[[-1,132062],7],[[-1,132055],"!"],[[-1,108072],"\n\n> Edit: Kevin says "],[[-1,108040],"you can "],[[-1,108023],"adapt Yjs's providers to implement this in a reasonable way."],[[-1,107853]," I'd "],[[-1,107842],"love to see that in action."],[[-1,107848],3],[[-1,107887],32],[[-1,107963],1],[[-1,107954],64],[[-1,107956],1],[[-1,107962],1],[[-1,107959],2],[[-1,107961],1],[[-1,108032],8],[[-1,108051],10],[[-1,108076],2],[[-1,132064],1],[[-1,132170],4],[[-1,137863],11],[[-1,137852],"\n"],[[-1,137842],1],[[-1,137841],"\n---"],[[-1,137836],"\n"],[[-1,137851],"\n"],[[-1,30268],"There's another "],[[-1,30246],"ap"],[[-1,30240],"proach to making CRDTs fast, which"],[[-1,30178]," I haven't mentioned here at all and that"],[[-1,30206]," is "],[[-1,30137],"*"],[[-1,30202],"pruning"],[[-1,30136],"*"],[[-1,30195],"."],[[-1,30179]," "],[[-1,30135],"By "],[[-1,30130],"default, list "],[[-1,30132],1],[[-1,30194],14],[[-1,30244],2],[[-1,30252],3],[[-1,137845],3],[[-1,137835],17],[[-1,129400],3],[[-1,137818],13],[[-1,129397],5],[[-1,137805],2],[[-1,137803],"CRDTs like "],[[-1,30113],"these"],[[-1,30115],1],[[-1,137792],4],[[-1,137788]," "],[[-1,30108],"only ever "],[[-1,137787],"grow "],[[-1,137780],"over time (since we"],[[-1,30098]," "],[[-1,30095],"have to"],[[-1,30097],1],[[-1,137761]," keep tom"],[[-1,137750],"bstones "],[[-1,30087],"for"],[[-1,137742],4],[[-1,137738]," all deleted items)."],[[-1,30044]," "],[[-1,30031],"A lot of the performance and memory cost of CRDTs co"],[[-1,29975],"mes from "],[[-1,29959],"loading, "],[[-1,29966],"storing"],[[-1,29950]," and searching that growing data set."],[[-1,29979],2],[[-1,30043],11],[[-1,30084]," There are "],[[-1,29882],"some"],[[-1,30073],5],[[-1,30068]," ap"],[[-1,30063],"proaches which "],[[-1,29824],"solve this problem by finding ways to "],[[-1,29766],"shed"],[[-1,29770],2],[[-1,29785],7],[[-1,29778]," "],[[-1,29762],"some of "],[[-1,29777],"this"],[[-1,30048],4],[[-1,29913],5],[[-1,29908]," data"],[[-1,29772]," "],[[-1,29903],5],[[-1,29898],"entirely"],[[-1,29878],6],[[-1,29890],"."],[[-1,30065],1],[[-1,137718],1],[[-1,137550],12],[[-1,131863],9],[[-1,137538],5],[[-1,137475]," "],[[-1,29871],"For example, "],[[-1,29887],2],[[-1,137474],4],[[-1,137470],"Yjs's GC algorithm"],[[-1,137444],", or "],[[-1,29856],"["],[[-1,137424],2],[[-1,137439],"Antimatter"],[[-1,29855],"](https://braid.org/antimatter)"],[[-1,137429],1],[[-1,137427],"."],[[-1,29754]," That said,"],[[-1,131854],4],[[-1,131760],15],[[-1,131689],7],[[-1,131745],14],[[-1,131731]," git"],[[-1,29742]," "],[[-1,29727],"repositories "],[[-1,29691],"only "],[[-1,29672],"ever "],[[-1,29686],"grow over time"],[[-1,29666]," and"],[[-1,29714],6],[[-1,29702],10],[[-1,29708],3],[[-1,29741],13],[[-1,131727],5],[[-1,131682],2],[[-1,131680]," nobody seems "],[[-1,29564],"mind too much"],[[-1,131666],8],[[-1,29571],6],[[-1,131658],4],[[-1,29660],". "],[[-1,29643],"Maybe it doesn't matter so long as the underlying system is fast enough?"],[[-1,29658],5],[[-1,29647],3],[[-1,29653],3],[[-1,131654],44],[[-1,131850],12],[[-1,131836],3],[[-1,131832],31],[[-1,131833],1],[[-1,131801],1],[[-1,131721],31],[[-1,131800],"\n\n"],[[-1,131797],"But "],[[-1,29550],"pruning is"],[[-1,131793],4],[[-1,105732],1],[[-1,131789],1],[[-1,131788]," orthogonal"],[[-1,131775]," to everything"],[[-1,131777],1],[[-1,131838],1],[[-1,137452],4],[[-1,137533],2],[[-1,137425],1],[[-1,137531],3],[[-1,137492],1],[[-1,137486],6],[[-1,137388],45],[[-1,137343]," I've listed"],[[-1,137330]," "],[[-1,137390],1],[[-1,137480],5],[[-1,137491],4],[[-1,137528],8],[[-1,137419],3],[[-1,137520],18],[[-1,137415],19],[[-1,137396],"above"],[[-1,137495],"."],[[-1,29539]," "],[[-1,29336],"Any good"],[[-1,29538],1],[[-1,40048],4],[[-1,40044]," pruning system"],[[-1,29532]," should also"],[[-1,29327]," work with"],[[-1,29316]," all"],[[-1,29519],4],[[-1,29511],13],[[-1,29497],4],[[-1,29515],3],[[-1,40029],1],[[-1,29537],5],[[-1,40028],20],[[-1,40008]," of the algorithms I've "],[[-1,29312],"talk"],[[-1,29304],"ed about"],[[-1,29308],2],[[-1,39984],5],[[-1,39979]," here."],[[-1,29493],6],[[-1,29475],37],[[-1,29434],7],[[-1,29422],6],[[-1,29408],14],[[-1,29382],3],[[-1,29365],20],[[-1,29338],1],[[-1,29345],6],[[-1,29369],2],[[-1,29373],2],[[-1,29379],3],[[-1,29394],11],[[-1,29416],1],[[-1,29411],1],[[-1,29415],2],[[-1,29427],4],[[-1,29438],2],[[-1,29487],11],[[-1,130360],"\n"],[[-1,130224],"\n"],[[-1,130359],"\n###"],[[-1,130277],14],[[-1,130355]," "],[[-1,39972],"Each "],[[-1,36035],"step in this "],[[-1,36018],"journey"],[[-1,36022],3],[[-1,39963],11],[[-1,39952]," changes too many"],[[-1,39967],3],[[-1,130260],17],[[-1,130243]," variables"],[[-1,130233],9],[[-1,130350],10],[[-1,130336],23],[[-1,130311],16],[[-1,130291],12],[[-1,130279],"\n\n"],[[-1,130084],2],[[-1,29290],2],[[-1,29292],1],[[-1,130082],18],[[-1,130064],"Each "],[[-1,29287],"step in this optimization "],[[-1,29257],"j"],[[-1,29252],"ourney involves"],[[-1,29256],2],[[-1,29261],2],[[-1,130059],14],[[-1,130045]," changes"],[[-1,29237]," to"],[[-1,29234],1],[[-1,130037]," multiple variables"],[[-1,29217]," and I'm not isolating "],[[-1,29189],"those changes"],[[-1,29194],4],[[-1,130018],"."],[[-1,114717]," "],[[-1,29232],"For example, "],[[-1,29218],"m"],[[-1,114716],1],[[-1,114715],"oving from automerge to "],[[-1,114672],"my "],[[-1,114687],"reference-crdts"],[[-1,114668]," "],[[-1,36011],"implementation "],[[-1,114473],12],[[-1,114461],"change"],[[-1,35994],"d"],[[-1,114455],4],[[-1,114667],7],[[-1,114660],":\n\n- "],[[-1,114650],"The core data structure ("],[[-1,114612],"tree to list)\n- Removed immutablejs\n- Removed automerge's frontend / backend "],[[-1,112452],"protocol"],[[-1,112460],7],[[-1,114535],8],[[-1,114084],"."],[[-1,112444]," And"],[[-1,114083],4],[[-1,114079]," all "],[[-1,112438],"those"],[[-1,114074],3],[[-1,114071]," Uint8Arrays that "],[[-1,114044],"pop up throughout automerge"],[[-1,114011]," for whatever reason"],[[-1,112433]," are gone too, obviously"],[[-1,113991],"."],[[-1,114017],3],[[-1,114053],8],[[-1,114527],"\n- "],[[-1,113219],"T"],[[-1,113214],"he"],[[-1,113218],2],[[-1,113221],1],[[-1,114524],3],[[-1,114517],13],[[-1,114504]," javascript style"],[[-1,113211]," is totally different"],[[-1,113186],". (FP javascript -> imper"],[[-1,113154],"a"],[[-1,113161],1],[[-1,113160],"tive)"],[[-1,113190],2],[[-1,114210],"\n\n"],[[-1,114196],"We got 10x performance from "],[[-1,35991],"all "],[[-1,35977],"this"],[[-1,35987],3],[[-1,35979],1],[[-1,35984],4],[[-1,114168],11],[[-1,114157],". "],[[-1,114150],"But "],[[-1,29173],"I"],[[-1,9203],"'m "],[[-1,29172],5],[[-1,29167],"only"],[[-1,35972],4],[[-1,107814],6],[[-1,113989],1],[[-1,113151],7],[[-1,113144]," gues"],[[-1,35966],"s"],[[-1,9200],"ing"],[[-1,35965],3],[[-1,113139],4],[[-1,113988],20],[[-1,113968]," how"],[[-1,35961]," "],[[-1,113964],4],[[-1,113132],8],[[-1,113659],11],[[-1,113960],10],[[-1,113950],"that"],[[-1,107805]," 10x"],[[-1,113946]," speedup"],[[-1,35960]," should be distributed"],[[-1,113938]," amongst all"],[[-1,35937]," those changes"],[[-1,113926],1],[[-1,107801],3],[[-1,113925],4],[[-1,107796],11],[[-1,113921],7],[[-1,113648],14],[[-1,113914],"."],[[-1,113122],29],[[-1,112978],2],[[-1,113089],36],[[-1,113032],19],[[-1,113010],21],[[-1,113012],1],[[-1,113053],21],[[-1,113093],2],[[-1,114124],40],[[-1,114146],6],[[-1,114137],12],[[-1,114140],2],[[-1,114155],4],[[-1,114204],7],[[-1,114208],2],[[-1,114487],"\n\n"],[[-1,114412],"The "],[[-1,29158],"jump"],[[-1,114408],6],[[-1,114342],1],[[-1,114402]," from reference-crdts to "],[[-1,21354],"Yjs"],[[-1,114377],3],[[-1,114368],", and "],[[-1,114341],"from "],[[-1,21348],"Y"],[[-1,21346],"j"],[[-1,21344],"s"],[[-1,114362],3],[[-1,114359]," to "],[[-1,8543],"diamond"],[[-1,114355],12],[[-1,114343]," "],[[-1,114336],"are similarly "],[[-1,113911],"monol"],[[-1,113904],"ithic."],[[-1,113634]," "],[[-1,107785],"How much "],[[-1,107774],"of the speed difference "],[[-1,107743],"between "],[[-1,8535],"diamond"],[[-1,29154],8],[[-1,107735],2],[[-1,107750],6],[[-1,107776],1],[[-1,113633],6],[[-1,112968],3],[[-1,113627],4],[[-1,112965],5],[[-1,107732]," and "],[[-1,21350],"Y"],[[-1,21347],"j"],[[-1,21345],"s"],[[-1,107727],3],[[-1,107669]," has nothing to do with memory layout, and everything to do w"],[[-1,107602],"ith"],[[-1,39934]," LLVM"],[[-1,35923],"'s optimizer"],[[-1,39929],"?"],[[-1,107608],3],[[-1,107724],11],[[-1,107705],2],[[-1,107697],26],[[-1,107583],"\n"],[[-1,35770],"\nThe fact"],[[-1,35667]," that"],[[-1,35761]," automerge-rs isn't"],[[-1,35742],4],[[-1,35738]," faster than automerge gives me some confidence that"],[[-1,8528]," "],[[-1,8525],"diamond's performance"],[[-1,8504],2],[[-1,8527],1],[[-1,35686]," "],[[-1,8499],"isn't just thanks to"],[[-1,35685],2],[[-1,31089],1],[[-1,35683],10],[[-1,35673]," rust."],[[-1,35661]," But "],[[-1,35656],8],[[-1,35647],1],[[-1,107582],1],[[-1,107598],1],[[-1,107597],"I "],[[-1,29144],"ho"],[[-1,29136],"nestly "],[[-1,29142],3],[[-1,107595],"don't know"],[[-1,35642],"."],[[-1,107577],1],[[-1,35911],2],[[-1,35772],1],[[-1,35909],6],[[-1,35898],25],[[-1,35852],54],[[-1,35796],23],[[-1,35797],1],[[-1,35798],1],[[-1,35873],15],[[-1,35856],3],[[-1,35858],1],[[-1,35903],4],[[-1,39927],10],[[-1,49189],7],[[-1,49193],2],[[-1,49195],1],[[-1,49205],8],[[-1,49209],2],[[-1,49220],9],[[-1,107585],1],[[-1,107703],3],[[-1,107713],6],[[-1,113623],41],[[-1,113559],1],[[-1,112958],8],[[-1,112911],2],[[-1,112934],9],[[-1,112919],8],[[-1,112908],1],[[-1,112897],5],[[-1,112907],9],[[-1,112925],3],[[-1,112937],2],[[-1,112950],12],[[-1,113558],22],[[-1,113582],23],[[-1,113536],16],[[-1,112881],8],[[-1,112891],9],[[-1,113520],12],[[-1,113506],1],[[-1,113508],1],[[-1,113906],1],[[-1,114322],4],[[-1,114316],1],[[-1,114296],3],[[-1,114292],1],[[-1,114315],19],[[-1,114263],1],[[-1,114291],17],[[-1,114261],8],[[-1,114252],5],[[-1,114237],1],[[-1,114236],"\n\n"],[[-1,107580],"So"],[[-1,112409],3],[[-1,112406],", "],[[-1,112403],"y"],[[-1,112780],1],[[-1,112779],"es. This is a reasonable criticism of "],[[-1,29128],"my "],[[-1,112741],5],[[-1,112736],"approach. "],[[-1,112401],"I"],[[-1,112398],"f this"],[[-1,29125]," problem"],[[-1,112392]," bothers"],[[-1,112380]," you"],[[-1,112374],", I'd *love* "],[[-1,112357],"for someone to pull apart each of "],[[-1,29116],"the"],[[-1,112323],5],[[-1,112318]," "],[[-1,112304],"performance differences "],[[-1,112205],"between implementations I show here "],[[-1,112280],"and"],[[-1,112268]," "],[[-1,107575],"tease apart"],[[-1,112267],7],[[-1,112260]," a more detailed "],[[-1,29112],"brea"],[[-1,29106],"kdown"],[[-1,29108],1],[[-1,112243],5],[[-1,112238],". I'd read the heck out of that."],[[-1,107564]," I love ben"],[[-1,107549],"chmarking stories. That"],[[-1,105733],"'"],[[-1,107524],"s normal, right?"],[[-1,107526],1],[[-1,107553],2],[[-1,112169],6],[[-1,111190],2],[[-1,111178],7],[[-1,111157],12],[[-1,111171],13],[[-1,111188],5],[[-1,112163],1],[[-1,111101],12],[[-1,111085],13],[[-1,111089],4],[[-1,111064],1],[[-1,111072],7],[[-1,112096],21],[[-1,112140],17],[[-1,111144],6],[[-1,111136],34],[[-1,111138],1],[[-1,112123],27],[[-1,112074],11],[[-1,112050],28],[[-1,111538],1],[[-1,111526],22],[[-1,111537],10],[[-1,112022],35],[[-1,111751],19],[[-1,111987],72],[[-1,111503],11],[[-1,111490],11],[[-1,111455],1],[[-1,111448],4],[[-1,111454],5],[[-1,111479],23],[[-1,111444],5],[[-1,111456],1],[[-1,111194],1],[[-1,111492],1],[[-1,111731],2],[[-1,111915],163],[[-1,111729],17],[[-1,111439],1],[[-1,111712],28],[[-1,111436],10],[[-1,111684],32],[[-1,111648],31],[[-1,111600],62],[[-1,111370],75],[[-1,111206],11],[[-1,111287],19],[[-1,111256],5],[[-1,111243],17],[[-1,111224],15],[[-1,111226],1],[[-1,111251],4],[[-1,111268],11],[[-1,111295],4],[[-1,111426],24],[[-1,111380],4],[[-1,111375],5],[[-1,111376],1],[[-1,111402],22],[[-1,111617],1],[[-1,111612],10],[[-1,111616],3],[[-1,111652],2],[[-1,112063],7],[[-1,112054],1],[[-1,112056],1],[[-1,112162],21],[[-1,112277],8],[[-1,112317],12],[[-1,112361],3],[[-1,112376],1],[[-1,112384],2],[[-1,112400],1],[[-1,112726],265],[[-1,113480],258],[[-1,112871],1],[[-1,112857],31],[[-1,112795],14],[[-1,112826],30],[[-1,112870],12],[[-1,113504],1],[[-1,113897],7],[[-1,113502],1],[[-1,113890],2],[[-1,113500],1],[[-1,113888],18],[[-1,113864],24],[[-1,113836],40],[[-1,113795],7],[[-1,113780],3],[[-1,113788],8],[[-1,113777],14],[[-1,113760],13],[[-1,113741],35],[[-1,113665],5],[[-1,113706],41],[[-1,113747],3],[[-1,113763],2],[[-1,113796],1],[[-1,113499],18],[[-1,113840],2],[[-1,113870],3],[[-1,114234],24],[[-1,114247],9],[[-1,114274],11],[[-1,114318],1],[[-1,114374],3],[[-1,114421],8],[[-1,114423],1],[[-1,114478],5],[[-1,114450],26],[[-1,114485],6],[[-1,114521],2],[[-1,114625],8],[[-1,114655],4],[[-1,114691],2],[[-1,130017],66],[[-1,130223],58],[[-1,130163],19],[[-1,130142],57],[[-1,130144],1],[[-1,130165],1],[[-1,130295],2],[[-1,130313],1],[[-1,130340],2],[[-1,130354],2],[[-1,137502],5],[[-1,137658],27],[[-1,137629],14],[[-1,137613],62],[[-1,137615],1],[[-1,137631],1],[[-1,137669],10],[[-1,137692],22],[[-1,137694],1],[[-1,137710],15],[[-1,137717],6],[[-1,137752],1],[[-1,137782],1],[[-1,137850],4],[[-1,137978],1],[[-1,137982],2],[[-1,138029],1],[[-1,138062],8],[[-1,138294],11],[[-1,138282],7],[[-1,138081],17],[[-1,138089],6],[[-1,138256],4],[[-1,138172],13],[[-1,138156],48],[[-1,138091],1],[[-1,138108],16],[[-1,138252],20],[[-1,138215],43],[[-1,138219],2],[[-1,138221],1],[[-1,138223],1],[[-1,138232],8],[[-1,138271],7],[[-1,138275],2],[[-1,138302],6],[[-1,138309],1],[[-1,138324],1],[[-1,138407],15],[[-1,138412],4],[[-1,138482],11],[[-1,138467],1],[[-1,138471],2],[[-1,138522],3],[[-1,138549],2],[[-1,138553],2],[[-1,138573],3],[[-1,138607],21],[[-1,138627],1],[[-1,138697],1],[[-1,138762],4],[[-1,138835],"\n"],[[-1,140150],"\n"],[[-1,137329],"\n#"],[[-1,7165],"#"],[[-1,137327],2],[[-1,137325]," Appendi"],[[-1,137315],"x C: "],[[-1,114993],"I "],[[-1,29101],"still "],[[-1,114991],"don't get it - "],[[-1,114975],"w"],[[-1,115015],1],[[-1,115014],"hy is"],[[-1,129219],9],[[-1,129210]," automerge's javascript "],[[-1,115008],"so slow?"],[[-1,129186],15],[[-1,129222],2],[[-1,137310],17],[[-1,137162],1],[[-1,137293],2],[[-1,137160],15],[[-1,137291],16],[[-1,137317],1],[[-1,140192],21],[[-1,140223],1],[[-1,140240],3],[[-1,140419],1],[[-1,140781],2],[[-1,140548],3],[[-1,140535],8],[[-1,140545],5],[[-1,140779],3],[[-1,140744],4],[[-1,140739],1],[[-1,140776],18],[[-1,140737],10],[[-1,140677],5],[[-1,140727],15],[[-1,140707],30],[[-1,140672],2],[[-1,140667],35],[[-1,140628],63],[[-1,140561],13],[[-1,140565],2],[[-1,140632],2],[[-1,140670],2],[[-1,140712],4],[[-1,140758],14],[[-1,140802],19],[[-1,140823],13],[[-1,141811],13],[[-1,141902],6],[[-1,141916],3],[[-1,142003],13],[[-1,142013],9],[[-1,142017],2],[[-1,142060],1],[[-1,142057],3],[[-1,142059],1],[[-1,142161],8],[[-1,142151],3],[[-1,142141],23],[[-1,142116],18],[[-1,142118],1],[[-1,142148],6],[[-1,142153],1],[[-1,142164],1],[[-1,142181],2],[[-1,142268],1],[[-1,142354],5],[[-1,142363],2],[[-1,142417],1],[[-1,142452],1],[[-1,142507],3],[[-1,142512],4],[[-1,142561],9],[[-1,144518],3],[[-1,142733],1],[[-1,144523],4],[[-1,144620],1],[[-1,144630],5],[[-1,144638],2],[[-1,144673],6],[[-1,145466],1],[[-1,145589],3],[[-1,145595],5],[[-1,145688],10],[[-1,145698],2],[[-1,145809],8],[[-1,145873],4],[[-1,145878],4],[[-1,146524],9],[[-1,146465],5],[[-1,146456],20],[[-1,146460],2],[[-1,146515],1],[[-1,146526],1],[[-1,146631],20],[[-1,146685],1],[[-1,146707],9],[[-1,146719],6],[[-1,146750],3],[[-1,146774],1],[[-1,146849],6],[[-1,146915],24],[[-1,146919],2],[[-1,146975],2],[[-1,146967],3],[[-1,146973],5],[[-1,147016],1],[[-1,147039],7],[[-1,147045],3],[[-1,147063],6],[[-1,147094],1],[[-1,147098],1],[[-1,147188],3],[[-1,147228],1],[[-1,147247],1],[[-1,147280],7],[[-1,147329],5],[[-1,147334],2],[[-1,147872],4],[[-1,147888],15],[[-1,148040],1],[[-1,148104],41],[[-1,148039],5],[[-1,147868],7],[[-1,148034],19],[[-1,148013],2],[[-1,147861],6],[[-1,147852],4],[[-1,147855],1],[[-1,147962],1],[[-1,148011],25],[[-1,147961],10],[[-1,147949],1],[[-1,147951],1],[[-1,147986],2],[[-1,147848],2],[[-1,147844],2],[[-1,147835],1],[[-1,147842],6],[[-1,147827],32],[[-1,147734],6],[[-1,147726],6],[[-1,147728],1],[[-1,147795],23],[[-1,147761],4],[[-1,147772],10],[[-1,147719],22],[[-1,147689],1],[[-1,147686],18],[[-1,147688],1],[[-1,147697],7],[[-1,147833],3],[[-1,147846],1],[[-1,147984],16],[[-1,147929],12],[[-1,147947],8],[[-1,147933],3],[[-1,147939],3],[[-1,147968],5],[[-1,147757],7],[[-1,147746],5],[[-1,147739],4],[[-1,147668],12],[[-1,147741],1],[[-1,147750],2],[[-1,148015],1],[[-1,148063],8],[[-1,148053],3],[[-1,148048],4],[[-1,148050],1],[[-1,148055],1],[[-1,154160],2],[[-1,154195],1],[[-1,154242],35],[[-1,154520],44],[[-1,154472],4],[[-1,154466],9],[[-1,154453],9],[[-1,154457],4],[[-1,154443],24],[[-1,154468],1],[[-1,154476],2],[[-1,154522],1],[[-1,154526],2],[[-1,155116],1],[[-1,155253],5],[[-1,156183],17],[[-1,156799],32],[[-1,156765],9],[[-1,156752],6],[[-1,156756],2],[[-1,156767],1],[[-1,156838],18],[[-1,156745],17],[[-1,156820],1],[[-1,156874],10],[[-1,156862],11],[[-1,156845],4],[[-1,156728],2],[[-1,156503],3],[[-1,156498],10],[[-1,156500],1],[[-1,156690],2],[[-1,156684],35],[[-1,156688],2],[[-1,156726],9],[[-1,156716],26],[[-1,156649],11],[[-1,156632],1],[[-1,156488],14],[[-1,156631],26],[[-1,156471],9],[[-1,156605],11],[[-1,156461],6],[[-1,156594],6],[[-1,156455],4],[[-1,156588],20],[[-1,156566],10],[[-1,156447],18],[[-1,156425],15],[[-1,156429],2],[[-1,156449],2],[[-1,156553],1],[[-1,156545],3],[[-1,156538],1],[[-1,156542],2],[[-1,156552],7],[[-1,156537],5],[[-1,156526],22],[[-1,156532],3],[[-1,156556],1],[[-1,156568],1],[[-1,156636],4],[[-1,156638],1],[[-1,156817],1],[[-1,156808],7],[[-1,156841],2],[[-1,156851],3],[[-1,156864],1],[[-1,156930],21],[[-1,156908],33],[[-1,156909],1],[[-1,157027],28],[[-1,156936],6],[[-1,156999],56],[[-1,157144],10],[[-1,157123],18],[[-1,157060],2],[[-1,157056],11],[[-1,157058],1],[[-1,157105],19],[[-1,157045],17],[[-1,157067],6],[[-1,157086],15],[[-1,157134],9],[[-1,157284],2],[[-1,157336],12],[[-1,157361],1],[[-1,157358],2],[[-1,157360],1],[[-1,157376],1],[[-1,157425],15],[[-1,157848],105],[[-1,157677],14],[[-1,157628],8],[[-1,157611],19],[[-1,157620],8],[[-1,157663],2],[[-1,157653],5],[[-1,157661],4],[[-1,157647],12],[[-1,157634],1],[[-1,157635],1],[[-1,157630],1],[[-1,157592],17],[[-1,157633],1],[[-1,157657],4],[[-1,157743],50],[[-1,158166],4],[[-1,158153],26],[[-1,158088],15],[[-1,158127],10],[[-1,158073],56],[[-1,157898],7],[[-1,157887],38],[[-1,157891],2],[[-1,158017],13],[[-1,157903],4],[[-1,158004],3],[[-1,157995],10],[[-1,157965],26],[[-1,157936],4],[[-1,157939],1],[[-1,157985],20],[[-1,157932],2],[[-1,157918],14],[[-1,157930],6],[[-1,158001],3],[[-1,158111],22],[[-1,158117],3],[[-1,158162],8],[[-1,158185],6],[[-1,158188],1],[[-1,163427],2],[[-1,163494],1],[[-1,175384],13],[[-1,175385],1],[[-1,175395],1],[[-1,175403],2],[[-1,181827],26],[[-1,181883],13],[[-1,181866],2],[[-1,181870],2],[[-1,181929],1],[[-1,181955],2],[[-1,181949],1],[[-1,181953],1],[[-1,182013],14],[[-1,182053],26],[[-1,181998],1],[[-1,183099],33],[[-1,182157],1],[[-1,183066],63],[[-1,183121],4],[[-1,183144],1],[[-1,183161],2],[[-1,183182],3],[[-1,183243],30],[[-1,183723],84],[[-1,183586],1],[[-1,183609],10],[[-1,183584],1],[[-1,183575],7],[[-1,183583],4],[[-1,183599],12],[[-1,183567],38],[[-1,183524],10],[[-1,183470],51],[[-1,183514],9],[[-1,183503],25],[[-1,183474],3],[[-1,183478],2],[[-1,183505],1],[[-1,183529],4],[[-1,183639],29],[[-1,183853],10],[[-1,183891],1],[[-1,183907],11],[[-1,183914],6],[[-1,183933],2],[[-1,183989],7],[[-1,184008],13],[[-1,184041],1],[[-1,184068],16],[[-1,184080],8],[[-1,184133],9],[[-1,184153],14],[[-1,184172],1],[[-1,184187],10],[[-1,184196],2],[[-1,184264],2],[[-1,184385],18],[[-1,184398],1],[[-1,184523],23],[[-1,185293],52],[[-1,185657],8],[[-1,185630],146],[[-1,185479],31],[[-1,185446],6],[[-1,185438],3],[[-1,185440],1],[[-1,185448],1],[[-1,185484],4],[[-1,185649],18],[[-1,186303],2],[[-1,187356],17],[[-1,187332],18],[[-1,187290],36],[[-1,187234],38],[[-1,187194],4],[[-1,187040],5],[[-1,187033],2],[[-1,187035],1],[[-1,187190],14],[[-1,187172],7],[[-1,187013],19],[[-1,187165],2],[[-1,187030],15],[[-1,187163],15],[[-1,186993],5],[[-1,187148],14],[[-1,186981],40],[[-1,186940],3],[[-1,186906],1],[[-1,186923],17],[[-1,186905],48],[[-1,186937],12],[[-1,187134],21],[[-1,186988],6],[[-1,187176],2],[[-1,187196],1],[[-1,187254],5],[[-1,187245],10],[[-1,187249],2],[[-1,187314],23],[[-1,187339],6],[[-1,187392],13],[[-1,187358],1],[[-1,187407],14],[[-1,187415],3],[[-1,187438],2],[[-1,193084],28],[[-1,193216],77],[[-1,193136],1],[[-1,193139],2],[[-1,193224],7],[[-1,193283],2],[[-1,193291],5],[[-1,199687],1],[[-1,199686],"\n"],[[-1,137273],"\n"],[[-1,39913],"Because it"],[[-1,31088],"'"],[[-1,39903],"s "],[[-1,137272],9],[[-1,137241],1],[[-1,137234],2],[[-1,137172],1],[[-1,137169],6],[[-1,137171],1],[[-1,137232],1],[[-1,114999],5],[[-1,137219],"not"],[[-1,137216],5],[[-1,137211]," trying to be fast. "],[[-1,130496],"L"],[[-1,131610],6],[[-1,131603],1],[[-1,137191],1],[[-1,137190],"ook at "],[[-1,29093],1],[[-1,29095],1],[[-1,137183],"this code"],[[-1,29091]," [from automerge"],[[-1,29073],"](https://github.com/automerge/automerge/blob/d2e7ca2e141de0a72f540ddd738907bcde234183/backend/op_set.js#L649-L659)"],[[-1,29075],1],[[-1,137174],":\n"],[[-1,137231],11],[[-1,137240],3],[[-1,137263],10],[[-1,137247],5],[[-1,137253],3],[[-1,199685],3],[[-1,204071],1],[[-1,205727],16],[[-1,205732],1],[[-1,205740],4],[[-1,205748],5],[[-1,205783],6],[[-1,205789],1],[[-1,206038],1],[[-1,206036],5],[[-1,206037],1],[[-1,207587],1],[[-1,205692],23],[[-1,205694],1],[[-1,206805],13],[[-1,206356],5],[[-1,206345],4],[[-1,206347],1],[[-1,206351],2],[[-1,206792],23],[[-1,205667],1],[[-1,206769],1],[[-1,207586],12],[[-1,207527],20],[[-1,207505],40],[[-1,207045],6],[[-1,207033],3],[[-1,207039],3],[[-1,207465],2],[[-1,207463],"\n```javascript"],[[-1,206341],"\nfunction lamportCompare(op1, op2) {\n  return opIdCompare(op1.get('opId'), op2.get('opId'))\n}\n"],[[-1,207449],"\n"],[[-1,207446],"function insertionsAfter(opSet, objectId, parentId, childId) {\n  let childKey = null\n  if (childId) childKey = Map({opId: childId})\n\n  return opSet\n    .getIn(['byObject', objectId, '_following', parentId], List())\n    .filter(op => op.get('insert') && (!childKey || lamportCompare(op, childKey) < 0))\n    .sort(lamportCompare)\n    .reverse() // descending order\n    .map(op => op.get('opId'))\n}\n```"],[[-1,207030],"\n\nThis is called on each insert, to figure out how "],[[-1,206970],"the children o"],[[-1,206952],"f an item should be sorted."],[[-1,205664]," I don't know how hot it is, but"],[[-1,206768]," "],[[-1,205631],"t"],[[-1,206767],1],[[-1,206766],"here are "],[[-1,205666],"*"],[[-1,206757],"so many things"],[[-1,205665],"*"],[[-1,206743]," slow about this:\n\n-"],[[-1,206640]," I can spot "],[[-1,206625],"7"],[[-1,206627],1],[[-1,206644],2],[[-1,206723],11],[[-1,206702],1],[[-1,206700]," allocations in this function"],[[-1,206622],"."],[[-1,206573]," ("],[[-1,206543],1],[[-1,206571],"Though"],[[-1,206541]," the 2 closures"],[[-1,206565],2],[[-1,206563]," should be hoisted)."],[[-1,206621],40],[[-1,206624],1],[[-1,206671],1],[[-1,206670]," "],[[-1,206522],"("],[[-1,206580],1],[[-1,206662],1],[[-1,206669],"Can you"],[[-1,206661]," "],[[-1,206578],"find"],[[-1,206660],4],[[-1,206656]," them all?"],[[-1,206523],")"],[[-1,206409],7],[[-1,206395],1],[[-1,206402],7],[[-1,206394],10],[[-1,206371],7],[[-1,206362],3],[[-1,206364],1],[[-1,206384],13],[[-1,206521],"\n- The items are"],[[-1,206247]," already"],[[-1,206505]," "],[[-1,206504],8],[[-1,206496],"sorted"],[[-1,206238]," "],[[-1,206232],"reverse"],[[-1,206225],1],[[-1,206237],"-"],[[-1,206490],3],[[-1,206440],15],[[-1,206442],1],[[-1,206487],1],[[-1,206486],"lamportCompare"],[[-1,206234],2],[[-1,206236],1],[[-1,206471]," before this method is called"],[[-1,206425],". Sorting a"],[[-1,205624],"n anti-sorted list is "],[[-1,205597],"the slowest"],[[-1,205519]," way to"],[[-1,205586]," sort"],[[-1,205512]," anything"],[[-1,205581],". "],[[-1,205502],"Rather than sorting, then reverse()'ing, this "],[[-1,205446],"code should just invert the arguments"],[[-1,205354]," in"],[[-1,205409],3],[[-1,205406]," `lamportCompare`"],[[-1,205351],10],[[-1,205389]," (or negat"],[[-1,205375],"e the return value)."],[[-1,205339],"\n- "],[[-1,205209],"T"],[[-1,205288],3],[[-1,205284],1],[[-1,205336],1],[[-1,205335],"he goal is to insert "],[[-1,205207],"a "],[[-1,205314],4],[[-1,205310],"new item into "],[[-1,205234],"an already sorted"],[[-1,205296],3],[[-1,205293]," lis"],[[-1,205282],"t"],[[-1,205204],"."],[[-1,205281],1],[[-1,205280]," "],[[-1,205202],"Y"],[[-1,205279],1],[[-1,205278],"ou can do that "],[[-1,205247],"much faster "],[[-1,205263],"with a "],[[-1,205217],7],[[-1,205256],"for loop."],[[-1,205200],"\n- This code wrap"],[[-1,205177],"s childId "],[[-1,205161],"into a"],[[-1,205153],"n immutablejs Map, just so the argument matches "],[[-1,205090],"`"],[[-1,205105],"lamportCompare`"],[[-1,205089]," - which"],[[-1,205014]," then"],[[-1,205081]," "],[[-1,205074],"unwraps it again."],[[-1,205055]," "],[[-1,114950],"Stop - "],[[-1,114968],"I"],[[-1,114963],"'m dying"],[[-1,114951],"!"],[[-1,114955],1],[[-1,114967],2],[[-1,204994],6],[[-1,204987],4],[[-1,204981],1],[[-1,204976],"\n"],[[-1,137143],"\n"],[[-1,137140],"But"],[[-1,136908]," in practice"],[[-1,137137]," this code is "],[[-1,137123],4],[[-1,137119],"going to"],[[-1,137101]," be replaced"],[[-1,136912],2],[[-1,137089]," by"],[[-1,136896]," "],[[-1,136888],"WASM calls through to"],[[-1,136895],6],[[-1,137086]," [automerge-rs](https://github.com/automerge/automerge-rs)"],[[-1,137028],4],[[-1,137012],27],[[-1,136967],17],[[-1,136948],18],[[-1,136930],". Maybe it"],[[-1,114940]," already has been replaced with "],[[-1,114906],"automerge-rs"],[[-1,114893]," "],[[-1,114908],1],[[-1,136920],8],[[-1,136867],1],[[-1,136866],"by the time you're reading this!"],[[-1,114892]," So it"],[[-1,114882]," doesn'"],[[-1,114873],"t matter"],[[-1,114864],"."],[[-1,114862]," Try not to think about it."],[[-1,114783]," Definitely don't submit any PRs to fix all the low hanging fruit."],[[-1,114823],38],[[-1,114835]," *"],[[-1,114825],"t"],[[-1,114833],1],[[-1,114832],"witch"],[[-1,114824],"."],[[-1,114827],"*"],[[-1,114863],"\n"],[[-1,7938],"\n"],[[-1,7957],"\n"],[[-1,7164],"#"],[[-1,7956],"# Acknowledgements"],[[-1,8304],"\n"],[[-1,7936],"\n"],[[-1,7900],"This "],[[-1,7466],"post"],[[-1,7895],4],[[-1,7891]," "],[[-1,7798],"is part of the"],[[-1,7890],18],[[-1,7861],11],[[-1,7814],3],[[-1,7811]," "],[[-1,7850],"["],[[-1,7809],"B"],[[-1,7849],1],[[-1,7848],"raid"],[[-1,7808]," project"],[[-1,7844],"]("],[[-1,7833],"https://braid.org/)"],[[-1,7768]," and funded by the [Invisible College](https://invisible.college/)."],[[-1,7462]," "],[[-1,7449],"If this is the sort of work you want to contribute towards, "],[[-1,7383],"get in touch. "],[[-1,7368],"W"],[[-1,7387],2],[[-1,7388],1],[[-1,7461],1],[[-1,7460],"e're hiring"],[[-1,7367],"."],[[-1,7701],"\n\n"],[[-1,7365],"T"],[[-1,7627],5],[[-1,7621],1],[[-1,7699],1],[[-1,7698],"hankyou to everyone who gave feedback before t"],[[-1,7646],"his post went live"],[[-1,7619],"."],[[-1,447],1],[[-1,449],1],[[-1,7363],"\n\n"],[[-1,7618],1],[[-1,7617],"And "],[[-1,7584],"special "],[[-1,7565],"thanks to "],[[-1,7576],10],[[-1,7607],"Martin"],[[-1,7555]," "],[[-1,7552],"Kleppmann "],[[-1,7554],1],[[-1,7601],1],[[-1,7600],"and Kevin"],[[-1,7541]," Jahns for their work on Automerge and Yjs. "],[[-1,7279],"Diamond"],[[-1,7360],7],[[-1,7353]," "],[[-1,7287],"stands"],[[-1,7331],11],[[-1,7320]," on the shoulders of "],[[-1,7295],"giants."],[[-1,7281],"\n"],[[-1,419],"\n"],[[-1,323],1],[[-1,321],9],[[-1,311],1],[[-1,309],41],[[-1,267],1],[[-1,265],59],[[-1,205],1],[[-1,418],"["],[[-1,20],"Comments on "],[[-1,30],8],[[-1,34],1],[[-1,41],6],[[-1,43],1],[[-1,60],13],[[-1,33],3],[[-1,47],3],[[-1,70],9],[[-1,72],1],[[-1,200],6],[[-1,202],1],[[-1,333],9],[[-1,335],1],[[-1,417],6],[[-1,337],1],[[-1,411],1],[[-1,356],3],[[-1,410],4],[[-1,352],"Hacker News"],[[-1,406],2],[[-1,404],"](https://news.ycombinator.com/item?id=28017204)"],[[-1,76],"\n"],[[-1,86],"\n<footer>"],[[-1,88],"\n"],[[-1,130],"\n[2021 Seph Gentle](https://josephg.com/)"],[[-1,132],"\n"],[[-1,192],"\n[https://github.com/josephg/](https://github.com/josephg/)"],[[-1,194],1],[[-1,204],"\n"],[[-1,7299],2],[[-1,7352],3],[[-1,7345],13],[[-1,7347],1],[[-1,7349],1],[[-1,7488],5],[[-1,7475],6],[[-1,7483],7],[[-1,7497],8],[[-1,7591],5],[[-1,7613],5],[[-1,7628],1],[[-1,7648],1],[[-1,7652],2],[[-1,7774],3],[[-1,7784],5],[[-1,7840],6],[[-1,7842],1],[[-1,7872],10],[[-1,7935],1],[[-1,7932],6],[[-1,7922],21],[[-1,7926],2],[[-1,7934],1],[[-1,7937],1],[[-1,8303],4],[[-1,8257],9],[[-1,8299],1],[[-1,8220],13],[[-1,8298],1],[[-1,8186],1],[[-1,8076],5],[[-1,8089],11],[[-1,8185],45],[[-1,8229],3],[[-1,8235],3],[[-1,8281],1],[[-1,8206],8],[[-1,8139],1],[[-1,8136],9],[[-1,8138],1],[[-1,8198],12],[[-1,8127],8],[[-1,8225],4],[[-1,8297],13],[[-1,8280],2],[[-1,8118],27],[[-1,8278],21],[[-1,8284],1],[[-1,8248],"\n</f"],[[-1,8242],"ooter>"],[[-1,8244],1],[[-1,8283],1],[[-1,103492],547],[[-1,114875],1],[[-1,114886],2],[[-1,136834],5],[[-1,136818],32],[[-1,136782],11],[[-1,136757],20],[[-1,136729],1],[[-1,136737],5],[[-1,136764],6],[[-1,136771],6],[[-1,136786],2],[[-1,136829],10],[[-1,136950],1],[[-1,136985],16],[[-1,137024],1],[[-1,137019],3],[[-1,137023],2],[[-1,137111],5],[[-1,137142],1],[[-1,204946],1],[[-1,159183],512],[[-1,150910],234],[[-1,204975],4],[[-1,204969],2],[[-1,204963],17],[[-1,204673],4],[[-1,204632],38],[[-1,204592],5],[[-1,204546],10],[[-1,204587],11],[[-1,204572],9],[[-1,204536],5],[[-1,204563],9],[[-1,204531],11],[[-1,204514],8],[[-1,204492],86],[[-1,204505],12],[[-1,204518],2],[[-1,204520],1],[[-1,204554],4],[[-1,204576],2],[[-1,204594],1],[[-1,204669],8],[[-1,204682],9],[[-1,204660],27],[[-1,204732],45],[[-1,204685],2],[[-1,204687],1],[[-1,204918],20],[[-1,204894],24],[[-1,204898],2],[[-1,204945],26],[[-1,204967],3],[[-1,204971],1],[[-1,204980],2],[[-1,204983],1],[[-1,205008],14],[[-1,205054],16],[[-1,205027],9],[[-1,205038],11],[[-1,205057],1],[[-1,205080],5],[[-1,205155],1],[[-1,205167],5],[[-1,205183],3],[[-1,205289],1],[[-1,205379],2],[[-1,205456],7],[[-1,205557],37],[[-1,205579],21],[[-1,205602],4],[[-1,206414],5],[[-1,205630],4],[[-1,206646],1],[[-1,206712],9],[[-1,206956],2],[[-1,206979],7],[[-1,207448],1],[[-1,207507],1],[[-1,207560],32],[[-1,207574],13],[[-1,207682],8],[[-1,207672],1],[[-1,207663],12],[[-1,207647],7],[[-1,207651],2],[[-1,207671],4],[[-1,207674],1],[[-1,207758],1],[[-1,207762],1],[[-1,207914],10],[[-1,207963],3],[[-1,207951],13],[[-1,207936],8],[[-1,207938],1],[[-1,207960],8],[[-1,208046],36],[[-1,208081],27],[[-1,208216],1],[[-1,208210],16],[[-1,208192],19],[[-1,208194],1],[[-1,208214],2],[[-1,208287],2],[[-1,208356],12],[[-1,208416],4],[[-1,208465],2],[[-1,208567],5],[[-1,208616],1],[[-1,209752],2],[[-1,205017],3],[[-1,220445],1],[[-1,224509],462],[[-1,209766],1],[[-1,224047],182],[[-1,209765],1],[[-1,223865],25],[[-1,209764],1],[[-1,223840],460],[[-1,209763],1],[[-1,223380],459],[[-1,209762],1],[[-1,222921],29],[[-1,209761],1],[[-1,222892],180],[[-1,209760],1],[[-1,222712],38],[[-1,209759],1],[[-1,222674],161],[[-1,209758],1],[[-1,222513],56],[[-1,209757],1],[[-1,222457],51],[[-1,209756],1],[[-1,222406],1365],[[-1,163492],63],[[-1,221041],593]]]]